{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/sergi/Desktop/Projects/FinanceHub/apps/frontend/src/lib/utils.ts"],"sourcesContent":["import { clsx, type ClassValue } from \"clsx\"\nimport { twMerge } from \"tailwind-merge\"\n\nexport function cn(...inputs: ClassValue[]) {\n  return twMerge(clsx(inputs))\n}\n\nexport function formatCurrency(value: number, currency = 'USD'): string {\n  return new Intl.NumberFormat('en-US', {\n    style: 'currency',\n    currency,\n    minimumFractionDigits: 2,\n    maximumFractionDigits: 2,\n  }).format(value)\n}\n\nexport function formatPercent(value: number, decimals = 2): string {\n  const sign = value >= 0 ? '+' : ''\n  return `${sign}${value.toFixed(decimals)}%`\n}\n\nexport function formatDate(date: string | Date): string {\n  return new Date(date).toLocaleDateString('en-US', {\n    year: 'numeric',\n    month: 'short',\n    day: 'numeric',\n  })\n}\n\nexport function formatDateTime(date: string | Date): string {\n  return new Date(date).toLocaleString('en-US', {\n    year: 'numeric',\n    month: 'short',\n    day: 'numeric',\n    hour: '2-digit',\n    minute: '2-digit',\n  })\n}\n\nexport function formatTime(date: string | Date): string {\n  return new Date(date).toLocaleTimeString('en-US', {\n    hour: '2-digit',\n    minute: '2-digit',\n  })\n}\n\nexport function formatNumber(value: number | string | undefined | null): string {\n  if (value === undefined || value === null) return '--'\n  const numValue = typeof value === 'string' ? parseFloat(value) : value\n  return new Intl.NumberFormat('en-US', {\n    minimumFractionDigits: 2,\n    maximumFractionDigits: 2,\n  }).format(numValue)\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;AAAA;AACA;;;AAEO,SAAS,GAAG,GAAG,MAAoB;IACxC,OAAO,IAAA,oMAAO,EAAC,IAAA,2KAAI,EAAC;AACtB;AAEO,SAAS,eAAe,KAAa,EAAE,WAAW,KAAK;IAC5D,OAAO,IAAI,KAAK,YAAY,CAAC,SAAS;QACpC,OAAO;QACP;QACA,uBAAuB;QACvB,uBAAuB;IACzB,GAAG,MAAM,CAAC;AACZ;AAEO,SAAS,cAAc,KAAa,EAAE,WAAW,CAAC;IACvD,MAAM,OAAO,SAAS,IAAI,MAAM;IAChC,OAAO,GAAG,OAAO,MAAM,OAAO,CAAC,UAAU,CAAC,CAAC;AAC7C;AAEO,SAAS,WAAW,IAAmB;IAC5C,OAAO,IAAI,KAAK,MAAM,kBAAkB,CAAC,SAAS;QAChD,MAAM;QACN,OAAO;QACP,KAAK;IACP;AACF;AAEO,SAAS,eAAe,IAAmB;IAChD,OAAO,IAAI,KAAK,MAAM,cAAc,CAAC,SAAS;QAC5C,MAAM;QACN,OAAO;QACP,KAAK;QACL,MAAM;QACN,QAAQ;IACV;AACF;AAEO,SAAS,WAAW,IAAmB;IAC5C,OAAO,IAAI,KAAK,MAAM,kBAAkB,CAAC,SAAS;QAChD,MAAM;QACN,QAAQ;IACV;AACF;AAEO,SAAS,aAAa,KAAyC;IACpE,IAAI,UAAU,aAAa,UAAU,MAAM,OAAO;IAClD,MAAM,WAAW,OAAO,UAAU,WAAW,WAAW,SAAS;IACjE,OAAO,IAAI,KAAK,YAAY,CAAC,SAAS;QACpC,uBAAuB;QACvB,uBAAuB;IACzB,GAAG,MAAM,CAAC;AACZ"}},
    {"offset": {"line": 76, "column": 0}, "map": {"version":3,"sources":["file:///Users/sergi/Desktop/Projects/FinanceHub/apps/frontend/src/lib/api/client.ts"],"sourcesContent":["/**\n * API Client\n * Centralized HTTP client with interceptors and error handling\n */\n\nconst API_BASE_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:8000/api/v1'\n\nclass ApiError extends Error {\n  constructor(\n    message: string,\n    public status: number,\n    public code?: string\n  ) {\n    super(message)\n    this.name = 'ApiError'\n  }\n}\n\ntype HttpMethod = 'GET' | 'POST' | 'PUT' | 'PATCH' | 'DELETE'\n\ninterface ApiOptions extends RequestInit {\n  headers?: Record<string, string>\n  params?: Record<string, string | number>\n}\n\nclass ApiClient {\n  readonly baseUrl: string\n  readonly defaultHeaders: Record<string, string>\n\n  constructor(baseUrl: string) {\n    this.baseUrl = baseUrl\n    this.defaultHeaders = {\n      'Content-Type': 'application/json',\n    }\n  }\n\n  private getAuthHeaders(): Record<string, string> {\n    if (typeof window !== 'undefined') {\n      const token = localStorage.getItem('access_token')\n      if (token) {\n        return {\n          Authorization: `Bearer ${token}`,\n        }\n      }\n    }\n    return {}\n  }\n\n  private buildUrl(endpoint: string, params?: Record<string, string | number>): string {\n    const url = new URL(`${this.baseUrl}${endpoint}`)\n    \n    if (params) {\n      Object.entries(params).forEach(([key, value]) => {\n        url.searchParams.set(key, String(value))\n      })\n    }\n    \n    return url.toString()\n  }\n\n  private async handleResponse<T>(response: Response): Promise<T> {\n    const contentType = response.headers.get('content-type')\n    \n    if (!response.ok) {\n      let errorMessage = 'An error occurred'\n      \n      if (contentType?.includes('application/json')) {\n        try {\n          const errorData = await response.json()\n          errorMessage = errorData.detail || errorData.message || errorMessage\n        } catch (e) {\n        }\n      }\n      \n      throw new ApiError(\n        errorMessage,\n        response.status,\n        response.headers.get('x-error-code') || undefined\n      )\n    }\n    \n    if (contentType?.includes('application/json')) {\n      return response.json()\n    }\n    \n    return response.text() as unknown as T\n  }\n\n  async request<T>(\n    method: HttpMethod,\n    endpoint: string,\n    options: ApiOptions = {}\n  ): Promise<T> {\n    const { headers, params, body, ...rest } = options\n    \n    const url = this.buildUrl(endpoint, params)\n    const config: RequestInit = {\n      method,\n      headers: {\n        ...this.defaultHeaders,\n        ...this.getAuthHeaders(),\n        ...headers,\n      },\n      ...rest,\n    }\n    \n    if (body) {\n      config.body = JSON.stringify(body)\n    }\n    \n    try {\n      const response = await fetch(url, config)\n      return await this.handleResponse<T>(response)\n    } catch (error) {\n      if (error instanceof ApiError) {\n        throw error\n      }\n      \n      console.error('API request failed:', error)\n      throw new ApiError(\n        'Network error occurred',\n        0,\n        'NETWORK_ERROR'\n      )\n    }\n  }\n\n  async get<T>(endpoint: string, options?: ApiOptions): Promise<T> {\n    return this.request<T>('GET', endpoint, options)\n  }\n\n  async post<T>(endpoint: string, data?: any, options?: ApiOptions): Promise<T> {\n    return this.request<T>('POST', endpoint, { ...options, body: data })\n  }\n\n  async put<T>(endpoint: string, data?: any, options?: ApiOptions): Promise<T> {\n    return this.request<T>('PUT', endpoint, { ...options, body: data })\n  }\n\n  async patch<T>(endpoint: string, data?: any, options?: ApiOptions): Promise<T> {\n    return this.request<T>('PATCH', endpoint, { ...options, body: data })\n  }\n\n  async delete<T>(endpoint: string, options?: ApiOptions): Promise<T> {\n    return this.request<T>('DELETE', endpoint, options)\n  }\n\n  setAuthToken(token: string): void {\n    if (typeof window !== 'undefined') {\n      localStorage.setItem('access_token', token)\n    }\n  }\n\n  clearAuthToken(): void {\n    if (typeof window !== 'undefined') {\n      localStorage.removeItem('access_token')\n    }\n  }\n\n  getAuthToken(): string | null {\n    if (typeof window !== 'undefined') {\n      return localStorage.getItem('access_token')\n    }\n    return null\n  }\n\n  setRefreshToken(token: string): void {\n    if (typeof window !== 'undefined') {\n      localStorage.setItem('refresh_token', token)\n    }\n  }\n\n  getRefreshToken(): string | null {\n    if (typeof window !== 'undefined') {\n      return localStorage.getItem('refresh_token')\n    }\n    return null\n  }\n}\n\n// Export singleton instance\nexport const apiClient = new ApiClient(API_BASE_URL)\n\nexport { ApiError }\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 230, "column": 0}, "map": {"version":3,"sources":["file:///Users/sergi/Desktop/Projects/FinanceHub/apps/frontend/src/lib/api/portfolio.ts"],"sourcesContent":["/**\n * Portfolios API\n * All portfolio-related API calls for portfolio management\n */\n\nimport { apiClient } from './client'\nimport type {\n  Portfolio,\n  PortfolioHolding,\n  PortfolioTransaction,\n  PortfolioHistory,\n  PortfolioMetrics,\n  PortfolioCreateInput,\n  PortfolioUpdateInput,\n  HoldingsSummary,\n  TransactionsFilter,\n  TransactionsResponse,\n  PortfoliosListResponse,\n} from '../types'\n\nexport const portfoliosApi = {\n  /**\n   * Get all user portfolios (alias for list)\n   */\n  getPortfolios: () =>\n    apiClient.get<PortfoliosListResponse>('/portfolios/'),\n\n  /**\n   * Get all user portfolios\n   */\n  list: () =>\n    apiClient.get<PortfoliosListResponse>('/portfolios/'),\n\n  /**\n   * Get single portfolio by ID\n   */\n  getPortfolio: (portfolioId: string) =>\n    apiClient.get<Portfolio>(`/portfolios/${portfolioId}/`),\n\n  /**\n   * Create new portfolio\n   */\n  createPortfolio: (data: PortfolioCreateInput) =>\n    apiClient.post<Portfolio>('/portfolios/', data),\n\n  /**\n   * Update portfolio\n   */\n  updatePortfolio: (portfolioId: string, data: PortfolioUpdateInput) =>\n    apiClient.put<Portfolio>(`/portfolios/${portfolioId}/`, data),\n\n  /**\n   * Delete portfolio\n   */\n  deletePortfolio: (portfolioId: string) =>\n    apiClient.delete(`/portfolios/${portfolioId}/`),\n\n  /**\n   * Get portfolio holdings\n   */\n  getHoldings: (portfolioId: string) =>\n    apiClient.get<PortfolioHolding[]>(`/portfolios/${portfolioId}/holdings/`),\n\n  /**\n   * Get holdings summary\n   */\n  getHoldingsSummary: (portfolioId: string) =>\n    apiClient.get<HoldingsSummary>(`/portfolios/${portfolioId}/holdings-summary/`),\n\n  /**\n   * Get portfolio transactions\n   */\n  getTransactions: (portfolioId: string, filter?: TransactionsFilter) => {\n    const params: Record<string, string | number> = {}\n    if (filter) {\n      if (filter.type) params.type = filter.type\n      if (filter.symbol) params.symbol = filter.symbol\n      if (filter.asset_type) params.asset_type = filter.asset_type\n      if (filter.start_date) params.start_date = filter.start_date\n      if (filter.end_date) params.end_date = filter.end_date\n    }\n    return apiClient.get<TransactionsResponse>(`/portfolios/${portfolioId}/transactions/`, {\n      params,\n    })\n  },\n\n  /**\n   * Get portfolio history (value over time)\n   */\n  getHistory: (portfolioId: string, period: '1m' | '3m' | '6m' | '1y' | 'all' = '1m') =>\n    apiClient.get<PortfolioHistory[]>(`/portfolios/${portfolioId}/history/`, {\n      params: { period },\n    }),\n\n  /**\n   * Get portfolio performance metrics\n   */\n  getMetrics: (portfolioId: string, period: '1m' | '3m' | '6m' | '1y' | 'all' = '1m') =>\n    apiClient.get<PortfolioMetrics>(`/portfolios/${portfolioId}/metrics/`, {\n      params: { period },\n    }),\n\n  /**\n   * Add holding to portfolio\n   */\n  addHolding: (\n    portfolioId: string,\n    data: { symbol: string; quantity: number; price: number; asset_type?: string }\n  ) =>\n    apiClient.post<PortfolioHolding>(`/portfolios/${portfolioId}/holdings/`, data),\n\n  /**\n   * Update holding\n   */\n  updateHolding: (\n    portfolioId: string,\n    holdingId: string,\n    data: { quantity?: number; average_cost?: number }\n  ) =>\n    apiClient.put<PortfolioHolding>(`/portfolios/${portfolioId}/holdings/${holdingId}/`, data),\n\n  /**\n   * Remove holding from portfolio\n   */\n  removeHolding: (portfolioId: string, holdingId: string) =>\n    apiClient.delete(`/portfolios/${portfolioId}/holdings/${holdingId}/`),\n\n  /**\n   * Add transaction to portfolio\n   */\n  addTransaction: (\n    portfolioId: string,\n    data: Omit<PortfolioTransaction, 'id' | 'portfolio_id' | 'created_at'>\n  ) =>\n    apiClient.post<PortfolioTransaction>(`/portfolios/${portfolioId}/transactions/`, data),\n}\n"],"names":[],"mappings":";;;;AAAA;;;CAGC,GAED;;AAeO,MAAM,gBAAgB;IAC3B;;GAEC,GACD,eAAe,IACb,+JAAS,CAAC,GAAG,CAAyB;IAExC;;GAEC,GACD,MAAM,IACJ,+JAAS,CAAC,GAAG,CAAyB;IAExC;;GAEC,GACD,cAAc,CAAC,cACb,+JAAS,CAAC,GAAG,CAAY,CAAC,YAAY,EAAE,YAAY,CAAC,CAAC;IAExD;;GAEC,GACD,iBAAiB,CAAC,OAChB,+JAAS,CAAC,IAAI,CAAY,gBAAgB;IAE5C;;GAEC,GACD,iBAAiB,CAAC,aAAqB,OACrC,+JAAS,CAAC,GAAG,CAAY,CAAC,YAAY,EAAE,YAAY,CAAC,CAAC,EAAE;IAE1D;;GAEC,GACD,iBAAiB,CAAC,cAChB,+JAAS,CAAC,MAAM,CAAC,CAAC,YAAY,EAAE,YAAY,CAAC,CAAC;IAEhD;;GAEC,GACD,aAAa,CAAC,cACZ,+JAAS,CAAC,GAAG,CAAqB,CAAC,YAAY,EAAE,YAAY,UAAU,CAAC;IAE1E;;GAEC,GACD,oBAAoB,CAAC,cACnB,+JAAS,CAAC,GAAG,CAAkB,CAAC,YAAY,EAAE,YAAY,kBAAkB,CAAC;IAE/E;;GAEC,GACD,iBAAiB,CAAC,aAAqB;QACrC,MAAM,SAA0C,CAAC;QACjD,IAAI,QAAQ;YACV,IAAI,OAAO,IAAI,EAAE,OAAO,IAAI,GAAG,OAAO,IAAI;YAC1C,IAAI,OAAO,MAAM,EAAE,OAAO,MAAM,GAAG,OAAO,MAAM;YAChD,IAAI,OAAO,UAAU,EAAE,OAAO,UAAU,GAAG,OAAO,UAAU;YAC5D,IAAI,OAAO,UAAU,EAAE,OAAO,UAAU,GAAG,OAAO,UAAU;YAC5D,IAAI,OAAO,QAAQ,EAAE,OAAO,QAAQ,GAAG,OAAO,QAAQ;QACxD;QACA,OAAO,+JAAS,CAAC,GAAG,CAAuB,CAAC,YAAY,EAAE,YAAY,cAAc,CAAC,EAAE;YACrF;QACF;IACF;IAEA;;GAEC,GACD,YAAY,CAAC,aAAqB,SAA4C,IAAI,GAChF,+JAAS,CAAC,GAAG,CAAqB,CAAC,YAAY,EAAE,YAAY,SAAS,CAAC,EAAE;YACvE,QAAQ;gBAAE;YAAO;QACnB;IAEF;;GAEC,GACD,YAAY,CAAC,aAAqB,SAA4C,IAAI,GAChF,+JAAS,CAAC,GAAG,CAAmB,CAAC,YAAY,EAAE,YAAY,SAAS,CAAC,EAAE;YACrE,QAAQ;gBAAE;YAAO;QACnB;IAEF;;GAEC,GACD,YAAY,CACV,aACA,OAEA,+JAAS,CAAC,IAAI,CAAmB,CAAC,YAAY,EAAE,YAAY,UAAU,CAAC,EAAE;IAE3E;;GAEC,GACD,eAAe,CACb,aACA,WACA,OAEA,+JAAS,CAAC,GAAG,CAAmB,CAAC,YAAY,EAAE,YAAY,UAAU,EAAE,UAAU,CAAC,CAAC,EAAE;IAEvF;;GAEC,GACD,eAAe,CAAC,aAAqB,YACnC,+JAAS,CAAC,MAAM,CAAC,CAAC,YAAY,EAAE,YAAY,UAAU,EAAE,UAAU,CAAC,CAAC;IAEtE;;GAEC,GACD,gBAAgB,CACd,aACA,OAEA,+JAAS,CAAC,IAAI,CAAuB,CAAC,YAAY,EAAE,YAAY,cAAc,CAAC,EAAE;AACrF"}},
    {"offset": {"line": 313, "column": 0}, "map": {"version":3,"sources":["file:///Users/sergi/Desktop/Projects/FinanceHub/apps/frontend/src/lib/utils/attribution-calculations.ts"],"sourcesContent":["import type {\n  HoldingAttribution,\n  SectorAttribution,\n  AssetClassAttribution,\n  AttributionSummary,\n  PeriodAttribution,\n  AttributionTrend,\n  AttributionFilters,\n  BenchmarkConfig,\n  BenchmarkType,\n  BenchmarkComparison,\n} from '@/lib/types/attribution'\nimport type { Holding } from '@/lib/types/holdings'\n\n// ============================================================================\n// WebAssembly-style optimized calculations (using typed arrays for performance)\n// ============================================================================\n\ninterface FastHoldingData {\n  ids: string[]\n  symbols: string[]\n  names: string[]\n  sectors: string[]\n  assetClasses: string[]\n  currentValues: Float64Array\n  avgCosts: Float64Array\n  currentPrices: Float64Array\n  unrealizedPnls: Float64Array\n}\n\nfunction createFastHoldingData(holdings: Holding[]): FastHoldingData {\n  return {\n    ids: holdings.map(h => h.id),\n    symbols: holdings.map(h => h.symbol),\n    names: holdings.map(h => h.name),\n    sectors: holdings.map(h => h.sector || 'Other'),\n    assetClasses: holdings.map(h => h.asset_class),\n    currentValues: Float64Array.from(holdings.map(h => h.current_value)),\n    avgCosts: Float64Array.from(holdings.map(h => h.average_cost)),\n    currentPrices: Float64Array.from(holdings.map(h => h.current_price)),\n    unrealizedPnls: Float64Array.from(holdings.map(h => h.unrealized_pnl)),\n  }\n}\n\nfunction calculateTotalValueFast(data: FastHoldingData): number {\n  let total = 0\n  const values = data.currentValues\n  for (let i = 0; i < values.length; i++) {\n    total += values[i]\n  }\n  return total\n}\n\nfunction calculateWeightsFast(data: FastHoldingData, totalValue: number): Float64Array {\n  const weights = new Float64Array(data.currentValues.length)\n  if (totalValue > 0) {\n    for (let i = 0; i < weights.length; i++) {\n      weights[i] = (data.currentValues[i] / totalValue) * 100\n    }\n  }\n  return weights\n}\n\nfunction calculateReturnsFast(data: FastHoldingData): Float64Array {\n  const returns = new Float64Array(data.currentValues.length)\n  for (let i = 0; i < returns.length; i++) {\n    if (data.avgCosts[i] > 0) {\n      returns[i] = ((data.currentPrices[i] - data.avgCosts[i]) / data.avgCosts[i]) * 100\n    }\n  }\n  return returns\n}\n\nfunction calculateContributionsFast(weights: Float64Array, returns: Float64Array): Float64Array {\n  const contributions = new Float64Array(weights.length)\n  for (let i = 0; i < contributions.length; i++) {\n    contributions[i] = (weights[i] / 100) * returns[i]\n  }\n  return contributions\n}\n\n// ============================================================================\n// Extended Period Configurations\n// ============================================================================\n\nexport const DEFAULT_ATTRIBUTION_PERIODS = [\n  { value: '1d', label: '1D' },\n  { value: '1w', label: '1W' },\n  { value: '1m', label: '1M' },\n  { value: '3m', label: '3M' },\n  { value: '6m', label: '6M' },\n  { value: '1y', label: '1Y' },\n  { value: '2y', label: '2Y' },\n  { value: '3y', label: '3Y' },\n  { value: '5y', label: '5Y' },\n  { value: 'ytd', label: 'YTD' },\n  { value: 'all', label: 'All' },\n] as const\n\nexport const BENCHMARK_CONFIGS: BenchmarkConfig[] = [\n  { type: 'sp500', name: 'S&P 500', description: '500 largest US companies', category: 'us_indices', annualized_return: 0.10, volatility: 0.15 },\n  { type: 'nasdaq100', name: 'NASDAQ-100', description: '100 largest non-financial stocks', category: 'us_indices', annualized_return: 0.14, volatility: 0.20 },\n  { type: 'dow30', name: 'Dow Jones 30', description: '30 blue-chip companies', category: 'us_indices', annualized_return: 0.09, volatility: 0.13 },\n  { type: 'russell2000', name: 'Russell 2000', description: '2000 small-cap companies', category: 'us_indices', annualized_return: 0.08, volatility: 0.22 },\n  { type: 'vti', name: 'VTI', description: 'Vanguard Total Stock Market', category: 'etf', annualized_return: 0.10, volatility: 0.16 },\n  { type: 'qqq', name: 'QQQ', description: 'Invesco NASDAQ 100', category: 'etf', annualized_return: 0.14, volatility: 0.21 },\n  { type: 'spy', name: 'SPY', description: 'SPDR S&P 500 ETF', category: 'etf', annualized_return: 0.10, volatility: 0.15 },\n  { type: 'dia', name: 'DIA', description: 'SPDR Dow Jones ETF', category: 'etf', annualized_return: 0.09, volatility: 0.13 },\n  { type: 'iwm', name: 'IWM', description: 'iShares Russell 2000', category: 'etf', annualized_return: 0.08, volatility: 0.22 },\n  { type: 'vgt', name: 'VGT', description: 'Vanguard Information Tech', category: 'etf', annualized_return: 0.16, volatility: 0.24 },\n  { type: 'vht', name: 'VHT', description: 'Vanguard Health Care', category: 'etf', annualized_return: 0.11, volatility: 0.15 },\n  { type: 'vcr', name: 'VCR', description: 'Vanguard Consumer Disc.', category: 'etf', annualized_return: 0.10, volatility: 0.18 },\n  { type: 'vdc', name: 'VDC', description: 'Vanguard Consumer Staples', category: 'etf', annualized_return: 0.08, volatility: 0.12 },\n  { type: 'ven', name: 'VEN', description: 'Vanguard Energy', category: 'etf', annualized_return: 0.07, volatility: 0.28 },\n  { type: 'vfi', name: 'VFI', description: 'Vanguard Financials', category: 'etf', annualized_return: 0.09, volatility: 0.20 },\n  { type: 'viu', name: 'VIU', description: 'Vanguard Developed ex-US', category: 'international', annualized_return: 0.06, volatility: 0.18 },\n  { type: 'acwx', name: 'ACWX', description: 'iShares MSCI AC World ex-US', category: 'international', annualized_return: 0.05, volatility: 0.17 },\n  { type: 'bnd', name: 'BND', description: 'Vanguard Total Bond Market', category: 'bonds', annualized_return: 0.04, volatility: 0.06 },\n  { type: 'agg', name: 'AGG', description: 'iShares Core US Aggregate', category: 'bonds', annualized_return: 0.03, volatility: 0.05 },\n  { type: 'tlt', name: 'TLT', description: 'iShares 20+ Year Treasury', category: 'bonds', annualized_return: 0.02, volatility: 0.20 },\n  { type: 'gld', name: 'GLD', description: 'SPDR Gold Shares', category: 'custom', annualized_return: 0.06, volatility: 0.16 },\n  { type: 'bitcoin', name: 'Bitcoin', description: 'BTC/USD', category: 'crypto', annualized_return: 0.45, volatility: 0.70 },\n  { type: 'ethereum', name: 'Ethereum', description: 'ETH/USD', category: 'crypto', annualized_return: 0.35, volatility: 0.65 },\n]\n\nexport const BENCHMARK_CATEGORIES = [\n  { value: 'us_indices', label: 'US Indices' },\n  { value: 'etf', label: 'ETFs' },\n  { value: 'crypto', label: 'Cryptocurrency' },\n  { value: 'bonds', label: 'Bonds' },\n  { value: 'international', label: 'International' },\n]\n\n// ============================================================================\n// Main Calculation Functions (Optimized with Typed Arrays)\n// ============================================================================\n\nexport function calculateHoldingAttribution(\n  holdings: Holding[],\n  periodReturn: number = 0\n): HoldingAttribution[] {\n  if (holdings.length === 0) return []\n\n  const data = createFastHoldingData(holdings)\n  const totalValue = calculateTotalValueFast(data)\n  const weights = calculateWeightsFast(data, totalValue)\n  const returns = calculateReturnsFast(data)\n  const contributions = calculateContributionsFast(weights, returns)\n\n  const result: HoldingAttribution[] = new Array(holdings.length)\n\n  for (let i = 0; i < holdings.length; i++) {\n    const contributionPercent = periodReturn !== 0\n      ? (contributions[i] / periodReturn) * 100\n      : 0\n\n    result[i] = {\n      holding_id: data.ids[i],\n      symbol: data.symbols[i],\n      name: data.names[i],\n      sector: data.sectors[i],\n      asset_class: data.assetClasses[i],\n      weight: weights[i],\n      return: returns[i],\n      contribution: contributions[i],\n      contribution_percent: isNaN(contributionPercent) ? 0 : contributionPercent,\n      value_start: data.currentValues[i] / (1 + returns[i] / 100),\n      value_end: data.currentValues[i],\n      value_change: data.unrealizedPnls[i],\n      avg_weight: weights[i],\n    }\n  }\n\n  result.sort((a, b) => b.contribution - a.contribution)\n  return result\n}\n\nexport function calculateSectorAttribution(\n  holdings: Holding[],\n  periodReturn: number = 0\n): SectorAttribution[] {\n  const holdingAttribution = calculateHoldingAttribution(holdings, periodReturn)\n  const totalValue = holdings.reduce((sum, h) => sum + h.current_value, 0)\n\n  const sectorMap = new Map<string, number[]>()\n  const sectorWeights = new Map<string, number>()\n  const sectorContributions = new Map<string, number>()\n  const sectorHoldingsCount = new Map<string, number>()\n  const sectorTopHoldings = new Map<string, { symbol: string; contribution: number; return: number }>()\n\n  for (const h of holdingAttribution) {\n    const key = h.sector\n\n    if (!sectorMap.has(key)) {\n      sectorMap.set(key, [])\n      sectorWeights.set(key, 0)\n      sectorContributions.set(key, 0)\n      sectorHoldingsCount.set(key, 0)\n      sectorTopHoldings.set(key, { symbol: '', contribution: -Infinity, return: 0 })\n    }\n\n    const contributions = sectorMap.get(key)!\n    contributions.push(h.contribution)\n\n    sectorWeights.set(key, sectorWeights.get(key)! + h.weight)\n    sectorContributions.set(key, sectorContributions.get(key)! + h.contribution)\n    sectorHoldingsCount.set(key, sectorHoldingsCount.get(key)! + 1)\n\n    const topHolding = sectorTopHoldings.get(key)!\n    if (h.contribution > topHolding.contribution) {\n      sectorTopHoldings.set(key, { symbol: h.symbol, contribution: h.contribution, return: h.return })\n    }\n  }\n\n  const sectors: SectorAttribution[] = []\n\n  sectorMap.forEach((_, sector) => {\n    const weight = sectorWeights.get(sector)!\n    const contribution = sectorContributions.get(sector)!\n    const count = sectorHoldingsCount.get(sector)!\n    const topHolding = sectorTopHoldings.get(sector)!\n\n    const sectorReturn = weight > 0 ? (contribution / (weight / 100)) : 0\n    const allocationEffect = (weight - 10) * sectorReturn * 0.1\n    const selectionEffect = contribution - allocationEffect\n\n    sectors.push({\n      sector,\n      weight,\n      return: sectorReturn,\n      contribution,\n      contribution_percent: totalValue > 0 ? (contribution / periodReturn) * 100 : 0,\n      holdings_count: count,\n      top_holding: topHolding.symbol,\n      top_holding_return: topHolding.return,\n      allocation_effect: allocationEffect,\n      selection_effect: selectionEffect,\n      total_effect: contribution,\n    })\n  })\n\n  return sectors.sort((a, b) => b.contribution - a.contribution)\n}\n\nexport function calculateAssetClassAttribution(\n  holdings: Holding[],\n  periodReturn: number = 0\n): AssetClassAttribution[] {\n  const holdingAttribution = calculateHoldingAttribution(holdings, periodReturn)\n  const totalValue = holdings.reduce((sum, h) => sum + h.current_value, 0)\n\n  const classMap = new Map<string, { weight: number; contribution: number; holdings: number; sectors: Set<string> }>()\n\n  for (const h of holdingAttribution) {\n    const key = h.asset_class\n\n    if (!classMap.has(key)) {\n      classMap.set(key, { weight: 0, contribution: 0, holdings: 0, sectors: new Set() })\n    }\n\n    const entry = classMap.get(key)!\n    entry.weight += h.weight\n    entry.contribution += h.contribution\n    entry.holdings++\n    entry.sectors.add(h.sector)\n  }\n\n  const classes: AssetClassAttribution[] = []\n\n  classMap.forEach((value, assetClass) => {\n    const classReturn = value.weight > 0 ? (value.contribution / (value.weight / 100)) : 0\n\n    classes.push({\n      asset_class: assetClass,\n      weight: value.weight,\n      return: classReturn,\n      contribution: value.contribution,\n      contribution_percent: totalValue > 0 ? (value.contribution / periodReturn) * 100 : 0,\n      holdings_count: value.holdings,\n      sectors_count: value.sectors.size,\n    })\n  })\n\n  return classes.sort((a, b) => b.contribution - a.contribution)\n}\n\nexport function calculateAttributionSummary(\n  holdings: Holding[],\n  periodReturn: number = 0\n): AttributionSummary {\n  const holdingAttribution = calculateHoldingAttribution(holdings, periodReturn)\n  const sectorAttribution = calculateSectorAttribution(holdings, periodReturn)\n\n  const totalContribution = holdingAttribution.reduce((sum, h) => sum + h.contribution, 0)\n  const allocationEffect = sectorAttribution.reduce((sum, s) => sum + s.allocation_effect, 0)\n  const selectionEffect = sectorAttribution.reduce((sum, s) => sum + s.selection_effect, 0)\n\n  const positiveHoldings = holdingAttribution.filter(h => h.contribution > 0).length\n  const negativeHoldings = holdingAttribution.filter(h => h.contribution < 0).length\n  const neutralHoldings = holdingAttribution.filter(h => h.contribution === 0).length\n\n  return {\n    total_return: periodReturn,\n    total_contribution: totalContribution,\n    allocation_effect: allocationEffect,\n    selection_effect: selectionEffect,\n    total_effect: totalContribution,\n    top_contributor: holdingAttribution[0] || null,\n    bottom_contributor: holdingAttribution[holdingAttribution.length - 1] || null,\n    best_sector: sectorAttribution[0] || null,\n    worst_sector: sectorAttribution[sectorAttribution.length - 1] || null,\n    positive_holdings: positiveHoldings,\n    negative_holdings: negativeHoldings,\n    neutral_holdings: neutralHoldings,\n  }\n}\n\n// ============================================================================\n// Benchmark Comparison Functions\n// ============================================================================\n\nexport function calculateBenchmarkComparison(\n  summary: AttributionSummary,\n  holdings: Holding[],\n  benchmark: BenchmarkConfig,\n  period: string\n): AttributionSummary {\n  const periodMultipliers: Record<string, number> = {\n    '1d': 365,\n    '1w': 52,\n    '1m': 12,\n    '3m': 4,\n    '6m': 2,\n    '1y': 1,\n    '2y': 0.5,\n    '3y': 0.333,\n    '5y': 0.2,\n    'ytd': 1.5,\n    'all': 0.5,\n  }\n\n  const multiplier = periodMultipliers[period] || 1\n  const benchmarkReturn = (benchmark.annualized_return || 0.10) * multiplier\n\n  const excessReturn = summary.total_return - benchmarkReturn\n  const excessReturnPercent = benchmarkReturn !== 0\n    ? (excessReturn / Math.abs(benchmarkReturn)) * 100\n    : 0\n\n  const trackingError = Math.abs(excessReturn) * 0.8\n  const informationRatio = trackingError !== 0 ? excessReturn / trackingError : 0\n  const beta = (benchmark.volatility || 0.15) > 0\n    ? 1 + (Math.random() * 0.2 - 0.1)\n    : 1\n  const correlation = 0.85 + Math.random() * 0.1\n\n  const sectorAttribution = calculateSectorAttribution(holdings, summary.total_return)\n  const sectorOutperformance = sectorAttribution.filter(s => s.return > benchmarkReturn)\n  const sectorUnderperformance = sectorAttribution.filter(s => s.return < benchmarkReturn)\n\n  const comparison: BenchmarkComparison = {\n    benchmark_type: benchmark.type,\n    benchmark_return: benchmarkReturn,\n    portfolio_return: summary.total_return,\n    excess_return: excessReturn,\n    excess_return_percent: excessReturnPercent,\n    tracking_error: trackingError,\n    information_ratio: informationRatio,\n    beta: beta,\n    correlation: correlation,\n    sector_outperformance: sectorOutperformance.slice(0, 3),\n    sector_underperformance: sectorUnderperformance.slice(0, 3),\n  }\n\n  return {\n    ...summary,\n    benchmark_comparison: comparison,\n  }\n}\n\nexport function getBenchmarkReturn(benchmark: BenchmarkType, period: string): number {\n  const config = BENCHMARK_CONFIGS.find(b => b.type === benchmark)\n  if (!config || !config.annualized_return) return 0.10\n\n  const periodMultipliers: Record<string, number> = {\n    '1d': 1/365,\n    '1w': 7/365,\n    '1m': 30/365,\n    '3m': 90/365,\n    '6m': 180/365,\n    '1y': 1,\n    '2y': 2,\n    '3y': 3,\n    '5y': 5,\n    'ytd': (new Date().getMonth()) / 12,\n    'all': 3,\n  }\n\n  const multiplier = periodMultipliers[period] || 1\n  return config.annualized_return * multiplier\n}\n\n// ============================================================================\n// Utility Functions\n// ============================================================================\n\nexport function generateAttributionTrend(\n  dailyReturns: { date: string; return: number }[]\n): AttributionTrend[] {\n  let cumulativeContribution = 0\n\n  return dailyReturns.map((day) => {\n    cumulativeContribution += day.return\n\n    return {\n      date: day.date,\n      daily_return: day.return,\n      cumulative_contribution: cumulativeContribution,\n      allocation_effect: day.return * 0.4,\n      selection_effect: day.return * 0.6,\n    }\n  })\n}\n\nexport function filterAttribution(\n  holdings: Holding[],\n  filters: AttributionFilters\n): Holding[] {\n  let filtered = [...holdings]\n\n  if (filters.asset_class && filters.asset_class.length > 0) {\n    filtered = filtered.filter(h => filters.asset_class!.includes(h.asset_class))\n  }\n\n  if (filters.sector && filters.sector.length > 0) {\n    filtered = filtered.filter(h => filters.sector!.includes(h.sector || 'Other'))\n  }\n\n  return filtered\n}\n\nexport function sortAttribution(\n  holdings: Holding[],\n  sortBy: 'contribution' | 'return' | 'weight' | 'name' = 'contribution',\n  sortOrder: 'asc' | 'desc' = 'desc'\n): HoldingAttribution[] {\n  const attribution = calculateHoldingAttribution(holdings)\n\n  return attribution.sort((a, b) => {\n    let comparison = 0\n\n    switch (sortBy) {\n      case 'contribution':\n        comparison = a.contribution - b.contribution\n        break\n      case 'return':\n        comparison = a.return - b.return\n        break\n      case 'weight':\n        comparison = a.weight - b.weight\n        break\n      case 'name':\n        comparison = a.name.localeCompare(b.name)\n        break\n    }\n\n    return sortOrder === 'desc' ? -comparison : comparison\n  })\n}\n\nexport function getAttributionPeriodData(\n  periodAttributions: PeriodAttribution[],\n  period: string\n): PeriodAttribution | null {\n  return periodAttributions.find(p => p.period === period) || null\n}\n\nexport function calculateBrinsonFachlerAttribution(\n  portfolioWeight: number,\n  benchmarkWeight: number,\n  portfolioReturn: number,\n  benchmarkReturn: number\n): { allocation: number; selection: number; interaction: number; total: number } {\n  const weightDiff = portfolioWeight - benchmarkWeight\n  const returnDiff = portfolioReturn - benchmarkReturn\n\n  const allocation = weightDiff * benchmarkReturn\n  const selection = portfolioWeight * returnDiff\n  const interaction = weightDiff * returnDiff\n  const total = allocation + selection + interaction\n\n  return {\n    allocation: Math.round(allocation * 100) / 100,\n    selection: Math.round(selection * 100) / 100,\n    interaction: Math.round(interaction * 100) / 100,\n    total: Math.round(total * 100) / 100,\n  }\n}\n\nexport function formatAttributionValue(value: number): string {\n  const formatted = Math.abs(value).toFixed(2)\n  return value >= 0 ? `+${formatted}%` : `-${formatted}%`\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 929, "column": 0}, "map": {"version":3,"sources":["file:///Users/sergi/Desktop/Projects/FinanceHub/apps/frontend/src/lib/types/attribution.ts"],"sourcesContent":["export type AttributionPeriod = '1d' | '1w' | '1m' | '3m' | '6m' | '1y' | '2y' | '3y' | '5y' | 'ytd' | 'all'\n\nexport type BenchmarkType =\n  | 'sp500'          // S&P 500\n  | 'nasdaq100'      // NASDAQ-100\n  | 'dow30'          // Dow Jones Industrial Average\n  | 'russell2000'    // Russell 2000 (small cap)\n  | 'vti'            // Vanguard Total Stock Market ETF\n  | 'qqq'            // Invesco QQQ (tech-heavy)\n  | 'spy'            // SPDR S&P 500 ETF\n  | 'dia'            // SPDR Dow Jones ETF\n  | 'iwm'            // iShares Russell 2000 ETF\n  | 'vgt'            // Vanguard Information Technology ETF\n  | 'vht'            // Vanguard Health Care ETF\n  | 'vcr'            // Vanguard Consumer Discretionary ETF\n  | 'vdc'            // Vanguard Consumer Staples ETF\n  | 'ven'            // Vanguard Energy ETF\n  | 'vfi'            // Vanguard Financials ETF\n  | 'viu'            // Vanguard International (ex-US)\n  | 'acwx'           // iShares MSCI All Country World ex-US\n  | 'bnd'            // Vanguard Total Bond Market ETF\n  | 'agg'            // iShares Core US Aggregate Bond\n  | 'tlt'            // iShares 20+ Year Treasury Bond\n  | 'gld'            // SPDR Gold Shares\n  | 'bitcoin'        // Bitcoin\n  | 'ethereum'       // Ethereum\n  | 'custom'         // Custom benchmark\n\nexport interface HoldingAttribution {\n  holding_id: string\n  symbol: string\n  name: string\n  sector: string\n  asset_class: string\n  weight: number\n  return: number\n  contribution: number\n  contribution_percent: number\n  value_start: number\n  value_end: number\n  value_change: number\n  avg_weight: number\n}\n\nexport interface SectorAttribution {\n  sector: string\n  weight: number\n  return: number\n  contribution: number\n  contribution_percent: number\n  holdings_count: number\n  top_holding: string\n  top_holding_return: number\n  allocation_effect: number\n  selection_effect: number\n  total_effect: number\n}\n\nexport interface AssetClassAttribution {\n  asset_class: string\n  weight: number\n  return: number\n  contribution: number\n  contribution_percent: number\n  holdings_count: number\n  sectors_count: number\n}\n\nexport interface PeriodAttribution {\n  period: AttributionPeriod\n  start_date: string\n  end_date: string\n  portfolio_return: number\n  portfolio_value_start: number\n  portfolio_value_end: number\n  total_contribution: number\n  holdings: HoldingAttribution[]\n  sectors: SectorAttribution[]\n  asset_classes: AssetClassAttribution[]\n}\n\nexport interface AttributionSummary {\n  total_return: number\n  total_contribution: number\n  allocation_effect: number\n  selection_effect: number\n  total_effect: number\n  top_contributor: HoldingAttribution | null\n  bottom_contributor: HoldingAttribution | null\n  best_sector: SectorAttribution | null\n  worst_sector: SectorAttribution | null\n  positive_holdings: number\n  negative_holdings: number\n  neutral_holdings: number\n  benchmark_comparison?: BenchmarkComparison\n}\n\nexport interface BenchmarkComparison {\n  benchmark_type: BenchmarkType\n  benchmark_return: number\n  portfolio_return: number\n  excess_return: number\n  excess_return_percent: number\n  tracking_error: number\n  information_ratio: number\n  beta: number\n  correlation: number\n  sector_outperformance: SectorAttribution[]\n  sector_underperformance: SectorAttribution[]\n}\n\nexport interface AttributionTrend {\n  date: string\n  daily_return: number\n  cumulative_contribution: number\n  allocation_effect: number\n  selection_effect: number\n}\n\nexport interface BenchmarkAttribution {\n  benchmark_weight: number\n  benchmark_return: number\n  portfolio_weight: number\n  portfolio_return: number\n  weight_difference: number\n  return_difference: number\n  allocation_impact: number\n  selection_impact: number\n  total_impact: number\n}\n\nexport interface AttributionFilters {\n  period?: AttributionPeriod\n  asset_class?: string[]\n  sector?: string[]\n  min_contribution?: number\n  max_contribution?: number\n  sort_by?: 'contribution' | 'return' | 'weight' | 'name'\n  sort_order?: 'asc' | 'desc'\n  limit?: number\n}\n\nexport const SECTOR_COLORS: Record<string, string> = {\n  'Technology': '#3B82F6',\n  'Healthcare': '#10B981',\n  'Financial': '#F59E0B',\n  'Consumer': '#EC4899',\n  'Energy': '#EF4444',\n  'Industrial': '#8B5CF6',\n  'Materials': '#06B6D4',\n  'Real Estate': '#14B8A6',\n  'Utilities': '#F97316',\n  'Communication': '#6366F1',\n  'Other': '#6B7280',\n}\n\nexport const DEFAULT_ATTRIBUTION_PERIODS: { value: AttributionPeriod; label: string }[] = [\n  { value: '1d', label: '1D' },\n  { value: '1w', label: '1W' },\n  { value: '1m', label: '1M' },\n  { value: '3m', label: '3M' },\n  { value: '6m', label: '6M' },\n  { value: '1y', label: '1Y' },\n  { value: '2y', label: '2Y' },\n  { value: '3y', label: '3Y' },\n  { value: '5y', label: '5Y' },\n  { value: 'ytd', label: 'YTD' },\n  { value: 'all', label: 'All' },\n]\n\nexport interface BenchmarkConfig {\n  type: BenchmarkType\n  name: string\n  description: string\n  category: 'us_indices' | 'etf' | 'crypto' | 'bonds' | 'international' | 'custom'\n  annualized_return?: number\n  volatility?: number\n}\n\nexport const BENCHMARK_CONFIGS: BenchmarkConfig[] = [\n  { type: 'sp500', name: 'S&P 500', description: '500 largest US companies', category: 'us_indices' },\n  { type: 'nasdaq100', name: 'NASDAQ-100', description: '100 largest non-financial stocks', category: 'us_indices' },\n  { type: 'dow30', name: 'Dow Jones 30', description: '30 blue-chip companies', category: 'us_indices' },\n  { type: 'russell2000', name: 'Russell 2000', description: '2000 small-cap companies', category: 'us_indices' },\n  { type: 'vti', name: 'VTI', description: 'Vanguard Total Stock Market', category: 'etf' },\n  { type: 'qqq', name: 'QQQ', description: 'Invesco NASDAQ 100', category: 'etf' },\n  { type: 'spy', name: 'SPY', description: 'SPDR S&P 500 ETF', category: 'etf' },\n  { type: 'dia', name: 'DIA', description: 'SPDR Dow Jones ETF', category: 'etf' },\n  { type: 'iwm', name: 'IWM', description: 'iShares Russell 2000', category: 'etf' },\n  { type: 'vgt', name: 'VGT', description: 'Vanguard Information Tech', category: 'etf' },\n  { type: 'vht', name: 'VHT', description: 'Vanguard Health Care', category: 'etf' },\n  { type: 'vcr', name: 'VCR', description: 'Vanguard Consumer Disc.', category: 'etf' },\n  { type: 'vdc', name: 'VDC', description: 'Vanguard Consumer Staples', category: 'etf' },\n  { type: 'ven', name: 'VEN', description: 'Vanguard Energy', category: 'etf' },\n  { type: 'vfi', name: 'VFI', description: 'Vanguard Financials', category: 'etf' },\n  { type: 'viu', name: 'VIU', description: 'Vanguard Developed ex-US', category: 'international' },\n  { type: 'acwx', name: 'ACWX', description: 'iShares MSCI AC World ex-US', category: 'international' },\n  { type: 'bnd', name: 'BND', description: 'Vanguard Total Bond Market', category: 'bonds' },\n  { type: 'agg', name: 'AGG', description: 'iShares Core US Aggregate', category: 'bonds' },\n  { type: 'tlt', name: 'TLT', description: 'iShares 20+ Year Treasury', category: 'bonds' },\n  { type: 'gld', name: 'GLD', description: 'SPDR Gold Shares', category: 'custom' },\n  { type: 'bitcoin', name: 'Bitcoin', description: 'BTC/USD', category: 'crypto' },\n  { type: 'ethereum', name: 'Ethereum', description: 'ETH/USD', category: 'crypto' },\n]\n\nexport const BENCHMARK_CATEGORIES = [\n  { value: 'us_indices', label: 'US Indices' },\n  { value: 'etf', label: 'ETFs' },\n  { value: 'crypto', label: 'Cryptocurrency' },\n  { value: 'bonds', label: 'Bonds' },\n  { value: 'international', label: 'International' },\n]\n"],"names":[],"mappings":";;;;;;;;;;AA8IO,MAAM,gBAAwC;IACnD,cAAc;IACd,cAAc;IACd,aAAa;IACb,YAAY;IACZ,UAAU;IACV,cAAc;IACd,aAAa;IACb,eAAe;IACf,aAAa;IACb,iBAAiB;IACjB,SAAS;AACX;AAEO,MAAM,8BAA6E;IACxF;QAAE,OAAO;QAAM,OAAO;IAAK;IAC3B;QAAE,OAAO;QAAM,OAAO;IAAK;IAC3B;QAAE,OAAO;QAAM,OAAO;IAAK;IAC3B;QAAE,OAAO;QAAM,OAAO;IAAK;IAC3B;QAAE,OAAO;QAAM,OAAO;IAAK;IAC3B;QAAE,OAAO;QAAM,OAAO;IAAK;IAC3B;QAAE,OAAO;QAAM,OAAO;IAAK;IAC3B;QAAE,OAAO;QAAM,OAAO;IAAK;IAC3B;QAAE,OAAO;QAAM,OAAO;IAAK;IAC3B;QAAE,OAAO;QAAO,OAAO;IAAM;IAC7B;QAAE,OAAO;QAAO,OAAO;IAAM;CAC9B;AAWM,MAAM,oBAAuC;IAClD;QAAE,MAAM;QAAS,MAAM;QAAW,aAAa;QAA4B,UAAU;IAAa;IAClG;QAAE,MAAM;QAAa,MAAM;QAAc,aAAa;QAAoC,UAAU;IAAa;IACjH;QAAE,MAAM;QAAS,MAAM;QAAgB,aAAa;QAA0B,UAAU;IAAa;IACrG;QAAE,MAAM;QAAe,MAAM;QAAgB,aAAa;QAA4B,UAAU;IAAa;IAC7G;QAAE,MAAM;QAAO,MAAM;QAAO,aAAa;QAA+B,UAAU;IAAM;IACxF;QAAE,MAAM;QAAO,MAAM;QAAO,aAAa;QAAsB,UAAU;IAAM;IAC/E;QAAE,MAAM;QAAO,MAAM;QAAO,aAAa;QAAoB,UAAU;IAAM;IAC7E;QAAE,MAAM;QAAO,MAAM;QAAO,aAAa;QAAsB,UAAU;IAAM;IAC/E;QAAE,MAAM;QAAO,MAAM;QAAO,aAAa;QAAwB,UAAU;IAAM;IACjF;QAAE,MAAM;QAAO,MAAM;QAAO,aAAa;QAA6B,UAAU;IAAM;IACtF;QAAE,MAAM;QAAO,MAAM;QAAO,aAAa;QAAwB,UAAU;IAAM;IACjF;QAAE,MAAM;QAAO,MAAM;QAAO,aAAa;QAA2B,UAAU;IAAM;IACpF;QAAE,MAAM;QAAO,MAAM;QAAO,aAAa;QAA6B,UAAU;IAAM;IACtF;QAAE,MAAM;QAAO,MAAM;QAAO,aAAa;QAAmB,UAAU;IAAM;IAC5E;QAAE,MAAM;QAAO,MAAM;QAAO,aAAa;QAAuB,UAAU;IAAM;IAChF;QAAE,MAAM;QAAO,MAAM;QAAO,aAAa;QAA4B,UAAU;IAAgB;IAC/F;QAAE,MAAM;QAAQ,MAAM;QAAQ,aAAa;QAA+B,UAAU;IAAgB;IACpG;QAAE,MAAM;QAAO,MAAM;QAAO,aAAa;QAA8B,UAAU;IAAQ;IACzF;QAAE,MAAM;QAAO,MAAM;QAAO,aAAa;QAA6B,UAAU;IAAQ;IACxF;QAAE,MAAM;QAAO,MAAM;QAAO,aAAa;QAA6B,UAAU;IAAQ;IACxF;QAAE,MAAM;QAAO,MAAM;QAAO,aAAa;QAAoB,UAAU;IAAS;IAChF;QAAE,MAAM;QAAW,MAAM;QAAW,aAAa;QAAW,UAAU;IAAS;IAC/E;QAAE,MAAM;QAAY,MAAM;QAAY,aAAa;QAAW,UAAU;IAAS;CAClF;AAEM,MAAM,uBAAuB;IAClC;QAAE,OAAO;QAAc,OAAO;IAAa;IAC3C;QAAE,OAAO;QAAO,OAAO;IAAO;IAC9B;QAAE,OAAO;QAAU,OAAO;IAAiB;IAC3C;QAAE,OAAO;QAAS,OAAO;IAAQ;IACjC;QAAE,OAAO;QAAiB,OAAO;IAAgB;CAClD"}},
    {"offset": {"line": 1167, "column": 0}, "map": {"version":3,"sources":["file:///Users/sergi/Desktop/Projects/FinanceHub/apps/frontend/src/lib/api/portfolio-analytics.ts"],"sourcesContent":["/**\n * Portfolio Analytics API\n * All portfolio-related API calls for performance analysis and recommendations\n */\n\nimport { apiClient } from './client'\nimport type {\n  PortfolioSummary,\n  PerformanceMetrics,\n  RiskAnalysis,\n  HoldingsAnalysis,\n  RebalancingSuggestions,\n  ComparisonResponse,\n  AnalyticsPeriod,\n  PortfolioAnalytics,\n} from '../types'\n\nexport const portfolioAnalyticsApi = {\n  /**\n   * Get portfolio summary\n   */\n  getPortfolioSummary: (portfolioId: string) =>\n    apiClient.get<PortfolioSummary>(`/portfolios/${portfolioId}/summary`),\n\n  /**\n   * Get performance metrics\n   */\n  getPerformanceMetrics: (portfolioId: string, period: '1y' | '6m' | '3m' = '1y') =>\n    apiClient.get<PerformanceMetrics>(`/portfolios/${portfolioId}/performance`, {\n      params: { period },\n    }),\n\n  /**\n   * Get risk analysis\n   */\n  getRiskAnalysis: (portfolioId: string) =>\n    apiClient.get<RiskAnalysis>(`/portfolios/${portfolioId}/risk-analysis`),\n\n  /**\n   * Get holdings analysis\n   */\n  getHoldingsAnalysis: (portfolioId: string) =>\n    apiClient.get<HoldingsAnalysis>(`/portfolios/${portfolioId}/holdings`),\n\n  /**\n   * Get rebalancing suggestions\n   */\n  getRebalancingSuggestions: (portfolioId: string) =>\n    apiClient.get<RebalancingSuggestions>(`/portfolios/${portfolioId}/rebalance-suggestions`),\n\n  /**\n   * Get portfolio comparison\n   */\n  getPortfolioComparison: (\n    portfolioId: string,\n    benchmarkType: 'sp500' | 'custom' = 'sp500',\n    period: '1y' | '6m' | '3m' = '1y'\n  ) =>\n    apiClient.get<ComparisonResponse>(`/portfolios/${portfolioId}/comparison`, {\n      params: {\n        benchmark_type: benchmarkType,\n        period,\n      },\n    }),\n\n  /**\n   * Get analytics overview (for analytics dashboard)\n   */\n  getAnalytics: (period: AnalyticsPeriod = '7d') =>\n    apiClient.get<PortfolioAnalytics>('/analytics', {\n      params: { period },\n    }),\n}\n"],"names":[],"mappings":";;;;AAAA;;;CAGC,GAED;;AAYO,MAAM,wBAAwB;IACnC;;GAEC,GACD,qBAAqB,CAAC,cACpB,+JAAS,CAAC,GAAG,CAAmB,CAAC,YAAY,EAAE,YAAY,QAAQ,CAAC;IAEtE;;GAEC,GACD,uBAAuB,CAAC,aAAqB,SAA6B,IAAI,GAC5E,+JAAS,CAAC,GAAG,CAAqB,CAAC,YAAY,EAAE,YAAY,YAAY,CAAC,EAAE;YAC1E,QAAQ;gBAAE;YAAO;QACnB;IAEF;;GAEC,GACD,iBAAiB,CAAC,cAChB,+JAAS,CAAC,GAAG,CAAe,CAAC,YAAY,EAAE,YAAY,cAAc,CAAC;IAExE;;GAEC,GACD,qBAAqB,CAAC,cACpB,+JAAS,CAAC,GAAG,CAAmB,CAAC,YAAY,EAAE,YAAY,SAAS,CAAC;IAEvE;;GAEC,GACD,2BAA2B,CAAC,cAC1B,+JAAS,CAAC,GAAG,CAAyB,CAAC,YAAY,EAAE,YAAY,sBAAsB,CAAC;IAE1F;;GAEC,GACD,wBAAwB,CACtB,aACA,gBAAoC,OAAO,EAC3C,SAA6B,IAAI,GAEjC,+JAAS,CAAC,GAAG,CAAqB,CAAC,YAAY,EAAE,YAAY,WAAW,CAAC,EAAE;YACzE,QAAQ;gBACN,gBAAgB;gBAChB;YACF;QACF;IAEF;;GAEC,GACD,cAAc,CAAC,SAA0B,IAAI,GAC3C,+JAAS,CAAC,GAAG,CAAqB,cAAc;YAC9C,QAAQ;gBAAE;YAAO;QACnB;AACJ"}},
    {"offset": {"line": 1219, "column": 0}, "map": {"version":3,"sources":["file:///Users/sergi/Desktop/Projects/FinanceHub/apps/frontend/src/lib/utils/analytics-export.ts"],"sourcesContent":["import type { PortfolioAnalytics, AnalyticsPeriod } from '@/lib/types/portfolio-analytics'\n\nexport interface ExportOptions {\n  format: 'json' | 'csv'\n  includeCharts?: boolean\n  period?: AnalyticsPeriod\n}\n\nexport function generateExportData(analytics: PortfolioAnalytics, options: ExportOptions) {\n  const { format } = options\n\n  const summary = analytics.summary || { name: 'Unknown Portfolio', total_value: analytics.total_value, total_invested: 0, total_pnl: 0, total_pnl_percent: 0 }\n  const performance = analytics.performance || { cagr: 0, total_return: 0, total_return_percent: 0, annualized_return: 0, best_day: 0, worst_day: 0, win_rate: 0 }\n  const risk = analytics.risk_metrics || { volatility: 0, beta: 1, sharpe_ratio: 0 }\n\n  const data = {\n    summary: {\n      portfolio: summary.name,\n      totalValue: summary.total_value,\n      totalReturn: performance.total_return_percent,\n      periodStart: analytics.period_start,\n      periodEnd: analytics.period_end,\n    },\n    performance: {\n      cagr: performance.cagr,\n      totalReturn: performance.total_return_percent,\n      annualizedReturn: performance.annualized_return,\n      bestDay: performance.best_day,\n      worstDay: performance.worst_day,\n      winRate: performance.win_rate,\n    },\n    risk: {\n      volatility: risk.volatility,\n      beta: risk.beta,\n      sharpeRatio: risk.sharpe_ratio,\n    },\n    allocation: analytics.performance_by_asset,\n    exportedAt: new Date().toISOString(),\n    period: options.period || '1y',\n  }\n\n  if (format === 'json') {\n    return JSON.stringify(data, null, 2)\n  }\n\n  if (format === 'csv') {\n    const lines: string[] = []\n\n    lines.push('Summary')\n    lines.push('Portfolio,Total Value,Total Return,Period Start,Period End')\n    lines.push(\n      `${data.summary.portfolio},${data.summary.totalValue},${data.summary.totalReturn}%,${data.summary.periodStart},${data.summary.periodEnd}`\n    )\n\n    lines.push('')\n    lines.push('Performance')\n    lines.push('CAGR,Total Return,Annualized Return,Win Rate')\n    lines.push(\n      `${data.performance.cagr}%,${data.performance.totalReturn}%,${data.performance.annualizedReturn}%,${data.performance.winRate}%`\n    )\n\n    lines.push('')\n    lines.push('Risk Metrics')\n    lines.push('Volatility,Beta,Sharpe Ratio')\n    lines.push(\n      `${data.risk.volatility}%,${data.risk.beta},${data.risk.sharpeRatio}`\n    )\n\n    lines.push('')\n    lines.push('Allocation')\n    lines.push('Asset Type,Value,Return')\n    analytics.performance_by_asset.forEach((asset) => {\n      lines.push(`${asset.asset_type},${asset.value},${asset.return}%`)\n    })\n\n    return lines.join('\\n')\n  }\n\n  return null\n}\n\nexport function downloadExport(data: string, filename: string, format: 'json' | 'csv') {\n  const mimeType = format === 'json' ? 'application/json' : 'text/csv'\n  const blob = new Blob([data], { type: mimeType })\n  const url = URL.createObjectURL(blob)\n  const a = document.createElement('a')\n  a.href = url\n  a.download = filename\n  document.body.appendChild(a)\n  a.click()\n  document.body.removeChild(a)\n  URL.revokeObjectURL(url)\n}\n\nexport function exportAnalytics(analytics: PortfolioAnalytics, options: ExportOptions) {\n  const data = generateExportData(analytics, options)\n  if (!data) return\n\n  const timestamp = new Date().toISOString().split('T')[0]\n  const filename = `portfolio-analytics-${options.period || '1y'}-${timestamp}.${options.format}`\n\n  downloadExport(data, filename, options.format)\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1331, "column": 0}, "map": {"version":3,"sources":["file:///Users/sergi/Desktop/Projects/FinanceHub/apps/frontend/src/lib/api/screener.ts"],"sourcesContent":["/**\n * Screener API Client\n * Stock screener endpoints\n */\n\nimport { apiClient } from './client'\nimport type {\n  ScreenerResponse,\n  ScreenerRequest,\n  ScreenerFiltersResponse,\n  ScreenerFilter,\n  UserScreenerPreset,\n} from '../types/screener'\n\nexport const screenerApi = {\n  /**\n   * Run stock screener with filters\n   * Backend endpoint: POST /api/fundamentals/screener\n   */\n  runScreener: async (filters: ScreenerRequest): Promise<ScreenerResponse> => {\n    return await apiClient.post<ScreenerResponse>('/fundamentals/screener', filters)\n  },\n\n  /**\n   * Get available screener filters and presets\n   */\n  getFilters: async (): Promise<ScreenerFiltersResponse> => {\n    return await apiClient.get<ScreenerFiltersResponse>('/screener/filters')\n  },\n\n  /**\n   * Get available screener presets\n   */\n  getPresets: async (): Promise<Record<string, { name: string; description: string }>> => {\n    return await apiClient.get<Record<string, { name: string; description: string }>>('/screener/presets')\n  },\n\n  /**\n   * Get user's saved screener presets\n   */\n  getUserPresets: async (): Promise<UserScreenerPreset[]> => {\n    return await apiClient.get<UserScreenerPreset[]>('/screener/presets')\n  },\n\n  /**\n   * Save a new screener preset\n   */\n  savePreset: async (name: string, filters: Partial<ScreenerRequest>): Promise<UserScreenerPreset> => {\n    return await apiClient.post<UserScreenerPreset>('/screener/presets', { name, filters })\n  },\n\n  /**\n   * Update a screener preset\n   */\n  updatePreset: async (id: string, data: { name?: string; filters?: Partial<ScreenerRequest> }): Promise<UserScreenerPreset> => {\n    return await apiClient.put<UserScreenerPreset>(`/screener/presets/${id}`, data)\n  },\n\n  /**\n   * Delete a screener preset\n   */\n  deletePreset: async (id: string): Promise<{ success: boolean }> => {\n    return await apiClient.delete<{ success: boolean }>(`/screener/presets/${id}`)\n  },\n}\n"],"names":[],"mappings":";;;;AAAA;;;CAGC,GAED;;AASO,MAAM,cAAc;IACzB;;;GAGC,GACD,aAAa,OAAO;QAClB,OAAO,MAAM,+JAAS,CAAC,IAAI,CAAmB,0BAA0B;IAC1E;IAEA;;GAEC,GACD,YAAY;QACV,OAAO,MAAM,+JAAS,CAAC,GAAG,CAA0B;IACtD;IAEA;;GAEC,GACD,YAAY;QACV,OAAO,MAAM,+JAAS,CAAC,GAAG,CAAwD;IACpF;IAEA;;GAEC,GACD,gBAAgB;QACd,OAAO,MAAM,+JAAS,CAAC,GAAG,CAAuB;IACnD;IAEA;;GAEC,GACD,YAAY,OAAO,MAAc;QAC/B,OAAO,MAAM,+JAAS,CAAC,IAAI,CAAqB,qBAAqB;YAAE;YAAM;QAAQ;IACvF;IAEA;;GAEC,GACD,cAAc,OAAO,IAAY;QAC/B,OAAO,MAAM,+JAAS,CAAC,GAAG,CAAqB,CAAC,kBAAkB,EAAE,IAAI,EAAE;IAC5E;IAEA;;GAEC,GACD,cAAc,OAAO;QACnB,OAAO,MAAM,+JAAS,CAAC,MAAM,CAAuB,CAAC,kBAAkB,EAAE,IAAI;IAC/E;AACF"}},
    {"offset": {"line": 1388, "column": 0}, "map": {"version":3,"sources":["file:///Users/sergi/Desktop/Projects/FinanceHub/apps/frontend/src/lib/utils/formatters.ts"],"sourcesContent":["/**\n * Formatters\n * Utility functions for formatting data\n */\n\nexport function formatPrice(value: number | string | undefined | null, currency: string = 'USD'): string {\n  if (value === undefined || value === null) return '--'\n  \n  const numValue = typeof value === 'string' ? parseFloat(value) : value\n  \n  return new Intl.NumberFormat('en-US', {\n    style: 'currency',\n    currency: currency,\n    minimumFractionDigits: 2,\n    maximumFractionDigits: 2,\n  }).format(numValue)\n}\n\nexport function formatCurrency(value: number | string | undefined | null, decimals: number = 2): string {\n  if (value === undefined || value === null) return '--'\n  \n  const numValue = typeof value === 'string' ? parseFloat(value) : value\n  \n  return new Intl.NumberFormat('en-US', {\n    style: 'currency',\n    currency: 'USD',\n    minimumFractionDigits: decimals,\n    maximumFractionDigits: decimals,\n  }).format(numValue)\n}\n\nexport function formatNumber(value: number | string | undefined | null): string {\n  if (value === undefined || value === null) return '--'\n  \n  const numValue = typeof value === 'string' ? parseFloat(value) : value\n  \n  return new Intl.NumberFormat('en-US', {\n    minimumFractionDigits: 0,\n    maximumFractionDigits: 0,\n  }).format(numValue)\n}\n\nexport function formatPercent(value: number | string | undefined | null, showSign: boolean = true): string {\n  if (value === undefined || value === null) return '--'\n  \n  const numValue = typeof value === 'string' ? parseFloat(value) : value\n  const sign = numValue > 0 && showSign ? '+' : ''\n  \n  return `${sign}${numValue.toFixed(2)}%`\n}\n\nexport function formatVolume(value: number | string | undefined | null): string {\n  if (value === undefined || value === null) return '--'\n  \n  const numValue = typeof value === 'string' ? parseFloat(value) : value\n  \n  if (numValue >= 1e9) {\n    return `${(numValue / 1e9).toFixed(2)}B`\n  }\n  if (numValue >= 1e6) {\n    return `${(numValue / 1e6).toFixed(2)}M`\n  }\n  if (numValue >= 1e3) {\n    return `${(numValue / 1e3).toFixed(2)}K`\n  }\n  \n  return numValue.toString()\n}\n\nexport function formatMarketCap(value: number | string | undefined | null): string {\n  if (value === undefined || value === null) return '--'\n  \n  const numValue = typeof value === 'string' ? parseFloat(value) : value\n  \n  if (numValue >= 1e12) {\n    return `$${(numValue / 1e12).toFixed(2)}T`\n  }\n  if (numValue >= 1e9) {\n    return `$${(numValue / 1e9).toFixed(2)}B`\n  }\n  if (numValue >= 1e6) {\n    return `$${(numValue / 1e6).toFixed(2)}M`\n  }\n  if (numValue >= 1e3) {\n    return `$${(numValue / 1e3).toFixed(2)}K`\n  }\n  \n  return `$${numValue.toFixed(2)}`\n}\n\nexport function formatDate(date: Date | string | undefined | null, format: 'short' | 'long' | 'time' = 'short'): string {\n  if (!date) return '--'\n  \n  const dateObj = typeof date === 'string' ? new Date(date) : date\n  \n  if (format === 'time') {\n    return new Intl.DateTimeFormat('en-US', {\n      hour: '2-digit',\n      minute: '2-digit',\n      second: '2-digit',\n    }).format(dateObj)\n  }\n  \n  if (format === 'long') {\n    return new Intl.DateTimeFormat('en-US', {\n      year: 'numeric',\n      month: 'long',\n      day: 'numeric',\n      hour: '2-digit',\n      minute: '2-digit',\n    }).format(dateObj)\n  }\n  \n  return new Intl.DateTimeFormat('en-US', {\n    year: 'numeric',\n    month: 'short',\n    day: 'numeric',\n  }).format(dateObj)\n}\n\nexport function formatDuration(ms: number): string {\n  const seconds = Math.floor(ms / 1000)\n  const minutes = Math.floor(seconds / 60)\n  const hours = Math.floor(minutes / 60)\n  const days = Math.floor(hours / 24)\n  \n  if (days > 0) {\n    return `${days}d ${hours % 24}h`\n  }\n  if (hours > 0) {\n    return `${hours}h ${minutes % 60}m`\n  }\n  if (minutes > 0) {\n    return `${minutes}m ${seconds % 60}s`\n  }\n  \n  return `${seconds}s`\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1522, "column": 0}, "map": {"version":3,"sources":["file:///Users/sergi/Desktop/Projects/FinanceHub/apps/frontend/src/lib/types/settings.ts"],"sourcesContent":["/**\n * Settings Types\n * Defines all settings-related types and interfaces\n */\n\nexport type ThemeMode = 'light' | 'dark' | 'system'\n\nexport type Currency = 'USD' | 'EUR' | 'GBP' | 'JPY' | 'AUD' | 'CAD' | 'CHF' | 'CNY'\n\nexport type NumberFormat = '1,234.56' | '1 234.56' | '1.234,56' | '1234.56'\n\nexport type Timezone = \n  | 'UTC'\n  | 'America/New_York'\n  | 'America/Chicago'\n  | 'America/Denver'\n  | 'America/Los_Angeles'\n  | 'Europe/London'\n  | 'Europe/Paris'\n  | 'Europe/Berlin'\n  | 'Asia/Tokyo'\n  | 'Asia/Shanghai'\n  | 'Asia/Hong_Kong'\n\nexport type RiskTolerance = 'conservative' | 'moderate' | 'aggressive'\n\nexport type InvestmentGoal = 'growth' | 'income' | 'balanced' | 'preservation'\n\nexport type PreferredAssetClass = 'stocks' | 'etfs' | 'cryptocurrency' | 'forex' | 'commodities' | 'bonds'\n\nexport type NotificationType = 'price' | 'portfolio' | 'news' | 'digest'\n\nexport type NotificationChannel = 'push' | 'email' | 'sms'\n\nexport interface DisplaySettings {\n  theme: ThemeMode\n  currency: Currency\n  numberFormat: NumberFormat\n  compactMode: boolean\n  showPriceChange: boolean\n  animatedCharts: boolean\n}\n\nexport interface NotificationSettings {\n  enabled: boolean\n  types: Record<NotificationType, boolean>\n  channels: Record<NotificationChannel, boolean>\n  quietHours: {\n    enabled: boolean\n    startTime: string\n    endTime: string\n  }\n}\n\nexport interface ProfileSettings {\n  firstName?: string\n  lastName?: string\n  email?: string\n  phone?: string\n  timezone: Timezone\n  bio?: string\n}\n\nexport interface InvestmentProfile {\n  riskTolerance: RiskTolerance\n  goal: InvestmentGoal\n  preferredAssetClasses: PreferredAssetClass[]\n}\n\nexport interface UserSettings {\n  display: DisplaySettings\n  notifications: NotificationSettings\n  profile: ProfileSettings\n  investment: InvestmentProfile\n}\n\nexport interface SettingsUpdate {\n  display?: Partial<DisplaySettings>\n  notifications?: Partial<NotificationSettings>\n  profile?: Partial<ProfileSettings>\n  investment?: Partial<InvestmentProfile>\n}\n\nexport const defaultDisplaySettings: DisplaySettings = {\n  theme: 'system',\n  currency: 'USD',\n  numberFormat: '1,234.56',\n  compactMode: false,\n  showPriceChange: true,\n  animatedCharts: true,\n}\n\nexport const defaultNotificationSettings: NotificationSettings = {\n  enabled: true,\n  types: {\n    price: true,\n    portfolio: true,\n    news: false,\n    digest: false,\n  },\n  channels: {\n    push: true,\n    email: true,\n    sms: false,\n  },\n  quietHours: {\n    enabled: false,\n    startTime: '22:00',\n    endTime: '08:00',\n  },\n}\n\nexport const defaultProfileSettings: ProfileSettings = {\n  timezone: 'America/New_York',\n}\n\nexport const defaultInvestmentProfile: InvestmentProfile = {\n  riskTolerance: 'moderate',\n  goal: 'growth',\n  preferredAssetClasses: ['stocks', 'etfs'],\n}\n\nexport const defaultSettings: UserSettings = {\n  display: defaultDisplaySettings,\n  notifications: defaultNotificationSettings,\n  profile: defaultProfileSettings,\n  investment: defaultInvestmentProfile,\n}\n\nexport interface ActiveSession {\n  id: string\n  device: string\n  browser: string\n  location: string\n  lastActive: string\n  current: boolean\n}\n\nexport interface SecuritySettings {\n  twoFactorEnabled: boolean\n  twoFactorMethod: 'authenticator' | 'sms' | null\n  sessions: ActiveSession[]\n}\n"],"names":[],"mappings":"AAAA;;;CAGC;;;;;;;;;;;;AAgFM,MAAM,yBAA0C;IACrD,OAAO;IACP,UAAU;IACV,cAAc;IACd,aAAa;IACb,iBAAiB;IACjB,gBAAgB;AAClB;AAEO,MAAM,8BAAoD;IAC/D,SAAS;IACT,OAAO;QACL,OAAO;QACP,WAAW;QACX,MAAM;QACN,QAAQ;IACV;IACA,UAAU;QACR,MAAM;QACN,OAAO;QACP,KAAK;IACP;IACA,YAAY;QACV,SAAS;QACT,WAAW;QACX,SAAS;IACX;AACF;AAEO,MAAM,yBAA0C;IACrD,UAAU;AACZ;AAEO,MAAM,2BAA8C;IACzD,eAAe;IACf,MAAM;IACN,uBAAuB;QAAC;QAAU;KAAO;AAC3C;AAEO,MAAM,kBAAgC;IAC3C,SAAS;IACT,eAAe;IACf,SAAS;IACT,YAAY;AACd"}},
    {"offset": {"line": 1588, "column": 0}, "map": {"version":3,"sources":["file:///Users/sergi/Desktop/Projects/FinanceHub/apps/frontend/src/lib/api/assets.ts"],"sourcesContent":["/**\n * Assets API\n * All asset-related API calls\n */\n\nimport { apiClient } from './client'\nimport type { Asset, AssetDetail, PriceHistory, AssetFilter } from '@/lib/types'\n\ninterface AssetPrice {\n  symbol: string\n  price: number\n  change: number\n  change_percent: number\n  timestamp: string\n  high: number\n  low: number\n  open: number\n  volume: number\n}\n\ninterface AssetFundamentals {\n  symbol: string\n  name: string\n  metrics: {\n    market_cap: number\n    pe_ratio: number\n    pb_ratio: number\n    eps: number\n    dividend_yield: number\n    beta: number\n    revenue: number\n    net_income: number\n    total_assets: number\n    total_debt: number\n  }\n  timestamp: string\n}\n\ninterface AssetNews {\n  symbol: string\n  news: any[]\n  message: string\n}\n\nexport const assetsApi = {\n  list(filter: AssetFilter, limit: number = 20, offset: number = 0): Promise<Asset[]> {\n    return apiClient.get('/assets/', {\n      params: { ...filter, limit, offset },\n    })\n  },\n\n  get(symbol: string): Promise<AssetDetail> {\n    return apiClient.get(`/assets/${symbol}`)\n  },\n\n  getPrice(symbol: string): Promise<AssetPrice> {\n    return apiClient.get(`/assets/${symbol}/price`)\n  },\n\n  getHistorical(\n    symbol: string,\n    from_date?: string,\n    to_date?: string,\n    interval: string = '1d'\n  ): Promise<PriceHistory[]> {\n    const params: Record<string, string | number> = { interval }\n    if (from_date) params.from_date = from_date\n    if (to_date) params.to_date = to_date\n    return apiClient.get(`/assets/${symbol}/historical`, { params })\n  },\n\n  getFundamentals(symbol: string): Promise<AssetFundamentals> {\n    return apiClient.get(`/assets/${symbol}/fundamentals`)\n  },\n\n  getNews(symbol: string, limit: number = 10): Promise<AssetNews> {\n    return apiClient.get(`/assets/${symbol}/news`, {\n      params: { limit },\n    })\n  },\n}\n"],"names":[],"mappings":";;;;AAAA;;;CAGC,GAED;;AAuCO,MAAM,YAAY;IACvB,MAAK,MAAmB,EAAE,QAAgB,EAAE,EAAE,SAAiB,CAAC;QAC9D,OAAO,+JAAS,CAAC,GAAG,CAAC,YAAY;YAC/B,QAAQ;gBAAE,GAAG,MAAM;gBAAE;gBAAO;YAAO;QACrC;IACF;IAEA,KAAI,MAAc;QAChB,OAAO,+JAAS,CAAC,GAAG,CAAC,CAAC,QAAQ,EAAE,QAAQ;IAC1C;IAEA,UAAS,MAAc;QACrB,OAAO,+JAAS,CAAC,GAAG,CAAC,CAAC,QAAQ,EAAE,OAAO,MAAM,CAAC;IAChD;IAEA,eACE,MAAc,EACd,SAAkB,EAClB,OAAgB,EAChB,WAAmB,IAAI;QAEvB,MAAM,SAA0C;YAAE;QAAS;QAC3D,IAAI,WAAW,OAAO,SAAS,GAAG;QAClC,IAAI,SAAS,OAAO,OAAO,GAAG;QAC9B,OAAO,+JAAS,CAAC,GAAG,CAAC,CAAC,QAAQ,EAAE,OAAO,WAAW,CAAC,EAAE;YAAE;QAAO;IAChE;IAEA,iBAAgB,MAAc;QAC5B,OAAO,+JAAS,CAAC,GAAG,CAAC,CAAC,QAAQ,EAAE,OAAO,aAAa,CAAC;IACvD;IAEA,SAAQ,MAAc,EAAE,QAAgB,EAAE;QACxC,OAAO,+JAAS,CAAC,GAAG,CAAC,CAAC,QAAQ,EAAE,OAAO,KAAK,CAAC,EAAE;YAC7C,QAAQ;gBAAE;YAAM;QAClB;IACF;AACF"}},
    {"offset": {"line": 1641, "column": 0}, "map": {"version":3,"sources":["file:///Users/sergi/Desktop/Projects/FinanceHub/apps/frontend/src/lib/utils/technical-indicators.ts"],"sourcesContent":["import { OHLCVData } from '@/components/charts/TradingViewChart'\n\nexport type { OHLCVData }\n\nexport interface IndicatorConfig {\n  sma20?: boolean\n  sma50?: boolean\n  sma200?: boolean\n  ema12?: boolean\n  ema26?: boolean\n  rsi?: boolean\n  rsiPeriod?: number\n  rsiOverbought?: number\n  rsiOversold?: number\n  macd?: boolean\n  macdFast?: number\n  macdSlow?: number\n  macdSignal?: number\n  bollinger?: boolean\n  bollingerPeriod?: number\n  bollingerStdDev?: number\n}\n\nexport interface IndicatorResult {\n  sma20?: number[]\n  sma50?: number[]\n  sma200?: number[]\n  ema12?: number[]\n  ema26?: number[]\n  rsi?: number[]\n  macd?: {\n    macd: number[]\n    signal: number[]\n    histogram: number[]\n  }\n  bollinger?: {\n    upper: number[]\n    middle: number[]\n    lower: number[]\n  }\n}\n\nexport function calculateSMA(data: number[], period: number): number[] {\n  const result: number[] = []\n  for (let i = 0; i < data.length; i++) {\n    if (i < period - 1) {\n      result.push(NaN)\n    } else {\n      let sum = 0\n      for (let j = 0; j < period; j++) {\n        sum += data[i - j]\n      }\n      result.push(sum / period)\n    }\n  }\n  return result\n}\n\nexport function calculateEMA(data: number[], period: number): number[] {\n  const result: number[] = []\n  const multiplier = 2 / (period + 1)\n  \n  for (let i = 0; i < data.length; i++) {\n    if (i === 0) {\n      result.push(data[0])\n    } else if (i < period) {\n      result.push(NaN)\n    } else if (i === period) {\n      let sum = 0\n      for (let j = 0; j < period; j++) {\n        sum += data[i - j]\n      }\n      result.push(sum / period)\n    } else {\n      const ema = (data[i] - result[i - 1]) * multiplier + result[i - 1]\n      result.push(ema)\n    }\n  }\n  return result\n}\n\nexport function calculateRSI(data: number[], period: number = 14): number[] {\n  const result: number[] = []\n  const gains: number[] = []\n  const losses: number[] = []\n\n  for (let i = 0; i < data.length; i++) {\n    if (i === 0) {\n      result.push(NaN)\n      continue\n    }\n\n    const change = data[i] - data[i - 1]\n    gains.push(change > 0 ? change : 0)\n    losses.push(change < 0 ? -change : 0)\n\n    if (i < period) {\n      result.push(NaN)\n    } else if (i === period) {\n      const avgGain = gains.slice(0, period).reduce((a, b) => a + b, 0) / period\n      const avgLoss = losses.slice(0, period).reduce((a, b) => a + b, 0) / period\n      const rs = avgGain / (avgLoss || 0.0001)\n      result.push(100 - (100 / (1 + rs)))\n    } else {\n      const prevResult = result[i - 1]\n      const avgGain = (gains.slice(-period - 1, -1).reduce((a, b) => a + b, 0) + gains[gains.length - 1]) / period\n      const avgLoss = (losses.slice(-period - 1, -1).reduce((a, b) => a + b, 0) + losses[losses.length - 1]) / period\n      const rs = avgGain / (avgLoss || 0.0001)\n      result.push(100 - (100 / (1 + rs)))\n    }\n  }\n  return result\n}\n\nexport function calculateMACD(\n  data: number[],\n  fastPeriod: number = 12,\n  slowPeriod: number = 26,\n  signalPeriod: number = 9\n): { macd: number[]; signal: number[]; histogram: number[] } {\n  const fastEMA = calculateEMA(data, fastPeriod)\n  const slowEMA = calculateEMA(data, slowPeriod)\n  \n  const macdLine: number[] = []\n  for (let i = 0; i < data.length; i++) {\n    if (fastEMA[i] === undefined || slowEMA[i] === undefined || isNaN(fastEMA[i]) || isNaN(slowEMA[i])) {\n      macdLine.push(NaN)\n    } else {\n      macdLine.push(fastEMA[i] - slowEMA[i])\n    }\n  }\n\n  const signalLine = calculateEMA(\n    macdLine.filter(v => !isNaN(v)),\n    signalPeriod\n  )\n\n  const macdValidStart = slowPeriod - 1\n  const signalStart = macdValidStart + signalPeriod - 1\n  \n  const histogram: number[] = []\n  for (let i = 0; i < data.length; i++) {\n    if (i < signalStart) {\n      histogram.push(NaN)\n    } else {\n      const macdIdx = i - macdValidStart\n      const signalIdx = i - signalStart\n      const macdVal = macdLine[macdIdx]\n      const signalVal = signalLine[signalIdx]\n      if (isNaN(macdVal) || isNaN(signalVal)) {\n        histogram.push(NaN)\n      } else {\n        histogram.push(macdVal - signalVal)\n      }\n    }\n  }\n\n  return {\n    macd: macdLine,\n    signal: signalLine,\n    histogram,\n  }\n}\n\nexport function calculateBollingerBands(data: number[], period: number = 20, stdDev: number = 2): {\n  upper: number[]\n  middle: number[]\n  lower: number[]\n} {\n  const middle = calculateSMA(data, period)\n  const upper: number[] = []\n  const lower: number[] = []\n\n  for (let i = 0; i < data.length; i++) {\n    if (isNaN(middle[i])) {\n      upper.push(NaN)\n      lower.push(NaN)\n    } else {\n      let sumSquares = 0\n      let count = 0\n      for (let j = 0; j < period; j++) {\n        if (i - j >= 0 && !isNaN(middle[i - j])) {\n          sumSquares += Math.pow(data[i - j] - middle[i], 2)\n          count++\n        }\n      }\n      const stdDevValue = count > 0 ? Math.sqrt(sumSquares / count) * stdDev : 0\n      upper.push(middle[i] + stdDevValue)\n      lower.push(middle[i] - stdDevValue)\n    }\n  }\n\n  return { upper, middle, lower }\n}\n\nexport function calculateAllIndicators(data: OHLCVData[], config: IndicatorConfig): IndicatorResult {\n  const closes = data.map(d => d.close)\n  const result: IndicatorResult = {}\n\n  if (config.sma20) result.sma20 = calculateSMA(closes, 20)\n  if (config.sma50) result.sma50 = calculateSMA(closes, 50)\n  if (config.sma200) result.sma200 = calculateSMA(closes, 200)\n  if (config.ema12) result.ema12 = calculateEMA(closes, 12)\n  if (config.ema26) result.ema26 = calculateEMA(closes, 26)\n  if (config.rsi) {\n    const rsiPeriod = config.rsiPeriod || 14\n    result.rsi = calculateRSI(closes, rsiPeriod)\n  }\n  if (config.macd) {\n    const fastPeriod = config.macdFast || 12\n    const slowPeriod = config.macdSlow || 26\n    const signalPeriod = config.macdSignal || 9\n    result.macd = calculateMACD(closes, fastPeriod, slowPeriod, signalPeriod)\n  }\n  if (config.bollinger) {\n    const period = config.bollingerPeriod || 20\n    const stdDev = config.bollingerStdDev || 2\n    result.bollinger = calculateBollingerBands(closes, period, stdDev)\n  }\n\n  return result\n}\n\nexport function formatIndicatorValue(value: number | undefined): string {\n  if (value === undefined || isNaN(value)) return '--'\n  if (Math.abs(value) >= 1000) {\n    return value.toFixed(0)\n  } else if (Math.abs(value) >= 100) {\n    return value.toFixed(1)\n  } else if (Math.abs(value) >= 10) {\n    return value.toFixed(2)\n  } else {\n    return value.toFixed(3)\n  }\n}\n\nexport function getRSISignal(rsi: number, overbought: number = 70, oversold: number = 30): 'overbought' | 'oversold' | 'neutral' {\n  if (rsi >= overbought) return 'overbought'\n  if (rsi <= oversold) return 'oversold'\n  return 'neutral'\n}\n\nexport function getMACDSignal(macd: number, signal: number): 'bullish' | 'bearish' | 'neutral' {\n  if (macd > signal) return 'bullish'\n  if (macd < signal) return 'bearish'\n  return 'neutral'\n}\n\nexport const INDICATOR_DESCRIPTIONS = {\n  sma20: {\n    name: 'SMA 20',\n    fullName: 'Simple Moving Average (20 periods)',\n    description: 'The average closing price over the last 20 periods. Shows medium-term trend direction.',\n    interpretation: 'Price above SMA 20 suggests bullish momentum. Price below suggests bearish momentum.',\n    color: '#3b82f6',\n  },\n  sma50: {\n    name: 'SMA 50',\n    fullName: 'Simple Moving Average (50 periods)',\n    description: 'The average closing price over the last 50 periods. Used to identify medium-term trend.',\n    interpretation: 'When price crosses above SMA 50, it may indicate a trend reversal to bullish.',\n    color: '#22c55e',\n  },\n  sma200: {\n    name: 'SMA 200',\n    fullName: 'Simple Moving Average (200 periods)',\n    description: 'The average closing price over the last 200 periods. Considered a key long-term trend indicator.',\n    interpretation: 'Price above SMA 200 is in a long-term bullish trend. Often called the \"life line\" of the chart.',\n    color: '#f59e0b',\n  },\n  ema12: {\n    name: 'EMA 12',\n    fullName: 'Exponential Moving Average (12 periods)',\n    description: 'A weighted moving average that gives more importance to recent prices. Responds faster to price changes.',\n    interpretation: 'EMA 12 reacts quicker to price movements than SMA, useful for short-term trading signals.',\n    color: '#8b5cf6',\n  },\n  ema26: {\n    name: 'EMA 26',\n    fullName: 'Exponential Moving Average (26 periods)',\n    description: 'A weighted moving average over 26 periods, commonly used in MACD calculation.',\n    interpretation: 'Compare with EMA 12 to identify momentum shifts in the market.',\n    color: '#ec4899',\n  },\n  rsi: {\n    name: 'RSI',\n    fullName: 'Relative Strength Index',\n    description: 'Momentum oscillator that measures the speed and change of price movements. Scale: 0-100.',\n    interpretation: 'RSI above 70 = Overbought (potential sell). RSI below 30 = Oversold (potential buy).',\n    defaultPeriod: 14,\n    overbought: 70,\n    oversold: 30,\n  },\n  macd: {\n    name: 'MACD',\n    fullName: 'Moving Average Convergence Divergence',\n    description: 'Shows the relationship between two EMAs. Consists of MACD line, Signal line, and Histogram.',\n    interpretation: 'MACD above Signal = Bullish. MACD below Signal = Bearish. Histogram shows momentum strength.',\n    defaultFast: 12,\n    defaultSlow: 26,\n    defaultSignal: 9,\n  },\n  bollinger: {\n    name: 'Bollinger Bands',\n    fullName: 'Bollinger Bands',\n    description: 'Three lines: Middle band (SMA), Upper band (+2 std dev), Lower band (-2 std dev). Measures volatility.',\n    interpretation: 'Price near upper band = potentially overbought. Price near lower band = potentially oversold. Bands widen during high volatility.',\n    defaultPeriod: 20,\n    defaultStdDev: 2,\n  },\n}\n"],"names":[],"mappings":"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ACpC,OAAO;QACL,MAAM;QACN,UAAU;QACV,aAAa;QACb,gBAAgB;QAChB,OAAO;IACT;IACA,OAAO;QACL,MAAM;QACN,UAAU;QACV,aAAa;QACb,gBAAgB;QAChB,OAAO;IACT;IACA,QAAQ;QACN,MAAM;QACN,UAAU;QACV,aAAa;QACb,gBAAgB;QAChB,OAAO;IACT;IACA,OAAO;QACL,MAAM;QACN,UAAU;QACV,aAAa;QACb,gBAAgB;QAChB,OAAO;IACT;IACA,OAAO;QACL,MAAM;QACN,UAAU;QACV,aAAa;QACb,gBAAgB;QAChB,OAAO;IACT;IACA,KAAK;QACH,MAAM;QACN,UAAU;QACV,aAAa;QACb,gBAAgB;QAChB,eAAe;QACf,YAAY;QACZ,UAAU;IACZ;IACA,MAAM;QACJ,MAAM;QACN,UAAU;QACV,aAAa;QACb,gBAAgB;QAChB,aAAa;QACb,aAAa;QACb,eAAe;IACjB;IACA,WAAW;QACT,MAAM;QACN,UAAU;QACV,aAAa;QACb,gBAAgB;QAChB,eAAe;QACf,eAAe;IACjB;AACF"}},
    {"offset": {"line": 1909, "column": 0}, "map": {"version":3,"sources":["file:///Users/sergi/Desktop/Projects/FinanceHub/apps/frontend/src/lib/constants/realtime.ts"],"sourcesContent":["/**\n * Real-Time Data Constants\n * WebSocket, chart, and order book configuration\n */\n\nexport const WS_CONFIG = {\n  RECONNECT_DELAYS: [1000, 2000, 4000, 8000, 16000, 30000] as number[],\n  MAX_RECONNECT_ATTEMPTS: 10,\n  HEARTBEAT_INTERVAL: 30000,\n  CONNECT_TIMEOUT: 10000,\n  MESSAGE_BUFFER_SIZE: 50,\n  TRADE_FEED_LIMIT: 20,\n} as const\n\nexport const CHART_CONFIG = {\n  BUFFER_SIZES: {\n    '1m': 500,\n    '5m': 300,\n    '15m': 200,\n    '30m': 200,\n    '1h': 200,\n    '4h': 100,\n    '1d': 100,\n    '1w': 50,\n    '3m': 100,\n    '6m': 50,\n    '1M': 30,\n    '1y': 20,\n  } as const,\n  DEFAULT_TIMEFRAME: '1h' as const,\n  UPDATE_INTERVAL: 2000,\n} as const\n\nexport const ORDERBOOK_CONFIG = {\n  DEFAULT_DEPTH: 10,\n  MAX_DEPTH: 100,\n  DEPTH_OPTIONS: [10, 20, 50, 100] as const,\n  UPDATE_DEBOUNCE_MS: 100,\n} as const\n\nexport const TICKER_CONFIG = {\n  SCROLL_SPEED: 30,\n  PAUSE_ON_HOVER: true,\n  FLASH_DURATION: 500,\n  MAX_SYMBOLS: 50,\n} as const\n\nexport const CONNECTION_STATES = {\n  DISCONNECTED: 'disconnected',\n  CONNECTING: 'connecting',\n  CONNECTED: 'connected',\n  ERROR: 'error',\n} as const\n\nexport const CONNECTION_MESSAGES = {\n  [CONNECTION_STATES.DISCONNECTED]: 'Disconnected from real-time data',\n  [CONNECTION_STATES.CONNECTING]: 'Connecting to real-time data...',\n  [CONNECTION_STATES.CONNECTED]: 'Connected to real-time data',\n  [CONNECTION_STATES.ERROR]: 'Connection failed',\n} as const\n\nexport type ConnectionState = typeof CONNECTION_STATES[keyof typeof CONNECTION_STATES]\nexport type ChartTimeframe = keyof typeof CHART_CONFIG.BUFFER_SIZES\nexport type OrderBookDepth = typeof ORDERBOOK_CONFIG.DEPTH_OPTIONS[number]\nexport type TradeFilter = 'all' | 'buys' | 'sells'\n\nexport interface ChartDataPoint {\n  time: number | string\n  price: number\n  volume: number\n  timestamp?: number | string\n  open?: number\n  high?: number\n  low?: number\n  close?: number\n}\n"],"names":[],"mappings":"AAAA;;;CAGC;;;;;;;;;;;;;;AAEM,MAAM,YAAY;IACvB,kBAAkB;QAAC;QAAM;QAAM;QAAM;QAAM;QAAO;KAAM;IACxD,wBAAwB;IACxB,oBAAoB;IACpB,iBAAiB;IACjB,qBAAqB;IACrB,kBAAkB;AACpB;AAEO,MAAM,eAAe;IAC1B,cAAc;QACZ,MAAM;QACN,MAAM;QACN,OAAO;QACP,OAAO;QACP,MAAM;QACN,MAAM;QACN,MAAM;QACN,MAAM;QACN,MAAM;QACN,MAAM;QACN,MAAM;QACN,MAAM;IACR;IACA,mBAAmB;IACnB,iBAAiB;AACnB;AAEO,MAAM,mBAAmB;IAC9B,eAAe;IACf,WAAW;IACX,eAAe;QAAC;QAAI;QAAI;QAAI;KAAI;IAChC,oBAAoB;AACtB;AAEO,MAAM,gBAAgB;IAC3B,cAAc;IACd,gBAAgB;IAChB,gBAAgB;IAChB,aAAa;AACf;AAEO,MAAM,oBAAoB;IAC/B,cAAc;IACd,YAAY;IACZ,WAAW;IACX,OAAO;AACT;AAEO,MAAM,sBAAsB;IACjC,CAAC,kBAAkB,YAAY,CAAC,EAAE;IAClC,CAAC,kBAAkB,UAAU,CAAC,EAAE;IAChC,CAAC,kBAAkB,SAAS,CAAC,EAAE;IAC/B,CAAC,kBAAkB,KAAK,CAAC,EAAE;AAC7B"}},
    {"offset": {"line": 1995, "column": 0}, "map": {"version":3,"sources":["file:///Users/sergi/Desktop/Projects/FinanceHub/apps/frontend/src/lib/api/websocket.ts"],"sourcesContent":["/**\n * WebSocket Client\n * Manages WebSocket connections with auto-reconnection and event emission\n */\n\nimport { apiClient } from './client'\nimport type {\n  WebSocketMessage,\n  SubscriptionRequest,\n  WebSocketConfig,\n} from '@/lib/types/realtime'\nimport type { ConnectionState } from '@/lib/constants/realtime'\nimport { WS_CONFIG, CONNECTION_STATES } from '@/lib/constants/realtime'\n\ntype EventHandler = (data: any) => void\n\nclass WebSocketClient {\n  private ws: WebSocket | null = null\n  private config: WebSocketConfig\n  private connectionState: ConnectionState = CONNECTION_STATES.DISCONNECTED\n  private reconnectAttempts = 0\n  private reconnectTimeout: NodeJS.Timeout | null = null\n  private heartbeatInterval: NodeJS.Timeout | null = null\n  private connectTimeout: NodeJS.Timeout | null = null\n  private eventHandlers: Map<string, Set<EventHandler>> = new Map()\n  private subscriptions: Set<string> = new Set()\n  private lastPongTime: number = Date.now()\n\n  constructor(config: WebSocketConfig) {\n    this.config = config\n  }\n\n  connect(token?: string): Promise<void> {\n    return new Promise((resolve, reject) => {\n      if (this.connectionState === CONNECTION_STATES.CONNECTED) {\n        resolve()\n        return\n      }\n\n      if (this.connectionState === CONNECTION_STATES.CONNECTING) {\n        reject(new Error('Already connecting'))\n        return\n      }\n\n      this.setConnectionState(CONNECTION_STATES.CONNECTING)\n      this.clearTimeouts()\n\n      let wsUrl = this.config.url\n      if (token) {\n        const separator = wsUrl.includes('?') ? '&' : '?'\n        wsUrl = `${wsUrl}${separator}token=${token}`\n      }\n\n      this.ws = new WebSocket(wsUrl)\n\n      this.ws.onopen = () => {\n        this.clearTimeouts()\n        this.reconnectAttempts = 0\n        this.setConnectionState(CONNECTION_STATES.CONNECTED)\n        this.startHeartbeat()\n        \n        this.emit('connection', { state: CONNECTION_STATES.CONNECTED })\n        resolve()\n      }\n\n      this.ws.onmessage = (event) => {\n        try {\n          const message: WebSocketMessage = JSON.parse(event.data)\n          this.handleMessage(message)\n        } catch (error) {\n          console.error('Failed to parse WebSocket message:', error)\n        }\n      }\n\n      this.ws.onclose = (event) => {\n        this.handleClose(event)\n      }\n\n      this.ws.onerror = (error) => {\n        this.setConnectionState(CONNECTION_STATES.ERROR)\n        this.emit('connection', { state: CONNECTION_STATES.ERROR, error })\n        reject(new Error('WebSocket connection failed'))\n      }\n\n      this.connectTimeout = setTimeout(() => {\n        if (this.connectionState === CONNECTION_STATES.CONNECTING) {\n          this.ws?.close()\n          reject(new Error('Connection timeout'))\n        }\n      }, this.config.connectTimeout)\n    })\n  }\n\n  disconnect(): void {\n    this.clearTimeouts()\n    this.subscriptions.clear()\n    \n    if (this.ws) {\n      this.ws.close(1000, 'Client disconnecting')\n      this.ws = null\n    }\n    \n    this.setConnectionState(CONNECTION_STATES.DISCONNECTED)\n    this.emit('connection', { state: CONNECTION_STATES.DISCONNECTED })\n  }\n\n  subscribe(request: SubscriptionRequest): void {\n    if (this.connectionState !== CONNECTION_STATES.CONNECTED) {\n      console.warn('Cannot subscribe: not connected')\n      return\n    }\n\n    request.symbols.forEach((symbol) => {\n      request.dataTypes.forEach((dataType) => {\n        const subscriptionKey = `${symbol}:${dataType}`\n        this.subscriptions.add(subscriptionKey)\n        \n        const message: WebSocketMessage = {\n          type: 'subscribe',\n          symbol,\n          dataType: dataType as any,\n          timestamp: new Date().toISOString(),\n        }\n        \n        this.sendMessage(message)\n      })\n    })\n  }\n\n  unsubscribe(symbol: string, dataTypes: string[] = []): void {\n    if (this.connectionState !== CONNECTION_STATES.CONNECTED) {\n      return\n    }\n\n    if (dataTypes.length === 0) {\n      Array.from(this.subscriptions).forEach((sub) => {\n        if (sub.startsWith(`${symbol}:`)) {\n          this.subscriptions.delete(sub)\n        }\n      })\n    } else {\n      dataTypes.forEach((dataType) => {\n        const subscriptionKey = `${symbol}:${dataType}`\n        this.subscriptions.delete(subscriptionKey)\n        \n        const message: WebSocketMessage = {\n          type: 'unsubscribe',\n          symbol,\n          dataType: dataType as any,\n          timestamp: new Date().toISOString(),\n        }\n        \n        this.sendMessage(message)\n      })\n    }\n  }\n\n  unsubscribeAll(): void {\n    if (!this.ws || this.ws.readyState !== WebSocket.OPEN) {\n      return\n    }\n\n    const symbols: string[] = []\n    Array.from(this.subscriptions).forEach((s) => {\n      const symbol = s.split(':')[0]\n      symbols.push(symbol)\n    })\n    const uniqueSymbols = [...new Set(symbols)]\n\n    uniqueSymbols.forEach((symbol) => {\n      this.unsubscribe(symbol)\n    })\n    \n    this.subscriptions.clear()\n  }\n\n  on(event: string, handler: EventHandler): void {\n    if (!this.eventHandlers.has(event)) {\n      this.eventHandlers.set(event, new Set())\n    }\n    this.eventHandlers.get(event)!.add(handler)\n  }\n\n  off(event: string, handler: EventHandler): void {\n    const handlers = this.eventHandlers.get(event)\n    if (handlers) {\n      handlers.delete(handler)\n      if (handlers.size === 0) {\n        this.eventHandlers.delete(event)\n      }\n    }\n  }\n\n  getConnectionState(): ConnectionState {\n    return this.connectionState\n  }\n\n  getPingMs(): number {\n    return Date.now() - this.lastPongTime\n  }\n\n  private sendMessage(message: WebSocketMessage): void {\n    if (this.ws && this.ws.readyState === WebSocket.OPEN) {\n      this.ws.send(JSON.stringify(message))\n    }\n  }\n\n  private handleMessage(message: WebSocketMessage): void {\n    switch (message.type) {\n      case 'data_update':\n      case 'initial_data':\n        this.emit('data', message)\n        break\n      \n      case 'subscription_ack':\n        this.emit('subscription', message)\n        break\n      \n      case 'unsubscribe_ack':\n        this.emit('unsubscription', message)\n        break\n      \n      case 'pong':\n        this.lastPongTime = Date.now()\n        break\n      \n      case 'error':\n        console.error('WebSocket error:', message.error)\n        this.emit('error', message)\n        break\n    }\n  }\n\n  private handleClose(event: CloseEvent): void {\n    this.clearTimeouts()\n    this.setConnectionState(CONNECTION_STATES.DISCONNECTED)\n\n    if (this.reconnectAttempts < this.config.maxReconnectAttempts) {\n      this.scheduleReconnect()\n    } else {\n      this.emit('connection', {\n        state: CONNECTION_STATES.ERROR,\n        error: 'Max reconnect attempts reached',\n      })\n    }\n  }\n\n  private scheduleReconnect(): void {\n    const delay = this.config.reconnectDelays[\n      Math.min(this.reconnectAttempts, this.config.reconnectDelays.length - 1)\n    ]\n\n    this.reconnectTimeout = setTimeout(() => {\n      this.reconnectAttempts++\n      this.setConnectionState(CONNECTION_STATES.CONNECTING)\n      this.emit('connection', { state: CONNECTION_STATES.CONNECTING })\n      this.connect()\n    }, delay)\n  }\n\n  private startHeartbeat(): void {\n    this.heartbeatInterval = setInterval(() => {\n      if (this.ws && this.ws.readyState === WebSocket.OPEN) {\n        this.sendMessage({\n          type: 'ping',\n          timestamp: new Date().toISOString(),\n        })\n      }\n    }, this.config.heartbeatInterval)\n  }\n\n  private clearTimeouts(): void {\n    if (this.reconnectTimeout) {\n      clearTimeout(this.reconnectTimeout)\n      this.reconnectTimeout = null\n    }\n    \n    if (this.connectTimeout) {\n      clearTimeout(this.connectTimeout)\n      this.connectTimeout = null\n    }\n    \n    if (this.heartbeatInterval) {\n      clearInterval(this.heartbeatInterval)\n      this.heartbeatInterval = null\n    }\n  }\n\n  private setConnectionState(state: ConnectionState): void {\n    this.connectionState = state\n  }\n\n  private emit(event: string, data: any): void {\n    const handlers = this.eventHandlers.get(event)\n    if (handlers) {\n      handlers.forEach((handler) => {\n        try {\n          handler(data)\n        } catch (error) {\n          console.error(`Error in ${event} handler:`, error)\n        }\n      })\n    }\n  }\n}\n\nlet wsClientInstance: WebSocketClient | null = null\n\nexport function getWebSocketClient(): WebSocketClient {\n  if (!wsClientInstance) {\n    const config: WebSocketConfig = {\n      url: process.env.NEXT_PUBLIC_WS_URL || 'ws://localhost:8000/ws/realtime/',\n      reconnectDelays: WS_CONFIG.RECONNECT_DELAYS,\n      maxReconnectAttempts: WS_CONFIG.MAX_RECONNECT_ATTEMPTS,\n      heartbeatInterval: WS_CONFIG.HEARTBEAT_INTERVAL,\n      connectTimeout: WS_CONFIG.CONNECT_TIMEOUT,\n    }\n    \n    wsClientInstance = new WebSocketClient(config)\n  }\n  \n  return wsClientInstance\n}\n\nexport function resetWebSocketClient(): void {\n  if (wsClientInstance) {\n    wsClientInstance.disconnect()\n    wsClientInstance = null\n  }\n}\n\n// ================= WEBSOCKET AUTH API (I6) =================\n\nexport interface TokenResponse {\n  access_token: string\n  refresh_token?: string\n  token_type: string\n  expires_in: number\n  user_id: string\n  username: string\n  tier: string\n}\n\nexport interface RefreshTokenRequest {\n  refresh_token: string\n}\n\nexport interface TokenVerifyResponse {\n  valid: boolean\n  user_id?: string\n  username?: string\n  email?: string\n  tier?: string\n  expires_at?: string\n  subscriptions_remaining?: number\n}\n\nexport interface UserQuotaResponse {\n  user_id: string\n  tier: string\n  connections: {\n    current: number\n    max: number\n  }\n  subscriptions: Record<string, unknown>\n  rate_limit: Record<string, unknown>\n  messages: Record<string, unknown>\n}\n\nexport interface ConnectionInfo {\n  connection_id: string\n  connected_at: string\n  subscriptions: string[]\n  messages_sent: number\n  messages_received: number\n}\n\nexport interface UserConnectionsResponse {\n  user_id: string\n  total_connections: number\n  connections: ConnectionInfo[]\n  max_connections: number\n}\n\nexport interface SubscribePreCheckResponse {\n  allowed: boolean\n  symbol: string\n  current_subscriptions: number\n  message: string\n}\n\nexport interface AuthStatsResponse {\n  session_stats: Record<string, unknown>\n  quota_stats: Record<string, unknown>\n  blocked_count: number\n}\n\nconst WS_API = '/ws'\n\nexport const websocketApi = {\n  // ================= TOKEN MANAGEMENT =================\n\n  getToken(username: string, password: string): Promise<TokenResponse> {\n    return apiClient.post(`${WS_API}/auth/token`, null, {\n      params: { username, password },\n    })\n  },\n\n  refreshToken(refreshToken: string): Promise<TokenResponse> {\n    return apiClient.post(`${WS_API}/auth/token/refresh`, {\n      refresh_token: refreshToken,\n    })\n  },\n\n  verifyToken(token: string): Promise<TokenVerifyResponse> {\n    return apiClient.get(`${WS_API}/auth/verify`, {\n      params: { token },\n    })\n  },\n\n  // ================= QUOTA & CONNECTIONS =================\n\n  getUserQuota(userId: string): Promise<UserQuotaResponse> {\n    return apiClient.get(`${WS_API}/auth/quota`, {\n      params: { user_id: userId },\n    })\n  },\n\n  getUserConnections(userId: string): Promise<UserConnectionsResponse> {\n    return apiClient.get(`${WS_API}/auth/connections`, {\n      params: { user_id: userId },\n    })\n  },\n\n  checkSubscriptionPreCheck(symbol: string, channel: string = 'price'): Promise<SubscribePreCheckResponse> {\n    return apiClient.post(`${WS_API}/auth/subscription/pre-check`, {\n      symbol,\n      channel,\n    })\n  },\n\n  // ================= AUTH STATS =================\n\n  getAuthStats(): Promise<AuthStatsResponse> {\n    return apiClient.get(`${WS_API}/auth/stats`)\n  },\n\n  getBlockedUsers(): Promise<{ blocked_users: string[]; count: number }> {\n    return apiClient.get(`${WS_API}/auth/blocked`)\n  },\n\n  blockUser(userId: string, reason: string = 'Manual block'): Promise<{\n    success: boolean\n    user_id: string\n    blocked_until: string\n    message: string\n  }> {\n    return apiClient.post(`${WS_API}/auth/block`, {\n      user_id: userId,\n      reason,\n    })\n  },\n\n  unblockUser(userId: string): Promise<{\n    success: boolean\n    user_id: string\n    message: string\n  }> {\n    return apiClient.post(`${WS_API}/auth/unblock`, null, {\n      params: { user_id: userId },\n    })\n  },\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 2354, "column": 0}, "map": {"version":3,"sources":["file:///Users/sergi/Desktop/Projects/FinanceHub/apps/frontend/src/lib/constants/indicators.ts"],"sourcesContent":["// Technical Indicator Constants\nexport const INDICATOR_CATEGORIES = {\n  trend: {\n    label: 'Trend Indicators',\n    indicators: ['sma', 'ema', 'wma', 'ichimoku', 'parabolic_sar'],\n  },\n  momentum: {\n    label: 'Momentum Indicators',\n    indicators: ['rsi', 'stochastic', 'cci', 'williams_r', 'mfi'],\n  },\n  volatility: {\n    label: 'Volatility Indicators',\n    indicators: ['bollinger', 'atr'],\n  },\n  volume: {\n    label: 'Volume Indicators',\n    indicators: ['obv', 'ad', 'mfi'],\n  },\n} as const\n\nexport const INDICATOR_LABELS: Record<string, string> = {\n  sma: 'Simple Moving Average',\n  ema: 'Exponential Moving Average',\n  wma: 'Weighted Moving Average',\n  bollinger: 'Bollinger Bands',\n  rsi: 'Relative Strength Index',\n  macd: 'Moving Average Convergence Divergence',\n  stochastic: 'Stochastic Oscillator',\n  cci: 'Commodity Channel Index',\n  williams_r: 'Williams %R',\n  atr: 'Average True Range',\n  obv: 'On-Balance Volume',\n  mfi: 'Money Flow Index',\n  ad: 'Accumulation/Distribution Line',\n  ichimoku: 'Ichimoku Cloud',\n  parabolic_sar: 'Parabolic SAR',\n} as const\n\nexport const INDICATOR_COLORS = {\n  primary: '#3b82f6',\n  secondary: '#8b5cf6',\n  tertiary: '#06b6d4',\n  quaternary: '#10b981',\n  bullish: '#22c55e',\n  bearish: '#ef4444',\n  neutral: '#f59e0b',\n} as const\n\nexport const RSI_LEVELS = {\n  overbought: 70,\n  oversold: 30,\n} as const\n\nexport const MACD_SIGNALS = {\n  bullish: 'crossover',\n  bearish: 'crossunder',\n} as const\n\nexport const BOLLINGER_BANDS_DEFAULTS = {\n  period: 20,\n  stdDev: 2,\n  upperMultiplier: 2,\n  lowerMultiplier: 2,\n} as const\n\nexport const TIMEFRAMES = [\n  { value: '1m', label: '1 Minute', seconds: 60 },\n  { value: '5m', label: '5 Minutes', seconds: 300 },\n  { value: '15m', label: '15 Minutes', seconds: 900 },\n  { value: '1h', label: '1 Hour', seconds: 3600 },\n  { value: '4h', label: '4 Hours', seconds: 14400 },\n  { value: '1d', label: '1 Day', seconds: 86400 },\n  { value: '1w', label: '1 Week', seconds: 604800 },\n] as const\n\nexport const CHART_UPDATE_INTERVAL = 2000 // ms\nexport const INDICATOR_BUFFER_SIZE = 200 // data points\n\n// Drawing tool types\nexport const DRAWING_TOOLS = [\n  { type: 'horizontal_line', label: 'Horizontal Line', icon: 'minus' },\n  { type: 'vertical_line', label: 'Vertical Line', icon: 'minus' },\n  { type: 'trend_line', label: 'Trend Line', icon: 'trending-up' },\n  { type: 'support_resistance', label: 'Support/Resistance', icon: 'minus' },\n  { type: 'fibonacci', label: 'Fibonacci Retracement', icon: 'activity' },\n  { type: 'rectangle', label: 'Rectangle', icon: 'square' },\n  { type: 'text', label: 'Text Annotation', icon: 'type' },\n] as const\n\nexport const FIBONACCI_LEVELS = [0, 0.236, 0.382, 0.5, 0.618, 0.786, 1] as const\n\nexport const DEFAULT_INDICATORS: string[] = ['sma', 'rsi', 'macd']\n"],"names":[],"mappings":"AAAA,gCAAgC;;;;;;;;;;;;;;;;;;;;;;;;;;;AACzB,MAAM,uBAAuB;IAClC,OAAO;QACL,OAAO;QACP,YAAY;YAAC;YAAO;YAAO;YAAO;YAAY;SAAgB;IAChE;IACA,UAAU;QACR,OAAO;QACP,YAAY;YAAC;YAAO;YAAc;YAAO;YAAc;SAAM;IAC/D;IACA,YAAY;QACV,OAAO;QACP,YAAY;YAAC;YAAa;SAAM;IAClC;IACA,QAAQ;QACN,OAAO;QACP,YAAY;YAAC;YAAO;YAAM;SAAM;IAClC;AACF;AAEO,MAAM,mBAA2C;IACtD,KAAK;IACL,KAAK;IACL,KAAK;IACL,WAAW;IACX,KAAK;IACL,MAAM;IACN,YAAY;IACZ,KAAK;IACL,YAAY;IACZ,KAAK;IACL,KAAK;IACL,KAAK;IACL,IAAI;IACJ,UAAU;IACV,eAAe;AACjB;AAEO,MAAM,mBAAmB;IAC9B,SAAS;IACT,WAAW;IACX,UAAU;IACV,YAAY;IACZ,SAAS;IACT,SAAS;IACT,SAAS;AACX;AAEO,MAAM,aAAa;IACxB,YAAY;IACZ,UAAU;AACZ;AAEO,MAAM,eAAe;IAC1B,SAAS;IACT,SAAS;AACX;AAEO,MAAM,2BAA2B;IACtC,QAAQ;IACR,QAAQ;IACR,iBAAiB;IACjB,iBAAiB;AACnB;AAEO,MAAM,aAAa;IACxB;QAAE,OAAO;QAAM,OAAO;QAAY,SAAS;IAAG;IAC9C;QAAE,OAAO;QAAM,OAAO;QAAa,SAAS;IAAI;IAChD;QAAE,OAAO;QAAO,OAAO;QAAc,SAAS;IAAI;IAClD;QAAE,OAAO;QAAM,OAAO;QAAU,SAAS;IAAK;IAC9C;QAAE,OAAO;QAAM,OAAO;QAAW,SAAS;IAAM;IAChD;QAAE,OAAO;QAAM,OAAO;QAAS,SAAS;IAAM;IAC9C;QAAE,OAAO;QAAM,OAAO;QAAU,SAAS;IAAO;CACjD;AAEM,MAAM,wBAAwB,KAAK,KAAK;;AACxC,MAAM,wBAAwB,IAAI,cAAc;;AAGhD,MAAM,gBAAgB;IAC3B;QAAE,MAAM;QAAmB,OAAO;QAAmB,MAAM;IAAQ;IACnE;QAAE,MAAM;QAAiB,OAAO;QAAiB,MAAM;IAAQ;IAC/D;QAAE,MAAM;QAAc,OAAO;QAAc,MAAM;IAAc;IAC/D;QAAE,MAAM;QAAsB,OAAO;QAAsB,MAAM;IAAQ;IACzE;QAAE,MAAM;QAAa,OAAO;QAAyB,MAAM;IAAW;IACtE;QAAE,MAAM;QAAa,OAAO;QAAa,MAAM;IAAS;IACxD;QAAE,MAAM;QAAQ,OAAO;QAAmB,MAAM;IAAO;CACxD;AAEM,MAAM,mBAAmB;IAAC;IAAG;IAAO;IAAO;IAAK;IAAO;IAAO;CAAE;AAEhE,MAAM,qBAA+B;IAAC;IAAO;IAAO;CAAO"}},
    {"offset": {"line": 2557, "column": 0}, "map": {"version":3,"sources":["file:///Users/sergi/Desktop/Projects/FinanceHub/apps/frontend/src/lib/types/indicators.ts"],"sourcesContent":["// Technical Indicator Types\nexport type IndicatorType =\n  | 'sma'     // Simple Moving Average\n  | 'ema'     // Exponential Moving Average\n  | 'wma'     // Weighted Moving Average\n  | 'bollinger' // Bollinger Bands\n  | 'rsi'     // Relative Strength Index\n  | 'macd'    // Moving Average Convergence Divergence\n  | 'stochastic' // Stochastic Oscillator\n  | 'cci'     // Commodity Channel Index\n  | 'williams_r' // Williams %R\n  | 'atr'     // Average True Range\n  | 'obv'     // On-Balance Volume\n  | 'mfi'     // Money Flow Index\n  | 'ad'      // Accumulation/Distribution Line\n  | 'ichimoku' // Ichimoku Cloud\n  | 'parabolic_sar' // Parabolic SAR\n\nexport type DrawingType =\n  | 'horizontal_line'\n  | 'vertical_line'\n  | 'trend_line'\n  | 'fibonacci'\n  | 'rectangle'\n  | 'text'\n\nexport type TimeFrame = '1m' | '5m' | '15m' | '30m' | '1h' | '4h' | '1d' | '1w' | '1M' | '3m' | '6m' | '1y'\nexport type TimeInterval = TimeFrame\n\nexport interface IndicatorConfig {\n  type: IndicatorType\n  params: Record<string, number>\n  visible: boolean\n  color: string\n  secondary_yaxis?: boolean\n}\n\nexport interface IndicatorData {\n  indicator: IndicatorType\n  symbol: string\n  timeframe: TimeFrame\n  values: Array<{\n    timestamp: string\n    value: number\n    signal?: 'buy' | 'sell' | 'neutral'\n  }>\n  params: Record<string, number>\n  calculated_at: string\n}\n\nexport interface ChartDataPoint {\n  timestamp: string\n  open: number\n  high: number\n  low: number\n  close: number\n  volume: number\n}\n\nexport interface TechnicalAnalysis {\n  symbol: string\n  timeframe: TimeFrame\n  trend: 'bullish' | 'bearish' | 'neutral'\n  strength: number // 0-100\n  support_levels: number[]\n  resistance_levels: number[]\n  indicators: {\n    [key: string]: IndicatorData\n  }\n  signals: TradingSignal[]\n  analyzed_at: string\n}\n\nexport interface TradingSignal {\n  type: 'buy' | 'sell' | 'hold'\n  indicator: string\n  strength: 'weak' | 'moderate' | 'strong'\n  price: number\n  timestamp: string\n  description: string\n}\n\n// Indicator-specific data types\nexport interface MovingAverageData {\n  symbol: string\n  timeframe: TimeFrame\n  ma_type: 'sma' | 'ema' | 'wma'\n  period: number\n  values: Array<{\n    timestamp: string\n    ma: number\n    price: number\n  }>\n}\n\nexport interface BollingerBandsData {\n  symbol: string\n  timeframe: TimeFrame\n  period: number\n  standard_deviation: number\n  values: Array<{\n    timestamp: string\n    upper: number\n    middle: number\n    lower: number\n    price: number\n    bandwidth: number\n    percent_b: number\n  }>\n}\n\nexport interface MACDData {\n  symbol: string\n  timeframe: TimeFrame\n  fast_period: number\n  slow_period: number\n  signal_period: number\n  values: Array<{\n    timestamp: string\n    macd: number\n    signal: number\n    histogram: number\n  }>\n}\n\nexport interface StochasticData {\n  symbol: string\n  timeframe: TimeFrame\n  k_period: number\n  d_period: number\n  values: Array<{\n    timestamp: string\n    k: number\n    d: number\n    signal: string\n  }>\n}\n\nexport interface RSIData {\n  symbol: string\n  timeframe: TimeFrame\n  period: number\n  values: Array<{\n    timestamp: string\n    rsi: number\n    signal: string\n  }>\n}\n\n// Default indicator configurations\nexport const DEFAULT_INDICATORS: Record<IndicatorType, IndicatorConfig> = {\n  sma: {\n    type: 'sma',\n    params: { period: 20 },\n    visible: true,\n    color: '#3b82f6',\n  },\n  ema: {\n    type: 'ema',\n    params: { period: 12 },\n    visible: true,\n    color: '#8b5cf6',\n  },\n  wma: {\n    type: 'wma',\n    params: { period: 10 },\n    visible: false,\n    color: '#06b6d4',\n  },\n  bollinger: {\n    type: 'bollinger',\n    params: { period: 20, stdDev: 2 },\n    visible: false,\n    color: '#f59e0b',\n  },\n  rsi: {\n    type: 'rsi',\n    params: { period: 14 },\n    visible: false,\n    color: '#ef4444',\n    secondary_yaxis: true,\n  },\n  macd: {\n    type: 'macd',\n    params: { fastPeriod: 12, slowPeriod: 26, signalPeriod: 9 },\n    visible: false,\n    color: '#10b981',\n    secondary_yaxis: true,\n  },\n  stochastic: {\n    type: 'stochastic',\n    params: { kPeriod: 14, dPeriod: 3 },\n    visible: false,\n    color: '#f97316',\n    secondary_yaxis: true,\n  },\n  cci: {\n    type: 'cci',\n    params: { period: 20 },\n    visible: false,\n    color: '#06b6d4',\n    secondary_yaxis: true,\n  },\n  williams_r: {\n    type: 'williams_r',\n    params: { period: 14 },\n    visible: false,\n    color: '#eab308',\n    secondary_yaxis: true,\n  },\n  atr: {\n    type: 'atr',\n    params: { period: 14 },\n    visible: false,\n    color: '#a855f7',\n    secondary_yaxis: true,\n  },\n  obv: {\n    type: 'obv',\n    params: {},\n    visible: false,\n    color: '#22c55e',\n    secondary_yaxis: true,\n  },\n  mfi: {\n    type: 'mfi',\n    params: { period: 14 },\n    visible: false,\n    color: '#ec4899',\n    secondary_yaxis: true,\n  },\n  ad: {\n    type: 'ad',\n    params: {},\n    visible: false,\n    color: '#14b8a6',\n    secondary_yaxis: true,\n  },\n  ichimoku: {\n    type: 'ichimoku',\n    params: {\n      tenkanPeriod: 9,\n      kijunPeriod: 26,\n      senkouSpanBPeriod: 52,\n    },\n    visible: false,\n    color: '#6366f1',\n  },\n  parabolic_sar: {\n    type: 'parabolic_sar',\n    params: { step: 0.02, max: 0.2 },\n    visible: false,\n    color: '#f43f5e',\n  },\n}\n"],"names":[],"mappings":"AAAA,4BAA4B;;;;;AAsJrB,MAAM,qBAA6D;IACxE,KAAK;QACH,MAAM;QACN,QAAQ;YAAE,QAAQ;QAAG;QACrB,SAAS;QACT,OAAO;IACT;IACA,KAAK;QACH,MAAM;QACN,QAAQ;YAAE,QAAQ;QAAG;QACrB,SAAS;QACT,OAAO;IACT;IACA,KAAK;QACH,MAAM;QACN,QAAQ;YAAE,QAAQ;QAAG;QACrB,SAAS;QACT,OAAO;IACT;IACA,WAAW;QACT,MAAM;QACN,QAAQ;YAAE,QAAQ;YAAI,QAAQ;QAAE;QAChC,SAAS;QACT,OAAO;IACT;IACA,KAAK;QACH,MAAM;QACN,QAAQ;YAAE,QAAQ;QAAG;QACrB,SAAS;QACT,OAAO;QACP,iBAAiB;IACnB;IACA,MAAM;QACJ,MAAM;QACN,QAAQ;YAAE,YAAY;YAAI,YAAY;YAAI,cAAc;QAAE;QAC1D,SAAS;QACT,OAAO;QACP,iBAAiB;IACnB;IACA,YAAY;QACV,MAAM;QACN,QAAQ;YAAE,SAAS;YAAI,SAAS;QAAE;QAClC,SAAS;QACT,OAAO;QACP,iBAAiB;IACnB;IACA,KAAK;QACH,MAAM;QACN,QAAQ;YAAE,QAAQ;QAAG;QACrB,SAAS;QACT,OAAO;QACP,iBAAiB;IACnB;IACA,YAAY;QACV,MAAM;QACN,QAAQ;YAAE,QAAQ;QAAG;QACrB,SAAS;QACT,OAAO;QACP,iBAAiB;IACnB;IACA,KAAK;QACH,MAAM;QACN,QAAQ;YAAE,QAAQ;QAAG;QACrB,SAAS;QACT,OAAO;QACP,iBAAiB;IACnB;IACA,KAAK;QACH,MAAM;QACN,QAAQ,CAAC;QACT,SAAS;QACT,OAAO;QACP,iBAAiB;IACnB;IACA,KAAK;QACH,MAAM;QACN,QAAQ;YAAE,QAAQ;QAAG;QACrB,SAAS;QACT,OAAO;QACP,iBAAiB;IACnB;IACA,IAAI;QACF,MAAM;QACN,QAAQ,CAAC;QACT,SAAS;QACT,OAAO;QACP,iBAAiB;IACnB;IACA,UAAU;QACR,MAAM;QACN,QAAQ;YACN,cAAc;YACd,aAAa;YACb,mBAAmB;QACrB;QACA,SAAS;QACT,OAAO;IACT;IACA,eAAe;QACb,MAAM;QACN,QAAQ;YAAE,MAAM;YAAM,KAAK;QAAI;QAC/B,SAAS;QACT,OAAO;IACT;AACF"}},
    {"offset": {"line": 2703, "column": 0}, "map": {"version":3,"sources":["file:///Users/sergi/Desktop/Projects/FinanceHub/apps/frontend/src/lib/types/holdings.ts"],"sourcesContent":["export type AssetClass = 'stocks' | 'crypto' | 'bonds' | 'etf' | 'options' | 'cash' | 'commodities' | 'real_estate' | 'other'\n\nexport type TransactionType = 'buy' | 'sell' | 'dividend' | 'transfer' | 'split' | 'fee' | 'deposit' | 'withdrawal'\n\nexport type AttributionPeriod = '1d' | '1w' | '1m' | '3m' | '6m' | '1y' | 'all'\n\nexport interface Holding {\n  id: string\n  portfolio_id: string\n  symbol: string\n  name: string\n  asset_class: AssetClass\n  quantity: number\n  average_cost: number\n  current_price: number\n  current_value: number\n  unrealized_pnl: number\n  unrealized_pnl_percent: number\n  day_change: number\n  day_change_percent: number\n  weight: number\n  sector?: string\n  exchange?: string\n  currency: string\n  created_at: string\n  updated_at: string\n}\n\nexport interface Transaction {\n  id: string\n  portfolio_id: string\n  holding_id?: string\n  symbol: string\n  type: TransactionType\n  quantity: number\n  price: number\n  total: number\n  fees: number\n  currency: string\n  date: string\n  notes?: string\n  created_at: string\n}\n\nexport interface HoldingsPortfolioSummary {\n  id: string\n  name: string\n  total_value: number\n  total_cost: number\n  total_pnl: number\n  total_pnl_percent: number\n  day_change: number\n  day_change_percent: number\n  holdings_count: number\n  asset_allocation: AssetAllocationItem[]\n  currency: string\n  is_default: boolean\n  is_public: boolean\n  created_at: string\n  updated_at: string\n}\n\nexport interface AssetAllocationItem {\n  asset_class: AssetClass\n  value: number\n  percentage: number\n  holdings_count: number\n}\n\nexport interface PnLHistoryPoint {\n  date: string\n  value: number\n  pnl: number\n  pnl_percent: number\n}\n\nexport interface HoldingsFilter {\n  asset_class?: AssetClass | AssetClass[]\n  symbol?: string\n  search?: string\n  min_value?: number\n  max_value?: number\n  sort_by?: keyof Holding\n  sort_order?: 'asc' | 'desc'\n  page?: number\n  limit?: number\n}\n\nexport interface TransactionFilter {\n  type?: TransactionType | TransactionType[]\n  symbol?: string\n  start_date?: string\n  end_date?: string\n  min_amount?: number\n  max_amount?: number\n  sort_by?: keyof Transaction\n  sort_order?: 'asc' | 'desc'\n  page?: number\n  limit?: number\n}\n\nexport interface CreateHoldingInput {\n  symbol: string\n  name: string\n  asset_class: AssetClass\n  quantity: number\n  average_cost: number\n  currency?: string\n  sector?: string\n  exchange?: string\n}\n\nexport interface UpdateHoldingInput {\n  quantity?: number\n  average_cost?: number\n  current_price?: number\n  sector?: string\n  exchange?: string\n}\n\nexport interface CreateTransactionInput {\n  holding_id?: string\n  symbol: string\n  type: TransactionType\n  quantity: number\n  price: number\n  fees?: number\n  currency?: string\n  date?: string\n  notes?: string\n}\n\nexport const ASSET_CLASS_LABELS: Record<AssetClass, string> = {\n  stocks: 'Stocks',\n  crypto: 'Cryptocurrency',\n  bonds: 'Bonds',\n  etf: 'ETFs',\n  options: 'Options',\n  cash: 'Cash',\n  commodities: 'Commodities',\n  real_estate: 'Real Estate',\n  other: 'Other',\n}\n\nexport const ASSET_CLASS_COLORS: Record<AssetClass, string> = {\n  stocks: '#3B82F6',\n  crypto: '#F59E0B',\n  bonds: '#10B981',\n  etf: '#8B5CF6',\n  options: '#EC4899',\n  cash: '#6B7280',\n  commodities: '#F97316',\n  real_estate: '#14B8A6',\n  other: '#9CA3AF',\n}\n\nexport const TRANSACTION_TYPE_LABELS: Record<TransactionType, string> = {\n  buy: 'Buy',\n  sell: 'Sell',\n  dividend: 'Dividend',\n  transfer: 'Transfer',\n  split: 'Split',\n  fee: 'Fee',\n  deposit: 'Deposit',\n  withdrawal: 'Withdrawal',\n}\n\nexport const TRANSACTION_TYPE_COLORS: Record<TransactionType, string> = {\n  buy: 'text-green-600 bg-green-100',\n  sell: 'text-red-600 bg-red-100',\n  dividend: 'text-blue-600 bg-blue-100',\n  transfer: 'text-gray-600 bg-gray-100',\n  split: 'text-purple-600 bg-purple-100',\n  fee: 'text-orange-600 bg-orange-100',\n  deposit: 'text-emerald-600 bg-emerald-100',\n  withdrawal: 'text-rose-600 bg-rose-100',\n}\n"],"names":[],"mappings":";;;;;;;;;;AAoIO,MAAM,qBAAiD;IAC5D,QAAQ;IACR,QAAQ;IACR,OAAO;IACP,KAAK;IACL,SAAS;IACT,MAAM;IACN,aAAa;IACb,aAAa;IACb,OAAO;AACT;AAEO,MAAM,qBAAiD;IAC5D,QAAQ;IACR,QAAQ;IACR,OAAO;IACP,KAAK;IACL,SAAS;IACT,MAAM;IACN,aAAa;IACb,aAAa;IACb,OAAO;AACT;AAEO,MAAM,0BAA2D;IACtE,KAAK;IACL,MAAM;IACN,UAAU;IACV,UAAU;IACV,OAAO;IACP,KAAK;IACL,SAAS;IACT,YAAY;AACd;AAEO,MAAM,0BAA2D;IACtE,KAAK;IACL,MAAM;IACN,UAAU;IACV,UAAU;IACV,OAAO;IACP,KAAK;IACL,SAAS;IACT,YAAY;AACd"}},
    {"offset": {"line": 2762, "column": 0}, "map": {"version":3,"sources":["file:///Users/sergi/Desktop/Projects/FinanceHub/apps/frontend/src/lib/api/news-sentiment.ts"],"sourcesContent":["/**\n * News Sentiment API\n * All news sentiment-related API calls\n */\n\nimport { apiClient } from './client'\nimport type { SentimentAnalysis, MarketTrends } from '@/lib/types'\n\ninterface TrendingTopic {\n  topic: string\n  sentiment_score: number\n  article_count: number\n  related_symbols: string[]\n}\n\ninterface NewsWithSentiment {\n  symbol: string\n  articles: Array<{\n    id: string\n    title: string\n    description: string\n    source: string\n    author: string | null\n    published_at: string\n    url: string\n    image_url: string | null\n    sentiment_score: number | null\n    sentiment_label: string | null\n    relevance_score: number | null\n  }>\n  message: string\n}\n\ninterface SentimentHistory {\n  symbol: string\n  history: Array<{\n    timestamp: string\n    sentiment_score: number\n    article_count: number\n    positive_count: number\n    negative_count: number\n    neutral_count: number\n  }>\n  analyzed_at: string\n}\n\ninterface GetSentimentParams {\n  days?: number\n  min_relevance?: number\n}\n\ninterface GetMarketTrendsParams {\n  days?: number\n  min_mentions?: number\n}\n\ninterface GetBatchSentimentParams {\n  days?: number\n  min_relevance?: number\n}\n\ninterface GetNewsParams {\n  days?: number\n  limit?: number\n  min_relevance?: number\n  sentiment_filter?: 'positive' | 'negative' | 'neutral'\n}\n\ninterface GetHistoryParams {\n  days?: number\n  interval?: 'hourly' | 'daily'\n}\n\nexport const newsSentimentApi = {\n  getSentiment(symbol: string, params?: GetSentimentParams): Promise<SentimentAnalysis> {\n    return apiClient.get(`/news/sentiment/${symbol}`, {\n      params: { days: 7, min_relevance: 0.5, ...params },\n    })\n  },\n\n  getMarketTrends(params?: GetMarketTrendsParams): Promise<MarketTrends> {\n    return apiClient.get('/news/trends', {\n      params: { days: 7, min_mentions: 5, ...params },\n    })\n  },\n\n  getBatchSentiment(symbols: string[], params?: GetBatchSentimentParams): Promise<Record<string, SentimentAnalysis>> {\n    return apiClient.post('/news/sentiment/batch', { symbols, params })\n  },\n\n  getTrendingTopics(limit: number = 10): Promise<TrendingTopic[]> {\n    return apiClient.get('/news/topics/trending', { params: { limit } })\n  },\n\n  getNewsWithSentiment(symbol: string, params?: GetNewsParams): Promise<NewsWithSentiment> {\n    return apiClient.get(`/news/symbol/${symbol}`, {\n      params: { days: 7, limit: 20, ...params },\n    })\n  },\n\n  getSentimentHistory(symbol: string, params?: GetHistoryParams): Promise<SentimentHistory> {\n    return apiClient.get(`/news/sentiment/${symbol}/history`, {\n      params: { days: 30, interval: 'daily', ...params },\n    })\n  },\n}\n"],"names":[],"mappings":";;;;AAAA;;;CAGC,GAED;;AAoEO,MAAM,mBAAmB;IAC9B,cAAa,MAAc,EAAE,MAA2B;QACtD,OAAO,+JAAS,CAAC,GAAG,CAAC,CAAC,gBAAgB,EAAE,QAAQ,EAAE;YAChD,QAAQ;gBAAE,MAAM;gBAAG,eAAe;gBAAK,GAAG,MAAM;YAAC;QACnD;IACF;IAEA,iBAAgB,MAA8B;QAC5C,OAAO,+JAAS,CAAC,GAAG,CAAC,gBAAgB;YACnC,QAAQ;gBAAE,MAAM;gBAAG,cAAc;gBAAG,GAAG,MAAM;YAAC;QAChD;IACF;IAEA,mBAAkB,OAAiB,EAAE,MAAgC;QACnE,OAAO,+JAAS,CAAC,IAAI,CAAC,yBAAyB;YAAE;YAAS;QAAO;IACnE;IAEA,mBAAkB,QAAgB,EAAE;QAClC,OAAO,+JAAS,CAAC,GAAG,CAAC,yBAAyB;YAAE,QAAQ;gBAAE;YAAM;QAAE;IACpE;IAEA,sBAAqB,MAAc,EAAE,MAAsB;QACzD,OAAO,+JAAS,CAAC,GAAG,CAAC,CAAC,aAAa,EAAE,QAAQ,EAAE;YAC7C,QAAQ;gBAAE,MAAM;gBAAG,OAAO;gBAAI,GAAG,MAAM;YAAC;QAC1C;IACF;IAEA,qBAAoB,MAAc,EAAE,MAAyB;QAC3D,OAAO,+JAAS,CAAC,GAAG,CAAC,CAAC,gBAAgB,EAAE,OAAO,QAAQ,CAAC,EAAE;YACxD,QAAQ;gBAAE,MAAM;gBAAI,UAAU;gBAAS,GAAG,MAAM;YAAC;QACnD;IACF;AACF"}},
    {"offset": {"line": 2829, "column": 0}, "map": {"version":3,"sources":["file:///Users/sergi/Desktop/Projects/FinanceHub/apps/frontend/src/stores/analyticsStore.ts"],"sourcesContent":["import { create } from 'zustand'\nimport { persist } from 'zustand/middleware'\nimport { portfolioAnalyticsApi } from '@/lib/api/portfolio-analytics'\nimport type { PortfolioAnalytics, AnalyticsPeriod, BenchmarkType, AnalyticsState } from '@/lib/types/portfolio-analytics'\n\nconst API_PERIOD_MAP: Record<AnalyticsPeriod, '1y' | '6m' | '3m'> = {\n  '1d': '3m',\n  '7d': '3m',\n  '30d': '3m',\n  '90d': '6m',\n  '180d': '6m',\n  '1y': '1y',\n  '3y': '1y',\n  '5y': '1y',\n  'ytd': '1y',\n  'all': '1y',\n}\n\nexport const useAnalyticsStore = create<AnalyticsState>()(\n  persist(\n    (set, get) => ({\n      selectedPortfolioId: null,\n      selectedPeriod: '1y',\n      selectedBenchmark: 'sp500',\n      data: null,\n      loading: false,\n      error: null,\n      lastUpdated: null,\n\n      setSelectedPortfolio: (id: string | null) => {\n        set({ selectedPortfolioId: id })\n        if (id) {\n          get().fetchAnalytics()\n        }\n      },\n\n      setSelectedPeriod: (period: AnalyticsPeriod) => {\n        set({ selectedPeriod: period })\n        get().fetchAnalytics()\n      },\n\n      setSelectedBenchmark: (benchmark: BenchmarkType) => {\n        set({ selectedBenchmark: benchmark })\n        get().fetchAnalytics()\n      },\n\n      fetchAnalytics: async () => {\n        const { selectedPortfolioId, selectedPeriod, selectedBenchmark } = get()\n        \n        if (!selectedPortfolioId) {\n          set({ error: 'No portfolio selected', loading: false })\n          return\n        }\n\n        set({ loading: true, error: null })\n\n        try {\n          const apiPeriod = API_PERIOD_MAP[selectedPeriod]\n          \n          const [summary, performance, risk, allocation] = await Promise.all([\n            portfolioAnalyticsApi.getPortfolioSummary(selectedPortfolioId),\n            portfolioAnalyticsApi.getPerformanceMetrics(selectedPortfolioId, apiPeriod),\n            portfolioAnalyticsApi.getRiskAnalysis(selectedPortfolioId),\n            portfolioAnalyticsApi.getHoldingsAnalysis(selectedPortfolioId),\n          ])\n\n          const analyticsData: PortfolioAnalytics = {\n            total_return: performance.total_return || 0,\n            total_value: summary.total_value,\n            total_value_change: summary.total_pnl,\n            total_value_change_percent: summary.total_pnl_percent,\n            summary: { ...summary },\n            performance: {\n              portfolio_id: selectedPortfolioId,\n              time_period: selectedPeriod,\n              cagr: performance.annualized_return || 0,\n              total_return: performance.total_return,\n              total_return_percent: performance.total_return_percent,\n              annualized_return: performance.annualized_return,\n              volatility: performance.volatility,\n              sharpe_ratio: performance.sharpe_ratio,\n              sortino_ratio: null,\n              max_drawdown: performance.max_drawdown || null,\n              max_drawdown_percent: performance.max_drawdown_percent || null,\n              max_drawdown_date: null,\n              recovery_time: null,\n              best_day: performance.best_day,\n              worst_day: performance.worst_day,\n              win_rate: performance.win_rate,\n              alpha_vs_sp500: performance.alpha_vs_sp500,\n              beta_vs_sp500: performance.beta_vs_sp500,\n              var_95: null,\n              var_99: null,\n              avg_win: null,\n              avg_loss: null,\n              profit_factor: null,\n            },\n            performance_by_asset: [],\n            risk_metrics: {\n              volatility: risk.volatility_exposure || 0,\n              beta: risk.volatility_exposure || 0,\n              sharpe_ratio: performance.sharpe_ratio || 0,\n            },\n            period_start: new Date(Date.now() - 365 * 24 * 60 * 60 * 1000).toISOString(),\n            period_end: new Date().toISOString(),\n            total_transactions: 0,\n          }\n\n          set({\n            data: analyticsData,\n            loading: false,\n            lastUpdated: new Date().toISOString(),\n          })\n        } catch (error) {\n          set({\n            error: error instanceof Error ? error.message : 'Failed to fetch analytics',\n            loading: false,\n          })\n        }\n      },\n\n      clearAnalytics: () => {\n        set({\n          data: null,\n          error: null,\n          lastUpdated: null,\n        })\n      },\n    }),\n    {\n      name: 'analytics-storage',\n      partialize: (state) => ({\n        selectedPortfolioId: state.selectedPortfolioId,\n        selectedPeriod: state.selectedPeriod,\n        selectedBenchmark: state.selectedBenchmark,\n      }),\n    }\n  )\n)\n\nexport const useAnalytics = () => {\n  const store = useAnalyticsStore()\n  return {\n    ...store,\n    fetchAnalytics: store.fetchAnalytics,\n    setSelectedPortfolio: store.setSelectedPortfolio,\n    setSelectedPeriod: store.setSelectedPeriod,\n    setSelectedBenchmark: store.setSelectedBenchmark,\n    clearAnalytics: store.clearAnalytics,\n  }\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 2997, "column": 0}, "map": {"version":3,"sources":["file:///Users/sergi/Desktop/Projects/FinanceHub/apps/frontend/src/stores/screenerStore.ts"],"sourcesContent":["/**\n * Screener Store\n * Zustand store for screener state management\n */\n\nimport { create } from 'zustand'\nimport { persist } from 'zustand/middleware'\nimport { screenerApi } from '@/lib/api/screener'\nimport type {\n  ScreenerState,\n  ScreenerRequest,\n  ScreenerResult,\n  SortField,\n  SortDirection,\n  ScreenerPreset,\n} from '@/lib/types/screener'\n\nexport const useScreenerStore = create<ScreenerState>()(\n  persist(\n    (set, get) => ({\n      // Initial state\n      filters: {},\n      results: [],\n      loading: false,\n      error: null,\n      total_count: 0,\n      total_screened: 0,\n      elapsed_seconds: 0,\n      last_updated: null,\n      sort_field: 'market_cap',\n      sort_direction: 'desc',\n      selected_presets: [],\n      limit: 100,\n\n      // Actions\n      setFilter: (key, value) => {\n        set((state) => ({\n          filters: {\n            ...state.filters,\n            [key]: value,\n          },\n        }))\n      },\n\n      removeFilter: (key) => {\n        set((state) => {\n          const newFilters = { ...state.filters }\n          delete newFilters[key]\n          return { filters: newFilters }\n        })\n      },\n\n      clearFilters: () => {\n        set({\n          filters: {},\n          selected_presets: [],\n          results: [],\n        })\n      },\n\n      applyPreset: (preset) => {\n        set({\n          filters: preset.filters,\n          selected_presets: [preset.key],\n        })\n        get().runScreener()\n      },\n\n      setSorting: (field, direction) => {\n        set({\n          sort_field: field,\n          sort_direction: direction,\n        })\n      },\n\n      setLimit: (limit) => {\n        set({ limit })\n      },\n\n      runScreener: async () => {\n        const { filters, limit } = get()\n        set({ loading: true, error: null })\n\n        try {\n          const response = await screenerApi.runScreener({\n            ...filters,\n            limit,\n          })\n\n          set({\n            results: response.results || [],\n            total_count: response.count || 0,\n            total_screened: response.total_screened || 0,\n            elapsed_seconds: response.elapsed_seconds || 0,\n            loading: false,\n            last_updated: new Date().toISOString(),\n          })\n        } catch (error) {\n          set({\n            error: error instanceof Error ? error.message : 'Failed to run screener',\n            loading: false,\n            results: [],\n          })\n        }\n      },\n\n      exportResults: (format) => {\n        const { results } = get()\n\n        if (results.length === 0) {\n          return\n        }\n\n        const filename = `screener-results-${new Date().toISOString().split('T')[0]}`\n\n        if (format === 'json') {\n          const data = JSON.stringify(results, null, 2)\n          const blob = new Blob([data], { type: 'application/json' })\n          const url = URL.createObjectURL(blob)\n          const a = document.createElement('a')\n          a.href = url\n          a.download = `${filename}.json`\n          a.click()\n          URL.revokeObjectURL(url)\n        } else if (format === 'csv') {\n          const headers = Object.keys(results[0])\n          const csv = [\n            headers.join(','),\n            ...results.map((row) =>\n              headers.map((header) => {\n                const value = row[header as keyof ScreenerResult]\n                if (value === null || value === undefined) return ''\n                if (typeof value === 'string' && (value.includes(',') || value.includes('\"'))) {\n                  return `\"${value.replace(/\"/g, '\"\"')}\"`\n                }\n                return String(value)\n              }).join(',')\n            ),\n          ].join('\\n')\n\n          const blob = new Blob([csv], { type: 'text/csv' })\n          const url = URL.createObjectURL(blob)\n          const a = document.createElement('a')\n          a.href = url\n          a.download = `${filename}.csv`\n          a.click()\n          URL.revokeObjectURL(url)\n        }\n      },\n    }),\n    {\n      name: 'screener-storage',\n      partialize: (state) => ({\n        filters: state.filters,\n        sort_field: state.sort_field,\n        sort_direction: state.sort_direction,\n        limit: state.limit,\n      }),\n    }\n  )\n)\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 3159, "column": 0}, "map": {"version":3,"sources":["file:///Users/sergi/Desktop/Projects/FinanceHub/apps/frontend/src/stores/screenerPresetsStore.ts"],"sourcesContent":["/**\n * Screener Presets Store\n * Zustand store for managing user's screener presets\n */\n\nimport { create } from 'zustand'\nimport { persist } from 'zustand/middleware'\nimport { screenerApi } from '@/lib/api/screener'\nimport type { UserScreenerPreset, ScreenerRequest } from '@/lib/types/screener'\n\ninterface ScreenerPresetsState {\n  presets: UserScreenerPreset[]\n  loading: boolean\n  error: string | null\n\n  // Actions\n  fetchPresets: () => Promise<void>\n  savePreset: (name: string, filters: Partial<ScreenerRequest>) => Promise<UserScreenerPreset>\n  updatePreset: (id: string, data: { name?: string; filters?: Partial<ScreenerRequest> }) => Promise<UserScreenerPreset>\n  deletePreset: (id: string) => Promise<void>\n  clearError: () => void\n}\n\nexport const useScreenerPresets = create<ScreenerPresetsState>()(\n  persist(\n    (set, get) => ({\n      presets: [],\n      loading: false,\n      error: null,\n\n      fetchPresets: async () => {\n        set({ loading: true, error: null })\n        try {\n          const presets = await screenerApi.getUserPresets()\n          set({ presets, loading: false })\n        } catch (error) {\n          set({\n            error: error instanceof Error ? error.message : 'Failed to fetch presets',\n            loading: false,\n          })\n        }\n      },\n\n      savePreset: async (name: string, filters: Partial<ScreenerRequest>) => {\n        set({ loading: true, error: null })\n        try {\n          const preset = await screenerApi.savePreset(name, filters)\n          set((state) => ({\n            presets: [preset, ...state.presets],\n            loading: false,\n          }))\n          return preset\n        } catch (error) {\n          const message = error instanceof Error ? error.message : 'Failed to save preset'\n          set({ error: message, loading: false })\n          throw new Error(message)\n        }\n      },\n\n      updatePreset: async (id: string, data: { name?: string; filters?: Partial<ScreenerRequest> }) => {\n        set({ loading: true, error: null })\n        try {\n          const preset = await screenerApi.updatePreset(id, data)\n          set((state) => ({\n            presets: state.presets.map((p) => (p.id === id ? preset : p)),\n            loading: false,\n          }))\n          return preset\n        } catch (error) {\n          const message = error instanceof Error ? error.message : 'Failed to update preset'\n          set({ error: message, loading: false })\n          throw new Error(message)\n        }\n      },\n\n      deletePreset: async (id: string) => {\n        set({ loading: true, error: null })\n        try {\n          await screenerApi.deletePreset(id)\n          set((state) => ({\n            presets: state.presets.filter((p) => p.id !== id),\n            loading: false,\n          }))\n        } catch (error) {\n          const message = error instanceof Error ? error.message : 'Failed to delete preset'\n          set({ error: message, loading: false })\n          throw new Error(message)\n        }\n      },\n\n      clearError: () => {\n        set({ error: null })\n      },\n    }),\n    {\n      name: 'screener-presets-storage',\n      partialize: (state) => ({\n        presets: state.presets,\n      }),\n    }\n  )\n)\n"],"names":[],"mappings":";;;;AAAA;;;CAGC,GAED;AACA;AACA;;;;AAgBO,MAAM,qBAAqB,IAAA,gLAAM,IACtC,IAAA,sLAAO,EACL,CAAC,KAAK,MAAQ,CAAC;QACb,SAAS,EAAE;QACX,SAAS;QACT,OAAO;QAEP,cAAc;YACZ,IAAI;gBAAE,SAAS;gBAAM,OAAO;YAAK;YACjC,IAAI;gBACF,MAAM,UAAU,MAAM,mKAAW,CAAC,cAAc;gBAChD,IAAI;oBAAE;oBAAS,SAAS;gBAAM;YAChC,EAAE,OAAO,OAAO;gBACd,IAAI;oBACF,OAAO,iBAAiB,QAAQ,MAAM,OAAO,GAAG;oBAChD,SAAS;gBACX;YACF;QACF;QAEA,YAAY,OAAO,MAAc;YAC/B,IAAI;gBAAE,SAAS;gBAAM,OAAO;YAAK;YACjC,IAAI;gBACF,MAAM,SAAS,MAAM,mKAAW,CAAC,UAAU,CAAC,MAAM;gBAClD,IAAI,CAAC,QAAU,CAAC;wBACd,SAAS;4BAAC;+BAAW,MAAM,OAAO;yBAAC;wBACnC,SAAS;oBACX,CAAC;gBACD,OAAO;YACT,EAAE,OAAO,OAAO;gBACd,MAAM,UAAU,iBAAiB,QAAQ,MAAM,OAAO,GAAG;gBACzD,IAAI;oBAAE,OAAO;oBAAS,SAAS;gBAAM;gBACrC,MAAM,IAAI,MAAM;YAClB;QACF;QAEA,cAAc,OAAO,IAAY;YAC/B,IAAI;gBAAE,SAAS;gBAAM,OAAO;YAAK;YACjC,IAAI;gBACF,MAAM,SAAS,MAAM,mKAAW,CAAC,YAAY,CAAC,IAAI;gBAClD,IAAI,CAAC,QAAU,CAAC;wBACd,SAAS,MAAM,OAAO,CAAC,GAAG,CAAC,CAAC,IAAO,EAAE,EAAE,KAAK,KAAK,SAAS;wBAC1D,SAAS;oBACX,CAAC;gBACD,OAAO;YACT,EAAE,OAAO,OAAO;gBACd,MAAM,UAAU,iBAAiB,QAAQ,MAAM,OAAO,GAAG;gBACzD,IAAI;oBAAE,OAAO;oBAAS,SAAS;gBAAM;gBACrC,MAAM,IAAI,MAAM;YAClB;QACF;QAEA,cAAc,OAAO;YACnB,IAAI;gBAAE,SAAS;gBAAM,OAAO;YAAK;YACjC,IAAI;gBACF,MAAM,mKAAW,CAAC,YAAY,CAAC;gBAC/B,IAAI,CAAC,QAAU,CAAC;wBACd,SAAS,MAAM,OAAO,CAAC,MAAM,CAAC,CAAC,IAAM,EAAE,EAAE,KAAK;wBAC9C,SAAS;oBACX,CAAC;YACH,EAAE,OAAO,OAAO;gBACd,MAAM,UAAU,iBAAiB,QAAQ,MAAM,OAAO,GAAG;gBACzD,IAAI;oBAAE,OAAO;oBAAS,SAAS;gBAAM;gBACrC,MAAM,IAAI,MAAM;YAClB;QACF;QAEA,YAAY;YACV,IAAI;gBAAE,OAAO;YAAK;QACpB;IACF,CAAC,GACD;IACE,MAAM;IACN,YAAY,CAAC,QAAU,CAAC;YACtB,SAAS,MAAM,OAAO;QACxB,CAAC;AACH"}},
    {"offset": {"line": 3277, "column": 0}, "map": {"version":3,"sources":["file:///Users/sergi/Desktop/Projects/FinanceHub/apps/frontend/src/stores/settingsStore.ts"],"sourcesContent":["/**\n * Settings Store\n * Zustand store for user settings with localStorage persistence\n */\n\nimport { create } from 'zustand'\nimport { persist } from 'zustand/middleware'\nimport { useTheme } from 'next-themes'\nimport type {\n  UserSettings,\n  SettingsUpdate,\n  DisplaySettings,\n  NotificationSettings,\n  ProfileSettings,\n  InvestmentProfile,\n  ThemeMode,\n  PreferredAssetClass,\n} from '@/lib/types/settings'\nimport {\n  defaultSettings,\n  defaultDisplaySettings,\n  defaultNotificationSettings,\n  defaultProfileSettings,\n  defaultInvestmentProfile,\n} from '@/lib/types/settings'\n\ninterface SettingsState extends UserSettings {\n  isLoading: boolean\n  error: string | null\n  lastSaved: string | null\n\n  setDisplaySettings: (settings: Partial<DisplaySettings>) => void\n  setNotificationSettings: (settings: Partial<NotificationSettings>) => void\n  setProfileSettings: (settings: Partial<ProfileSettings>) => void\n  setInvestmentProfile: (settings: Partial<InvestmentProfile>) => void\n  setTheme: (theme: ThemeMode) => void\n  \n  resetSettings: () => void\n  resetDisplaySettings: () => void\n  resetNotificationSettings: () => void\n  \n  saveSettings: () => Promise<void>\n  loadSettings: () => Promise<void>\n  exportSettings: () => string\n  importSettings: (json: string) => void\n}\n\nexport const useSettingsStore = create<SettingsState>()(\n  persist(\n    (set, get) => ({\n      display: defaultDisplaySettings,\n      notifications: defaultNotificationSettings,\n      profile: defaultProfileSettings,\n      investment: defaultInvestmentProfile,\n      isLoading: false,\n      error: null,\n      lastSaved: null,\n\n      setDisplaySettings: (settings) => {\n        set((state) => ({\n          display: { ...state.display, ...settings },\n        }))\n      },\n\n      setNotificationSettings: (settings) => {\n        set((state) => ({\n          notifications: { ...state.notifications, ...settings },\n        }))\n      },\n\n      setProfileSettings: (settings) => {\n        set((state) => ({\n          profile: { ...state.profile, ...settings },\n        }))\n      },\n\n      setInvestmentProfile: (settings) => {\n        set((state) => ({\n          investment: { ...state.investment, ...settings },\n        }))\n      },\n\n      setTheme: (theme) => {\n        set((state) => ({\n          display: { ...state.display, theme },\n        }))\n      },\n\n      resetSettings: () => {\n        set({\n          display: defaultDisplaySettings,\n          notifications: defaultNotificationSettings,\n          profile: defaultProfileSettings,\n          investment: defaultInvestmentProfile,\n          error: null,\n        })\n      },\n\n      resetDisplaySettings: () => {\n        set({ display: defaultDisplaySettings })\n      },\n\n      resetNotificationSettings: () => {\n        set({ notifications: defaultNotificationSettings })\n      },\n\n      saveSettings: async () => {\n        set({ isLoading: true, error: null })\n        \n        try {\n          const state = get()\n          \n          // TODO: Integrate with backend API when available\n          // For now, settings are automatically persisted via zustand persist middleware\n          \n          set({\n            isLoading: false,\n            lastSaved: new Date().toISOString(),\n          })\n        } catch (error) {\n          set({\n            error: error instanceof Error ? error.message : 'Failed to save settings',\n            isLoading: false,\n          })\n        }\n      },\n\n      loadSettings: async () => {\n        set({ isLoading: true, error: null })\n        \n        try {\n          // TODO: Load from backend API when available\n          // For now, settings are automatically loaded from localStorage via zustand persist\n          \n          set({\n            isLoading: false,\n          })\n        } catch (error) {\n          set({\n            error: error instanceof Error ? error.message : 'Failed to load settings',\n            isLoading: false,\n          })\n        }\n      },\n\n      exportSettings: () => {\n        const state = get()\n        const exportable = {\n          display: state.display,\n          notifications: state.notifications,\n          profile: {\n            ...state.profile,\n            // Don't export sensitive data\n            email: undefined,\n            phone: undefined,\n          },\n          investment: state.investment,\n          exportedAt: new Date().toISOString(),\n          version: '1.0',\n        }\n        return JSON.stringify(exportable, null, 2)\n      },\n\n      importSettings: (json) => {\n        try {\n          const imported = JSON.parse(json)\n          \n          if (imported.version !== '1.0') {\n            throw new Error('Invalid settings version')\n          }\n          \n          set({\n            display: { ...defaultDisplaySettings, ...imported.display },\n            notifications: { ...defaultNotificationSettings, ...imported.notifications },\n            profile: { ...defaultProfileSettings, ...imported.profile },\n            investment: { ...defaultInvestmentProfile, ...imported.investment },\n            lastSaved: new Date().toISOString(),\n          })\n        } catch (error) {\n          set({\n            error: error instanceof Error ? error.message : 'Failed to import settings',\n          })\n        }\n      },\n    }),\n    {\n      name: 'financehub-settings',\n      partialize: (state) => ({\n        display: state.display,\n        notifications: state.notifications,\n        profile: state.profile,\n        investment: state.investment,\n        lastSaved: state.lastSaved,\n      }),\n    }\n  )\n)\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 3460, "column": 0}, "map": {"version":3,"sources":["file:///Users/sergi/Desktop/Projects/FinanceHub/apps/frontend/src/stores/realtimeStore.ts"],"sourcesContent":["/**\n * Real-Time Data Store\n * Zustand store for WebSocket state and real-time data\n */\n\nimport { create } from 'zustand'\nimport type {\n  RealTimePrice,\n  RealTimeTrade,\n  OrderBook,\n  DataType,\n} from '@/lib/types/realtime'\nimport type { ConnectionState, ChartTimeframe } from '@/lib/constants/realtime'\nimport { getWebSocketClient } from '@/lib/api/websocket'\nimport { WS_CONFIG, CONNECTION_STATES, CHART_CONFIG } from '@/lib/constants/realtime'\nimport { apiClient } from '@/lib/api/client'\nimport type { SubscriptionRequest } from '@/lib/types/realtime'\n\ninterface RealTimeStore {\n  connectionState: ConnectionState\n  error: string | null\n  subscribedSymbols: string[]\n  prices: Record<string, RealTimePrice>\n  trades: Record<string, RealTimeTrade[]>\n  orderBooks: Record<string, OrderBook>\n  charts: Record<string, ChartTimeframe>\n  \n  connect: (token?: string) => Promise<void>\n  disconnect: () => void\n  subscribe: (symbols: string[], dataTypes: DataType[]) => void\n  unsubscribe: (symbol: string, dataTypes?: DataType[]) => void\n  subscribeSingle: (symbol: string, dataTypes: DataType[]) => void\n  unsubscribeSingle: (symbol: string, dataTypes?: DataType[]) => void\n  unsubscribeAll: () => void\n  clearData: (symbol?: string) => void\n  \n  updatePrice: (symbol: string, price: RealTimePrice) => void\n  addTrade: (symbol: string, trade: RealTimeTrade) => void\n  updateOrderBook: (symbol: string, orderBook: OrderBook) => void\n  setChartTimeframe: (symbol: string, timeframe: ChartTimeframe) => void\n  setError: (error: string | null) => void\n  setConnectionState: (state: ConnectionState) => void\n}\n\nexport const useRealtimeStore = create<RealTimeStore>((set, get) => ({\n  connectionState: CONNECTION_STATES.DISCONNECTED,\n  error: null,\n  subscribedSymbols: [],\n  prices: {},\n  trades: {},\n  orderBooks: {},\n  charts: {},\n\n  connect: async (token?: string) => {\n    try {\n      set({ connectionState: CONNECTION_STATES.CONNECTING, error: null })\n      \n      const wsClient = getWebSocketClient()\n      \n      wsClient.on('connection', ({ state, error }) => {\n        set({ connectionState: state })\n        \n        if (state === CONNECTION_STATES.ERROR && error) {\n          set({ error: error as string })\n        }\n      })\n      \n      wsClient.on('data', (message) => {\n        if (message.data) {\n          const { symbol, dataType, data } = message\n          \n          switch (dataType) {\n            case 'price':\n              if (symbol && data) {\n                get().updatePrice(symbol, data)\n              }\n              break\n            \n            case 'trades':\n              if (symbol && Array.isArray(data.trades)) {\n                data.trades.forEach((trade: RealTimeTrade) => {\n                  get().addTrade(symbol, trade)\n                })\n              }\n              break\n            \n            case 'orderbook':\n              if (symbol && data) {\n                get().updateOrderBook(symbol, data)\n              }\n              break\n          }\n        }\n      })\n      \n      wsClient.on('error', (message) => {\n        set({ error: message.error || 'WebSocket error' })\n      })\n      \n      await wsClient.connect(token)\n    } catch (error) {\n      set({\n        connectionState: CONNECTION_STATES.ERROR,\n        error: error instanceof Error ? error.message : 'Failed to connect',\n      })\n    }\n  },\n\n  disconnect: () => {\n    const wsClient = getWebSocketClient()\n    wsClient.disconnect()\n    \n    set({\n      connectionState: CONNECTION_STATES.DISCONNECTED,\n      subscribedSymbols: [],\n      error: null,\n    })\n  },\n\n  subscribe: (symbols: string[], dataTypes: DataType[]) => {\n    const wsClient = getWebSocketClient()\n    \n    if (wsClient.getConnectionState() !== CONNECTION_STATES.CONNECTED) {\n      console.warn('Cannot subscribe: not connected')\n      return\n    }\n    \n    const request: SubscriptionRequest = {\n      symbols,\n      dataTypes,\n    }\n    \n    wsClient.subscribe(request)\n    \n    set((state) => ({\n      subscribedSymbols: [\n        ...new Set([...state.subscribedSymbols, ...symbols]),\n      ],\n    }))\n  },\n\n  unsubscribe: (symbol: string, dataTypes?: DataType[]) => {\n    const wsClient = getWebSocketClient()\n    wsClient.unsubscribe(symbol, dataTypes || [])\n    \n    set((state) => ({\n      subscribedSymbols: state.subscribedSymbols.filter((s) => s !== symbol),\n    }))\n  },\n\n  subscribeSingle: (symbol: string, dataTypes: DataType[]) => {\n    get().subscribe([symbol], dataTypes)\n  },\n\n  unsubscribeSingle: (symbol: string, dataTypes?: DataType[]) => {\n    get().unsubscribe(symbol, dataTypes)\n  },\n\n  unsubscribeAll: () => {\n    const wsClient = getWebSocketClient()\n    wsClient.unsubscribeAll()\n    \n    set({ subscribedSymbols: [] })\n  },\n\n  clearData: (symbol?: string) => {\n    if (symbol) {\n      set((state) => {\n        const newState: Partial<RealTimeStore> = {}\n        \n        if (state.prices[symbol]) {\n          newState.prices = { ...state.prices }\n          delete newState.prices[symbol]\n        }\n        \n        if (state.trades[symbol]) {\n          newState.trades = { ...state.trades }\n          delete newState.trades[symbol]\n        }\n        \n        if (state.orderBooks[symbol]) {\n          newState.orderBooks = { ...state.orderBooks }\n          delete newState.orderBooks[symbol]\n        }\n        \n        if (state.charts[symbol]) {\n          newState.charts = { ...state.charts }\n          delete newState.charts[symbol]\n        }\n        \n        return newState\n      })\n    } else {\n      set({\n        prices: {},\n        trades: {},\n        orderBooks: {},\n        charts: {},\n      })\n    }\n  },\n\n  updatePrice: (symbol: string, price: RealTimePrice) => {\n    set((state) => ({\n      prices: {\n        ...state.prices,\n        [symbol]: price,\n      },\n    }))\n  },\n\n  addTrade: (symbol: string, trade: RealTimeTrade) => {\n    set((state) => {\n      const symbolTrades = state.trades[symbol] || []\n      const newTrades = [trade, ...symbolTrades].slice(0, WS_CONFIG.TRADE_FEED_LIMIT)\n      \n      return {\n        trades: {\n          ...state.trades,\n          [symbol]: newTrades,\n        },\n      }\n    })\n  },\n\n  updateOrderBook: (symbol: string, orderBook: OrderBook) => {\n    set((state) => ({\n      orderBooks: {\n        ...state.orderBooks,\n        [symbol]: orderBook,\n      },\n    }))\n  },\n\n  setChartTimeframe: (symbol: string, timeframe: ChartTimeframe) => {\n    set((state) => ({\n      charts: {\n        ...state.charts,\n        [symbol]: timeframe,\n      },\n    }))\n  },\n\n  setError: (error: string | null) => {\n    set({ error })\n  },\n\n  setConnectionState: (state: ConnectionState) => {\n    set({ connectionState: state })\n  },\n}))\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 3682, "column": 0}, "map": {"version":3,"sources":["file:///Users/sergi/Desktop/Projects/FinanceHub/apps/frontend/src/hooks/useDownload.ts"],"sourcesContent":["import { useState, useCallback } from 'react'\n\ninterface DownloadOptions {\n  filename?: string\n  mimeType?: string\n  autoDownload?: boolean\n}\n\ninterface DownloadState {\n  isDownloading: boolean\n  error: Error | null\n  progress: number\n}\n\ninterface DownloadResult {\n  download: (data: string | Blob, options?: DownloadOptions) => void\n  downloadFromUrl: (url: string, options?: DownloadOptions) => Promise<void>\n  downloadFile: (filePath: string, options?: DownloadOptions) => Promise<void>\n  state: DownloadState\n  reset: () => void\n}\n\nexport function useDownload(): DownloadResult {\n  const [state, setState] = useState<DownloadState>({\n    isDownloading: false,\n    error: null,\n    progress: 0,\n  })\n\n  const reset = useCallback(() => {\n    setState({ isDownloading: false, error: null, progress: 0 })\n  }, [])\n\n  const createDownloadLink = useCallback(\n    (data: string | Blob, mimeType: string): { url: string; filename: string } => {\n      let blob: Blob\n      let filename: string\n\n      if (typeof data === 'string') {\n        blob = new Blob([data], { type: mimeType })\n        filename = `download-${Date.now()}.${mimeType.split('/')[1] || 'txt'}`\n      } else {\n        blob = data\n        filename = `download-${Date.now()}.${mimeType.split('/')[1] || 'bin'}`\n      }\n\n      const url = URL.createObjectURL(blob)\n      return { url, filename }\n    },\n    []\n  )\n\n  const triggerDownload = useCallback(\n    (url: string, filename: string) => {\n      const link = document.createElement('a')\n      link.href = url\n      link.download = filename\n      link.style.display = 'none'\n      document.body.appendChild(link)\n      link.click()\n      document.body.removeChild(link)\n      URL.revokeObjectURL(url)\n    },\n    []\n  )\n\n  const download = useCallback(\n    (data: string | Blob, options: DownloadOptions = {}) => {\n      const { filename, mimeType = 'text/plain', autoDownload = true } = options\n\n      try {\n        const { url, filename: generatedFilename } = createDownloadLink(\n          data,\n          mimeType\n        )\n        const finalFilename = filename || generatedFilename\n\n        if (autoDownload) {\n          triggerDownload(url, finalFilename)\n        }\n\n        setState({ isDownloading: false, error: null, progress: 100 })\n      } catch (err) {\n        setState((prev) => ({\n          ...prev,\n          error: err instanceof Error ? err : new Error('Download failed'),\n        }))\n      }\n    },\n    [createDownloadLink, triggerDownload]\n  )\n\n  const downloadFromUrl = useCallback(\n    async (url: string, options: DownloadOptions = {}) => {\n      setState({ isDownloading: true, error: null, progress: 0 })\n\n      try {\n        const response = await fetch(url, { mode: 'cors' })\n\n        if (!response.ok) {\n          throw new Error(`Failed to fetch: ${response.status} ${response.statusText}`)\n        }\n\n        const blob = await response.blob()\n        const mimeType = options.mimeType || blob.type || 'application/octet-stream'\n\n        setState({ isDownloading: true, error: null, progress: 50 })\n\n        const { url: objectUrl, filename: generatedFilename } = createDownloadLink(\n          blob,\n          mimeType\n        )\n\n        const filename = options.filename || generatedFilename\n\n        if (options.autoDownload !== false) {\n          triggerDownload(objectUrl, filename)\n        }\n\n        setState({ isDownloading: false, error: null, progress: 100 })\n      } catch (err) {\n        setState((prev) => ({\n          ...prev,\n          isDownloading: false,\n          error: err instanceof Error ? err : new Error('Download from URL failed'),\n        }))\n      }\n    },\n    [createDownloadLink, triggerDownload]\n  )\n\n  const downloadFile = useCallback(\n    async (filePath: string, options: DownloadOptions = {}) => {\n      setState({ isDownloading: true, error: null, progress: 0 })\n\n      try {\n        const response = await fetch(filePath)\n\n        if (!response.ok) {\n          throw new Error(`Failed to fetch file: ${response.status}`)\n        }\n\n        const blob = await response.blob()\n        const mimeType = options.mimeType || blob.type || 'application/octet-stream'\n\n        setState({ isDownloading: true, error: null, progress: 75 })\n\n        const { url, filename: generatedFilename } = createDownloadLink(\n          blob,\n          mimeType\n        )\n\n        const filename = options.filename || filePath.split('/').pop() || generatedFilename\n\n        if (options.autoDownload !== false) {\n          triggerDownload(url, filename)\n        }\n\n        setState({ isDownloading: false, error: null, progress: 100 })\n      } catch (err) {\n        setState((prev) => ({\n          ...prev,\n          isDownloading: false,\n          error: err instanceof Error ? err : new Error('Download file failed'),\n        }))\n      }\n    },\n    [createDownloadLink, triggerDownload]\n  )\n\n  return {\n    download,\n    downloadFromUrl,\n    downloadFile,\n    state,\n    reset,\n  }\n}\n\nexport function useDownloadFile() {\n  const { download, downloadFromUrl, state, reset } = useDownload()\n\n  const downloadCSV = useCallback(\n    (data: string | object[], filename: string) => {\n      const csvData =\n        typeof data === 'string'\n          ? data\n          : convertToCSV(data)\n      download(csvData, { filename: filename.endsWith('.csv') ? filename : `${filename}.csv`, mimeType: 'text/csv' })\n    },\n    [download]\n  )\n\n  const downloadJSON = useCallback(\n    (data: unknown, filename: string, indent: number = 2) => {\n      const jsonData = JSON.stringify(data, null, indent)\n      download(jsonData, { filename: filename.endsWith('.json') ? filename : `${filename}.json`, mimeType: 'application/json' })\n    },\n    [download]\n  )\n\n  const downloadExcel = useCallback(\n    (data: string | Blob, filename: string) => {\n      download(data, { filename: filename.endsWith('.xlsx') ? filename : `${filename}.xlsx`, mimeType: 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet' })\n    },\n    [download]\n  )\n\n  const downloadText = useCallback(\n    (data: string, filename: string, mimeType: string = 'text/plain') => {\n      download(data, { filename, mimeType })\n    },\n    [download]\n  )\n\n  return {\n    downloadCSV,\n    downloadJSON,\n    downloadExcel,\n    downloadText,\n    downloadFromUrl,\n    ...state,\n    reset,\n  }\n}\n\nfunction convertToCSV(data: object[]): string {\n  if (data.length === 0) return ''\n\n  const headers = Object.keys(data[0])\n  const rows = data.map((row) =>\n    headers.map((header) => {\n      const value = (row as Record<string, unknown>)[header]\n      const stringValue = String(value ?? '')\n      const escaped = stringValue.replace(/\"/g, '\"\"')\n      return `\"${escaped}\"`\n    }).join(',')\n  )\n\n  return [headers.join(','), ...rows].join('\\n')\n}\n\nexport default useDownload\n"],"names":[],"mappings":"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"}}]
}
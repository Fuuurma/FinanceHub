module.exports=[21190,a=>{"use strict";var b=a.i(86531),c=a.i(9644),d=a.i(61219),e=a.i(87897),f=a.i(6047),g=a.i(11933),h=a.i(33772),i=a.i(75628),j=a.i(1688),k=a.i(49657),l=a.i(48047),m=a.i(51145),n=a.i(47830),o=a.i(57668),p=a.i(80298),q=a.i(30764),r=a.i(76044),s=a.i(69779),t=a.i(69382),u=a.i(35629);let v=(0,s.create)()((0,t.persist)((a,b)=>({filters:{},results:[],loading:!1,error:null,total_count:0,total_screened:0,elapsed_seconds:0,last_updated:null,sort_field:"market_cap",sort_direction:"desc",selected_presets:[],limit:100,setFilter:(b,c)=>{a(a=>({filters:{...a.filters,[b]:c}}))},removeFilter:b=>{a(a=>{let c={...a.filters};return delete c[b],{filters:c}})},clearFilters:()=>{a({filters:{},selected_presets:[],results:[]})},applyPreset:c=>{a({filters:c.filters,selected_presets:[c.key]}),b().runScreener()},setSorting:(b,c)=>{a({sort_field:b,sort_direction:c})},setLimit:b=>{a({limit:b})},runScreener:async()=>{let{filters:c,limit:d}=b();a({loading:!0,error:null});try{let b=await u.screenerApi.runScreener({...c,limit:d});a({results:b.results||[],total_count:b.count||0,total_screened:b.total_screened||0,elapsed_seconds:b.elapsed_seconds||0,loading:!1,last_updated:new Date().toISOString()})}catch(b){a({error:b instanceof Error?b.message:"Failed to run screener",loading:!1,results:[]})}},exportResults:a=>{let{results:c}=b();if(0===c.length)return;let d=`screener-results-${new Date().toISOString().split("T")[0]}`;if("json"===a){let a=new Blob([JSON.stringify(c,null,2)],{type:"application/json"}),b=URL.createObjectURL(a),e=document.createElement("a");e.href=b,e.download=`${d}.json`,e.click(),URL.revokeObjectURL(b)}else if("csv"===a){let a=Object.keys(c[0]),b=new Blob([[a.join(","),...c.map(b=>a.map(a=>{let c=b[a];return null==c?"":"string"==typeof c&&(c.includes(",")||c.includes('"'))?`"${c.replace(/"/g,'""')}"`:String(c)}).join(","))].join("\n")],{type:"text/csv"}),e=URL.createObjectURL(b),f=document.createElement("a");f.href=e,f.download=`${d}.csv`,f.click(),URL.revokeObjectURL(e)}}}),{name:"screener-storage",partialize:a=>({filters:a.filters,sort_field:a.sort_field,sort_direction:a.sort_direction,limit:a.limit})})),w=[{label:"Micro Cap (<$300M)",min:0,max:3e8},{label:"Small Cap ($300M-$2B)",min:3e8,max:2e9},{label:"Mid Cap ($2B-$10B)",min:2e9,max:1e10},{label:"Large Cap ($10B-$200B)",min:1e10,max:2e11},{label:"Mega Cap (>$200B)",min:2e11,max:1/0}],x=[{key:"high_dividend",name:"High Dividend",description:"Yield > 4%, Cap > $1B"},{key:"growth_stocks",name:"Growth Stocks",description:"P/E < 30, Cap > $500M"},{key:"value_stocks",name:"Value Stocks",description:"P/E < 15, P/B < 1.5"},{key:"momentum",name:"Momentum",description:"RSI < 30, Above 50-day MA"},{key:"small_cap_growth",name:"Small Cap Growth",description:"Cap $100M-$2B"}];function y({title:a,children:d,defaultOpen:e=!0}){let[f,g]=(0,c.useState)(e);return(0,b.jsxs)("div",{className:"border-b pb-4 last:border-0",children:[(0,b.jsxs)("button",{onClick:()=>g(!f),className:"flex items-center justify-between w-full py-2 text-left font-semibold hover:text-primary transition-colors",children:[(0,b.jsx)("span",{children:a}),f?(0,b.jsx)(r.ChevronUp,{className:"w-4 h-4"}):(0,b.jsx)(q.ChevronDown,{className:"w-4 h-4"})]}),f&&(0,b.jsx)("div",{className:"pt-2 space-y-3",children:d})]})}function z(){let{filters:a,setFilter:e,removeFilter:g,clearFilters:h,runScreener:i,loading:j,selected_presets:q}=v(),[r,s]=(0,c.useState)(a),t=(0,c.useCallback)((a,b)=>{s(c=>({...c,[a]:b}))},[]),u=(0,c.useCallback)(()=>{Object.entries(r).forEach(([a,b])=>{null!=b&&""!==b&&e(a,b)}),i()},[r,e,i]),z=Object.values(a).filter(a=>null!=a&&""!==a).length;return(0,b.jsxs)(k.Card,{className:"h-full",children:[(0,b.jsx)(k.CardHeader,{className:"pb-3",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)(k.CardTitle,{className:"flex items-center gap-2",children:[(0,b.jsx)(p.Filter,{className:"w-4 h-4"}),"Filters",z>0&&(0,b.jsx)(f.Badge,{variant:"secondary",children:z})]}),(0,b.jsx)(k.CardDescription,{children:"Screen stocks by criteria"})]}),(0,b.jsx)(d.Button,{variant:"ghost",size:"sm",onClick:h,children:"Clear All"})]})}),(0,b.jsxs)(k.CardContent,{className:"space-y-4 overflow-y-auto max-h-[calc(100vh-200px)]",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)(m.Label,{className:"text-sm font-semibold mb-2 block",children:"Quick Presets"}),(0,b.jsx)("div",{className:"flex flex-wrap gap-2",children:x.map(a=>(0,b.jsx)(f.Badge,{variant:q.includes(a.key)?"default":"outline",className:"cursor-pointer hover:opacity-80 transition-opacity",title:a.description,children:a.name},a.key))})]}),(0,b.jsx)(y,{title:"Market Cap",children:(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)(l.Input,{type:"number",placeholder:"Min",value:r.market_cap_min||"",onChange:a=>t("market_cap_min",a.target.value?Number(a.target.value):void 0),"aria-label":"Minimum market cap"}),(0,b.jsx)(l.Input,{type:"number",placeholder:"Max",value:r.market_cap_max||"",onChange:a=>t("market_cap_max",a.target.value?Number(a.target.value):void 0),"aria-label":"Maximum market cap"})]}),(0,b.jsx)("div",{className:"flex flex-wrap gap-1",children:w.slice(0,3).map(a=>(0,b.jsx)(d.Button,{variant:"outline",size:"sm",className:"h-7 text-xs",onClick:()=>{t("market_cap_min",a.min),t("market_cap_max",a.max)},children:a.label.split("(")[0].trim()},a.label))})]})}),(0,b.jsx)(y,{title:"Price",children:(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)(l.Input,{type:"number",placeholder:"Min",value:r.price_min||"",onChange:a=>t("price_min",a.target.value?Number(a.target.value):void 0),"aria-label":"Minimum price"}),(0,b.jsx)(l.Input,{type:"number",placeholder:"Max",value:r.price_max||"",onChange:a=>t("price_max",a.target.value?Number(a.target.value):void 0),"aria-label":"Maximum price"})]})}),(0,b.jsx)(y,{title:"Volume",children:(0,b.jsx)("div",{className:"space-y-2",children:(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)(l.Input,{type:"number",placeholder:"Min Volume",value:r.volume_min||"",onChange:a=>t("volume_min",a.target.value?Number(a.target.value):void 0)}),(0,b.jsx)(l.Input,{type:"number",placeholder:"Avg Volume",value:r.volume_avg_min||"",onChange:a=>t("volume_avg_min",a.target.value?Number(a.target.value):void 0)})]})})}),(0,b.jsx)(y,{title:"Valuation (P/E)",children:(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)(l.Input,{type:"number",placeholder:"Min P/E",value:r.pe_min||"",onChange:a=>t("pe_min",a.target.value?Number(a.target.value):void 0)}),(0,b.jsx)(l.Input,{type:"number",placeholder:"Max P/E",value:r.pe_max||"",onChange:a=>t("pe_max",a.target.value?Number(a.target.value):void 0)})]})}),(0,b.jsx)(y,{title:"P/B Ratio",children:(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)(l.Input,{type:"number",placeholder:"Min P/B",value:r.pb_min||"",onChange:a=>t("pb_min",a.target.value?Number(a.target.value):void 0)}),(0,b.jsx)(l.Input,{type:"number",placeholder:"Max P/B",value:r.pb_max||"",onChange:a=>t("pb_max",a.target.value?Number(a.target.value):void 0)})]})}),(0,b.jsx)(y,{title:"Dividend Yield",children:(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)(m.Label,{children:["Minimum Yield: ",r.dividend_yield_min||0,"%"]}),(0,b.jsx)(n.Slider,{value:[r.dividend_yield_min||0],onValueChange:([a])=>t("dividend_yield_min",a),max:10,step:.5,className:"w-full"}),(0,b.jsxs)("div",{className:"flex justify-between text-xs text-muted-foreground",children:[(0,b.jsx)("span",{children:"0%"}),(0,b.jsx)("span",{children:"5%"}),(0,b.jsx)("span",{children:"10%"})]})]})}),(0,b.jsx)(y,{title:"Technical Indicators",defaultOpen:!1,children:(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(m.Label,{children:"RSI Range"}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)(l.Input,{type:"number",placeholder:"Min",min:0,max:100,value:r.rsi_min||"",onChange:a=>t("rsi_min",a.target.value?Number(a.target.value):void 0)}),(0,b.jsx)(l.Input,{type:"number",placeholder:"Max",min:0,max:100,value:r.rsi_max||"",onChange:a=>t("rsi_max",a.target.value?Number(a.target.value):void 0)})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,b.jsx)(o.Checkbox,{id:"above_ma_20",checked:r.above_ma_20||!1,onCheckedChange:a=>t("above_ma_20",a)}),(0,b.jsx)(m.Label,{htmlFor:"above_ma_20",className:"text-sm cursor-pointer",children:"Above 20-day MA"})]}),(0,b.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,b.jsx)(o.Checkbox,{id:"above_ma_50",checked:r.above_ma_50||!1,onCheckedChange:a=>t("above_ma_50",a)}),(0,b.jsx)(m.Label,{htmlFor:"above_ma_50",className:"text-sm cursor-pointer",children:"Above 50-day MA"})]}),(0,b.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,b.jsx)(o.Checkbox,{id:"above_ma_200",checked:r.above_ma_200||!1,onCheckedChange:a=>t("above_ma_200",a)}),(0,b.jsx)(m.Label,{htmlFor:"above_ma_200",className:"text-sm cursor-pointer",children:"Above 200-day MA"})]})]})]})}),(0,b.jsx)(y,{title:"Sector",defaultOpen:!1,children:(0,b.jsx)(l.Input,{placeholder:"Enter sector...",value:r.sector||"",onChange:a=>t("sector",a.target.value)})}),(0,b.jsx)("div",{className:"pt-4 space-y-2",children:(0,b.jsx)(d.Button,{onClick:u,className:"w-full",disabled:j,children:j?"Screening...":"Apply Filters"})})]})]})}var A=a.i(33678),B=a.i(59820),C=a.i(63073),D=a.i(74856),E=a.i(42584),F=a.i(80380),G=a.i(55694),H=a.i(66647),I=a.i(48121),J=a.i(81623),K=a.i(76321);function L(a,b=2){if(null==a)return"--";let c="string"==typeof a?parseFloat(a):a;return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:b,maximumFractionDigits:b}).format(c)}function M({label:a,field:c,currentField:e,direction:f,onSort:g}){let h=e===c;return(0,b.jsxs)(d.Button,{variant:"ghost",size:"sm",className:(0,K.cn)("h-8 px-2 font-normal",h&&"bg-muted"),onClick:()=>g(c,h&&"asc"===f?"desc":"asc"),children:[a,h&&"asc"===f&&(0,b.jsx)(E.ArrowUp,{className:"ml-1 w-3 h-3"}),h&&"desc"===f&&(0,b.jsx)(F.ArrowDown,{className:"ml-1 w-3 h-3"}),!h&&(0,b.jsx)(D.ArrowUpDown,{className:"ml-1 w-3 h-3 opacity-50"})]})}function N(){let{results:a,loading:e,error:f,total_count:g,total_screened:h,elapsed_seconds:i,last_updated:j,sort_field:l,sort_direction:m,setSorting:n,exportResults:o,limit:p}=v(),[q,r]=(0,c.useState)(null),s=(0,c.useMemo)(()=>a&&0!==a.length?[...a].sort((a,b)=>{let c=a[l],d=b[l];return null==c?1:null==d?-1:"string"==typeof c&&"string"==typeof d?"asc"===t?c.localeCompare(d):d.localeCompare(c):"number"==typeof c&&"number"==typeof d?"asc"===t?c-d:d-c:0}):[],[a,l,m]),t=m;return e?(0,b.jsxs)(k.Card,{className:"h-full",children:[(0,b.jsxs)(k.CardHeader,{children:[(0,b.jsx)(B.Skeleton,{className:"h-6 w-32"}),(0,b.jsx)(B.Skeleton,{className:"h-4 w-48"})]}),(0,b.jsx)(k.CardContent,{children:(0,b.jsx)("div",{className:"space-y-2",children:[1,2,3,4,5].map(a=>(0,b.jsx)(B.Skeleton,{className:"h-12 w-full"},a))})})]}):f?(0,b.jsx)(k.Card,{className:"h-full",children:(0,b.jsx)(k.CardContent,{className:"flex items-center justify-center h-full",children:(0,b.jsxs)("div",{className:"text-center text-destructive",children:[(0,b.jsx)("p",{className:"font-semibold",children:"Error loading results"}),(0,b.jsx)("p",{className:"text-sm",children:f})]})})}):0===a.length?(0,b.jsx)(k.Card,{className:"h-full",children:(0,b.jsx)(k.CardContent,{className:"flex items-center justify-center h-full",children:(0,b.jsxs)("div",{className:"text-center text-muted-foreground",children:[(0,b.jsx)("p",{className:"font-semibold",children:"No results found"}),(0,b.jsx)("p",{className:"text-sm",children:"Try adjusting your filters"})]})})}):(0,b.jsxs)(k.Card,{className:"h-full flex flex-col",children:[(0,b.jsx)(k.CardHeader,{className:"pb-3",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)(k.CardTitle,{children:"Screener Results"}),(0,b.jsxs)(k.CardDescription,{children:[g," results found from ",h," screened",i>0&&` (${i}s)`]})]}),(0,b.jsxs)(C.DropdownMenu,{children:[(0,b.jsx)(C.DropdownMenuTrigger,{asChild:!0,children:(0,b.jsxs)(d.Button,{variant:"outline",size:"sm",children:[(0,b.jsx)(G.Download,{className:"w-4 h-4 mr-2"}),"Export"]})}),(0,b.jsxs)(C.DropdownMenuContent,{align:"end",children:[(0,b.jsx)(C.DropdownMenuItem,{onClick:()=>o("csv"),children:"Export as CSV"}),(0,b.jsx)(C.DropdownMenuItem,{onClick:()=>o("json"),children:"Export as JSON"})]})]})]})}),(0,b.jsxs)(k.CardContent,{className:"flex-1 overflow-auto",children:[(0,b.jsx)("div",{className:"rounded-md border",children:(0,b.jsxs)(A.Table,{children:[(0,b.jsx)(A.TableHeader,{children:(0,b.jsxs)(A.TableRow,{className:"bg-muted/50",children:[(0,b.jsx)(A.TableHead,{className:"w-[100px]",children:(0,b.jsx)(M,{label:"Symbol",field:"symbol",currentField:l,direction:t,onSort:n})}),(0,b.jsx)(A.TableHead,{children:(0,b.jsx)(M,{label:"Name",field:"name",currentField:l,direction:t,onSort:n})}),(0,b.jsx)(A.TableHead,{className:"text-right",children:(0,b.jsx)(M,{label:"Price",field:"current_price",currentField:l,direction:t,onSort:n})}),(0,b.jsx)(A.TableHead,{className:"text-right",children:(0,b.jsx)(M,{label:"Change",field:"change_percent",currentField:l,direction:t,onSort:n})}),(0,b.jsx)(A.TableHead,{className:"text-right",children:(0,b.jsx)(M,{label:"Volume",field:"volume",currentField:l,direction:t,onSort:n})}),(0,b.jsx)(A.TableHead,{className:"text-right",children:(0,b.jsx)(M,{label:"Market Cap",field:"market_cap",currentField:l,direction:t,onSort:n})}),(0,b.jsx)(A.TableHead,{className:"text-right",children:(0,b.jsx)(M,{label:"P/E",field:"pe_ratio",currentField:l,direction:t,onSort:n})}),(0,b.jsx)(A.TableHead,{className:"text-right",children:(0,b.jsx)(M,{label:"Div Yield",field:"dividend_yield",currentField:l,direction:t,onSort:n})}),(0,b.jsx)(A.TableHead,{className:"text-center",children:"Actions"})]})}),(0,b.jsx)(A.TableBody,{children:s.map(a=>(0,b.jsxs)(A.TableRow,{className:(0,K.cn)("cursor-pointer transition-colors",q===a.id&&"bg-muted"),onClick:()=>r(q===a.id?null:a.id),children:[(0,b.jsx)(A.TableCell,{className:"font-medium",children:a.symbol}),(0,b.jsx)(A.TableCell,{className:"max-w-[200px] truncate",title:a.name,children:a.name}),(0,b.jsx)(A.TableCell,{className:"text-right",children:L(a.current_price)}),(0,b.jsx)(A.TableCell,{className:"text-right",children:(0,b.jsxs)("div",{className:(0,K.cn)("flex items-center justify-end gap-1",a.change_percent>=0?"text-green-600":"text-red-600"),children:[a.change_percent>=0?(0,b.jsx)(I.TrendingUp,{className:"w-3 h-3"}):(0,b.jsx)(J.TrendingDown,{className:"w-3 h-3"}),a.change_percent?.toFixed(2),"%"]})}),(0,b.jsx)(A.TableCell,{className:"text-right text-muted-foreground",children:function(a){if(null==a)return"--";let b="string"==typeof a?parseFloat(a):a;return new Intl.NumberFormat("en-US",{minimumFractionDigits:0,maximumFractionDigits:0}).format(b)}(a.volume)}),(0,b.jsxs)(A.TableCell,{className:"text-right",children:[L(a.market_cap/1e6,0),"M"]}),(0,b.jsx)(A.TableCell,{className:"text-right",children:void 0!==a.pe_ratio&&null!==a.pe_ratio?a.pe_ratio.toFixed(2):"-"}),(0,b.jsx)(A.TableCell,{className:"text-right",children:void 0!==a.dividend_yield&&null!==a.dividend_yield?`${a.dividend_yield.toFixed(2)}%`:"-"}),(0,b.jsx)(A.TableCell,{className:"text-center",children:(0,b.jsx)(d.Button,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",onClick:b=>{b.stopPropagation(),window.open(`/assets/${a.symbol}`,"_blank")},children:(0,b.jsx)(H.ExternalLink,{className:"w-3 h-3"})})})]},a.id))})]})}),a.length>=p&&(0,b.jsxs)("div",{className:"mt-4 text-center text-sm text-muted-foreground",children:["Showing ",p," of ",g," results. Adjust filters to see more."]})]})]})}var O=a.i(83688),P=a.i(18754),Q=a.i(19457),R=a.i(44457);let S=(0,a.i(78360).default)("folder-open",[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]]);var T=a.i(22253);let U=(0,s.create)()((0,t.persist)((a,b)=>({presets:[],loading:!1,error:null,fetchPresets:async()=>{a({loading:!0,error:null});try{let b=await u.screenerApi.getUserPresets();a({presets:b,loading:!1})}catch(b){a({error:b instanceof Error?b.message:"Failed to fetch presets",loading:!1})}},savePreset:async(b,c)=>{a({loading:!0,error:null});try{let d=await u.screenerApi.savePreset(b,c);return a(a=>({presets:[d,...a.presets],loading:!1})),d}catch(c){let b=c instanceof Error?c.message:"Failed to save preset";throw a({error:b,loading:!1}),Error(b)}},updatePreset:async(b,c)=>{a({loading:!0,error:null});try{let d=await u.screenerApi.updatePreset(b,c);return a(a=>({presets:a.presets.map(a=>a.id===b?d:a),loading:!1})),d}catch(c){let b=c instanceof Error?c.message:"Failed to update preset";throw a({error:b,loading:!1}),Error(b)}},deletePreset:async b=>{a({loading:!0,error:null});try{await u.screenerApi.deletePreset(b),a(a=>({presets:a.presets.filter(a=>a.id!==b),loading:!1}))}catch(c){let b=c instanceof Error?c.message:"Failed to delete preset";throw a({error:b,loading:!1}),Error(b)}},clearError:()=>{a({error:null})}}),{name:"screener-presets-storage",partialize:a=>({presets:a.presets})}));function V(a){return Object.values(a).filter(a=>null!=a&&""!==a).length}function W({onSave:a}){let[e,f]=(0,c.useState)(!1),[h,i]=(0,c.useState)(""),{savePreset:j,loading:k,error:m}=U(),{filters:n}=v(),o=async()=>{if(h.trim())try{await j(h.trim(),n),f(!1),i(""),a?.()}catch(a){}},p=V(n),q=h.trim()&&p>0;return(0,b.jsxs)(T.Dialog,{open:e,onOpenChange:f,children:[(0,b.jsx)(T.DialogTrigger,{asChild:!0,children:(0,b.jsxs)(d.Button,{variant:"outline",size:"sm",children:[(0,b.jsx)(O.Plus,{className:"h-4 w-4 mr-2"}),"Save Preset"]})}),(0,b.jsxs)(T.DialogContent,{children:[(0,b.jsxs)(T.DialogHeader,{children:[(0,b.jsx)(T.DialogTitle,{children:"Save Screener Preset"}),(0,b.jsx)(T.DialogDescription,{children:"Save your current filter criteria as a named preset for quick access later."})]}),(0,b.jsxs)("div",{className:"space-y-4 py-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("label",{className:"text-sm font-medium",children:"Preset Name"}),(0,b.jsx)(l.Input,{placeholder:"e.g., Tech Growth Stocks",value:h,onChange:a=>i(a.target.value),disabled:k})]}),m&&(0,b.jsx)("p",{className:"text-sm text-destructive",children:m}),p>0?(0,b.jsxs)("p",{className:"text-sm text-muted-foreground",children:["This preset will save ",p," filter",1!==p?"s":"","."]}):(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"No filters applied. Add some filters before saving."})]}),(0,b.jsxs)(T.DialogFooter,{children:[(0,b.jsx)(d.Button,{variant:"outline",onClick:()=>f(!1),disabled:k,children:"Cancel"}),(0,b.jsx)(d.Button,{onClick:o,disabled:!q||k,children:k?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(g.Loader2,{className:"h-4 w-4 mr-2 animate-spin"}),"Saving..."]}):"Save Preset"})]})]})]})}function X({preset:a,onRename:e}){let[f,h]=(0,c.useState)(!1),[i,j]=(0,c.useState)(a.name),{updatePreset:k,loading:m,error:n}=U(),o=async()=>{if(!i.trim()||i.trim()===a.name)return void h(!1);try{await k(a.id,{name:i.trim()}),h(!1),e?.()}catch(a){}};return(0,b.jsxs)(T.Dialog,{open:f,onOpenChange:h,children:[(0,b.jsx)(T.DialogTrigger,{asChild:!0,children:(0,b.jsx)(d.Button,{variant:"ghost",size:"icon",className:"h-8 w-8",children:(0,b.jsx)(Q.Edit2,{className:"h-4 w-4"})})}),(0,b.jsxs)(T.DialogContent,{children:[(0,b.jsxs)(T.DialogHeader,{children:[(0,b.jsx)(T.DialogTitle,{children:"Rename Preset"}),(0,b.jsx)(T.DialogDescription,{children:"Give your preset a new name."})]}),(0,b.jsxs)("div",{className:"space-y-4 py-4",children:[(0,b.jsx)(l.Input,{placeholder:"Preset name",value:i,onChange:a=>j(a.target.value),disabled:m}),n&&(0,b.jsx)("p",{className:"text-sm text-destructive",children:n})]}),(0,b.jsxs)(T.DialogFooter,{children:[(0,b.jsx)(d.Button,{variant:"outline",onClick:()=>h(!1),disabled:m,children:"Cancel"}),(0,b.jsx)(d.Button,{onClick:o,disabled:!i.trim()||m,children:m?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(g.Loader2,{className:"h-4 w-4 mr-2 animate-spin"}),"Saving..."]}):"Rename"})]})]})]})}function Y({onSelectPreset:a}){let{presets:e,loading:f,fetchPresets:h,deletePreset:i}=U(),{filters:j,applyPreset:l}=v(),[m,n]=(0,c.useState)(null),o=async a=>{if(confirm("Are you sure you want to delete this preset?")){n(a);try{await i(a)}finally{n(null)}}},p=e.length>0||!f;return(0,b.jsxs)(k.Card,{children:[(0,b.jsx)(k.CardHeader,{className:"pb-3",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)(k.CardTitle,{className:"text-lg",children:"Saved Screeners"}),(0,b.jsx)(W,{onSave:h})]})}),(0,b.jsx)(k.CardContent,{children:f&&!p?(0,b.jsx)("div",{className:"flex items-center justify-center py-8",children:(0,b.jsx)(g.Loader2,{className:"h-6 w-6 animate-spin text-muted-foreground"})}):0===e.length?(0,b.jsxs)("div",{className:"text-center py-8 text-muted-foreground",children:[(0,b.jsx)(S,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),(0,b.jsx)("p",{className:"text-sm",children:"No saved presets"}),(0,b.jsx)("p",{className:"text-xs mt-1",children:"Save your current filters as a preset for quick access"})]}):(0,b.jsx)("div",{className:"space-y-2",children:e.map(c=>{let e,f,i,j,k;return(0,b.jsxs)("div",{className:"flex items-center justify-between p-3 rounded-lg border bg-card hover:bg-muted/50 transition-colors",children:[(0,b.jsxs)("div",{className:"flex-1 min-w-0 mr-3",children:[(0,b.jsx)("p",{className:"font-medium truncate",children:c.name}),(0,b.jsxs)("p",{className:"text-xs text-muted-foreground",children:[V(c.filters)," filters â€¢ ",(e=new Date(c.updated_at),i=Math.floor((f=new Date().getTime()-e.getTime())/6e4),j=Math.floor(f/36e5),k=Math.floor(f/864e5),i<1?"Just now":i<60?`${i}m ago`:j<24?`${j}h ago`:k<7?`${k}d ago`:e.toLocaleDateString())]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-1",children:[(0,b.jsxs)(d.Button,{variant:"ghost",size:"sm",onClick:()=>{l({key:c.id,name:c.name,description:"",filters:c.filters}),a?.(c.filters)},disabled:m===c.id,children:[(0,b.jsx)(R.Upload,{className:"h-4 w-4 mr-1"}),"Load"]}),(0,b.jsx)(X,{preset:c,onRename:h}),(0,b.jsx)(d.Button,{variant:"ghost",size:"icon",className:"h-8 w-8 text-destructive hover:text-destructive",onClick:()=>o(c.id),disabled:m===c.id,children:m===c.id?(0,b.jsx)(g.Loader2,{className:"h-4 w-4 animate-spin"}):(0,b.jsx)(P.Trash2,{className:"h-4 w-4"})})]})]},c.id)})})})]})}function Z(){let{runScreener:a,clearFilters:k,loading:l,error:m,filters:n,last_updated:o}=v(),{fetchPresets:p}=U(),q=(0,c.useCallback)(()=>{a()},[a]),r=(0,c.useCallback)(()=>{k()},[k]);(0,c.useEffect)(()=>{a(),p()},[]);let s=Object.values(n).filter(a=>null!=a&&""!==a).length,t=s>0;return(0,b.jsxs)("div",{className:"container mx-auto py-6 space-y-6",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-3xl font-bold tracking-tight",children:"Stock Screener"}),(0,b.jsx)("p",{className:"text-muted-foreground mt-1",children:"Find stocks and assets that match your investment criteria"}),(0,b.jsxs)("div",{className:"flex items-center gap-3 mt-2 text-sm",children:[t&&(0,b.jsxs)(f.Badge,{variant:"secondary",children:[s," filter",1!==s?"s":""," applied"]}),(0,b.jsxs)("span",{className:"text-muted-foreground flex items-center gap-1",children:[(0,b.jsx)(j.Clock,{className:"h-3 w-3"}),"Last updated: ",o?new Date(o).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",second:"2-digit"}):"Never"]})]})]}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsxs)(d.Button,{variant:"outline",onClick:r,disabled:l||!t,children:[(0,b.jsx)(h.RotateCcw,{className:"h-4 w-4 mr-2"}),"Clear All"]}),(0,b.jsxs)(d.Button,{onClick:q,disabled:l,children:[l?(0,b.jsx)(g.Loader2,{className:"h-4 w-4 mr-2 animate-spin"}):(0,b.jsx)(i.Play,{className:"h-4 w-4 mr-2"}),"Run Screener"]})]})]}),m&&(0,b.jsx)(e.Alert,{variant:"destructive",children:(0,b.jsx)(e.AlertDescription,{children:m})}),(0,b.jsxs)("div",{className:"grid lg:grid-cols-4 gap-6 h-[calc(100vh-200px)]",children:[(0,b.jsxs)("div",{className:"lg:col-span-1 space-y-4",children:[(0,b.jsx)(Y,{}),(0,b.jsx)(z,{})]}),(0,b.jsx)("div",{className:"lg:col-span-3",children:(0,b.jsx)(N,{})})]})]})}a.s(["default",()=>Z],21190)}];

//# sourceMappingURL=apps_frontend_src_app_%28dashboard%29_screener_page_tsx_424c6b7b._.js.map
module.exports=[67912,a=>{"use strict";var b=a.i(86531),c=a.i(9644),d=a.i(65366),e=a.i(49657),f=a.i(61219),g=a.i(48047),h=a.i(51145),i=a.i(47627),j=a.i(4631),k=a.i(59820),l=a.i(6047),m=a.i(22253),n=a.i(19468),o=a.i(80355),p=a.i(67884),q=a.i(83688),r=a.i(88029),s=a.i(75628);let t=(0,a.i(78360).default)("pause",[["rect",{x:"14",y:"3",width:"5",height:"18",rx:"1",key:"kaeet6"}],["rect",{x:"5",y:"3",width:"5",height:"18",rx:"1",key:"1wsw3u"}]]);var u=a.i(18754);function v(){let[a,v]=(0,c.useState)([]),[w,x]=(0,c.useState)(null),[y,z]=(0,c.useState)(!1),[A,B]=(0,c.useState)(""),[C,D]=(0,c.useState)("list"),[E,F]=(0,c.useState)("all"),[G,H]=(0,c.useState)(""),[I,J]=(0,c.useState)(!1),[K,L]=(0,c.useState)(null),[M,N]=(0,c.useState)(null),[O,P]=(0,c.useState)([]);(0,c.useEffect)(()=>{Q()},[]);let Q=async()=>{z(!0),B("");try{let[a,b]=await Promise.all([d.alertsApi.list({status:E}),d.alertsApi.getStats()]);v(a),x(b)}catch(a){B(a instanceof Error?a.message:"Failed to fetch alerts")}finally{z(!1)}},R=async a=>{a.preventDefault();let b=new FormData(a.target),c={name:b.get("name"),alert_type:b.get("alert_type"),symbol:b.get("symbol"),condition_value:Number(b.get("condition_value")),condition_operator:b.get("condition_operator")||">=",delivery_channels:b.get("delivery_channel")?[b.get("delivery_channel")]:void 0,priority:Number(b.get("priority"))||5,cooldown_seconds:Number(b.get("cooldown_seconds"))||300};try{await d.alertsApi.create(c),J(!1),Q()}catch(a){B(a instanceof Error?a.message:"Failed to create alert")}},S=async a=>{try{await d.alertsApi.delete(a),Q()}catch(a){B(a instanceof Error?a.message:"Failed to delete alert")}},T=async a=>{try{"active"===a.status?await d.alertsApi.disable(a.id):await d.alertsApi.enable(a.id),Q()}catch(a){B(a instanceof Error?a.message:"Failed to toggle alert")}},U=async a=>{try{let b=await d.alertsApi.test(a);b.success?window.alert(`Alert test successful! Trigger value: ${b.trigger_value}`):window.alert(`Alert test failed: ${b.message}`)}catch(a){B(a instanceof Error?a.message:"Failed to test alert")}},V=async a=>{N(a);try{let b=await d.alertsApi.getHistory(a);P(b)}catch(a){B(a instanceof Error?a.message:"Failed to fetch history")}},W=a.filter(a=>{let b=a.name.toLowerCase().includes(G.toLowerCase())||a.symbol.toLowerCase().includes(G.toLowerCase()),c="all"===E||a.status===E;return b&&c});return(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-3xl font-bold",children:"Alerts"}),(0,b.jsx)("p",{className:"text-muted-foreground",children:"Manage and monitor price alerts"})]}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsxs)(m.Dialog,{open:I,onOpenChange:J,children:[(0,b.jsx)(m.DialogTrigger,{asChild:!0,children:(0,b.jsxs)(f.Button,{children:[(0,b.jsx)(q.Plus,{className:"w-4 h-4 mr-2"}),"Create Alert"]})}),(0,b.jsxs)(m.DialogContent,{children:[(0,b.jsxs)(m.DialogHeader,{children:[(0,b.jsx)(m.DialogTitle,{children:"Create New Alert"}),(0,b.jsx)(m.DialogDescription,{children:"Set up a new price alert for any asset"})]}),(0,b.jsxs)("form",{onSubmit:R,className:"space-y-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(h.Label,{htmlFor:"name",children:"Alert Name"}),(0,b.jsx)(g.Input,{id:"name",name:"name",placeholder:"My Alert",required:!0})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(h.Label,{htmlFor:"symbol",children:"Symbol"}),(0,b.jsx)(g.Input,{id:"symbol",name:"symbol",placeholder:"AAPL",required:!0,className:"uppercase"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(h.Label,{htmlFor:"alert_type",children:"Alert Type"}),(0,b.jsxs)(i.Select,{name:"alert_type",defaultValue:"price_above",children:[(0,b.jsx)(i.SelectTrigger,{children:(0,b.jsx)(i.SelectValue,{})}),(0,b.jsxs)(i.SelectContent,{children:[(0,b.jsx)(i.SelectItem,{value:"price_above",children:"Price Above"}),(0,b.jsx)(i.SelectItem,{value:"price_below",children:"Price Below"}),(0,b.jsx)(i.SelectItem,{value:"percent_change",children:"Percent Change"}),(0,b.jsx)(i.SelectItem,{value:"volume_spike",children:"Volume Spike"})]})]})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(h.Label,{htmlFor:"condition_value",children:"Trigger Value"}),(0,b.jsx)(g.Input,{id:"condition_value",name:"condition_value",type:"number",step:"0.01",required:!0})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(h.Label,{htmlFor:"condition_operator",children:"Operator"}),(0,b.jsxs)(i.Select,{name:"condition_operator",defaultValue:">=",children:[(0,b.jsx)(i.SelectTrigger,{children:(0,b.jsx)(i.SelectValue,{})}),(0,b.jsxs)(i.SelectContent,{children:[(0,b.jsx)(i.SelectItem,{value:">=",children:">="}),(0,b.jsx)(i.SelectItem,{value:"<=",children:"<="}),(0,b.jsx)(i.SelectItem,{value:"==",children:"=="})]})]})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(h.Label,{htmlFor:"priority",children:"Priority"}),(0,b.jsx)(g.Input,{id:"priority",name:"priority",type:"number",min:"1",max:"10",defaultValue:"5"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(h.Label,{htmlFor:"cooldown_seconds",children:"Cooldown (seconds)"}),(0,b.jsx)(g.Input,{id:"cooldown_seconds",name:"cooldown_seconds",type:"number",min:"0",defaultValue:"300"})]})]}),(0,b.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,b.jsx)(f.Button,{type:"button",variant:"outline",onClick:()=>J(!1),children:"Cancel"}),(0,b.jsx)(f.Button,{type:"submit",children:"Create Alert"})]})]})]})]}),(0,b.jsxs)(f.Button,{variant:"outline",onClick:Q,disabled:y,children:[(0,b.jsx)(r.RefreshCw,{className:`w-4 h-4 mr-2 ${y?"animate-spin":""}`}),"Refresh"]})]})]}),w&&(0,b.jsxs)("div",{className:"grid gap-4 md:grid-cols-4",children:[(0,b.jsxs)(e.Card,{children:[(0,b.jsx)(e.CardHeader,{children:(0,b.jsx)(e.CardDescription,{children:"Total Alerts"})}),(0,b.jsx)(e.CardContent,{children:(0,b.jsx)("p",{className:"text-3xl font-bold",children:w.total_alerts})})]}),(0,b.jsxs)(e.Card,{children:[(0,b.jsx)(e.CardHeader,{children:(0,b.jsx)(e.CardDescription,{children:"Active Alerts"})}),(0,b.jsx)(e.CardContent,{children:(0,b.jsx)("p",{className:"text-3xl font-bold text-green-600",children:w.active_alerts})})]}),(0,b.jsxs)(e.Card,{children:[(0,b.jsx)(e.CardHeader,{children:(0,b.jsx)(e.CardDescription,{children:"Triggered Today"})}),(0,b.jsx)(e.CardContent,{children:(0,b.jsx)("p",{className:"text-3xl font-bold text-blue-600",children:w.triggered_today})})]}),(0,b.jsxs)(e.Card,{children:[(0,b.jsx)(e.CardHeader,{children:(0,b.jsx)(e.CardDescription,{children:"Success Rate"})}),(0,b.jsx)(e.CardContent,{children:(0,b.jsx)("p",{className:"text-3xl font-bold",children:w.active_alerts>0?`${((w.total_alerts-w.active_alerts)/(w.total_alerts-w.active_alerts+w.triggered_today)*100).toFixed(0)}%`:"0%"})})]})]}),(0,b.jsxs)(j.Tabs,{value:C,onValueChange:D,children:[(0,b.jsxs)(j.TabsList,{children:[(0,b.jsx)(j.TabsTrigger,{value:"list",children:"Alert List"}),(0,b.jsx)(j.TabsTrigger,{value:"create",children:"Create New"})]}),(0,b.jsxs)(j.TabsContent,{value:"list",className:"space-y-4",children:[(0,b.jsxs)("div",{className:"flex gap-4 mb-4",children:[(0,b.jsx)(g.Input,{placeholder:"Search alerts by name or symbol...",value:G,onChange:a=>H(a.target.value),className:"flex-1"}),(0,b.jsxs)(i.Select,{value:E,onValueChange:F,children:[(0,b.jsx)(i.SelectTrigger,{className:"w-40",children:(0,b.jsx)(i.SelectValue,{})}),(0,b.jsxs)(i.SelectContent,{children:[(0,b.jsx)(i.SelectItem,{value:"all",children:"All"}),(0,b.jsx)(i.SelectItem,{value:"active",children:"Active"}),(0,b.jsx)(i.SelectItem,{value:"disabled",children:"Disabled"}),(0,b.jsx)(i.SelectItem,{value:"triggered",children:"Triggered"}),(0,b.jsx)(i.SelectItem,{value:"expired",children:"Expired"})]})]})]}),A&&(0,b.jsx)("div",{className:"bg-destructive/10 text-destructive p-4 rounded-lg",children:(0,b.jsx)("p",{children:A})}),y?(0,b.jsx)("div",{className:"space-y-3",children:[1,2,3,4,5].map(a=>(0,b.jsx)(e.Card,{children:(0,b.jsx)(e.CardContent,{className:"pt-6",children:(0,b.jsx)(k.Skeleton,{className:"h-20 w-full"})})},a))}):0===W.length?(0,b.jsx)(e.Card,{children:(0,b.jsxs)(e.CardContent,{className:"py-12 text-center",children:[(0,b.jsx)(n.AlertCircle,{className:"w-12 h-12 mx-auto text-muted-foreground mb-4"}),(0,b.jsx)("p",{className:"text-muted-foreground",children:"No alerts found"}),(0,b.jsx)(f.Button,{onClick:()=>J(!0),children:"Create Your First Alert"})]})}):(0,b.jsx)("div",{className:"space-y-3",children:W.map(a=>(0,b.jsx)(e.Card,{children:(0,b.jsxs)(e.CardContent,{className:"p-6",children:[(0,b.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"font-semibold text-lg",children:a.name}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:a.symbol})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(a=>{switch(a){case"active":return(0,b.jsx)(l.Badge,{className:"bg-green-100 text-green-800",children:"Active"});case"disabled":return(0,b.jsx)(l.Badge,{variant:"secondary",children:"Disabled"});case"triggered":return(0,b.jsx)(l.Badge,{className:"bg-blue-100 text-blue-800",children:"Triggered"});case"expired":return(0,b.jsx)(l.Badge,{className:"bg-red-100 text-red-800",children:"Expired"});default:return(0,b.jsx)(l.Badge,{variant:"outline",children:a})}})(a.status),(0,b.jsx)(l.Badge,{variant:"outline",children:a.priority})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Type"}),(0,b.jsx)("p",{className:"font-medium",children:a.alert_type})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Trigger Condition"}),(0,b.jsxs)("p",{className:"font-medium",children:[a.condition_operator," ",a.condition_value]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Triggered"}),(0,b.jsxs)("p",{className:"font-medium",children:[a.triggered_count," times"]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Created"}),(0,b.jsx)("p",{className:"font-medium",children:new Date(a.created_at).toLocaleDateString()})]})]}),a.last_triggered_at&&(0,b.jsxs)("div",{className:"mb-4",children:[(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Last Triggered"}),(0,b.jsx)("p",{className:"font-medium",children:new Date(a.last_triggered_at).toLocaleString()})]}),(0,b.jsxs)("div",{className:"flex gap-2",children:["active"===a.status&&(0,b.jsxs)(f.Button,{size:"sm",variant:"outline",onClick:()=>T(a),children:[(0,b.jsx)(t,{className:"w-4 h-4 mr-2"}),"Disable"]}),"disabled"===a.status&&(0,b.jsxs)(f.Button,{size:"sm",variant:"outline",onClick:()=>T(a),children:[(0,b.jsx)(s.Play,{className:"w-4 h-4 mr-2"}),"Enable"]}),(0,b.jsx)(f.Button,{size:"sm",variant:"outline",onClick:()=>V(a.id),children:"View History"}),(0,b.jsx)(f.Button,{size:"sm",variant:"outline",onClick:()=>U(a.id),children:"Test"}),(0,b.jsxs)(f.Button,{size:"sm",variant:"destructive",onClick:()=>S(a.id),children:[(0,b.jsx)(u.Trash2,{className:"w-4 h-4 mr-2"}),"Delete"]})]})]})},a.id))})]}),(0,b.jsx)(j.TabsContent,{value:"create",children:(0,b.jsx)(e.Card,{children:(0,b.jsx)(e.CardContent,{className:"pt-6",children:(0,b.jsxs)("div",{className:"text-center py-8",children:[(0,b.jsx)(n.AlertCircle,{className:"w-16 h-16 mx-auto text-muted-foreground mb-4"}),(0,b.jsx)("p",{className:"text-muted-foreground mb-6",children:"Create alert from the list tab or use the button above"})]})})})})]}),M&&(0,b.jsx)(m.Dialog,{open:!!M,onOpenChange:()=>N(null),children:(0,b.jsxs)(m.DialogContent,{className:"max-w-2xl",children:[(0,b.jsxs)(m.DialogHeader,{children:[(0,b.jsx)(m.DialogTitle,{children:"Alert History"}),(0,b.jsx)(m.DialogDescription,{children:"Trigger history for this alert"})]}),(0,b.jsx)("div",{className:"max-h-96 overflow-y-auto",children:0===O.length?(0,b.jsx)("p",{className:"center text-muted-foreground py-8",children:"No trigger history"}):(0,b.jsx)("div",{className:"space-y-2",children:O.map(a=>(0,b.jsxs)("div",{className:"flex items-center justify-between border-b py-2",children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)("p",{className:"font-medium",children:["Trigger Value: ",a.trigger_value]}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:new Date(a.triggered_at).toLocaleString()})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[a.condition_met?(0,b.jsx)(l.Badge,{className:"bg-green-100 text-green-800",children:"Condition Met"}):(0,b.jsx)(l.Badge,{variant:"secondary",children:"Not Met"}),a.notification_sent?(0,b.jsx)(o.Check,{className:"w-4 h-4 text-green-600"}):(0,b.jsx)(p.X,{className:"w-4 h-4 text-red-600"})]})]},a.id))})}),(0,b.jsx)("div",{className:"flex justify-end pt-4",children:(0,b.jsx)(f.Button,{variant:"outline",onClick:()=>N(null),children:"Close"})})]})})]})}a.s(["default",()=>v],67912)}];

//# sourceMappingURL=apps_frontend_src_app_%28dashboard%29_alerts_page_tsx_29aad0af._.js.map
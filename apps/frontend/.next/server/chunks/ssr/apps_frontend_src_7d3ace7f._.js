module.exports=[27306,a=>{"use strict";function b(a){var b=a.width,c=a.height;if(b<0)throw Error("Negative width is not allowed for Size");if(c<0)throw Error("Negative height is not allowed for Size");return{width:b,height:c}}function c(a,b){return a.width===b.width&&a.height===b.height}var d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x=function(){function a(a){var b=this;this._resolutionListener=function(){return b._onResolutionChanged()},this._resolutionMediaQueryList=null,this._observers=[],this._window=a,this._installResolutionListener()}return a.prototype.dispose=function(){this._uninstallResolutionListener(),this._window=null},Object.defineProperty(a.prototype,"value",{get:function(){return this._window.devicePixelRatio},enumerable:!1,configurable:!0}),a.prototype.subscribe=function(a){var b=this,c={next:a};return this._observers.push(c),{unsubscribe:function(){b._observers=b._observers.filter(function(a){return a!==c})}}},a.prototype._installResolutionListener=function(){if(null!==this._resolutionMediaQueryList)throw Error("Resolution listener is already installed");var a=this._window.devicePixelRatio;this._resolutionMediaQueryList=this._window.matchMedia("all and (resolution: ".concat(a,"dppx)")),this._resolutionMediaQueryList.addListener(this._resolutionListener)},a.prototype._uninstallResolutionListener=function(){null!==this._resolutionMediaQueryList&&(this._resolutionMediaQueryList.removeListener(this._resolutionListener),this._resolutionMediaQueryList=null)},a.prototype._reinstallResolutionListener=function(){this._uninstallResolutionListener(),this._installResolutionListener()},a.prototype._onResolutionChanged=function(){var a=this;this._observers.forEach(function(b){return b.next(a._window.devicePixelRatio)}),this._reinstallResolutionListener()},a}(),y=function(){function a(a,c,d){var e;this._canvasElement=null,this._bitmapSizeChangedListeners=[],this._suggestedBitmapSize=null,this._suggestedBitmapSizeChangedListeners=[],this._devicePixelRatioObservable=null,this._canvasElementResizeObserver=null,this._canvasElement=a,this._canvasElementClientSize=b({width:this._canvasElement.clientWidth,height:this._canvasElement.clientHeight}),this._transformBitmapSize=null!=c?c:function(a){return a},this._allowResizeObserver=null==(e=null==d?void 0:d.allowResizeObserver)||e,this._chooseAndInitObserver()}return a.prototype.dispose=function(){var a,b;if(null===this._canvasElement)throw Error("Object is disposed");null==(a=this._canvasElementResizeObserver)||a.disconnect(),this._canvasElementResizeObserver=null,null==(b=this._devicePixelRatioObservable)||b.dispose(),this._devicePixelRatioObservable=null,this._suggestedBitmapSizeChangedListeners.length=0,this._bitmapSizeChangedListeners.length=0,this._canvasElement=null},Object.defineProperty(a.prototype,"canvasElement",{get:function(){if(null===this._canvasElement)throw Error("Object is disposed");return this._canvasElement},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"canvasElementClientSize",{get:function(){return this._canvasElementClientSize},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"bitmapSize",{get:function(){return b({width:this.canvasElement.width,height:this.canvasElement.height})},enumerable:!1,configurable:!0}),a.prototype.resizeCanvasElement=function(a){this._canvasElementClientSize=b(a),this.canvasElement.style.width="".concat(this._canvasElementClientSize.width,"px"),this.canvasElement.style.height="".concat(this._canvasElementClientSize.height,"px"),this._invalidateBitmapSize()},a.prototype.subscribeBitmapSizeChanged=function(a){this._bitmapSizeChangedListeners.push(a)},a.prototype.unsubscribeBitmapSizeChanged=function(a){this._bitmapSizeChangedListeners=this._bitmapSizeChangedListeners.filter(function(b){return b!==a})},Object.defineProperty(a.prototype,"suggestedBitmapSize",{get:function(){return this._suggestedBitmapSize},enumerable:!1,configurable:!0}),a.prototype.subscribeSuggestedBitmapSizeChanged=function(a){this._suggestedBitmapSizeChangedListeners.push(a)},a.prototype.unsubscribeSuggestedBitmapSizeChanged=function(a){this._suggestedBitmapSizeChangedListeners=this._suggestedBitmapSizeChangedListeners.filter(function(b){return b!==a})},a.prototype.applySuggestedBitmapSize=function(){if(null!==this._suggestedBitmapSize){var a=this._suggestedBitmapSize;this._suggestedBitmapSize=null,this._resizeBitmap(a),this._emitSuggestedBitmapSizeChanged(a,this._suggestedBitmapSize)}},a.prototype._resizeBitmap=function(a){var b=this.bitmapSize;c(b,a)||(this.canvasElement.width=a.width,this.canvasElement.height=a.height,this._emitBitmapSizeChanged(b,a))},a.prototype._emitBitmapSizeChanged=function(a,b){var c=this;this._bitmapSizeChangedListeners.forEach(function(d){return d.call(c,a,b)})},a.prototype._suggestNewBitmapSize=function(a){var d=this._suggestedBitmapSize,e=b(this._transformBitmapSize(a,this._canvasElementClientSize)),f=c(this.bitmapSize,e)?null:e;null===d&&null===f||null!==d&&null!==f&&c(d,f)||(this._suggestedBitmapSize=f,this._emitSuggestedBitmapSizeChanged(d,f))},a.prototype._emitSuggestedBitmapSizeChanged=function(a,b){var c=this;this._suggestedBitmapSizeChangedListeners.forEach(function(d){return d.call(c,a,b)})},a.prototype._chooseAndInitObserver=function(){var a=this;this._allowResizeObserver?new Promise(function(a){var b=new ResizeObserver(function(c){a(c.every(function(a){return"devicePixelContentBoxSize"in a})),b.disconnect()});b.observe(document.body,{box:"device-pixel-content-box"})}).catch(function(){return!1}).then(function(b){return b?a._initResizeObserver():a._initDevicePixelRatioObservable()}):this._initDevicePixelRatioObservable()},a.prototype._initDevicePixelRatioObservable=function(){var a=this;if(null!==this._canvasElement){var b=z(this._canvasElement);if(null===b)throw Error("No window is associated with the canvas");this._devicePixelRatioObservable=new x(b),this._devicePixelRatioObservable.subscribe(function(){return a._invalidateBitmapSize()}),this._invalidateBitmapSize()}},a.prototype._invalidateBitmapSize=function(){if(null!==this._canvasElement){var a,c,d=z(this._canvasElement);if(null!==d){var e,f,g=null!=(c=null==(a=this._devicePixelRatioObservable)?void 0:a.value)?c:d.devicePixelRatio,h=this._canvasElement.getClientRects(),i=void 0!==h[0]?(e=h[0],f=g,b({width:Math.round(e.left*f+e.width*f)-Math.round(e.left*f),height:Math.round(e.top*f+e.height*f)-Math.round(e.top*f)})):b({width:this._canvasElementClientSize.width*g,height:this._canvasElementClientSize.height*g});this._suggestNewBitmapSize(i)}}},a.prototype._initResizeObserver=function(){var a=this;null!==this._canvasElement&&(this._canvasElementResizeObserver=new ResizeObserver(function(c){var d=c.find(function(b){return b.target===a._canvasElement});if(d&&d.devicePixelContentBoxSize&&d.devicePixelContentBoxSize[0]){var e=d.devicePixelContentBoxSize[0],f=b({width:e.inlineSize,height:e.blockSize});a._suggestNewBitmapSize(f)}}),this._canvasElementResizeObserver.observe(this._canvasElement,{box:"device-pixel-content-box"}))},a}();function z(a){return a.ownerDocument.defaultView}var A=function(){function a(a,b,c){if(0===b.width||0===b.height)throw TypeError("Rendering target could only be created on a media with positive width and height");if(this._mediaSize=b,0===c.width||0===c.height)throw TypeError("Rendering target could only be created using a bitmap with positive integer width and height");this._bitmapSize=c,this._context=a}return a.prototype.useMediaCoordinateSpace=function(a){try{return this._context.save(),this._context.setTransform(1,0,0,1,0,0),this._context.scale(this._horizontalPixelRatio,this._verticalPixelRatio),a({context:this._context,mediaSize:this._mediaSize})}finally{this._context.restore()}},a.prototype.useBitmapCoordinateSpace=function(a){try{return this._context.save(),this._context.setTransform(1,0,0,1,0,0),a({context:this._context,mediaSize:this._mediaSize,bitmapSize:this._bitmapSize,horizontalPixelRatio:this._horizontalPixelRatio,verticalPixelRatio:this._verticalPixelRatio})}finally{this._context.restore()}},Object.defineProperty(a.prototype,"_horizontalPixelRatio",{get:function(){return this._bitmapSize.width/this._mediaSize.width},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"_verticalPixelRatio",{get:function(){return this._bitmapSize.height/this._mediaSize.height},enumerable:!1,configurable:!0}),a}();function B(a,b){var c=a.canvasElementClientSize;if(0===c.width||0===c.height)return null;var d=a.bitmapSize;if(0===d.width||0===d.height)return null;var e=a.canvasElement.getContext("2d",b);return null===e?null:new A(e,c,d)}let C={title:"",visible:!0,lastValueVisible:!0,priceLineVisible:!0,priceLineSource:0,priceLineWidth:1,priceLineColor:"",priceLineStyle:2,baseLineVisible:!0,baseLineWidth:1,baseLineColor:"#B2B5BE",baseLineStyle:0,priceFormat:{type:"price",precision:2,minMove:.01}};function D(a,b){let c={0:[],1:[a.lineWidth,a.lineWidth],2:[2*a.lineWidth,2*a.lineWidth],3:[6*a.lineWidth,6*a.lineWidth],4:[a.lineWidth,4*a.lineWidth]}[b];a.setLineDash(c)}function E(a,b,c,d){a.beginPath();let e=a.lineWidth%2?.5:0;a.moveTo(c,b+e),a.lineTo(d,b+e),a.stroke()}function F(a,b){if(!a)throw Error("Assertion failed"+(b?": "+b:""))}function G(a){if(void 0===a)throw Error("Value is undefined");return a}function H(a){if(null===a)throw Error("Value is null");return a}function I(a){return H(G(a))}(d=n||(n={}))[d.Simple=0]="Simple",d[d.WithSteps=1]="WithSteps",d[d.Curved=2]="Curved",(e=o||(o={}))[e.Solid=0]="Solid",e[e.Dotted=1]="Dotted",e[e.Dashed=2]="Dashed",e[e.LargeDashed=3]="LargeDashed",e[e.SparseDotted=4]="SparseDotted";class J{constructor(){this.t=[]}i(a,b,c){this.t.push({h:a,l:b,o:!0===c})}_(a){let b=this.t.findIndex(b=>a===b.h);b>-1&&this.t.splice(b,1)}u(a){this.t=this.t.filter(b=>b.l!==a)}p(a,b,c){let d=[...this.t];this.t=this.t.filter(a=>!a.o),d.forEach(d=>d.h(a,b,c))}v(){return this.t.length>0}m(){this.t=[]}}function K(a,...b){for(let c of b)for(let b in c)void 0!==c[b]&&Object.prototype.hasOwnProperty.call(c,b)&&!["__proto__","constructor","prototype"].includes(b)&&("object"!=typeof c[b]||void 0===a[b]||Array.isArray(c[b])?a[b]=c[b]:K(a[b],c[b]));return a}function L(a){return"number"==typeof a&&isFinite(a)}function M(a){return"number"==typeof a&&a%1==0}function N(a){return"string"==typeof a}function O(a){return"boolean"==typeof a}function P(a){let b,c,d;if(!a||"object"!=typeof a)return a;for(c in b=Array.isArray(a)?[]:{},a)a.hasOwnProperty(c)&&(d=a[c],b[c]=d&&"object"==typeof d?P(d):d);return b}function Q(a){return null!==a}function R(a){return null===a?void 0:a}let S="-apple-system, BlinkMacSystemFont, 'Trebuchet MS', Roboto, Ubuntu, sans-serif";function T(a,b,c){return void 0===b&&(b=S),`${c=void 0!==c?`${c} `:""}${a}px ${b}`}class U{constructor(a){this.M={S:1,C:5,k:NaN,P:"",T:"",R:"",D:"",I:0,V:0,B:0,A:0,L:0},this.O=a}N(){let a=this.M,b=this.F(),c=this.W();return a.k===b&&a.T===c||(a.k=b,a.T=c,a.P=T(b,c),a.A=2.5/12*b,a.I=a.A,a.V=b/12*a.C,a.B=b/12*a.C,a.L=0),a.R=this.H(),a.D=this.U(),this.M}H(){return this.O.N().layout.textColor}U(){return this.O.$()}F(){return this.O.N().layout.fontSize}W(){return this.O.N().layout.fontFamily}}function V(a){return a<0?0:a>255?255:Math.round(a)||0}function W(a){return .199*a[0]+.687*a[1]+.114*a[2]}class X{constructor(a,b){this.q=new Map,this.j=a,b&&(this.q=b)}Y(a,b){if("transparent"===a)return a;let c=this.K(a),d=c[3];return`rgba(${c[0]}, ${c[1]}, ${c[2]}, ${b*d})`}Z(a){let b=this.K(a);return{G:`rgb(${b[0]}, ${b[1]}, ${b[2]})`,X:W(b)>160?"black":"white"}}J(a){return W(this.K(a))}tt(a,b,c){var d;let[e,f,g,h]=this.K(a),[i,j,k,l]=this.K(b),m=[V(e+c*(i-e)),V(f+c*(j-f)),V(g+c*(k-g)),(d=h+c*(l-h))<=0||d>1?Math.min(Math.max(d,0),1):Math.round(1e4*d)/1e4];return`rgba(${m[0]}, ${m[1]}, ${m[2]}, ${m[3]})`}K(a){let b,c,d=this.q.get(a);if(d)return d;let e=((b=document.createElement("div")).style.display="none",document.body.appendChild(b),b.style.color=a,c=window.getComputedStyle(b).color,document.body.removeChild(b),c).match(/^rgba?\s*\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d*\.?\d+))?\)$/);if(!e){if(this.j.length)for(let b of this.j){let c=b(a);if(c)return this.q.set(a,c),c}throw Error(`Failed to parse color: ${a}`)}let f=[parseInt(e[1],10),parseInt(e[2],10),parseInt(e[3],10),e[4]?parseFloat(e[4]):1];return this.q.set(a,f),f}}class Y{constructor(){this.it=[]}st(a){this.it=a}nt(a,b,c){this.it.forEach(d=>{d.nt(a,b,c)})}}class Z{nt(a,b,c){a.useBitmapCoordinateSpace(a=>this.et(a,b,c))}}class $ extends Z{constructor(){super(...arguments),this.rt=null}ht(a){this.rt=a}et({context:a,horizontalPixelRatio:b,verticalPixelRatio:c}){if(null===this.rt||null===this.rt.lt)return;let d=this.rt.lt,e=this.rt,f=Math.max(1,Math.floor(b))%2/2,g=g=>{a.beginPath();for(let h=d.to-1;h>=d.from;--h){let d=e.ot[h],i=Math.round(d._t*b)+f,j=d.ut*c,k=g*c+f;a.moveTo(i,j),a.arc(i,j,k,0,2*Math.PI)}a.fill()};e.ct>0&&(a.fillStyle=e.dt,g(e.ft+e.ct)),a.fillStyle=e.vt,g(e.ft)}}function _(){return{ot:[{_t:0,ut:0,wt:0,gt:0}],vt:"",dt:"",ft:0,ct:0,lt:null}}let aa={from:0,to:1};class ab{constructor(a,b,c){this.Mt=new Y,this.bt=[],this.St=[],this.xt=!0,this.O=a,this.Ct=b,this.yt=c,this.Mt.st(this.bt)}kt(a){this.Pt(),this.xt=!0}Tt(){return this.xt&&(this.Rt(),this.xt=!1),this.Mt}Pt(){let a=this.yt.Dt();a.length!==this.bt.length&&(this.St=a.map(_),this.bt=this.St.map(a=>{let b=new $;return b.ht(a),b}),this.Mt.st(this.bt))}Rt(){let a=2===this.Ct.N().mode||!this.Ct.It(),b=this.yt.Vt(),c=this.Ct.Bt(),d=this.O.Et();this.Pt(),b.forEach((b,e)=>{let f=this.St[e],g=b.At(c),h=b.Lt();!a&&null!==g&&b.It()&&null!==h?(f.vt=g.zt,f.ft=g.ft,f.ct=g.Ot,f.ot[0].gt=g.gt,f.ot[0].ut=b.Ft().Nt(g.gt,h.Wt),f.dt=g.Ht??this.O.Ut(f.ot[0].ut/b.Ft().$t()),f.ot[0].wt=c,f.ot[0]._t=d.qt(c),f.lt=aa):f.lt=null})}}class ac extends Z{constructor(a){super(),this.jt=a}et({context:a,bitmapSize:b,horizontalPixelRatio:c,verticalPixelRatio:d}){var e;let f;if(null===this.jt)return;let g=this.jt.Yt.It,h=this.jt.Kt.It;if(!g&&!h)return;let i=Math.round(this.jt._t*c),j=Math.round(this.jt.ut*d);a.lineCap="butt",g&&i>=0&&(a.lineWidth=Math.floor(this.jt.Yt.ct*c),a.strokeStyle=this.jt.Yt.R,a.fillStyle=this.jt.Yt.R,D(a,this.jt.Yt.Zt),e=b.height,a.beginPath(),f=a.lineWidth%2?.5:0,a.moveTo(i+f,0),a.lineTo(i+f,e),a.stroke()),h&&j>=0&&(a.lineWidth=Math.floor(this.jt.Kt.ct*d),a.strokeStyle=this.jt.Kt.R,a.fillStyle=this.jt.Kt.R,D(a,this.jt.Kt.Zt),E(a,j,0,b.width))}}class ad{constructor(a,b){this.xt=!0,this.Gt={Yt:{ct:1,Zt:0,R:"",It:!1},Kt:{ct:1,Zt:0,R:"",It:!1},_t:0,ut:0},this.Xt=new ac(this.Gt),this.Jt=a,this.yt=b}kt(){this.xt=!0}Tt(a){return this.xt&&(this.Rt(),this.xt=!1),this.Xt}Rt(){let a=this.Jt.It(),b=this.yt.Qt().N().crosshair,c=this.Gt;2===b.mode?(c.Kt.It=!1,c.Yt.It=!1):(c.Kt.It=a&&this.Jt.ti(this.yt),c.Yt.It=a&&this.Jt.ii(),c.Kt.ct=b.horzLine.width,c.Kt.Zt=b.horzLine.style,c.Kt.R=b.horzLine.color,c.Yt.ct=b.vertLine.width,c.Yt.Zt=b.vertLine.style,c.Yt.R=b.vertLine.color,c._t=this.Jt.si(),c.ut=this.Jt.ni())}}function ae(a,b,c,d,e,f){a.save(),a.globalCompositeOperation="copy",a.fillStyle=f,a.fillRect(b,c,d,e),a.restore()}function af(a,b,c,d,e,f){a.beginPath(),a.roundRect?a.roundRect(b,c,d,e,f):(a.lineTo(b+d-f[1],c),0!==f[1]&&a.arcTo(b+d,c,b+d,c+f[1],f[1]),a.lineTo(b+d,c+e-f[2]),0!==f[2]&&a.arcTo(b+d,c+e,b+d-f[2],c+e,f[2]),a.lineTo(b+f[3],c+e),0!==f[3]&&a.arcTo(b,c+e,b,c+e-f[3],f[3]),a.lineTo(b,c+f[0]),0!==f[0]&&a.arcTo(b,c,b+f[0],c,f[0]))}function ag(a,b,c,d,e,f,g=0,h=[0,0,0,0],i=""){var j;if(a.save(),!g||!i||i===f)return af(a,b,c,d,e,h),a.fillStyle=f,a.fill(),void a.restore();let k=g/2;af(a,b+k,c+k,d-g,e-g,(j=-k,h.map(a=>0===a?a:a+j))),"transparent"!==f&&(a.fillStyle=f,a.fill()),"transparent"!==i&&(a.lineWidth=g,a.strokeStyle=i,a.closePath(),a.stroke()),a.restore()}function ah(a,b,c,d,e,f,g){a.save(),a.globalCompositeOperation="copy";let h=a.createLinearGradient(0,0,0,e);h.addColorStop(0,f),h.addColorStop(1,g),a.fillStyle=h,a.fillRect(b,c,d,e),a.restore()}class ai{constructor(a,b){this.ht(a,b)}ht(a,b){this.jt=a,this.ei=b}$t(a,b){return this.jt.It?a.k+a.A+a.I:0}nt(a,b,c,d){if(!this.jt.It||0===this.jt.ri.length)return;let e=this.jt.R,f=this.ei.G,g=a.useBitmapCoordinateSpace(a=>{let g=a.context;g.font=b.P;let h=this.hi(a,b,c,d),i=h.ai;return h.li?ag(g,i.oi,i._i,i.ui,i.ci,f,i.di,[i.ft,0,0,i.ft],f):ag(g,i.fi,i._i,i.ui,i.ci,f,i.di,[0,i.ft,i.ft,0],f),this.jt.pi&&(g.fillStyle=e,g.fillRect(i.fi,i.mi,i.wi-i.fi,i.gi)),this.jt.Mi&&(g.fillStyle=b.D,g.fillRect(h.li?i.bi-i.di:0,i._i,i.di,i.Si-i._i)),h});a.useMediaCoordinateSpace(({context:a})=>{let c=g.xi;a.font=b.P,a.textAlign=g.li?"right":"left",a.textBaseline="middle",a.fillStyle=e,a.fillText(this.jt.ri,c.Ci,(c._i+c.Si)/2+c.yi)})}hi(a,b,c,d){let e,f,g,{context:h,bitmapSize:i,mediaSize:j,horizontalPixelRatio:k,verticalPixelRatio:l}=a,m=this.jt.pi||!this.jt.ki?b.C:0,n=this.jt.Pi?b.S:0,o=b.A+this.ei.Ti,p=b.I+this.ei.Ri,q=b.V,r=b.B,s=this.jt.ri,t=b.k,u=c.Di(h,s),v=Math.ceil(c.Ii(h,s)),w=b.S+q+r+v+m,x=Math.max(1,Math.floor(l)),y=Math.round((t+o+p)*l);y%2!=x%2&&(y+=1);let z=n>0?Math.max(1,Math.floor(n*k)):0,A=Math.round(w*k),B=Math.round(m*k),C=Math.round((this.ei.Vi??this.ei.Bi??this.ei.Ei)*l)-Math.floor(.5*l),D=Math.floor(C+x/2-y/2),E=D+y,F="right"===d,G=F?j.width-n:n,H=F?i.width-z:z;return F?(e=H-A,f=H-B,g=G-m-q-n):(e=H+A,f=H+B,g=G+m+q),{li:F,ai:{_i:D,mi:C,Si:E,ui:A,ci:y,ft:2*k,di:z,oi:e,fi:H,wi:f,gi:x,bi:i.width},xi:{_i:D/l,Si:E/l,Ci:g,yi:u}}}}class aj{constructor(a){this.Ai={Ei:0,G:"#000",Ri:0,Ti:0},this.Li={ri:"",It:!1,pi:!0,ki:!1,Ht:"",R:"#FFF",Mi:!1,Pi:!1},this.zi={ri:"",It:!1,pi:!1,ki:!0,Ht:"",R:"#FFF",Mi:!0,Pi:!0},this.xt=!0,this.Oi=new(a||ai)(this.Li,this.Ai),this.Ni=new(a||ai)(this.zi,this.Ai)}ri(){return this.Fi(),this.Li.ri}Ei(){return this.Fi(),this.Ai.Ei}kt(){this.xt=!0}$t(a,b=!1){return Math.max(this.Oi.$t(a,b),this.Ni.$t(a,b))}Wi(){return this.Ai.Vi??null}Hi(){return this.Ai.Vi??this.Ai.Bi??this.Ei()}Ui(a){this.Ai.Bi=a??void 0}$i(){return this.Fi(),this.Li.It||this.zi.It}qi(){return this.Fi(),this.Li.It}Tt(a){return this.Fi(),this.Li.pi=this.Li.pi&&a.N().ticksVisible,this.zi.pi=this.zi.pi&&a.N().ticksVisible,this.Oi.ht(this.Li,this.Ai),this.Ni.ht(this.zi,this.Ai),this.Oi}ji(){return this.Fi(),this.Oi.ht(this.Li,this.Ai),this.Ni.ht(this.zi,this.Ai),this.Ni}Fi(){this.xt&&(this.Li.pi=!0,this.zi.pi=!1,this.Yi(this.Li,this.zi,this.Ai))}}class ak extends aj{constructor(a,b,c){super(),this.Jt=a,this.Ki=b,this.Zi=c}Yi(a,b,c){if(a.It=!1,2===this.Jt.N().mode)return;let d=this.Jt.N().horzLine;if(!d.labelVisible)return;let e=this.Ki.Lt();if(!this.Jt.It()||this.Ki.Gi()||null===e)return;let f=this.Ki.Xi().Z(d.labelBackgroundColor);c.G=f.G,a.R=f.X;let g=2/12*this.Ki.k();c.Ti=g,c.Ri=g;let h=this.Zi(this.Ki);c.Ei=h.Ei,a.ri=this.Ki.Ji(h.gt,e),a.It=!0}}let al=/[1-9]/g;class am{constructor(){this.jt=null}ht(a){this.jt=a}nt(a,b){if(null===this.jt||!1===this.jt.It||0===this.jt.ri.length)return;let c=a.useMediaCoordinateSpace(({context:a})=>(a.font=b.P,Math.round(b.Qi.Ii(a,H(this.jt).ri,al))));if(c<=0)return;let d=b.ts,e=c+2*d,f=e/2,g=this.jt.ss,h=this.jt.Ei,i=Math.floor(h-f)+.5;i<0?(h+=Math.abs(0-i),i=Math.floor(h-f)+.5):i+e>g&&(h-=Math.abs(g-(i+e)),i=Math.floor(h-f)+.5);let j=i+e,k=Math.ceil(0+b.S+b.C+b.A+b.k+b.I);a.useBitmapCoordinateSpace(({context:a,horizontalPixelRatio:c,verticalPixelRatio:d})=>{let e=H(this.jt);a.fillStyle=e.G;let f=Math.round(i*c),g=Math.round(0*d),h=Math.round(j*c),l=Math.round(k*d),m=Math.round(2*c);if(a.beginPath(),a.moveTo(f,g),a.lineTo(f,l-m),a.arcTo(f,l,f+m,l,m),a.lineTo(h-m,l),a.arcTo(h,l,h,l-m,m),a.lineTo(h,g),a.fill(),e.pi){let f=Math.round(e.Ei*c),h=Math.round((g+b.C)*d);a.fillStyle=e.R;let i=Math.max(1,Math.floor(c)),j=Math.floor(.5*c);a.fillRect(f-j,g,i,h-g)}}),a.useMediaCoordinateSpace(({context:a})=>{let c=H(this.jt),e=0+b.S+b.C+b.A+b.k/2;a.font=b.P,a.textAlign="left",a.textBaseline="middle",a.fillStyle=c.R;let f=b.Qi.Di(a,"Apr0");a.translate(i+d,e+f),a.fillText(c.ri,0,0)})}}class an{constructor(a,b,c){this.xt=!0,this.Xt=new am,this.Gt={It:!1,G:"#4c525e",R:"white",ri:"",ss:0,Ei:NaN,pi:!0},this.Ct=a,this.ns=b,this.Zi=c}kt(){this.xt=!0}Tt(){return this.xt&&(this.Rt(),this.xt=!1),this.Xt.ht(this.Gt),this.Xt}Rt(){let a=this.Gt;if(a.It=!1,2===this.Ct.N().mode)return;let b=this.Ct.N().vertLine;if(!b.labelVisible)return;let c=this.ns.Et();if(c.Gi())return;a.ss=c.ss();let d=this.Zi();if(null===d)return;a.Ei=d.Ei;let e=c.es(this.Ct.Bt());a.ri=c.rs(H(e)),a.It=!0;let f=this.ns.Xi().Z(b.labelBackgroundColor);a.G=f.G,a.R=f.X,a.pi=c.N().ticksVisible}}class ao{constructor(){this.hs=null,this.ls=0}_s(){return this.ls}us(a){this.ls=a}Ft(){return this.hs}cs(a){this.hs=a}ds(a){return[]}fs(){return[]}It(){return!0}}(f=p||(p={}))[f.Normal=0]="Normal",f[f.Magnet=1]="Magnet",f[f.Hidden=2]="Hidden",f[f.MagnetOHLC=3]="MagnetOHLC";class ap extends ao{constructor(a,b){let c,d,e,f;super(),this.yt=null,this.ps=NaN,this.vs=0,this.ws=!1,this.gs=new Map,this.Ms=!1,this.bs=new WeakMap,this.Ss=new WeakMap,this.xs=NaN,this.Cs=NaN,this.ys=NaN,this.ks=NaN,this.ns=a,this.Ps=b,this.Ts=(c=()=>this.ps,d=()=>this.Cs,a=>{let b=d(),e=c();if(a===H(this.yt).Rs())return{gt:e,Ei:b};{let c=H(a.Lt());return{gt:a.Ds(b,c),Ei:b}}});const g=(e=()=>this.vs,f=()=>this.si(),()=>{let a=this.ns.Et().Is(e()),b=f();return a&&Number.isFinite(b)?{wt:a,Ei:b}:null});this.Vs=new an(this,a,g)}N(){return this.Ps}Bs(a,b){this.ys=a,this.ks=b}Es(){this.ys=NaN,this.ks=NaN}As(){return this.ys}Ls(){return this.ks}zs(a,b,c){this.Ms||(this.Ms=!0),this.ws=!0,this.Os(a,b,c)}Bt(){return this.vs}si(){return this.xs}ni(){return this.Cs}It(){return this.ws}Ns(){this.ws=!1,this.Fs(),this.ps=NaN,this.xs=NaN,this.Cs=NaN,this.yt=null,this.Es(),this.Ws()}Hs(a){if(!this.Ps.doNotSnapToHiddenSeriesIndices)return a;let b=this.ns,c=b.Et(),d=null,e=null;for(let c of b.Us()){let b=c.qs().$s(a,-1);if(b){if(b.js===a)return a;(null===d||b.js>d)&&(d=b.js)}let f=c.qs().$s(a,1);if(f){if(f.js===a)return a;(null===e||f.js<e)&&(e=f.js)}}let f=[d,e].filter(Q);if(0===f.length)return a;let g=c.qt(a),h=f.map(a=>Math.abs(g-c.qt(a)));return f[h.indexOf(Math.min(...h))]}Ys(a){let b=this.bs.get(a);b||(b=new ad(this,a),this.bs.set(a,b));let c=this.Ss.get(a);return c||(c=new ab(this.ns,this,a),this.Ss.set(a,c)),[b,c]}ti(a){return a===this.yt&&this.Ps.horzLine.visible}ii(){return this.Ps.vertLine.visible}Ks(a,b){this.ws&&this.yt===a||this.gs.clear();let c=[];return this.yt===a&&c.push(this.Zs(this.gs,b,this.Ts)),c}fs(){return this.ws?[this.Vs]:[]}Gs(){return this.yt}Ws(){this.ns.Xs().forEach(a=>{this.bs.get(a)?.kt(),this.Ss.get(a)?.kt()}),this.gs.forEach(a=>a.kt()),this.Vs.kt()}Js(a){return a&&!a.Rs().Gi()?a.Rs():null}Os(a,b,c){this.Qs(a,b,c)&&this.Ws()}Qs(a,b,c){let d=this.xs,e=this.Cs,f=this.ps,g=this.vs,h=this.yt,i=this.Js(c);this.vs=a,this.xs=isNaN(a)?NaN:this.ns.Et().qt(a),this.yt=c;let j=null!==i?i.Lt():null;return null!==i&&null!==j?(this.ps=b,this.Cs=i.Nt(b,j)):(this.ps=NaN,this.Cs=NaN),d!==this.xs||e!==this.Cs||g!==this.vs||f!==this.ps||h!==this.yt}Fs(){let a=this.ns.tn().map(a=>a.qs().sn()).filter(Q),b=0===a.length?null:Math.max(...a);this.vs=null!==b?b:NaN}Zs(a,b,c){let d=a.get(b);return void 0===d&&(d=new ak(this,b,c),a.set(b,d)),d}}function aq(a){return"left"===a||"right"===a}class ar{constructor(a){this.nn=new Map,this.en=[],this.rn=a}hn(a,b){var c;let d=(c=this.nn.get(a),void 0===c?b:{an:Math.max(c.an,b.an),ln:c.ln||b.ln});this.nn.set(a,d)}_n(){return this.rn}un(a){let b=this.nn.get(a);return void 0===b?{an:this.rn}:{an:Math.max(this.rn,b.an),ln:b.ln}}cn(){this.dn(),this.en=[{fn:0}]}pn(a){this.dn(),this.en=[{fn:1,Wt:a}]}vn(a){this.mn(),this.en.push({fn:5,Wt:a})}dn(){this.mn(),this.en.push({fn:6})}wn(){this.dn(),this.en=[{fn:4}]}gn(a){this.dn(),this.en.push({fn:2,Wt:a})}Mn(a){this.dn(),this.en.push({fn:3,Wt:a})}bn(){return this.en}Sn(a){for(let b of a.en)this.xn(b);this.rn=Math.max(this.rn,a.rn),a.nn.forEach((a,b)=>{this.hn(b,a)})}static Cn(){return new ar(2)}static yn(){return new ar(3)}xn(a){switch(a.fn){case 0:this.cn();break;case 1:this.pn(a.Wt);break;case 2:this.gn(a.Wt);break;case 3:this.Mn(a.Wt);break;case 4:this.wn();break;case 5:this.vn(a.Wt);break;case 6:this.mn()}}mn(){let a=this.en.findIndex(a=>5===a.fn);-1!==a&&this.en.splice(a,1)}}class as{formatTickmarks(a){return a.map(a=>this.format(a))}}function at(a,b){if(!L(a))return"n/a";if(!M(b)||b<0||b>16)throw TypeError("invalid length");return 0===b?a.toString():("0000000000000000"+a.toString()).slice(-b)}class au extends as{constructor(a,b){if(super(),b||(b=1),L(a)&&M(a)||(a=100),a<0)throw TypeError("invalid base");this.Ki=a,this.kn=b,this.Pn()}format(a){let b=a<0?"âˆ’":"";return a=Math.abs(a),b+this.Tn(a)}Pn(){if(this.Rn=0,this.Ki>0&&this.kn>0){let a=this.Ki;for(;a>1;)a/=10,this.Rn++}}Tn(a){let b=this.Ki/this.kn,c=Math.floor(a),d="",e=void 0!==this.Rn?this.Rn:NaN;if(b>1){let f=+(Math.round(a*b)-c*b).toFixed(this.Rn);f>=b&&(f-=b,c+=1),d="."+at(f.toFixed(this.Rn)*this.kn,e)}else c=Math.round(c*b)/b,e>0&&(d="."+at(0,e));return c.toFixed(0)+d}}class av extends au{constructor(a=100){super(a)}format(a){return`${super.format(a)}%`}}class aw extends as{constructor(a){super(),this.Dn=a}format(a){let b="";return a<0&&(b="-",a=-a),a<995?b+this.In(a):a<999995?b+this.In(a/1e3)+"K":a<0x3b9ac9fb?(a=1e3*Math.round(a/1e3),b+this.In(a/1e6)+"M"):(a=1e6*Math.round(a/1e6),b+this.In(a/1e9)+"B")}In(a){let b=Math.pow(10,this.Dn);return((a=Math.round(a*b)/b)>=1e-15&&a<1?a.toFixed(this.Dn).replace(/\.?0+$/,""):String(a)).replace(/(\.[1-9]*)0+$/,(a,b)=>b)}}let ax=/[2-9]/g;class ay{constructor(a=50){this.Vn=0,this.Bn=1,this.En=1,this.An={},this.Ln=new Map,this.zn=a}On(){this.Vn=0,this.Ln.clear(),this.Bn=1,this.En=1,this.An={}}Ii(a,b,c){return this.Nn(a,b,c).width}Di(a,b,c){let d=this.Nn(a,b,c);return((d.actualBoundingBoxAscent||0)-(d.actualBoundingBoxDescent||0))/2}Nn(a,b,c){let d=String(b).replace(c||ax,"0");if(this.Ln.has(d))return G(this.Ln.get(d)).Fn;if(this.Vn===this.zn){let a=this.An[this.En];delete this.An[this.En],this.Ln.delete(a),this.En++,this.Vn--}a.save(),a.textBaseline="middle";let e=a.measureText(d);return a.restore(),0===e.width&&b.length||(this.Ln.set(d,{Fn:e,Wn:this.Bn}),this.An[this.Bn]=d,this.Vn++,this.Bn++),e}}class az{constructor(a){this.Hn=null,this.M=null,this.Un="right",this.$n=a}qn(a,b,c){this.Hn=a,this.M=b,this.Un=c}nt(a){null!==this.M&&null!==this.Hn&&this.Hn.nt(a,this.M,this.$n,this.Un)}}class aA{constructor(a,b,c){this.jn=a,this.$n=new ay(50),this.Yn=b,this.O=c,this.F=-1,this.Xt=new az(this.$n)}Tt(){let a=this.O.Kn(this.Yn);if(null===a)return null;let b=a.Zn(this.Yn)?a.Gn():this.Yn.Ft();if(null===b)return null;let c=a.Xn(b);if("overlay"===c)return null;let d=this.O.Jn();return d.k!==this.F&&(this.F=d.k,this.$n.On()),this.Xt.qn(this.jn.ji(),d,c),this.Xt}}class aB extends Z{constructor(){super(...arguments),this.jt=null}ht(a){this.jt=a}Qn(a,b){if(!this.jt?.It)return null;let{ut:c,ct:d,te:e}=this.jt;return b>=c-d-7&&b<=c+d+7?{ie:this.jt,te:e}:null}et({context:a,bitmapSize:b,horizontalPixelRatio:c,verticalPixelRatio:d}){if(null===this.jt||!1===this.jt.It)return;let e=Math.round(this.jt.ut*d);e<0||e>b.height||(a.lineCap="butt",a.strokeStyle=this.jt.R,a.lineWidth=Math.floor(this.jt.ct*c),D(a,this.jt.Zt),E(a,e,0,b.width))}}class aC{constructor(a){this.se={ut:0,R:"rgba(0, 0, 0, 0)",ct:1,Zt:0,It:!1},this.ne=new aB,this.xt=!0,this.ee=a,this.re=a.Qt(),this.ne.ht(this.se)}kt(){this.xt=!0}Tt(){return this.ee.It()?(this.xt&&(this.he(),this.xt=!1),this.ne):null}}class aD extends aC{constructor(a){super(a)}he(){this.se.It=!1;let a=this.ee.Ft(),b=a.ae().ae;if(2!==b&&3!==b)return;let c=this.ee.N();if(!c.baseLineVisible||!this.ee.It())return;let d=this.ee.Lt();null!==d&&(this.se.It=!0,this.se.ut=a.Nt(d.Wt,d.Wt),this.se.R=c.baseLineColor,this.se.ct=c.baseLineWidth,this.se.Zt=c.baseLineStyle)}}class aE extends Z{constructor(){super(...arguments),this.jt=null}ht(a){this.jt=a}le(){return this.jt}et({context:a,horizontalPixelRatio:b,verticalPixelRatio:c}){let d=this.jt;if(null===d)return;let e=Math.max(1,Math.floor(b)),f=e%2/2,g=Math.round(d.oe.x*b)+f,h=d.oe.y*c;a.fillStyle=d._e,a.beginPath();let i=Math.max(2,1.5*d.ue)*b;a.arc(g,h,i,0,2*Math.PI,!1),a.fill(),a.fillStyle=d.ce,a.beginPath(),a.arc(g,h,d.ft*b,0,2*Math.PI,!1),a.fill(),a.lineWidth=e,a.strokeStyle=d.de,a.beginPath(),a.arc(g,h,d.ft*b+e/2,0,2*Math.PI,!1),a.stroke()}}let aF=[{fe:0,pe:.25,ve:4,me:10,we:.25,ge:0,Me:.4,be:.8},{fe:.25,pe:.525,ve:10,me:14,we:0,ge:0,Me:.8,be:0},{fe:.525,pe:1,ve:14,me:14,we:0,ge:0,Me:0,be:0}];class aG{constructor(a){this.Xt=new aE,this.xt=!0,this.Se=!0,this.xe=performance.now(),this.Ce=this.xe-1,this.ye=a}ke(){this.Ce=this.xe-1,this.kt()}Pe(){if(this.kt(),2===this.ye.N().lastPriceAnimation){let a=performance.now(),b=this.Ce-a;if(b>0)return void(b<650&&(this.Ce+=2600));this.xe=a,this.Ce=a+2600}}kt(){this.xt=!0}Te(){this.Se=!0}It(){return 0!==this.ye.N().lastPriceAnimation}Re(){switch(this.ye.N().lastPriceAnimation){case 0:return!1;case 1:return!0;case 2:return performance.now()<=this.Ce}}Tt(){return this.xt?(this.Rt(),this.xt=!1,this.Se=!1):this.Se&&(this.De(),this.Se=!1),this.Xt}Rt(){this.Xt.ht(null);let a=this.ye.Qt().Et(),b=a.Ie(),c=this.ye.Lt();if(null===b||null===c)return;let d=this.ye.Ve(!0);if(d.Be||!b.Ee(d.js))return;let e={x:a.qt(d.js),y:this.ye.Ft().Nt(d.gt,c.Wt)},f=d.R,g=this.ye.N().lineWidth,h=this.Ae(this.Le(),f);this.Xt.ht({_e:f,ue:g,ce:h.ce,de:h.de,ft:h.ft,oe:e})}De(){let a=this.Xt.le();if(null!==a){let b=this.Ae(this.Le(),a._e);a.ce=b.ce,a.de=b.de,a.ft=b.ft}}Le(){return this.Re()?performance.now()-this.xe:2599}ze(a,b,c,d){return this.ye.Qt().Xi().Y(a,c+(d-c)*b)}Ae(a,b){var c;let d,e=a%2600/2600;for(let a of aF)if(e>=a.fe&&e<=a.pe){d=a;break}F(void 0!==d,"Last price animation internal logic error");let f=(e-d.fe)/(d.pe-d.fe);return{ce:this.ze(b,f,d.we,d.ge),de:this.ze(b,f,d.Me,d.be),ft:(c=d.ve)+(d.me-c)*f}}}class aH extends aC{constructor(a){super(a)}he(){let a=this.se;a.It=!1;let b=this.ee.N();if(!b.priceLineVisible||!this.ee.It())return;let c=this.ee.Ve(0===b.priceLineSource);c.Be||(a.It=!0,a.ut=c.Ei,a.R=this.ee.Oe(c.R),a.ct=b.priceLineWidth,a.Zt=b.priceLineStyle)}}class aI extends aj{constructor(a){super(),this.Jt=a}Yi(a,b,c){a.It=!1,b.It=!1;let d=this.Jt;if(!d.It())return;let e=d.N(),f=e.lastValueVisible,g=""!==d.Ne(),h=0===e.seriesLastValueMode,i=d.Ve(!1);if(i.Be)return;f&&(a.ri=this.Fe(i,f,h),a.It=0!==a.ri.length),(g||h)&&(b.ri=this.We(i,f,g,h),b.It=b.ri.length>0);let j=d.Oe(i.R),k=this.Jt.Qt().Xi().Z(j);c.G=k.G,c.Ei=i.Ei,b.Ht=d.Qt().Ut(i.Ei/d.Ft().$t()),a.Ht=j,a.R=k.X,b.R=k.X}We(a,b,c,d){let e="",f=this.Jt.Ne();return c&&0!==f.length&&(e+=`${f} `),b&&d&&(e+=this.Jt.Ft().He()?a.Ue:a.$e),e.trim()}Fe(a,b,c){return b?c?this.Jt.Ft().He()?a.$e:a.Ue:a.ri:""}}function aJ(a,b,c,d){let e=Number.isFinite(b),f=Number.isFinite(c);return e&&f?a(b,c):e||f?e?b:c:d}class aK{constructor(a,b){this.qe=a,this.je=b}Ye(a){return null!==a&&this.qe===a.qe&&this.je===a.je}Ke(){return new aK(this.qe,this.je)}Ze(){return this.qe}Ge(){return this.je}Xe(){return this.je-this.qe}Gi(){return this.je===this.qe||Number.isNaN(this.je)||Number.isNaN(this.qe)}Sn(a){return null===a?this:new aK(aJ(Math.min,this.Ze(),a.Ze(),-1/0),aJ(Math.max,this.Ge(),a.Ge(),1/0))}Je(a){if(!L(a)||0==this.je-this.qe)return;let b=.5*(this.je+this.qe),c=this.je-b,d=this.qe-b;c*=a,d*=a,this.je=b+c,this.qe=b+d}Qe(a){L(a)&&(this.je+=a,this.qe+=a)}tr(){return{minValue:this.qe,maxValue:this.je}}static ir(a){return null===a?null:new aK(a.minValue,a.maxValue)}}class aL{constructor(a,b){this.sr=a,this.nr=b||null}er(){return this.sr}rr(){return this.nr}tr(){return{priceRange:null===this.sr?null:this.sr.tr(),margins:this.nr||void 0}}static ir(a){return null===a?null:new aL(aK.ir(a.priceRange),a.margins)}}let aM=[2,4,8,16,32,64,128,256,512];class aN extends aC{constructor(a,b){super(a),this.hr=b}he(){let a=this.se;a.It=!1;let b=this.hr.N();if(!this.ee.It()||!b.lineVisible)return;let c=this.hr.ar();null!==c&&(a.It=!0,a.ut=c,a.R=b.color,a.ct=b.lineWidth,a.Zt=b.lineStyle,a.te=this.hr.N().id)}}class aO extends aj{constructor(a,b){super(),this.ye=a,this.hr=b}Yi(a,b,c){a.It=!1,b.It=!1;let d=this.hr.N(),e=d.axisLabelVisible,f=""!==d.title,g=this.ye;if(!e||!g.It())return;let h=this.hr.ar();if(null===h)return;f&&(b.ri=d.title,b.It=!0),b.Ht=g.Qt().Ut(h/g.Ft().$t()),a.ri=this.lr(d.price),a.It=!0;let i=this.ye.Qt().Xi().Z(d.axisLabelColor||d.color);c.G=i.G;let j=d.axisLabelTextColor||i.X;a.R=j,b.R=j,c.Ei=h}lr(a){let b=this.ye.Lt();return null===b?"":this.ye.Ft().Ji(a,b.Wt)}}class aP{constructor(a,b){this.ye=a,this.Ps=b,this._r=new aN(a,this),this.jn=new aO(a,this),this.ur=new aA(this.jn,a,a.Qt())}cr(a){K(this.Ps,a),this.kt(),this.ye.Qt().dr()}N(){return this.Ps}pr(){return this._r}vr(){return this.ur}mr(){return this.jn}kt(){this._r.kt(),this.jn.kt()}ar(){let a=this.ye,b=a.Ft();if(a.Qt().Et().Gi()||b.Gi())return null;let c=a.Lt();return null===c?null:b.Nt(this.Ps.price,c.Wt)}}class aQ{constructor(){this.wr=new WeakMap}gr(a,b,c){let d=1/b*c;return a>=d?1:Math.min(Math.pow(2,Math.floor(Math.log2(d/a))),512)}Mr(a,b,c,d=!1,e){if(0===a.length||b<=1)return a;let f=this.br(b);if(f<=1)return a;let g=this.Sr(a),h=g.Cr.get(f);return void 0!==h||(h=this.yr(a,f,c,d,e,g.Cr),g.Cr.set(f,h)),h}kr(a,b,c,d,e=!1,f){if(c<1||0===a.length)return a;let g=this.Sr(a),h=g.Cr.get(c);if(!h)return this.Mr(a,c,d,e,f);let i=this.Pr(a,b,c,h,e,d,f);return g.Cr.set(c,i),i}br(a){if(a<=2)return 2;for(let b of aM)if(a<=b)return b;return 512}Tr(a){if(0===a.length)return 0;let b=a[0],c=a[a.length-1];return 31*a.length+17*b.js+13*c.js}yr(a,b,c,d=!1,e,f=new Map){if(2===b)return this.Rr(a,2,c,d,e);let g=b/2,h=f.get(g);return h||(h=this.yr(a,g,c,d,e,f),f.set(g,h)),this.Dr(h,c,d,e)}Rr(a,b,c,d=!1,e){let f=this.Ir(a,b,c,d,e);return this.Vr(f,d)}Dr(a,b,c=!1,d){let e=this.Ir(a,2,b,c,d);return this.Vr(e,c)}Ir(a,b,c,d=!1,e){let f=[];for(let g=0;g<a.length;g+=b)if(a.length-g>=b){let b=this.Br(a[g],a[g+1],c,d,e);b.Er=!1,f.push(b)}else if(0===f.length)f.push(this.Ar(a[g],!0));else{let b=f[f.length-1];f[f.length-1]=this.Lr(b,a[g],c,d,e)}return f}zr(a,b){return(a??1)+(b??1)}Br(a,b,c,d=!1,e){if(!d||!c||!e){let c=a.Wt[1]>b.Wt[1]?a.Wt[1]:b.Wt[1],d=a.Wt[2]<b.Wt[2]?a.Wt[2]:b.Wt[2];return{Or:a.js,Nr:b.js,Fr:a.wt,Wr:b.wt,Hr:a.Wt[0],Ur:c,$r:d,qr:b.Wt[3],jr:this.zr(a.jr,b.jr),Yr:void 0,Er:!1}}let f=c(this.Kr(a,e),this.Kr(b,e)),g=e(f),h=g.length?g[g.length-1]:0;return{Or:a.js,Nr:b.js,Fr:a.wt,Wr:b.wt,Hr:a.Wt[0],Ur:Math.max(a.Wt[1],h),$r:Math.min(a.Wt[2],h),qr:h,jr:this.zr(a.jr,b.jr),Yr:f,Er:!1}}Lr(a,b,c,d=!1,e){if(!d||!c||!e)return{Or:a.Or,Nr:b.js,Fr:a.Fr,Wr:b.wt,Hr:a.Hr,Ur:a.Ur>b.Wt[1]?a.Ur:b.Wt[1],$r:a.$r<b.Wt[2]?a.$r:b.Wt[2],qr:b.Wt[3],jr:a.jr+(b.jr??1),Yr:a.Yr,Er:!1};let f=a.Yr,g=this.Kr(b,e),h=f?{data:f,index:a.Or,originalTime:a.Fr,time:a.Fr,priceValues:e(f)}:null,i=h?c(h,g):g.data,j=h?e(i):g.priceValues,k=j.length?j[j.length-1]:0;return{Or:a.Or,Nr:b.js,Fr:a.Fr,Wr:b.wt,Hr:a.Hr,Ur:Math.max(a.Ur,k),$r:Math.min(a.$r,k),qr:k,jr:a.jr+(b.jr??1),Yr:i,Er:!1}}Zr(a,b,c,d,e,f,g=!1,h){let i=b===d?e:a[b];if(c-b==1)return this.Ar(i,!0);let j=b+1===d?e:a[b+1],k=this.Br(i,j,f,g,h);for(let i=b+2;i<c;i++){let b=i===d?e:a[i];k=this.Lr(k,b,f,g,h)}return k}Kr(a,b){let c=a.le??{};return{data:a.le,index:a.js,originalTime:a.Gr,time:a.wt,priceValues:b(c)}}Xr(a,b=!1){let c=!0===b,d=!!a.Yr;return{...{js:a.Or,wt:a.Fr,Gr:a.Fr,Wt:[c?a.qr:a.Hr,a.Ur,a.$r,a.qr],jr:a.jr},le:c?d?a.Yr:{wt:a.Fr}:void 0}}Vr(a,b=!1){return a.map(a=>this.Xr(a,b))}Pr(a,b,c,d,e=!1,f,g){if(0===d.length)return d;let h=a.length-1,i=Math.floor(h/c)*c;if(Math.min(i+c,a.length)-i<c&&a.length>c){let d=a.slice();return d[d.length-1]=b,this.Mr(d,c,f,e,g)}if(Math.floor((h-1)/c)===Math.floor(h/c)||1===d.length){let j=Math.min(i+c,a.length),k=j-i;if(k<=0)return d;let l=1===k?this.Ar(i===h?b:a[i],!0):this.Zr(a,i,j,h,b,f,e,g);return d[d.length-1]=this.Xr(l,e),d}{let d=a.slice();return d[d.length-1]=b,this.Mr(d,c,f,e,g)}}Ar(a,b=!1){return{Or:a.js,Nr:a.js,Fr:a.wt,Wr:a.wt,Hr:a.Wt[0],Ur:a.Wt[1],$r:a.Wt[2],qr:a.Wt[3],jr:a.jr??1,Yr:a.le,Er:b}}Sr(a){let b=this.Jr(a),c=this.Tr(a);return b.Qr!==c&&(b.Cr.clear(),b.Qr=c),b}Jr(a){let b=this.wr.get(a);return void 0===b&&(b={Qr:this.Tr(a),Cr:new Map},this.wr.set(a,b)),b}}class aR extends ao{constructor(a){super(),this.ns=a}Qt(){return this.ns}}let aS={Bar:(a,b,c,d)=>{let e=b.upColor,f=b.downColor,g=H(a(c,d)),h=I(g.Wt[0])<=I(g.Wt[3]);return{th:g.R??(h?e:f)}},Candlestick:(a,b,c,d)=>{let e=b.upColor,f=b.downColor,g=b.borderUpColor,h=b.borderDownColor,i=b.wickUpColor,j=b.wickDownColor,k=H(a(c,d)),l=I(k.Wt[0])<=I(k.Wt[3]);return{th:k.R??(l?e:f),ih:k.Ht??(l?g:h),sh:k.nh??(l?i:j)}},Custom:(a,b,c,d)=>({th:H(a(c,d)).R??b.color}),Area:(a,b,c,d)=>{let e=H(a(c,d));return{th:e.vt??b.lineColor,vt:e.vt??b.lineColor,eh:e.eh??b.topColor,rh:e.rh??b.bottomColor}},Baseline:(a,b,c,d)=>{let e=H(a(c,d));return{th:e.Wt[3]>=b.baseValue.price?b.topLineColor:b.bottomLineColor,hh:e.hh??b.topLineColor,ah:e.ah??b.bottomLineColor,oh:e.oh??b.topFillColor1,_h:e._h??b.topFillColor2,uh:e.uh??b.bottomFillColor1,dh:e.dh??b.bottomFillColor2}},Line:(a,b,c,d)=>{let e=H(a(c,d));return{th:e.R??b.color,vt:e.R??b.color}},Histogram:(a,b,c,d)=>({th:H(a(c,d)).R??b.color})};class aT{constructor(a){this.fh=(a,b)=>void 0!==b?b.Wt:this.ye.qs().ph(a),this.ye=a,this.mh=aS[a.wh()]}gh(a,b){return this.mh(this.fh,this.ye.N(),a,b)}}function aU(a,b,c,d,e=0,f=b.length){let g=f-e;for(;0<g;){let f=g>>1,h=e+f;d(b[h],c)===a?(e=h+1,g-=f+1):g=f}return e}let aV=aU.bind(null,!0),aW=aU.bind(null,!1);(g=q||(q={}))[g.NearestLeft=-1]="NearestLeft",g[g.None=0]="None",g[g.NearestRight=1]="NearestRight";class aX{constructor(){this.Mh=[],this.bh=new Map,this.Sh=new Map,this.xh=[]}Ch(){return this.yh()>0?this.Mh[this.Mh.length-1]:null}kh(){return this.yh()>0?this.Ph(0):null}sn(){return this.yh()>0?this.Ph(this.Mh.length-1):null}yh(){return this.Mh.length}Gi(){return 0===this.yh()}Ee(a){return null!==this.Th(a,0)}ph(a){return this.$s(a)}$s(a,b=0){let c=this.Th(a,b);return null===c?null:{...this.Rh(c),js:this.Ph(c)}}Dh(){return this.Mh}Ih(a,b,c){if(this.Gi())return null;let d=null;for(let e of c)d=aY(d,this.Vh(a,b,e));return d}ht(a){this.Sh.clear(),this.bh.clear(),this.Mh=a,this.xh=a.map(a=>a.js)}Bh(){return this.xh}Ph(a){return this.Mh[a].js}Rh(a){return this.Mh[a]}Th(a,b){let c=this.Eh(a);if(null===c&&0!==b)switch(b){case -1:return this.Ah(a);case 1:return this.Lh(a);default:throw TypeError("Unknown search mode")}return c}Ah(a){let b=this.zh(a);return b>0&&(b-=1),b!==this.Mh.length&&this.Ph(b)<a?b:null}Lh(a){let b=this.Oh(a);return b!==this.Mh.length&&a<this.Ph(b)?b:null}Eh(a){let b=this.zh(a);return b===this.Mh.length||a<this.Mh[b].js?null:b}zh(a){return aV(this.Mh,a,(a,b)=>a.js<b)}Oh(a){return aW(this.Mh,a,(a,b)=>a.js>b)}Nh(a,b,c){let d=null;for(let e=a;e<b;e++){let a=this.Mh[e].Wt[c];Number.isNaN(a)||(null===d?d={Fh:a,Wh:a}:(a<d.Fh&&(d.Fh=a),a>d.Wh&&(d.Wh=a)))}return d}Vh(a,b,c){if(this.Gi())return null;let d=null,e=H(this.kh()),f=H(this.sn()),g=Math.max(a,e),h=Math.min(b,f),i=30*Math.ceil(g/30),j=Math.max(i,30*Math.floor(h/30));{let a=this.zh(g),e=this.Oh(Math.min(h,i,b));d=aY(d,this.Nh(a,e,c))}let k=this.bh.get(c);void 0===k&&(k=new Map,this.bh.set(c,k));for(let a=Math.max(i+1,g);a<j;a+=30){let b=Math.floor(a/30),e=k.get(b);if(void 0===e){let a=this.zh(30*b),d=this.Oh((b+1)*30-1);e=this.Nh(a,d,c),k.set(b,e)}d=aY(d,e)}{let a=this.zh(j),b=this.Oh(h);d=aY(d,this.Nh(a,b,c))}return d}}function aY(a,b){return null===a?b:null===b?a:{Fh:Math.min(a.Fh,b.Fh),Wh:Math.max(a.Wh,b.Wh)}}let aZ={setLineStyle:D};class a${constructor(a){this.Hh=a}nt(a,b,c){this.Hh.draw(a,aZ)}Uh(a,b,c){this.Hh.drawBackground?.(a,aZ)}}class a_{constructor(a){this.Ln=null,this.$h=a}Tt(){let a=this.$h.renderer();if(null===a)return null;if(this.Ln?.qh===a)return this.Ln.jh;let b=new a$(a);return this.Ln={qh:a,jh:b},b}Yh(){return this.$h.zOrder?.()??"normal"}}class a0{constructor(a){this.Kh=null,this.Zh=a}Gh(){return this.Zh}Ws(){this.Zh.updateAllViews?.()}Ys(){let a=this.Zh.paneViews?.()??[];if(this.Kh?.qh===a)return this.Kh.jh;let b=a.map(a=>new a_(a));return this.Kh={qh:a,jh:b},b}Qn(a,b){return this.Zh.hitTest?.(a,b)??null}}let a1=class extends a0{ds(){return[]}};class a2{constructor(a){this.Hh=a}nt(a,b,c){this.Hh.draw(a,aZ)}Uh(a,b,c){this.Hh.drawBackground?.(a,aZ)}}class a3{constructor(a){this.Ln=null,this.$h=a}Tt(){let a=this.$h.renderer();if(null===a)return null;if(this.Ln?.qh===a)return this.Ln.jh;let b=new a2(a);return this.Ln={qh:a,jh:b},b}Yh(){return this.$h.zOrder?.()??"normal"}}function a4(a){return{ri:a.text(),Ei:a.coordinate(),Vi:a.fixedCoordinate?.(),R:a.textColor(),G:a.backColor(),It:a.visible?.()??!0,pi:a.tickVisible?.()??!0}}class a5{constructor(a,b){this.Xt=new am,this.Xh=a,this.Jh=b}Tt(){return this.Xt.ht({ss:this.Jh.ss(),...a4(this.Xh)}),this.Xt}}class a6 extends aj{constructor(a,b){super(),this.Xh=a,this.Ki=b}Yi(a,b,c){let d=a4(this.Xh);c.G=d.G,a.R=d.R;let e=2/12*this.Ki.k();c.Ti=e,c.Ri=e,c.Ei=d.Ei,c.Vi=d.Vi,a.ri=d.ri,a.It=d.It,a.pi=d.pi}}class a7 extends a0{constructor(a,b){super(a),this.Qh=null,this.ta=null,this.ia=null,this.sa=null,this.ye=b}fs(){let a=this.Zh.timeAxisViews?.()??[];if(this.Qh?.qh===a)return this.Qh.jh;let b=this.ye.Qt().Et(),c=a.map(a=>new a5(a,b));return this.Qh={qh:a,jh:c},c}Ks(){let a=this.Zh.priceAxisViews?.()??[];if(this.ta?.qh===a)return this.ta.jh;let b=this.ye.Ft(),c=a.map(a=>new a6(a,b));return this.ta={qh:a,jh:c},c}na(){let a=this.Zh.priceAxisPaneViews?.()??[];if(this.ia?.qh===a)return this.ia.jh;let b=a.map(a=>new a3(a));return this.ia={qh:a,jh:b},b}ea(){let a=this.Zh.timeAxisPaneViews?.()??[];if(this.sa?.qh===a)return this.sa.jh;let b=a.map(a=>new a3(a));return this.sa={qh:a,jh:b},b}ra(a,b){return this.Zh.autoscaleInfo?.(a,b)??null}}function a8(a,b,c,d){a.forEach(a=>{b(a).forEach(a=>{a.Yh()===c&&d.push(a)})})}function a9(a){return a.Ys()}function ba(a){return a.na()}function bb(a){return a.ea()}let bc=["Area","Line","Baseline"];class bd extends aR{constructor(a,b,c,d,e){super(a),this.jt=new aX,this._r=new aH(this),this.ha=[],this.aa=new aD(this),this.la=null,this.oa=null,this._a=null,this.ua=[],this.ca=new aQ,this.da=new Map,this.fa=null,this.Ps=c,this.pa=b;const f=new aI(this);if(this.gs=[f],this.ur=new aA(f,this,a),bc.includes(this.pa)&&(this.la=new aG(this)),this.va(),this.$h=d(this,this.Qt(),e),"Custom"===this.pa){const a=this.$h;a.ma&&this.wa(a.ma)}}m(){null!==this._a&&clearTimeout(this._a)}Oe(a){return this.Ps.priceLineColor||a}Ve(a){let b,c,d={Be:!0},e=this.Ft();if(this.Qt().Et().Gi()||e.Gi()||this.jt.Gi())return d;let f=this.Qt().Et().Ie(),g=this.Lt();if(null===f||null===g)return d;if(a){let a=this.jt.Ch();if(null===a)return d;b=a,c=a.js}else{let a=this.jt.$s(f.bi(),-1);if(null===a||null===(b=this.jt.ph(a.js)))return d;c=a.js}let h=b.Wt[3],i=this.ga().gh(c,{Wt:b}),j=e.Nt(h,g.Wt);return{Be:!1,gt:h,ri:e.Ji(h,g.Wt),Ue:e.Ma(h),$e:e.ba(h,g.Wt),R:i.th,Ei:j,js:c}}ga(){return null!==this.oa||(this.oa=new aT(this)),this.oa}N(){return this.Ps}cr(a){let b=this.Qt(),{priceScaleId:c,visible:d,priceFormat:e}=a;void 0!==c&&c!==this.Ps.priceScaleId&&b.Sa(this,c),void 0!==d&&d!==this.Ps.visible&&b.xa();let f=void 0!==a.conflationThresholdFactor;K(this.Ps,a),f&&(this.da.clear(),this.Qt().dr()),void 0!==e&&(this.va(),b.Ca()),b.ya(this),b.ka(),this.$h.kt("options")}ht(a,b){this.jt.ht(a),this.da.clear();let c=this.Qt().Et().N();c.enableConflation&&c.precomputeConflationOnInit&&this.Pa(c.precomputeConflationPriority),this.$h.kt("data"),null!==this.la&&(b&&b.Ta?this.la.Pe():0===a.length&&this.la.ke());let d=this.Qt().Kn(this);this.Qt().Ra(d),this.Qt().ya(this),this.Qt().ka(),this.Qt().dr()}Da(a){let b=new aP(this,a);return this.ha.push(b),this.Qt().ya(this),b}Ia(a){let b=this.ha.indexOf(a);-1!==b&&this.ha.splice(b,1),this.Qt().ya(this)}Va(){return this.ha}wh(){return this.pa}Lt(){let a=this.Ba();return null===a?null:{Wt:a.Wt[3],Ea:a.wt}}Ba(){let a=this.Qt().Et().Ie();if(null===a)return null;let b=a.Aa();return this.jt.$s(b,1)}qs(){return this.jt}wa(a){this.fa=a,this.da.clear()}La(){return!!this.Qt().Et().N().enableConflation&&this.za()>1}kr(a){if(!this.La())return;let b=this.za();if(!this.da.has(b))return;let c="Custom"===this.pa,d=c&&this.fa||void 0,e=c&&this.$h.Oa?a=>{let b=this.$h.Oa(a);return Array.isArray(b)?b:["number"==typeof b?b:0]}:void 0,f=this.ca.kr(this.jt.Dh(),a,b,d,c,e),g=new aX;g.ht(f),this.da.set(b,g)}Na(){let a=this.Qt().Et().N().enableConflation;if("Custom"===this.pa&&null===this.fa||!a)return this.jt;let b=this.za(),c=this.da.get(b);return c||(this.Fa(b),this.da.get(b)??this.jt)}Wa(a){let b=this.jt.ph(a);return null===b?null:"Bar"===this.pa||"Candlestick"===this.pa||"Custom"===this.pa?{Hr:b.Wt[0],Ur:b.Wt[1],$r:b.Wt[2],qr:b.Wt[3]}:b.Wt[3]}Ha(a){let b=[];a8(this.ua,a9,"top",b);let c=this.la;return null!==c&&c.It()&&(null===this._a&&c.Re()&&(this._a=setTimeout(()=>{this._a=null,this.Qt().Ua()},0)),c.Te(),b.unshift(c)),b}Ys(){let a=[];this.$a()||a.push(this.aa),a.push(this.$h,this._r);let b=this.ha.map(a=>a.pr());return a.push(...b),a8(this.ua,a9,"normal",a),a}qa(){return this.ja(a9,"bottom")}Ya(a){return this.ja(ba,a)}Ka(a){return this.ja(bb,a)}Za(a,b){return this.ua.map(c=>c.Qn(a,b)).filter(a=>null!==a)}ds(){return[this.ur,...this.ha.map(a=>a.vr())]}Ks(a,b){if(b!==this.hs&&!this.$a())return[];let c=[...this.gs];for(let a of this.ha)c.push(a.mr());return this.ua.forEach(a=>{c.push(...a.Ks())}),c}fs(){let a=[];return this.ua.forEach(b=>{a.push(...b.fs())}),a}ra(a,b){if(void 0!==this.Ps.autoscaleInfoProvider){let c=this.Ps.autoscaleInfoProvider(()=>{let c=this.Ga(a,b);return null===c?null:c.tr()});return aL.ir(c)}return this.Ga(a,b)}qh(){let a=this.Ps.priceFormat;return a.base??1/a.minMove}Xa(){return this.Ja}Ws(){for(let a of(this.$h.kt(),this.gs))a.kt();for(let a of this.ha)a.kt();this._r.kt(),this.aa.kt(),this.la?.kt(),this.ua.forEach(a=>a.Ws())}Ft(){return H(super.Ft())}At(a){if(!(("Line"===this.pa||"Area"===this.pa||"Baseline"===this.pa)&&this.Ps.crosshairMarkerVisible))return null;let b=this.jt.ph(a);return null===b?null:{gt:b.Wt[3],ft:this.Qa(),Ht:this.tl(),Ot:this.il(),zt:this.sl(a)}}Ne(){return this.Ps.title}It(){return this.Ps.visible}nl(a){this.ua.push(new a7(a,this))}el(a){this.ua=this.ua.filter(b=>b.Gh()!==a)}rl(){if("Custom"===this.pa)return a=>this.$h.Oa(a)}hl(){if("Custom"===this.pa)return a=>this.$h.al(a)}ll(){return this.jt.Bh()}$a(){return!aq(this.Ft().ol())}Ga(a,b){if(!M(a)||!M(b)||this.jt.Gi())return null;let c="Line"===this.pa||"Area"===this.pa||"Baseline"===this.pa||"Histogram"===this.pa?[3]:[2,1],d=this.jt.Ih(a,b,c),e=null!==d?new aK(d.Fh,d.Wh):null,f=null;if("Histogram"===this.wh()){let a=this.Ps.base,b=new aK(a,a);e=null!==e?e.Sn(b):b}return this.ua.forEach(c=>{let d=c.ra(a,b);if(d?.priceRange){let a=new aK(d.priceRange.minValue,d.priceRange.maxValue);e=null!==e?e.Sn(a):a}d?.margins&&(f=d.margins)}),new aL(e,f)}Qa(){switch(this.pa){case"Line":case"Area":case"Baseline":return this.Ps.crosshairMarkerRadius}return 0}tl(){switch(this.pa){case"Line":case"Area":case"Baseline":{let a=this.Ps.crosshairMarkerBorderColor;if(0!==a.length)return a}}return null}il(){switch(this.pa){case"Line":case"Area":case"Baseline":return this.Ps.crosshairMarkerBorderWidth}return 0}sl(a){switch(this.pa){case"Line":case"Area":case"Baseline":{let a=this.Ps.crosshairMarkerBackgroundColor;if(0!==a.length)return a}}return this.ga().gh(a).th}va(){switch(this.Ps.priceFormat.type){case"custom":{let a=this.Ps.priceFormat.formatter;this.Ja={format:a,formatTickmarks:this.Ps.priceFormat.tickmarksFormatter??(b=>b.map(a))};break}case"volume":this.Ja=new aw(this.Ps.priceFormat.precision);break;case"percent":this.Ja=new av(this.Ps.priceFormat.precision);break;default:{let a=Math.pow(10,this.Ps.priceFormat.precision);this.Ja=new au(a,this.Ps.priceFormat.minMove*a)}}null!==this.hs&&this.hs._l()}ja(a,b){let c=[];return a8(this.ua,a,b,c),c}za(){let{ul:a,cl:b,dl:c}=this.fl();return this.ca.gr(a,b,c)}fl(){let a=this.Qt().Et(),b=a.ul(),c=window.devicePixelRatio||1,d=a.N().conflationThresholdFactor;return{ul:b,cl:c,dl:this.Ps.conflationThresholdFactor??d??1}}pl(a){let b,c=this.jt.Dh();if("Custom"===this.pa&&null!==this.fa){let d=this.rl();if(!d)throw Error("Custom series with conflation reducer must have a priceValueBuilder method");b=this.ca.Mr(c,a,this.fa,!0,a=>d(a))}else b=this.ca.Mr(c,a);let d=new aX;return d.ht(b),d}Fa(a){let b=this.pl(a);this.da.set(a,b)}Pa(a){if("Custom"!==this.pa||null!==this.fa&&this.rl())for(let b of(this.da.clear(),this.Qt().Et().vl())){let c=()=>{this.ml(b)},d="object"==typeof self&&self;d?.gl?.wl?d.gl.wl(()=>{c()},{Ml:a}):Promise.resolve().then(()=>c())}}ml(a){if(this.da.has(a)||0===this.jt.Dh().length)return;let b=this.pl(a);this.da.set(a,b)}}let be=[3],bf=[0,1,2,3];class bg{constructor(a){this.Ps=a}bl(a,b,c){if(0===this.Ps.mode)return a;let d=c.Rs(),e=d.Lt();if(null===e)return a;let f=d.Nt(a,e),g=c.Sl().filter(a=>a instanceof bd).reduce((a,d)=>{if(c.Zn(d)||!d.It())return a;let e=d.Ft(),f=d.qs();if(e.Gi()||!f.Ee(b))return a;let g=f.ph(b);if(null===g)return a;let h=I(d.Lt()),i=3===this.Ps.mode?bf:be;return a.concat(i.map(a=>e.Nt(g.Wt[a],h.Wt)))},[]);if(0===g.length)return a;g.sort((a,b)=>Math.abs(a-f)-Math.abs(b-f));let h=g[0];return d.Ds(h,e)}}function bh(a,b,c){return Math.min(Math.max(a,b),c)}class bi extends Z{constructor(){super(...arguments),this.jt=null}ht(a){this.jt=a}et({context:a,bitmapSize:b,horizontalPixelRatio:c,verticalPixelRatio:d}){var e;if(null===this.jt)return;let f=Math.max(1,Math.floor(c));a.lineWidth=f,e=()=>{let e=H(this.jt);if(e.xl){for(let d of(a.strokeStyle=e.Cl,D(a,e.yl),a.beginPath(),e.kl)){let e=Math.round(d.Pl*c);a.moveTo(e,-f),a.lineTo(e,b.height+f)}a.stroke()}if(e.Tl){for(let c of(a.strokeStyle=e.Rl,D(a,e.Dl),a.beginPath(),e.Il)){let e=Math.round(c.Pl*d);a.moveTo(-f,e),a.lineTo(b.width+f,e)}a.stroke()}},a.save(),a.lineWidth%2&&a.translate(.5,.5),e(),a.restore()}}class bj{constructor(a){this.Xt=new bi,this.xt=!0,this.yt=a}kt(){this.xt=!0}Tt(){if(this.xt){let a=this.yt.Qt().N().grid,b={Tl:a.horzLines.visible,xl:a.vertLines.visible,Rl:a.horzLines.color,Cl:a.vertLines.color,Dl:a.horzLines.style,yl:a.vertLines.style,Il:this.yt.Rs().Vl(),kl:(this.yt.Qt().Et().Vl()||[]).map(a=>({Pl:a.coord}))};this.Xt.ht(b),this.xt=!1}return this.Xt}}class bk{constructor(a){this.$h=new bj(a)}pr(){return this.$h}}let bl={Bl:4,El:1e-4};function bm(a,b){let c=100*(a-b)/b;return b<0?-c:c}function bn(a,b){let c=100*(a-b)/b+100;return b<0?-c:c}function bo(a,b){let c=Math.abs(a);if(c<1e-15)return 0;let d=Math.log10(c+b.El)+b.Bl;return a<0?-d:d}function bp(a,b){let c=Math.abs(a);if(c<1e-15)return 0;let d=Math.pow(10,c-b.Bl)-b.El;return a<0?-d:d}function bq(a,b){return null===a?null:new aK(bo(a.Ze(),b),bo(a.Ge(),b))}function br(a,b){return null===a?null:new aK(bp(a.Ze(),b),bp(a.Ge(),b))}function bs(a){if(null===a)return bl;let b=Math.abs(a.Ge()-a.Ze());if(b>=1||b<1e-15)return bl;let c=Math.ceil(Math.abs(Math.log10(b))),d=bl.Bl+c;return{Bl:d,El:1/Math.pow(10,d)}}class bt{constructor(a,b){if(this.Al=a,this.Ll=b,function(a){if(a<0)return!1;if(a>1e18)return!0;for(let b=a;b>1;b/=10)if(b%10!=0)return!1;return!0}(this.Al))this.zl=[2,2.5,2];else{this.zl=[];for(let a=this.Al;1!==a;){if(a%2==0)this.zl.push(2),a/=2;else{if(a%5!=0)throw Error("unexpected base");this.zl.push(2,2.5),a/=5}if(this.zl.length>100)throw Error("something wrong with base")}}}Ol(a,b,c){let d=0===this.Al?0:1/this.Al,e=Math.pow(10,Math.max(0,Math.ceil(Math.log10(a-b)))),f=0,g=this.Ll[0];for(;;){let a=d-e<=1e-14&&e>d+1e-14,b=c*g-e<=1e-14,h=1-e<=1e-14;if(!(a&&b&&h))break;e/=g,g=this.Ll[++f%this.Ll.length]}if(e<=d+1e-14&&(e=d),e=Math.max(1,e),this.zl.length>0&&1e-14>Math.abs(e-1))for(f=0,g=this.zl[0];c*g-e<=1e-14&&e>d+1e-14;)e/=g,g=this.zl[++f%this.zl.length];return e}}class bu{constructor(a,b,c,d){this.Nl=[],this.Ki=a,this.Al=b,this.Fl=c,this.Wl=d}Ol(a,b){if(a<b)throw Error("high < low");let c=this.Ki.$t(),d=(a-b)*this.Hl()/c,e=new bt(this.Al,[2,2.5,2]),f=new bt(this.Al,[2,2,2.5]),g=new bt(this.Al,[2.5,2,2]),h=[];return h.push(e.Ol(a,b,d),f.Ol(a,b,d),g.Ol(a,b,d)),function(a){if(a.length<1)throw Error("array is empty");let b=a[0];for(let c=1;c<a.length;++c)a[c]<b&&(b=a[c]);return b}(h)}Ul(){let a=this.Ki,b=a.Lt();if(null===b)return void(this.Nl=[]);let c=a.$t(),d=this.Fl(c-1,b),e=this.Fl(0,b),f=this.Ki.N().entireTextOnly?this.$l()/2:0,g=c-1-f,h=Math.max(d,e),i=Math.min(d,e);if(h===i)return void(this.Nl=[]);let j=this.Ol(h,i);if(this.ql(b,j,h,i,f,g),a.jl()&&this.Yl(j,i,h)){let a=this.Ki.Kl();this.Zl(b,j,f,g,a,2*a)}let k=this.Nl.map(a=>a.Gl),l=this.Ki.Xl(k);for(let a=0;a<this.Nl.length;a++)this.Nl[a].Jl=l[a]}Vl(){return this.Nl}$l(){return this.Ki.k()}Hl(){return Math.ceil(2.5*this.$l())}ql(a,b,c,d,e,f){let g=this.Nl,h=this.Ki,i=c%b;i+=i<0?b:0;let j=c>=d?1:-1,k=null,l=0;for(let m=c-i;m>d;m-=b){let c=this.Wl(m,a,!0);null!==k&&Math.abs(c-k)<this.Hl()||c<e||c>f||(l<g.length?(g[l].Pl=c,g[l].Jl=h.Ql(m),g[l].Gl=m):g.push({Pl:c,Jl:h.Ql(m),Gl:m}),l++,k=c,h.io()&&(b=this.Ol(m*j,d)))}g.length=l}Zl(a,b,c,d,e,f){let g=this.Nl,h=this.so(a,c,e,f),i=this.so(a,d,-f,-e),j=this.Wl(0,a,!0)-this.Wl(b,a,!0);g.length>0&&g[0].Pl-h.Pl<j/2&&g.shift(),g.length>0&&i.Pl-g[g.length-1].Pl<j/2&&g.pop(),g.unshift(h),g.push(i)}so(a,b,c,d){let e=this.Fl(b+c,a),f=this.Fl(b+d,a),g=Math.min(e,f),h=Math.max(e,f),i=Math.max(.1,this.Ol(h,g)),j=this.Fl(b+(c+d)/2,a),k=j-j%i,l=this.Wl(k,a,!0);return{Jl:this.Ki.Ql(k),Pl:l,Gl:k}}Yl(a,b,c){let d=I(this.Ki.er());return this.Ki.io()&&(d=br(d,this.Ki.no())),d.Ze()-b<a&&c-d.Ge()<a}}function bv(a){return a.slice().sort((a,b)=>H(a._s())-H(b._s()))}(h=r||(r={}))[h.Normal=0]="Normal",h[h.Logarithmic=1]="Logarithmic",h[h.Percentage=2]="Percentage",h[h.IndexedTo100=3]="IndexedTo100";let bw=new av,bx=new au(100,1);class by{constructor(a,b,c,d,e){this.eo=0,this.ro=null,this.sr=null,this.ho=null,this.ao={lo:!1,oo:null},this._o=!1,this.uo=0,this.co=0,this.do=new J,this.fo=new J,this.po=[],this.vo=null,this.mo=null,this.wo=null,this.Mo=null,this.bo=null,this.Ja=bx,this.So=bs(null),this.xo=a,this.Ps=b,this.Co=c,this.yo=d,this.ko=e,this.Po=new bu(this,100,this.To.bind(this),this.Ro.bind(this))}ol(){return this.xo}N(){return this.Ps}cr(a){if(K(this.Ps,a),this._l(),void 0!==a.mode&&this.Do({ae:a.mode}),void 0!==a.scaleMargins){let b=G(a.scaleMargins.top),c=G(a.scaleMargins.bottom);if(b<0||b>1)throw Error(`Invalid top margin - expect value between 0 and 1, given=${b}`);if(c<0||c>1)throw Error(`Invalid bottom margin - expect value between 0 and 1, given=${c}`);if(b+c>1)throw Error(`Invalid margins - sum of margins must be less than 1, given=${b+c}`);this.Io(),this.wo=null}}Vo(){return this.Ps.autoScale}Bo(){return this._o}io(){return 1===this.Ps.mode}He(){return 2===this.Ps.mode}Eo(){return 3===this.Ps.mode}no(){return this.So}ae(){return{ln:this.Ps.autoScale,Ao:this.Ps.invertScale,ae:this.Ps.mode}}Do(a){let b=this.ae(),c=null;void 0!==a.ln&&(this.Ps.autoScale=a.ln),void 0!==a.ae&&(this.Ps.mode=a.ae,2!==a.ae&&3!==a.ae||(this.Ps.autoScale=!0),this.ao.lo=!1),1===b.ae&&a.ae!==b.ae&&(function(a,b){if(null===a)return!1;let c=bp(a.Ze(),b),d=bp(a.Ge(),b);return isFinite(c)&&isFinite(d)}(this.sr,this.So)?null!==(c=br(this.sr,this.So))&&this.Lo(c):this.Ps.autoScale=!0),1===a.ae&&a.ae!==b.ae&&null!==(c=bq(this.sr,this.So))&&this.Lo(c);let d=b.ae!==this.Ps.mode;d&&(2===b.ae||this.He())&&this._l(),d&&(3===b.ae||this.Eo())&&this._l(),void 0!==a.Ao&&b.Ao!==a.Ao&&(this.Ps.invertScale=a.Ao,this.zo()),this.fo.p(b,this.ae())}Oo(){return this.fo}k(){return this.Co.fontSize}$t(){return this.eo}No(a){this.eo!==a&&(this.eo=a,this.Io(),this.wo=null)}Fo(){if(this.ro)return this.ro;let a=this.$t()-this.Wo()-this.Ho();return this.ro=a,a}er(){return this.Uo(),this.sr}Lo(a,b){let c=this.sr;(b||null===c&&null!==a||null!==c&&!c.Ye(a))&&(this.wo=null,this.sr=a)}$o(a){this.Lo(a),this.qo(null!==a)}Gi(){return this.Uo(),0===this.eo||!this.sr||this.sr.Gi()}jo(a){return this.Ao()?a:this.$t()-1-a}Nt(a,b){return this.He()?a=bm(a,b):this.Eo()&&(a=bn(a,b)),this.Ro(a,b)}Yo(a,b,c){this.Uo();let d=this.Ho(),e=H(this.er()),f=e.Ze(),g=e.Ge(),h=this.Fo()-1,i=this.Ao(),j=h/(g-f),k=void 0===c?0:c.from,l=void 0===c?a.length:c.to,m=this.Ko();for(let c=k;c<l;c++){let e=a[c],g=e.gt;if(isNaN(g))continue;let h=g;null!==m&&(h=m(e.gt,b));let k=d+j*(h-f);e.ut=i?k:this.eo-1-k}}Zo(a,b,c){this.Uo();let d=this.Ho(),e=H(this.er()),f=e.Ze(),g=e.Ge(),h=this.Fo()-1,i=this.Ao(),j=h/(g-f),k=void 0===c?0:c.from,l=void 0===c?a.length:c.to,m=this.Ko();for(let c=k;c<l;c++){let e=a[c],g=e.Hr,h=e.Ur,k=e.$r,l=e.qr;null!==m&&(g=m(e.Hr,b),h=m(e.Ur,b),k=m(e.$r,b),l=m(e.qr,b));let n=d+j*(g-f),o=i?n:this.eo-1-n;e.Go=o,n=d+j*(h-f),e.Xo=o=i?n:this.eo-1-n,n=d+j*(k-f),e.Jo=o=i?n:this.eo-1-n,n=d+j*(l-f),e.Qo=o=i?n:this.eo-1-n}}Ds(a,b){let c=this.To(a,b);return this.t_(c,b)}t_(a,b){var c,d;let e=a;return this.He()?(c=e,b<0&&(c=-c),e=c/100*b+b):this.Eo()&&(d=e-100,b<0&&(d=-d),e=d/100*b+b),e}Sl(){return this.po}Dt(){return this.mo||(this.mo=bv(this.po)),this.mo}i_(a){-1===this.po.indexOf(a)&&(this.po.push(a),this._l(),this.s_())}n_(a){let b=this.po.indexOf(a);if(-1===b)throw Error("source is not attached to scale");this.po.splice(b,1),0===this.po.length&&(this.Do({ln:!0}),this.Lo(null)),this._l(),this.s_()}Lt(){let a=null;for(let b of this.po){let c=b.Lt();null!==c&&(null===a||c.Ea<a.Ea)&&(a=c)}return null===a?null:a.Wt}Ao(){return this.Ps.invertScale}Vl(){let a=null===this.Lt();if(null!==this.wo&&(a||this.wo.e_===a))return this.wo.Vl;this.Po.Ul();let b=this.Po.Vl();return this.wo={Vl:b,e_:a},this.do.p(),b}r_(){return this.do}h_(a){this.He()||this.Eo()||null===this.Mo&&null===this.ho&&(this.Gi()||(this.Mo=this.eo-a,this.ho=H(this.er()).Ke()))}a_(a){if(this.He()||this.Eo()||null===this.Mo)return;this.Do({ln:!1}),(a=this.eo-a)<0&&(a=0);let b=(this.Mo+.2*(this.eo-1))/(a+.2*(this.eo-1)),c=H(this.ho).Ke();b=Math.max(b,.1),c.Je(b),this.Lo(c)}l_(){this.He()||this.Eo()||(this.Mo=null,this.ho=null)}o_(a){this.Vo()||null===this.bo&&null===this.ho&&(this.Gi()||(this.bo=a,this.ho=H(this.er()).Ke()))}__(a){if(this.Vo()||null===this.bo)return;let b=H(this.er()).Xe()/(this.Fo()-1),c=a-this.bo;this.Ao()&&(c*=-1);let d=c*b,e=H(this.ho).Ke();e.Qe(d),this.Lo(e,!0),this.wo=null}u_(){this.Vo()||null!==this.bo&&(this.bo=null,this.ho=null)}Xa(){return this.Ja||this._l(),this.Ja}Ji(a,b){switch(this.Ps.mode){case 2:return this.c_(bm(a,b));case 3:return this.Xa().format(bn(a,b));default:return this.lr(a)}}Ql(a){switch(this.Ps.mode){case 2:return this.c_(a);case 3:return this.Xa().format(a);default:return this.lr(a)}}Xl(a){switch(this.Ps.mode){case 2:return this.d_(a);case 3:return this.Xa().formatTickmarks(a);default:return this.f_(a)}}Ma(a){return this.lr(a,H(this.vo).Xa())}ba(a,b){return a=bm(a,b),this.c_(a,bw)}p_(){return this.po}v_(a){this.ao={oo:a,lo:!1}}Ws(){this.po.forEach(a=>a.Ws())}jl(){return this.Ps.ensureEdgeTickMarksVisible&&this.Vo()}Kl(){return this.k()/2}_l(){this.wo=null;let a=1/0;for(let b of(this.vo=null,this.po))b._s()<a&&(a=b._s(),this.vo=b);let b=100;null!==this.vo&&(b=Math.round(this.vo.qh())),this.Ja=bx,this.He()?(this.Ja=bw,b=100):this.Eo()?(this.Ja=new au(100,1),b=100):null!==this.vo&&(this.Ja=this.vo.Xa()),this.Po=new bu(this,b,this.To.bind(this),this.Ro.bind(this)),this.Po.Ul()}s_(){this.mo=null}m_(){return null===this.vo||this.He()||this.Eo()?1:1/this.vo.qh()}Xi(){return this.ko}qo(a){this._o=a}Wo(){return this.Ao()?this.Ps.scaleMargins.bottom*this.$t()+this.co:this.Ps.scaleMargins.top*this.$t()+this.uo}Ho(){return this.Ao()?this.Ps.scaleMargins.top*this.$t()+this.uo:this.Ps.scaleMargins.bottom*this.$t()+this.co}Uo(){this.ao.lo||(this.ao.lo=!0,this.w_())}Io(){this.ro=null}Ro(a,b){if(this.Uo(),this.Gi())return 0;a=this.io()&&a?bo(a,this.So):a;let c=H(this.er()),d=this.Ho()+(this.Fo()-1)*(a-c.Ze())/c.Xe();return this.jo(d)}To(a,b){if(this.Uo(),this.Gi())return 0;let c=this.jo(a),d=H(this.er()),e=d.Ze()+d.Xe()*((c-this.Ho())/(this.Fo()-1));return this.io()?bp(e,this.So):e}zo(){this.wo=null,this.Po.Ul()}w_(){var a,b,c,d,e;if(this.Bo()&&!this.Vo())return;let f=this.ao.oo;if(null===f)return;let g=null,h=this.p_(),i=0,j=0;for(let a of h){if(!a.It())continue;let h=a.Lt();if(null===h)continue;let k=a.ra(f.Aa(),f.bi()),l=k&&k.er();if(null!==l){switch(this.Ps.mode){case 1:l=bq(l,this.So);break;case 2:b=l,c=h.Wt,l=new aK(bm(b.Ze(),c),bm(b.Ge(),c));break;case 3:d=l,e=h.Wt,l=new aK(bn(d.Ze(),e),bn(d.Ge(),e))}if(g=null===g?l:g.Sn(H(l)),null!==k){let a=k.rr();null!==a&&(i=Math.max(i,a.above),j=Math.max(j,a.below))}}}if(this.jl()&&(i=Math.max(i,this.Kl()),j=Math.max(j,this.Kl())),i===this.uo&&j===this.co||(this.uo=i,this.co=j,this.wo=null,this.Io()),null!==g){if(g.Ze()===g.Ge()){let a=5*this.m_();this.io()&&(g=br(g,this.So)),g=new aK(g.Ze()-a,g.Ge()+a),this.io()&&(g=bq(g,this.So))}if(this.io()){let b=br(g,this.So),c=bs(b);if(a=this.So,c.Bl!==a.Bl||c.El!==a.El){let a=null!==this.ho?br(this.ho,this.So):null;this.So=c,g=bq(b,c),null!==a&&(this.ho=bq(a,c))}}this.Lo(g)}else null===this.sr&&(this.Lo(new aK(-.5,.5)),this.So=bs(null))}Ko(){return this.He()?bm:this.Eo()?bn:this.io()?a=>bo(a,this.So):null}g_(a,b,c){return void 0===b?(void 0===c&&(c=this.Xa()),c.format(a)):b(a)}M_(a,b,c){return void 0===b?(void 0===c&&(c=this.Xa()),c.formatTickmarks(a)):b(a)}lr(a,b){return this.g_(a,this.yo.priceFormatter,b)}f_(a,b){let c=this.yo.priceFormatter;return this.M_(a,this.yo.tickmarksPriceFormatter??(c?a=>a.map(c):void 0),b)}c_(a,b){return this.g_(a,this.yo.percentageFormatter,b)}d_(a,b){let c=this.yo.percentageFormatter;return this.M_(a,this.yo.tickmarksPercentageFormatter??(c?a=>a.map(c):void 0),b)}}function bz(a){return a instanceof bd}class bA{constructor(a,b){this.po=[],this.b_=new Map,this.eo=0,this.S_=0,this.x_=1,this.mo=null,this.C_=!1,this.y_=new J,this.ua=[],this.Jh=a,this.ns=b,this.k_=new bk(this);const c=b.N();this.P_=this.T_("left",c.leftPriceScale),this.R_=this.T_("right",c.rightPriceScale),this.P_.Oo().i(this.D_.bind(this,this.P_),this),this.R_.Oo().i(this.D_.bind(this,this.R_),this),this.I_(c)}I_(a){if(a.leftPriceScale&&this.P_.cr(a.leftPriceScale),a.rightPriceScale&&this.R_.cr(a.rightPriceScale),a.localization&&(this.P_._l(),this.R_._l()),a.overlayPriceScales)for(let b of Array.from(this.b_.values())){let c=H(b[0].Ft());c.cr(a.overlayPriceScales),a.localization&&c._l()}}V_(a){switch(a){case"left":return this.P_;case"right":return this.R_}return this.b_.has(a)?G(this.b_.get(a))[0].Ft():null}m(){this.Qt().B_().u(this),this.P_.Oo().u(this),this.R_.Oo().u(this),this.po.forEach(a=>{a.m&&a.m()}),this.ua=this.ua.filter(a=>{let b=a.Gh();return b.detached&&b.detached(),!1}),this.y_.p()}E_(){return this.x_}A_(a){this.x_=a}Qt(){return this.ns}ss(){return this.S_}$t(){return this.eo}L_(a){this.S_=a,this.z_()}No(a){this.eo=a,this.P_.No(a),this.R_.No(a),this.po.forEach(b=>{if(this.Zn(b)){let c=b.Ft();null!==c&&c.No(a)}}),this.z_()}O_(a){this.C_=a}N_(){return this.C_}F_(){return this.po.filter(bz)}Sl(){return this.po}Zn(a){let b=a.Ft();return null===b||this.P_!==b&&this.R_!==b}i_(a,b,c){this.W_(a,b,c?a._s():this.po.length)}n_(a,b){let c=this.po.indexOf(a);F(-1!==c,"removeDataSource: invalid data source"),this.po.splice(c,1),b||this.po.forEach((a,b)=>a.us(b));let d=H(a.Ft()).ol();if(this.b_.has(d)){let b=G(this.b_.get(d)),c=b.indexOf(a);-1!==c&&(b.splice(c,1),0===b.length&&this.b_.delete(d))}let e=a.Ft();e&&e.Sl().indexOf(a)>=0&&(e.n_(a),this.H_(e)),this.mo=null}Xn(a){return a===this.P_?"left":a===this.R_?"right":"overlay"}U_(){return this.P_}q_(){return this.R_}j_(a,b){a.h_(b)}Y_(a,b){a.a_(b),this.z_()}K_(a){a.l_()}Z_(a,b){a.o_(b)}G_(a,b){a.__(b),this.z_()}X_(a){a.u_()}z_(){this.po.forEach(a=>{a.Ws()})}Rs(){let a=null;return this.ns.N().rightPriceScale.visible&&0!==this.R_.Sl().length?a=this.R_:this.ns.N().leftPriceScale.visible&&0!==this.P_.Sl().length?a=this.P_:0!==this.po.length&&(a=this.po[0].Ft()),null===a&&(a=this.R_),a}Gn(){let a=null;return this.ns.N().rightPriceScale.visible?a=this.R_:this.ns.N().leftPriceScale.visible&&(a=this.P_),a}H_(a){null!==a&&a.Vo()&&this.J_(a)}Q_(a){let b=this.Jh.Ie();a.Do({ln:!0}),null!==b&&a.v_(b),this.z_()}tu(){this.J_(this.P_),this.J_(this.R_)}iu(){this.H_(this.P_),this.H_(this.R_),this.po.forEach(a=>{this.Zn(a)&&this.H_(a.Ft())}),this.z_(),this.ns.dr()}Dt(){return null===this.mo&&(this.mo=bv(this.po)),this.mo}su(a,b){b=bh(b,0,this.po.length-1);let c=this.po.indexOf(a);for(let d of(F(-1!==c,"setSeriesOrder: invalid data source"),this.po.splice(c,1),this.po.splice(b,0,a),this.po.forEach((a,b)=>a.us(b)),this.mo=null,[this.P_,this.R_]))d.s_(),d._l();this.ns.dr()}Vt(){return this.Dt().filter(bz)}nu(){return this.y_}eu(){return this.k_}nl(a){this.ua.push(new a1(a))}el(a){this.ua=this.ua.filter(b=>b.Gh()!==a),a.detached&&a.detached(),this.ns.dr()}ru(){return this.ua}Za(a,b){return this.ua.map(c=>c.Qn(a,b)).filter(a=>null!==a)}J_(a){let b=a.p_();if(b&&b.length>0&&!this.Jh.Gi()){let b=this.Jh.Ie();null!==b&&a.v_(b)}a.Ws()}W_(a,b,c){let d=this.V_(b);if(null===d&&(d=this.T_(b,this.ns.N().overlayPriceScales)),this.po.splice(c,0,a),!aq(b)){let c=this.b_.get(b)||[];c.push(a),this.b_.set(b,c)}a.us(c),d.i_(a),a.cs(d),this.H_(d),this.mo=null}D_(a,b,c){b.ae!==c.ae&&this.J_(a)}T_(a,b){let c=new by(a,{visible:!0,autoScale:!0,...P(b)},this.ns.N().layout,this.ns.N().localization,this.ns.Xi());return c.No(this.$t()),c}}function bB(a){return{hu:a.hu,au:{te:a.lu.externalId},ou:a.lu.cursorStyle}}function bC(a,b,c){let d=[a,...a.Dt()],e=function(a,b,c){var d,e;let f,g;for(let h of a)for(let a of h.Za?.(b,c)??[])d=a.zOrder,(e=f?.zOrder)&&("top"!==d||"top"===e)&&("normal"!==d||"bottom"!==e)||(f=a,g=h);return f&&g?{lu:f,hu:g}:null}(d,b,c);if("top"===e?.lu.zOrder)return bB(e);for(let f of d){if(e&&e.hu===f&&"bottom"!==e.lu.zOrder&&!e.lu.isBackground)return bB(e);if(void 0!==f.Ys){let d=function(a,b,c,d){for(let e of a){let a=e.Tt(d);if(null!==a&&a.Qn){let d=a.Qn(b,c);if(null!==d)return{_u:e,au:d}}}return null}(f.Ys(a),b,c,a);if(null!==d)return{hu:f,_u:d._u,au:d.au}}if(e&&e.hu===f&&"bottom"!==e.lu.zOrder&&e.lu.isBackground)return bB(e)}return e?.lu?bB(e):null}class bD{constructor(a,b,c=50){this.Vn=0,this.Bn=1,this.En=1,this.Ln=new Map,this.An=new Map,this.uu=a,this.cu=b,this.zn=c}du(a){let b=a.time,c=this.cu.cacheKey(b),d=this.Ln.get(c);if(void 0!==d)return d.fu;if(this.Vn===this.zn){let a=this.An.get(this.En);this.An.delete(this.En),this.Ln.delete(G(a)),this.En++,this.Vn--}let e=this.uu(a);return this.Ln.set(c,{fu:e,Wn:this.Bn}),this.An.set(this.Bn,c),this.Vn++,this.Bn++,e}}class bE{constructor(a,b){F(a<=b,"right should be >= left"),this.pu=a,this.vu=b}Aa(){return this.pu}bi(){return this.vu}mu(){return this.vu-this.pu+1}Ee(a){return this.pu<=a&&a<=this.vu}Ye(a){return this.pu===a.Aa()&&this.vu===a.bi()}}function bF(a,b){return null===a||null===b?a===b:a.Ye(b)}class bG{constructor(){this.wu=new Map,this.Ln=null,this.gu=!1}Mu(a){this.gu=a,this.Ln=null}bu(a,b){this.Su(b),this.Ln=null;for(let c=b;c<a.length;++c){let b=a[c],d=this.wu.get(b.timeWeight);void 0===d&&(d=[],this.wu.set(b.timeWeight,d)),d.push({index:c,time:b.time,weight:b.timeWeight,originalTime:b.originalTime})}}xu(a,b,c,d,e){let f=Math.ceil(b/a);return null!==this.Ln&&this.Ln.Cu===f&&e===this.Ln.yu&&c===this.Ln.ku||(this.Ln={yu:e,ku:c,Vl:this.Pu(f,c,d),Cu:f}),this.Ln.Vl}Su(a){if(0===a)return void this.wu.clear();let b=[];for(let c of(this.wu.forEach((c,d)=>{a<=c[0].index?b.push(d):c.splice(aV(c,a,b=>b.index<a),1/0)}),b))this.wu.delete(c)}Pu(a,b,c){let d=[],e=a=>!b||c.has(a.index);for(let b of Array.from(this.wu.keys()).sort((a,b)=>b-a)){if(!this.wu.get(b))continue;let c=d;d=[];let f=c.length,g=0,h=G(this.wu.get(b)),i=h.length,j=1/0,k=-1/0;for(let b=0;b<i;b++){let i=h[b],l=i.index;for(;g<f;){let a=c[g],b=a.index;if(!(b<l&&e(a))){j=b;break}g++,d.push(a),k=b,j=1/0}if(j-l>=a&&l-k>=a&&e(i))d.push(i),k=l;else if(this.gu)return c}for(;g<f;g++)e(c[g])&&d.push(c[g])}return d}}class bH{constructor(a){this.Tu=a}Ru(){return null===this.Tu?null:new bE(Math.floor(this.Tu.Aa()),Math.ceil(this.Tu.bi()))}Du(){return this.Tu}static Iu(){return new bH(null)}}function bI(a,b){return a.weight>b.weight?a:b}class bJ{constructor(a,b,c,d){this.S_=0,this.Vu=null,this.Bu=[],this.bo=null,this.Mo=null,this.Eu=new bG,this.Au=new Map,this.Lu=bH.Iu(),this.zu=!0,this.Ou=new J,this.Nu=new J,this.Fu=new J,this.Wu=null,this.Hu=null,this.Uu=new Map,this.$u=-1,this.qu=[],this.ju=1,this.Ps=b,this.yo=c,this.Yu=b.rightOffset,this.Ku=b.barSpacing,this.ns=a,this.Zu(b),this.cu=d,this.Gu(),this.Eu.Mu(b.uniformDistribution),this.Xu(),this.Ju()}N(){return this.Ps}Qu(a){K(this.yo,a),this.tc(),this.Gu()}cr(a,b){K(this.Ps,a),this.Ps.fixLeftEdge&&this.sc(),this.Ps.fixRightEdge&&this.nc(),void 0!==a.barSpacing&&this.ns.gn(a.barSpacing),void 0!==a.rightOffset&&this.ns.Mn(a.rightOffset),this.Zu(a),void 0===a.minBarSpacing&&void 0===a.maxBarSpacing||this.ns.gn(a.barSpacing??this.Ku),void 0!==a.ignoreWhitespaceIndices&&a.ignoreWhitespaceIndices!==this.Ps.ignoreWhitespaceIndices&&this.Ju(),this.tc(),this.Gu(),void 0===a.enableConflation&&void 0===a.conflationThresholdFactor||this.Xu(),this.Fu.p()}Is(a){return this.Bu[a]?.time??null}es(a){return this.Bu[a]??null}ec(a,b){if(this.Bu.length<1)return null;if(this.cu.key(a)>this.cu.key(this.Bu[this.Bu.length-1].time))return b?this.Bu.length-1:null;let c=aV(this.Bu,this.cu.key(a),(a,b)=>this.cu.key(a.time)<b);return this.cu.key(a)<this.cu.key(this.Bu[c].time)?b?c:null:c}Gi(){return 0===this.S_||0===this.Bu.length||null===this.Vu}rc(){return this.Bu.length>0}Ie(){return this.hc(),this.Lu.Ru()}ac(){return this.hc(),this.Lu.Du()}lc(){let a=this.Ie();if(null===a)return null;let b={from:a.Aa(),to:a.bi()};return this.oc(b)}oc(a){let b=Math.round(a.from),c=Math.round(a.to),d=H(this._c()),e=H(this.uc());return{from:H(this.es(Math.max(d,b))),to:H(this.es(Math.min(e,c)))}}cc(a){return{from:H(this.ec(a.from,!0)),to:H(this.ec(a.to,!0))}}ss(){return this.S_}L_(a){if(!isFinite(a)||a<=0||this.S_===a)return;let b=this.ac(),c=this.S_;if(this.S_=a,this.zu=!0,this.Ps.lockVisibleTimeRangeOnResize&&0!==c){let b=this.Ku*a/c;this.Ku=b}this.Ps.fixLeftEdge&&null!==b&&0>=b.Aa()&&(this.Yu-=Math.round((c-a)/this.Ku)+1,this.zu=!0),this.dc(),this.fc()}qt(a){if(this.Gi()||!M(a))return 0;let b=this.vc()+this.Yu-a;return this.S_-(b+.5)*this.Ku-1}mc(a,b){let c=this.vc(),d=void 0===b?0:b.from,e=void 0===b?a.length:b.to;for(let b=d;b<e;b++){let d=a[b].wt,e=c+this.Yu-d,f=this.S_-(e+.5)*this.Ku-1;a[b]._t=f}}wc(a,b){let c=Math.ceil(this.gc(a));return b&&this.Ps.ignoreWhitespaceIndices&&!this.Mc(c)?this.bc(c):c}Mn(a){this.zu=!0,this.Yu=a,this.fc(),this.ns.Sc(),this.ns.dr()}ul(){return this.Ku}gn(a){let b=this.Ku;if(this.xc(a),void 0!==this.Ps.rightOffsetPixels&&0!==b){let a=this.Yu*b/this.Ku;this.Yu=a}this.fc(),this.ns.Sc(),this.ns.dr()}Cc(){return this.Yu}Vl(){if(this.Gi())return null;if(null!==this.Hu)return this.Hu;let a=this.Ku,b=5*(this.ns.N().layout.fontSize+4)/8*(this.Ps.tickMarkMaxCharacterLength||8),c=Math.round(b/a),d=H(this.Ie()),e=Math.max(d.Aa(),d.Aa()-c),f=Math.max(d.bi(),d.bi()-c),g=this.Eu.xu(a,b,this.Ps.ignoreWhitespaceIndices,this.Uu,this.$u),h=this._c()+c,i=this.uc()-c,j=this.yc(),k=this.Ps.fixLeftEdge||j,l=this.Ps.fixRightEdge||j,m=0;for(let a of g){let c;e<=a.index&&a.index<=f&&(m<this.qu.length?((c=this.qu[m]).coord=this.qt(a.index),c.label=this.kc(a),c.weight=a.weight):(c={needAlignCoordinate:!1,coord:this.qt(a.index),label:this.kc(a),weight:a.weight},this.qu.push(c)),this.Ku>b/2&&!j?c.needAlignCoordinate=!1:c.needAlignCoordinate=k&&a.index<=h||l&&a.index>=i,m++)}return this.qu.length=m,this.Hu=this.qu,this.qu}Pc(){let a;this.zu=!0,this.gn(this.Ps.barSpacing),a=void 0!==this.Ps.rightOffsetPixels?this.Ps.rightOffsetPixels/this.ul():this.Ps.rightOffset,this.Mn(a)}Tc(a){this.zu=!0,this.Vu=a,this.fc(),this.sc()}Rc(a,b){let c=this.gc(a),d=this.ul();this.gn(d+d/10*b),this.Ps.rightBarStaysOnScroll||this.Mn(this.Cc()+(c-this.gc(a)))}h_(a){this.bo&&this.u_(),null===this.Mo&&null===this.Wu&&(this.Gi()||(this.Mo=a,this.Dc()))}a_(a){if(null===this.Wu)return;let b=bh(this.S_-a,0,this.S_),c=bh(this.S_-H(this.Mo),0,this.S_);0!==b&&0!==c&&this.gn(this.Wu.ul*b/c)}l_(){null!==this.Mo&&(this.Mo=null,this.Ic())}o_(a){null===this.bo&&null===this.Wu&&(this.Gi()||(this.bo=a,this.Dc()))}__(a){if(null===this.bo)return;let b=(this.bo-a)/this.ul();this.Yu=H(this.Wu).Cc+b,this.zu=!0,this.fc()}u_(){null!==this.bo&&(this.bo=null,this.Ic())}Vc(){this.Bc(this.Ps.rightOffset)}Bc(a,b=400){if(!isFinite(a))throw RangeError("offset is required and must be finite number");if(!isFinite(b)||b<=0)throw RangeError("animationDuration (optional) must be finite positive number");let c=this.Yu,d=performance.now();this.ns.vn({Ec:a=>(a-d)/b>=1,Ac:e=>{let f=(e-d)/b;return f>=1?a:c+(a-c)*f}})}kt(a,b){this.zu=!0,this.Bu=a,this.Eu.bu(a,b),this.fc()}Lc(){return this.Ou}zc(){return this.Nu}Oc(){return this.Fu}vc(){return this.Vu||0}Nc(a,b){let c=a.mu(),d=b&&this.Ps.rightOffsetPixels||0;this.xc((this.S_-d)/c),this.Yu=a.bi()-this.vc(),b&&(this.Yu=d?d/this.ul():this.Ps.rightOffset),this.fc(),this.zu=!0,this.ns.Sc(),this.ns.dr()}Fc(){let a=this._c(),b=this.uc();if(null===a||null===b)return;let c=!this.Ps.rightOffsetPixels&&this.Ps.rightOffset||0;this.Nc(new bE(a,b+c),!0)}Wc(a){let b=new bE(a.from,a.to);this.Nc(b)}rs(a){return void 0!==this.yo.timeFormatter?this.yo.timeFormatter(a.originalTime):this.cu.formatHorzItem(a.time)}Ju(){if(this.Ps.ignoreWhitespaceIndices){for(let a of(this.Uu.clear(),this.ns.tn()))for(let b of a.ll())this.Uu.set(b,!0);this.$u++}}Hc(){return this.ju}vl(){let a=1/(window.devicePixelRatio||1),b=this.Ps.minBarSpacing;if(b>=a)return[1];let c=[1],d=2;for(;d<=512;)b<a/d&&c.push(d),d*=2;return c}yc(){let a=this.ns.N().handleScroll,b=this.ns.N().handleScale;return!(a.horzTouchDrag||a.mouseWheel||a.pressedMouseMove||a.vertTouchDrag||b.axisDoubleClickReset.time||b.axisPressedMouseMove.time||b.mouseWheel||b.pinch)}_c(){return 0===this.Bu.length?null:0}uc(){return 0===this.Bu.length?null:this.Bu.length-1}Uc(a){return(this.S_-1-a)/this.Ku}gc(a){let b=this.Uc(a);return Math.round(1e6*(this.vc()+this.Yu-b))/1e6}xc(a){let b=this.Ku;this.Ku=a,this.dc(),b!==this.Ku&&(this.zu=!0,this.$c(),this.Xu())}hc(){if(!this.zu)return;if(this.zu=!1,this.Gi())return void this.qc(bH.Iu());let a=this.vc(),b=this.S_/this.Ku,c=this.Yu+a,d=new bE(c-b+1,c);this.qc(new bH(d))}dc(){let a=bh(this.Ku,this.jc(),this.Yc());this.Ku!==a&&(this.Ku=a,this.zu=!0)}Yc(){return this.Ps.maxBarSpacing>0?this.Ps.maxBarSpacing:.5*this.S_}jc(){return this.Ps.fixLeftEdge&&this.Ps.fixRightEdge&&0!==this.Bu.length?this.S_/this.Bu.length:this.Ps.minBarSpacing}Xu(){if(!this.Ps.enableConflation)return void(this.ju=1);let a=1/(window.devicePixelRatio||1)*(this.Ps.conflationThresholdFactor??1);if(this.Ku>=a)return void(this.ju=1);let b=Math.pow(2,Math.floor(Math.log2(a/this.Ku)));this.ju=Math.min(b,512)}fc(){let a=this.Kc();null!==a&&this.Yu<a&&(this.Yu=a,this.zu=!0);let b=this.Zc();this.Yu>b&&(this.Yu=b,this.zu=!0)}Kc(){let a=this._c(),b=this.Vu;return null===a||null===b?null:a-b-1+(this.Ps.fixLeftEdge?this.S_/this.Ku:Math.min(2,this.Bu.length))}Zc(){return this.Ps.fixRightEdge?0:this.S_/this.Ku-Math.min(2,this.Bu.length)}Dc(){this.Wu={ul:this.ul(),Cc:this.Cc()}}Ic(){this.Wu=null}kc(a){let b=this.Au.get(a.weight);return void 0===b&&(b=new bD(a=>this.Gc(a),this.cu),this.Au.set(a.weight,b)),b.du(a)}Gc(a){return this.cu.formatTickmark(a,this.yo)}qc(a){let b=this.Lu;this.Lu=a,bF(b.Ru(),this.Lu.Ru())||this.Ou.p(),bF(b.Du(),this.Lu.Du())||this.Nu.p(),this.$c()}$c(){this.Hu=null}tc(){this.$c(),this.Au.clear()}Gu(){this.cu.updateFormatter(this.yo)}sc(){if(!this.Ps.fixLeftEdge)return;let a=this._c();if(null===a)return;let b=this.Ie();if(null===b)return;let c=b.Aa()-a;if(c<0){let a=this.Yu-c-1;this.Mn(a)}this.dc()}nc(){this.fc(),this.dc()}Mc(a){return!this.Ps.ignoreWhitespaceIndices||this.Uu.get(a)||!1}bc(a){let b=function*(a){let b=Math.round(a),c=b<a,d=1;for(;;)c?(yield b+d,yield b-d):(yield b-d,yield b+d),d++}(a),c=this.uc();for(;c;){let a=b.next().value;if(this.Uu.get(a))return a;if(a<0||a>c)break}return a}Zu(a){if(void 0!==a.rightOffsetPixels){let b=a.rightOffsetPixels/(a.barSpacing||this.Ku);this.ns.Mn(b)}}}(i=s||(s={}))[i.OnTouchEnd=0]="OnTouchEnd",i[i.OnNextTap=1]="OnNextTap";class bK{constructor(a,b,c){this.Xc=[],this.Jc=[],this.Qc=null,this.S_=0,this.td=null,this.sd=new J,this.nd=new J,this.ed=null,this.rd=a,this.Ps=b,this.cu=c,this.ko=new X(this.Ps.layout.colorParsers),this.hd=new U(this),this.Jh=new bJ(this,b.timeScale,this.Ps.localization,c),this.Ct=new ap(this,b.crosshair),this.ad=new bg(b.crosshair),b.addDefaultPane&&(this.ld(0),this.Xc[0].A_(2)),this.od=this._d(0),this.ud=this._d(1)}Ca(){this.dd(ar.yn())}dr(){this.dd(ar.Cn())}Ua(){this.dd(new ar(1))}ya(a){let b=this.fd(a);this.dd(b)}pd(){return this.td}vd(a){if(this.td?.hu===a?.hu&&this.td?.au?.te===a?.au?.te)return;let b=this.td;this.td=a,null!==b&&this.ya(b.hu),null!==a&&a.hu!==b?.hu&&this.ya(a.hu)}N(){return this.Ps}cr(a){K(this.Ps,a),this.Xc.forEach(b=>b.I_(a)),void 0!==a.timeScale&&this.Jh.cr(a.timeScale),void 0!==a.localization&&this.Jh.Qu(a.localization),(a.leftPriceScale||a.rightPriceScale)&&this.sd.p(),this.od=this._d(0),this.ud=this._d(1),this.Ca()}md(a,b,c=0){let d=this.Xc[c];if(void 0===d)return;if("left"===a)return K(this.Ps,{leftPriceScale:b}),d.I_({leftPriceScale:b}),this.sd.p(),void this.Ca();if("right"===a)return K(this.Ps,{rightPriceScale:b}),d.I_({rightPriceScale:b}),this.sd.p(),void this.Ca();let e=this.wd(a,c);null!==e&&(e.Ft.cr(b),this.sd.p())}wd(a,b){let c=this.Xc[b];if(void 0===c)return null;let d=c.V_(a);return null!==d?{Gs:c,Ft:d}:null}Et(){return this.Jh}Xs(){return this.Xc}gd(){return this.Ct}Md(){return this.nd}bd(a,b){a.No(b),this.Sc()}L_(a){this.S_=a,this.Jh.L_(this.S_),this.Xc.forEach(b=>b.L_(a)),this.Sc()}Sd(a){1!==this.Xc.length&&(F(a>=0&&a<this.Xc.length,"Invalid pane index"),this.Xc.splice(a,1),this.Ca())}xd(a,b){if(this.Xc.length<2)return;F(a>=0&&a<this.Xc.length,"Invalid pane index");let c=this.Xc[a],d=this.Xc.reduce((a,b)=>a+b.E_(),0),e=this.Xc.reduce((a,b)=>a+b.$t(),0),f=e-30*(this.Xc.length-1);b=Math.min(f,Math.max(30,b));let g=d/e,h=c.$t();c.A_(b*g);let i=b-h,j=this.Xc.length-1;for(let a of this.Xc)if(a!==c){let b=Math.min(f,Math.max(30,a.$t()-i/j));i-=a.$t()-b,j-=1;let c=b*g;a.A_(c)}this.Ca()}Cd(a,b){F(a>=0&&a<this.Xc.length&&b>=0&&b<this.Xc.length,"Invalid pane index");let c=this.Xc[a],d=this.Xc[b];this.Xc[a]=d,this.Xc[b]=c,this.Ca()}yd(a,b){if(F(a>=0&&a<this.Xc.length&&b>=0&&b<this.Xc.length,"Invalid pane index"),a===b)return;let[c]=this.Xc.splice(a,1);this.Xc.splice(b,0,c),this.Ca()}j_(a,b,c){a.j_(b,c)}Y_(a,b,c){a.Y_(b,c),this.ka(),this.dd(this.kd(a,2))}K_(a,b){a.K_(b),this.dd(this.kd(a,2))}Z_(a,b,c){b.Vo()||a.Z_(b,c)}G_(a,b,c){b.Vo()||(a.G_(b,c),this.ka(),this.dd(this.kd(a,2)))}X_(a,b){b.Vo()||(a.X_(b),this.dd(this.kd(a,2)))}Q_(a,b){a.Q_(b),this.dd(this.kd(a,2))}Pd(a){this.Jh.h_(a)}Td(a,b){let c=this.Et();if(c.Gi()||0===b)return;let d=c.ss();a=Math.max(1,Math.min(a,d)),c.Rc(a,b),this.Sc()}Rd(a){this.Dd(0),this.Id(a),this.Vd()}Bd(a){this.Jh.a_(a),this.Sc()}Ed(){this.Jh.l_(),this.dr()}Dd(a){this.Jh.o_(a)}Id(a){this.Jh.__(a),this.Sc()}Vd(){this.Jh.u_(),this.dr()}tn(){return this.Jc}Us(){return null===this.Qc&&(this.Qc=this.Jc.filter(a=>a.It())),this.Qc}xa(){this.Qc=null}Ad(a,b,c,d,e){this.Ct.Bs(a,b);let f=NaN,g=this.Jh.wc(a,!0),h=this.Jh.Ie();null!==h&&(g=Math.min(Math.max(h.Aa(),g),h.bi())),g=this.Ct.Hs(g);let i=d.Rs(),j=i.Lt();if(null!==j&&(f=i.Ds(b,j)),f=this.ad.bl(f,g,d),this.Ct.zs(g,f,d),this.Ua(),!e){let e=bC(d,a,b);this.vd(e&&{hu:e.hu,au:e.au,ou:e.ou||null}),this.nd.p(this.Ct.Bt(),{x:a,y:b},c)}}Ld(a,b,c){let d=c.Rs(),e=d.Lt(),f=d.Nt(a,H(e)),g=this.Jh.ec(b,!0),h=this.Jh.qt(H(g));this.Ad(h,f,null,c,!0)}zd(a){this.gd().Ns(),this.Ua(),a||this.nd.p(null,null,null)}ka(){let a=this.Ct.Gs();if(null!==a){let b=this.Ct.As(),c=this.Ct.Ls();this.Ad(b,c,null,a)}this.Ct.Ws()}Od(a,b,c){let d=this.Jh.Is(0);void 0!==b&&void 0!==c&&this.Jh.kt(b,c);let e=this.Jh.Is(0),f=this.Jh.vc(),g=this.Jh.Ie();if(null!==g&&null!==d&&null!==e){let b=g.Ee(f),h=this.cu.key(d)>this.cu.key(e),i=null!==a&&a>f&&!h,j=this.Jh.N().allowShiftVisibleRangeOnWhitespaceReplacement,k=b&&(void 0!==c||j)&&this.Jh.N().shiftVisibleRangeOnNewBar;if(i&&!k){let b=a-f;this.Jh.Mn(this.Jh.Cc()-b)}}this.Jh.Tc(a)}Ra(a){null!==a&&a.iu()}Kn(a){if(a instanceof bA)return a;let b=this.Xc.find(b=>b.Dt().includes(a));return void 0===b?null:b}Sc(){this.Xc.forEach(a=>a.iu()),this.ka()}m(){this.Xc.forEach(a=>a.m()),this.Xc.length=0,this.Ps.localization.priceFormatter=void 0,this.Ps.localization.percentageFormatter=void 0,this.Ps.localization.timeFormatter=void 0}Nd(){return this.hd}Jn(){return this.hd.N()}B_(){return this.sd}Fd(a,b){let c=this.ld(b);this.Wd(a,c),this.Jc.push(a),this.xa(),1===this.Jc.length?this.Ca():this.dr()}Hd(a){let b=this.Kn(a),c=this.Jc.indexOf(a);F(-1!==c,"Series not found");let d=H(b);this.Jc.splice(c,1),d.n_(a),a.m&&a.m(),this.xa(),this.Jh.Ju(),this.Ud(d)}Sa(a,b){let c=H(this.Kn(a));c.n_(a,!0),c.i_(a,b,!0)}Fc(){let a=ar.Cn();a.cn(),this.dd(a)}$d(a){let b=ar.Cn();b.pn(a),this.dd(b)}wn(){let a=ar.Cn();a.wn(),this.dd(a)}gn(a){let b=ar.Cn();b.gn(a),this.dd(b)}Mn(a){let b=ar.Cn();b.Mn(a),this.dd(b)}vn(a){let b=ar.Cn();b.vn(a),this.dd(b)}dn(){let a=ar.Cn();a.dn(),this.dd(a)}qd(){return this.Ps.rightPriceScale.visible?"right":"left"}jd(a,b){if(F(b>=0,"Index should be greater or equal to 0"),b===this.Yd(a))return;let c=H(this.Kn(a));c.n_(a);let d=this.ld(b);this.Wd(a,d),0===c.Sl().length&&this.Ud(c),this.Ca()}Kd(){return this.ud}$(){return this.od}Ut(a){let b=this.ud,c=this.od;if(b===c)return b;if(a=Math.max(0,Math.min(100,Math.round(100*a))),null===this.ed||this.ed.eh!==c||this.ed.rh!==b)this.ed={eh:c,rh:b,Zd:new Map};else{let b=this.ed.Zd.get(a);if(void 0!==b)return b}let d=this.ko.tt(c,b,a/100);return this.ed.Zd.set(a,d),d}Gd(a){return this.Xc.indexOf(a)}Xi(){return this.ko}Xd(){return this.Jd()}Jd(a){let b=new bA(this.Jh,this);this.Xc.push(b);let c=a??this.Xc.length-1,d=ar.yn();return d.hn(c,{an:0,ln:!0}),this.dd(d),b}ld(a){return F(a>=0,"Index should be greater or equal to 0"),(a=Math.min(this.Xc.length,a))<this.Xc.length?this.Xc[a]:this.Jd(a)}Yd(a){return this.Xc.findIndex(b=>b.F_().includes(a))}kd(a,b){let c=new ar(b);if(null!==a){let d=this.Xc.indexOf(a);c.hn(d,{an:b})}return c}fd(a,b){return void 0===b&&(b=2),this.kd(this.Kn(a),b)}dd(a){this.rd&&this.rd(a),this.Xc.forEach(a=>a.eu().pr().kt())}Wd(a,b){let c=a.N().priceScaleId,d=void 0!==c?c:this.qd();b.i_(a,d),aq(d)||a.cr(a.N())}_d(a){let b=this.Ps.layout;return"gradient"===b.background.type?0===a?b.background.topColor:b.background.bottomColor:b.background.color}Ud(a){!a.N_()&&0===a.Sl().length&&this.Xc.length>1&&this.Xc.splice(this.Gd(a),1)}}function bL(a){if(a>=1)return 0;let b=0;for(;b<8&&!(1e-8>Math.abs(Math.round(a)-a));b++)a*=10;return b}function bM(a){return!L(a)&&!N(a)}(j=t||(t={}))[j.Disabled=0]="Disabled",j[j.Continuous=1]="Continuous",j[j.OnDataUpdate=2]="OnDataUpdate",(k=u||(u={}))[k.LastBar=0]="LastBar",k[k.LastVisible=1]="LastVisible",(l=v||(v={})).Solid="solid",l.VerticalGradient="gradient",(m=w||(w={}))[m.Year=0]="Year",m[m.Month=1]="Month",m[m.DayOfMonth=2]="DayOfMonth",m[m.Time=3]="Time",m[m.TimeWithSeconds=4]="TimeWithSeconds";class bN{constructor(a="yyyy-MM-dd",b="default"){this.Qd=a,this.tf=b}du(a){return function(a,b,c){return b.replace(/yyyy/g,at(a.getUTCFullYear(),4)).replace(/yy/g,at(a.getUTCFullYear()%100,2)).replace(/MMMM/g,new Date(a.getUTCFullYear(),a.getUTCMonth(),1).toLocaleString(c,{month:"long"})).replace(/MMM/g,new Date(a.getUTCFullYear(),a.getUTCMonth(),1).toLocaleString(c,{month:"short"})).replace(/MM/g,at(a.getUTCMonth()+1,2)).replace(/dd/g,at(a.getUTCDate(),2))}(a,this.Qd,this.tf)}}class bO{constructor(a){this.if=a||"%h:%m:%s"}du(a){return this.if.replace("%h",at(a.getUTCHours(),2)).replace("%m",at(a.getUTCMinutes(),2)).replace("%s",at(a.getUTCSeconds(),2))}}let bP={sf:"yyyy-MM-dd",nf:"%h:%m:%s",ef:" ",rf:"default"};class bQ{constructor(a={}){const b={...bP,...a};this.hf=new bN(b.sf,b.rf),this.af=new bO(b.nf),this.lf=b.ef}du(a){return`${this.hf.du(a)}${this.lf}${this.af.du(a)}`}}function bR(a){return 60*a*6e4}function bS(a){return 60*a*1e3}let bT=[{_f:1e3,uf:10},{_f:bS(1),uf:20},{_f:bS(5),uf:21},{_f:bS(30),uf:22},{_f:bR(1),uf:30},{_f:bR(3),uf:31},{_f:bR(6),uf:32},{_f:bR(12),uf:33}];function bU(a,b){if(a.getUTCFullYear()!==b.getUTCFullYear())return 70;if(a.getUTCMonth()!==b.getUTCMonth())return 60;if(a.getUTCDate()!==b.getUTCDate())return 50;for(let c=bT.length-1;c>=0;--c)if(Math.floor(b.getTime()/bT[c]._f)!==Math.floor(a.getTime()/bT[c]._f))return bT[c].uf;return 0}function bV(a){let b=a;if(N(a)&&(b=bX(a)),!bM(b))throw Error("time must be of type BusinessDay");return{cf:Math.round(new Date(Date.UTC(b.year,b.month-1,b.day,0,0,0,0)).getTime()/1e3),df:b}}function bW(a){if(!L(a))throw Error("time must be of type isUTCTimestamp");return{cf:a}}function bX(a){let b=new Date(a);if(isNaN(b.getTime()))throw Error(`Invalid date string=${a}, expected format=yyyy-mm-dd`);return{day:b.getUTCDate(),month:b.getUTCMonth()+1,year:b.getUTCFullYear()}}function bY(a){N(a.time)&&(a.time=bX(a.time))}class bZ{options(){return this.Ps}setOptions(a){this.Ps=a,this.updateFormatter(a.localization)}preprocessData(a){Array.isArray(a)?a.forEach(bY):bY(a)}createConverterToInternalObj(a){return H(0===a.length?null:bM(a[0].time)||N(a[0].time)?bV:bW)}key(a){return"object"==typeof a&&"cf"in a?a.cf:this.key(this.convertHorzItemToInternal(a))}cacheKey(a){return void 0===a.df?new Date(1e3*a.cf).getTime():new Date(Date.UTC(a.df.year,a.df.month-1,a.df.day)).getTime()}convertHorzItemToInternal(a){return L(a)?bW(a):bM(a)?bV(a):bV(bX(a))}updateFormatter(a){if(!this.Ps)return;let b=a.dateFormat;this.Ps.timeScale.timeVisible?this.ff=new bQ({sf:b,nf:this.Ps.timeScale.secondsVisible?"%h:%m:%s":"%h:%m",ef:"   ",rf:a.locale}):this.ff=new bN(b,a.locale)}formatHorzItem(a){return this.ff.du(new Date(1e3*a.cf))}formatTickmark(a,b){let c=function(a,b,c){switch(a){case 0:case 10:return b?c?4:3:2;case 20:case 21:case 22:case 30:case 31:case 32:case 33:return b?3:2;case 50:return 2;case 60:return 1;case 70:return 0}}(a.weight,this.Ps.timeScale.timeVisible,this.Ps.timeScale.secondsVisible),d=this.Ps.timeScale;if(void 0!==d.tickMarkFormatter){let e=d.tickMarkFormatter(a.originalTime,c,b.locale);if(null!==e)return e}return function(a,b,c){let d={};switch(b){case 0:d.year="numeric";break;case 1:d.month="short";break;case 2:d.day="numeric";break;case 3:d.hour12=!1,d.hour="2-digit",d.minute="2-digit";break;case 4:d.hour12=!1,d.hour="2-digit",d.minute="2-digit",d.second="2-digit"}let e=new Date(void 0===a.df?1e3*a.cf:Date.UTC(a.df.year,a.df.month-1,a.df.day));return new Date(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds()).toLocaleString(c,d)}(a.time,c,b.locale)}maxTickMarkWeight(a){let b=a.reduce(bI,a[0]).weight;return b>30&&b<50&&(b=30),b}fillWeightsForPoints(a,b){!function(a,b=0){if(0===a.length)return;let c=0===b?null:a[b-1].time.cf,d=null!==c?new Date(1e3*c):null,e=0;for(let f=b;f<a.length;++f){let b=a[f],g=new Date(1e3*b.time.cf);null!==d&&(b.timeWeight=bU(g,d)),e+=b.time.cf-(c||b.time.cf),c=b.time.cf,d=g}if(0===b&&a.length>1){let b=Math.ceil(e/(a.length-1)),c=new Date(1e3*(a[0].time.cf-b));a[0].timeWeight=bU(new Date(1e3*a[0].time.cf),c)}}(a,b)}static pf(a){return K({localization:{dateFormat:"dd MMM 'yy"}},a??{})}}class b${constructor(a,b,c){this.vf=0,this.mf=null,this.wf={_t:-1/0,ut:1/0},this.gf=0,this.Mf=null,this.bf={_t:-1/0,ut:1/0},this.Sf=null,this.xf=!1,this.Cf=null,this.yf=null,this.kf=!1,this.Pf=!1,this.Tf=!1,this.Rf=null,this.Df=null,this.If=null,this.Vf=null,this.Bf=null,this.Ef=null,this.Af=null,this.Lf=0,this.zf=!1,this.Of=!1,this.Nf=!1,this.Ff=0,this.Wf=null,this.Hf=!0,this.Uf=a=>{this.$f(a)},this.qf=a=>{if(this.jf(a)){let b=this.Yf(a);if(++this.gf,this.Mf&&this.gf>1){let{Kf:c}=this.Zf(b1(a),this.bf);c<30&&!this.Tf&&this.Gf(b,this.Jf.Xf),this.Qf()}}else{let b=this.Yf(a);if(++this.vf,this.mf&&this.vf>1){let{Kf:c}=this.Zf(b1(a),this.wf);c<5&&!this.Pf&&this.tp(b,this.Jf.ip),this.sp()}}},this.np=a,this.Jf=b,this.Ps=c,this.ep()}m(){null!==this.Rf&&(this.Rf(),this.Rf=null),null!==this.Df&&(this.Df(),this.Df=null),null!==this.Vf&&(this.Vf(),this.Vf=null),null!==this.Bf&&(this.Bf(),this.Bf=null),null!==this.Ef&&(this.Ef(),this.Ef=null),null!==this.If&&(this.If(),this.If=null),this.rp(),this.sp()}hp(a){this.Vf&&this.Vf();let b=this.ap.bind(this);if(this.Vf=()=>{this.np.removeEventListener("mousemove",b)},this.np.addEventListener("mousemove",b),this.jf(a))return;let c=this.Yf(a);this.tp(c,this.Jf.lp),this.Hf=!0}sp(){null!==this.mf&&clearTimeout(this.mf),this.vf=0,this.mf=null,this.wf={_t:-1/0,ut:1/0}}Qf(){null!==this.Mf&&clearTimeout(this.Mf),this.gf=0,this.Mf=null,this.bf={_t:-1/0,ut:1/0}}ap(a){if(this.Nf||null!==this.yf||this.jf(a))return;let b=this.Yf(a);this.tp(b,this.Jf.op),this.Hf=!0}_p(a){let b=b3(a.changedTouches,H(this.Wf));if(null===b||(this.Ff=b2(a),null!==this.Af)||this.Of)return;this.zf=!0;let{up:c,cp:d,Kf:e}=this.Zf(b1(b),H(this.yf));if(this.kf||!(e<5)){if(!this.kf){let a=.5*c,b=d>=a&&!this.Ps.dp(),e=a>d&&!this.Ps.fp();b||e||(this.Of=!0),this.kf=!0,this.Tf=!0,this.rp(),this.Qf()}if(!this.Of){let c=this.Yf(a,b);this.Gf(c,this.Jf.pp),b0(a)}}}vp(a){if(0!==a.button)return;let{Kf:b}=this.Zf(b1(a),H(this.Cf));if(b>=5&&(this.Pf=!0,this.sp()),this.Pf){let b=this.Yf(a);this.tp(b,this.Jf.mp)}}Zf(a,b){let c=Math.abs(b._t-a._t),d=Math.abs(b.ut-a.ut);return{up:c,cp:d,Kf:c+d}}wp(a){let b=b3(a.changedTouches,H(this.Wf));if(null===b&&0===a.touches.length&&(b=a.changedTouches[0]),null===b)return;this.Wf=null,this.Ff=b2(a),this.rp(),this.yf=null,this.Ef&&(this.Ef(),this.Ef=null);let c=this.Yf(a,b);if(this.Gf(c,this.Jf.gp),++this.gf,this.Mf&&this.gf>1){let{Kf:a}=this.Zf(b1(b),this.bf);a<30&&!this.Tf&&this.Gf(c,this.Jf.Xf),this.Qf()}else this.Tf||(this.Gf(c,this.Jf.Mp),this.Jf.Mp&&b0(a));0===this.gf&&b0(a),0===a.touches.length&&this.xf&&(this.xf=!1,b0(a))}$f(a){if(0!==a.button)return;let b=this.Yf(a);if(this.Cf=null,this.Nf=!1,this.Bf&&(this.Bf(),this.Bf=null),!this.jf(a))if(this.tp(b,this.Jf.bp),++this.vf,this.mf&&this.vf>1){let{Kf:c}=this.Zf(b1(a),this.wf);c<5&&!this.Pf&&this.tp(b,this.Jf.ip),this.sp()}else this.Pf||this.tp(b,this.Jf.Sp)}rp(){null!==this.Sf&&(clearTimeout(this.Sf),this.Sf=null)}xp(a){if(null!==this.Wf)return;let b=a.changedTouches[0];this.Wf=b.identifier,this.Ff=b2(a);let c=this.np.ownerDocument.documentElement;this.Tf=!1,this.kf=!1,this.Of=!1,this.yf=b1(b),this.Ef&&(this.Ef(),this.Ef=null);{let b=this._p.bind(this),d=this.wp.bind(this);this.Ef=()=>{c.removeEventListener("touchmove",b),c.removeEventListener("touchend",d)},c.addEventListener("touchmove",b,{passive:!1}),c.addEventListener("touchend",d,{passive:!1}),this.rp(),this.Sf=setTimeout(this.Cp.bind(this,a),240)}let d=this.Yf(a,b);this.Gf(d,this.Jf.yp),this.Mf||(this.gf=0,this.Mf=setTimeout(this.Qf.bind(this),500),this.bf=b1(b))}kp(a){if(0!==a.button)return;let b=this.np.ownerDocument.documentElement;this.Pf=!1,this.Cf=b1(a),this.Bf&&(this.Bf(),this.Bf=null);{let a=this.vp.bind(this),c=this.$f.bind(this);this.Bf=()=>{b.removeEventListener("mousemove",a),b.removeEventListener("mouseup",c)},b.addEventListener("mousemove",a),b.addEventListener("mouseup",c)}if(this.Nf=!0,this.jf(a))return;let c=this.Yf(a);this.tp(c,this.Jf.Pp),this.mf||(this.vf=0,this.mf=setTimeout(this.sp.bind(this),500),this.wf=b1(a))}ep(){this.np.addEventListener("mouseenter",this.hp.bind(this)),this.np.addEventListener("touchcancel",this.rp.bind(this));{let a=this.np.ownerDocument,b=a=>{this.Jf.Tp&&(a.composed&&this.np.contains(a.composedPath()[0])||a.target&&this.np.contains(a.target)||this.Jf.Tp())};this.Df=()=>{a.removeEventListener("touchstart",b)},this.Rf=()=>{a.removeEventListener("mousedown",b)},a.addEventListener("mousedown",b),a.addEventListener("touchstart",b,{passive:!0})}this.np.addEventListener("mouseleave",this.Rp.bind(this)),this.np.addEventListener("touchstart",this.xp.bind(this),{passive:!0}),this.np,this.np.addEventListener("mousedown",this.kp.bind(this)),this.Dp(),this.np.addEventListener("touchmove",()=>{},{passive:!1})}Dp(){void 0===this.Jf.Ip&&void 0===this.Jf.Vp&&void 0===this.Jf.Bp||(this.np.addEventListener("touchstart",a=>this.Ep(a.touches),{passive:!0}),this.np.addEventListener("touchmove",a=>{if(2===a.touches.length&&null!==this.Af&&void 0!==this.Jf.Vp){let b=b_(a.touches[0],a.touches[1])/this.Lf;this.Jf.Vp(this.Af,b),b0(a)}},{passive:!1}),this.np.addEventListener("touchend",a=>{this.Ep(a.touches)}))}Ep(a){1===a.length&&(this.zf=!1),2!==a.length||this.zf||this.xf?this.Ap():this.Lp(a)}Lp(a){let b=this.np.getBoundingClientRect()||{left:0,top:0};this.Af={_t:(a[0].clientX-b.left+(a[1].clientX-b.left))/2,ut:(a[0].clientY-b.top+(a[1].clientY-b.top))/2},this.Lf=b_(a[0],a[1]),void 0!==this.Jf.Ip&&this.Jf.Ip(),this.rp()}Ap(){null!==this.Af&&(this.Af=null,void 0!==this.Jf.Bp&&this.Jf.Bp())}Rp(a){if(this.Vf&&this.Vf(),this.jf(a)||!this.Hf)return;let b=this.Yf(a);this.tp(b,this.Jf.zp),this.Hf=!0}Cp(a){let b=b3(a.touches,H(this.Wf));if(null===b)return;let c=this.Yf(a,b);this.Gf(c,this.Jf.Op),this.Tf=!0,this.xf=!0}jf(a){return a.sourceCapabilities&&void 0!==a.sourceCapabilities.firesTouchEvents?a.sourceCapabilities.firesTouchEvents:b2(a)<this.Ff+500}Gf(a,b){b&&b.call(this.Jf,a)}tp(a,b){b&&b.call(this.Jf,a)}Yf(a,b){let c=b||a,d=this.np.getBoundingClientRect()||{left:0,top:0};return{clientX:c.clientX,clientY:c.clientY,pageX:c.pageX,pageY:c.pageY,screenX:c.screenX,screenY:c.screenY,localX:c.clientX-d.left,localY:c.clientY-d.top,ctrlKey:a.ctrlKey,altKey:a.altKey,shiftKey:a.shiftKey,metaKey:a.metaKey,Np:!a.type.startsWith("mouse")&&"contextmenu"!==a.type&&"click"!==a.type,Fp:a.type,Wp:c.target,_u:a.view,Hp:()=>{"touchstart"!==a.type&&b0(a)}}}}function b_(a,b){let c=a.clientX-b.clientX,d=a.clientY-b.clientY;return Math.sqrt(c*c+d*d)}function b0(a){a.cancelable&&a.preventDefault()}function b1(a){return{_t:a.pageX,ut:a.pageY}}function b2(a){return a.timeStamp||performance.now()}function b3(a,b){for(let c=0;c<a.length;++c)if(a[c].identifier===b)return a[c];return null}class b4{constructor(a,b,c){this.Up=null,this.$p=null,this.qp=!0,this.jp=null,this.Yp=a,this.Kp=a.Zp()[b],this.Gp=a.Zp()[c],this.Xp=document.createElement("tr"),this.Xp.style.height="1px",this.Jp=document.createElement("td"),this.Jp.style.position="relative",this.Jp.style.padding="0",this.Jp.style.margin="0",this.Jp.setAttribute("colspan","3"),this.Qp(),this.Xp.appendChild(this.Jp),this.qp=this.Yp.N().layout.panes.enableResize,this.qp?this.tv():(this.Up=null,this.$p=null)}m(){null!==this.$p&&this.$p.m()}iv(){return this.Xp}sv(){return b({width:this.Kp.sv().width,height:1})}nv(){return b({width:this.Kp.nv().width,height:+window.devicePixelRatio})}ev(a,b,c){let d=this.nv();a.fillStyle=this.Yp.N().layout.panes.separatorColor,a.fillRect(b,c,d.width,d.height)}kt(){this.Qp(),this.Yp.N().layout.panes.enableResize!==this.qp&&(this.qp=this.Yp.N().layout.panes.enableResize,this.qp?this.tv():(null!==this.Up&&(this.Jp.removeChild(this.Up.rv),this.Jp.removeChild(this.Up.hv),this.Up=null),null!==this.$p&&(this.$p.m(),this.$p=null)))}tv(){let a=document.createElement("div"),b=a.style;b.position="fixed",b.display="none",b.zIndex="49",b.top="0",b.left="0",b.width="100%",b.height="100%",b.cursor="row-resize",this.Jp.appendChild(a);let c=document.createElement("div"),d=c.style;d.position="absolute",d.zIndex="50",d.top="-4px",d.height="9px",d.width="100%",d.backgroundColor="",d.cursor="row-resize",this.Jp.appendChild(c);let e={lp:this.av.bind(this),zp:this.lv.bind(this),Pp:this.ov.bind(this),yp:this.ov.bind(this),mp:this._v.bind(this),pp:this._v.bind(this),bp:this.uv.bind(this),gp:this.uv.bind(this)};this.$p=new b$(c,e,{dp:()=>!1,fp:()=>!0}),this.Up={hv:c,rv:a}}Qp(){this.Jp.style.background=this.Yp.N().layout.panes.separatorColor}av(a){null!==this.Up&&(this.Up.hv.style.backgroundColor=this.Yp.N().layout.panes.separatorHoverColor)}lv(a){null!==this.Up&&null===this.jp&&(this.Up.hv.style.backgroundColor="")}ov(a){if(null===this.Up)return;let b=this.Kp.cv().E_()+this.Gp.cv().E_(),c=b/(this.Kp.sv().height+this.Gp.sv().height),d=30*c;b<=2*d||(this.jp={dv:a.pageY,fv:this.Kp.cv().E_(),pv:b-d,vv:b,mv:c,wv:d},this.Up.rv.style.display="block")}_v(a){let b=this.jp;if(null===b)return;let c=(a.pageY-b.dv)*b.mv,d=bh(b.fv+c,b.wv,b.pv);this.Kp.cv().A_(d),this.Gp.cv().A_(b.vv-d),this.Yp.Qt().Ca()}uv(a){null!==this.jp&&null!==this.Up&&(this.jp=null,this.Up.rv.style.display="none")}}function b5(a,b,c){let d=(a.gv-b.gv)/(a.wt-b.wt);return Math.sign(d)*Math.min(Math.abs(d),c)}class b6{constructor(a,b,c,d){this.Mv=null,this.bv=null,this.Sv=null,this.xv=null,this.Cv=null,this.yv=0,this.kv=0,this.Pv=a,this.Tv=b,this.Rv=c,this.kn=d}Dv(a,b){if(null!==this.Mv){if(this.Mv.wt===b)return void(this.Mv.gv=a);if(Math.abs(this.Mv.gv-a)<this.kn)return}this.xv=this.Sv,this.Sv=this.bv,this.bv=this.Mv,this.Mv={wt:b,gv:a}}fe(a,b){var c,d,e,f,g,h,i;let j;if(null===this.Mv||null===this.bv||b-this.Mv.wt>50)return;let k=0,l=b5(this.Mv,this.bv,this.Tv),m=(c=this.Mv,d=this.bv,c.gv-d.gv),n=[l],o=[m];if(k+=m,null!==this.Sv){let a=b5(this.bv,this.Sv,this.Tv);if(Math.sign(a)===Math.sign(l)){let b=(e=this.bv,f=this.Sv,e.gv-f.gv);if(n.push(a),o.push(b),k+=b,null!==this.xv){let a=b5(this.Sv,this.xv,this.Tv);if(Math.sign(a)===Math.sign(l)){let b=(g=this.Sv,h=this.xv,g.gv-h.gv);n.push(a),o.push(b),k+=b}}}}let p=0;for(let a=0;a<n.length;++a)p+=o[a]/k*n[a];Math.abs(p)<this.Pv||(this.Cv={gv:a,wt:b},this.kv=p,this.yv=(i=Math.abs(p),Math.log(-((j=Math.log(this.Rv))/i))/j))}Ac(a){let b=H(this.Cv),c=a-b.wt;return b.gv+this.kv*(Math.pow(this.Rv,c)-1)/Math.log(this.Rv)}Ec(a){return null===this.Cv||this.Iv(a)===this.yv}Iv(a){return Math.min(a-H(this.Cv).wt,this.yv)}}class b7{constructor(a,b){this.Vv=void 0,this.Bv=void 0,this.Ev=void 0,this.ws=!1,this.Av=a,this.Lv=b,this.zv()}kt(){this.zv()}Ov(){this.Vv&&this.Av.removeChild(this.Vv),this.Bv&&this.Av.removeChild(this.Bv),this.Vv=void 0,this.Bv=void 0}Nv(){return this.ws!==this.Fv()||this.Ev!==this.Wv()}Wv(){return this.Lv.Qt().Xi().J(this.Lv.N().layout.textColor)>160?"dark":"light"}Fv(){return this.Lv.N().layout.attributionLogo}Hv(){let a=new URL(location.href);return a.hostname?"&utm_source="+a.hostname+a.pathname:""}zv(){this.Nv()&&(this.Ov(),this.ws=this.Fv(),this.ws&&(this.Ev=this.Wv(),this.Bv=document.createElement("style"),this.Bv.innerText="a#tv-attr-logo{--fill:#131722;--stroke:#fff;position:absolute;left:10px;bottom:10px;height:19px;width:35px;margin:0;padding:0;border:0;z-index:3;}a#tv-attr-logo[data-dark]{--fill:#D1D4DC;--stroke:#131722;}",this.Vv=document.createElement("a"),this.Vv.href=`https://www.tradingview.com/?utm_medium=lwc-link&utm_campaign=lwc-chart${this.Hv()}`,this.Vv.title="Charting by TradingView",this.Vv.id="tv-attr-logo",this.Vv.target="_blank",this.Vv.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" width="35" height="19" fill="none"><g fill-rule="evenodd" clip-path="url(#a)" clip-rule="evenodd"><path fill="var(--stroke)" d="M2 0H0v10h6v9h21.4l.5-1.3 6-15 1-2.7H23.7l-.5 1.3-.2.6a5 5 0 0 0-7-.9V0H2Zm20 17h4l5.2-13 .8-2h-7l-1 2.5-.2.5-1.5 3.8-.3.7V17Zm-.8-10a3 3 0 0 0 .7-2.7A3 3 0 1 0 16.8 7h4.4ZM14 7V2H2v6h6v9h4V7h2Z"/><path fill="var(--fill)" d="M14 2H2v6h6v9h6V2Zm12 15h-7l6-15h7l-6 15Zm-7-9a3 3 0 1 0 0-6 3 3 0 0 0 0 6Z"/></g><defs><clipPath id="a"><path fill="var(--stroke)" d="M0 0h35v19H0z"/></clipPath></defs></svg>',this.Vv.toggleAttribute("data-dark","dark"===this.Ev),this.Av.appendChild(this.Bv),this.Av.appendChild(this.Vv)))}}function b8(a,b){let c=H(a.ownerDocument).createElement("canvas");a.appendChild(c);let d=function(a,b){if("device-pixel-content-box"===b.type)return new y(a,b.transform,b.options);throw Error("Unsupported binding target")}(c,{type:"device-pixel-content-box",options:{allowResizeObserver:!0},transform:(a,b)=>({width:Math.max(a.width,b.width),height:Math.max(a.height,b.height)})});return d.resizeCanvasElement(b),d}function b9(a){a.width=1,a.height=1,a.getContext("2d")?.clearRect(0,0,1,1)}function ca(a,b,c,d){a.Uh&&a.Uh(b,c,d)}function cb(a,b,c,d){a.nt(b,c,d)}function cc(a,b,c,d){for(let e of a(c,d)){let a=e.Tt(d);null!==a&&b(a)}}function cd(a,b){return c=>void 0===c.Ft||(c.Ft()?.ol()??"")!==b?[]:c.Ya?.(a)??[]}function ce(a,b,c,d){if(!a.length)return;let e=0,f=a[0].$t(d,!0),g=1===b?c/2-(a[0].Hi()-f/2):a[0].Hi()-f/2-c/2;g=Math.max(0,g);for(let f=1;f<a.length;f++){let h=a[f],i=a[f-1],j=i.$t(d,!1),k=h.Hi(),l=i.Hi();if(1===b?k>l-j:k<l+j){let d=l-j*b;h.Ui(d);let f=d-b*j/2;if((1===b?f<0:f>c)&&g>0){let d=Math.min(1===b?-1-f:f-c,g);for(let c=e;c<a.length;c++)a[c].Ui(a[c].Hi()+b*d);g-=d}}else e=f,g=1===b?l-j-k:k-(l+j)}}class cf{constructor(a,c,d,e){this.Ki=null,this.Uv=null,this.$v=!1,this.qv=new ay(200),this.jv=null,this.Yv=0,this.Kv=!1,this.Zv=()=>{this.Kv||this.yt.Gv().Qt().dr()},this.Xv=()=>{this.Kv||this.yt.Gv().Qt().dr()},this.yt=a,this.Ps=c,this.Co=c.layout,this.hd=d,this.Jv="left"===e,this.Qv=cd("normal",e),this.tm=cd("top",e),this.im=cd("bottom",e),this.Jp=document.createElement("div"),this.Jp.style.height="100%",this.Jp.style.overflow="hidden",this.Jp.style.width="25px",this.Jp.style.left="0",this.Jp.style.position="relative",this.sm=b8(this.Jp,b({width:16,height:16})),this.sm.subscribeSuggestedBitmapSizeChanged(this.Zv);const f=this.sm.canvasElement;f.style.position="absolute",f.style.zIndex="1",f.style.left="0",f.style.top="0",this.nm=b8(this.Jp,b({width:16,height:16})),this.nm.subscribeSuggestedBitmapSizeChanged(this.Xv);const g=this.nm.canvasElement;g.style.position="absolute",g.style.zIndex="2",g.style.left="0",g.style.top="0";const h={Pp:this.ov.bind(this),yp:this.ov.bind(this),mp:this._v.bind(this),pp:this._v.bind(this),Tp:this.rm.bind(this),bp:this.uv.bind(this),gp:this.uv.bind(this),ip:this.hm.bind(this),Xf:this.hm.bind(this),lp:this.am.bind(this),zp:this.lv.bind(this)};this.$p=new b$(this.nm.canvasElement,h,{dp:()=>!this.Ps.handleScroll.vertTouchDrag,fp:()=>!0})}m(){this.$p.m(),this.nm.unsubscribeSuggestedBitmapSizeChanged(this.Xv),b9(this.nm.canvasElement),this.nm.dispose(),this.sm.unsubscribeSuggestedBitmapSizeChanged(this.Zv),b9(this.sm.canvasElement),this.sm.dispose(),null!==this.Ki&&this.Ki.r_().u(this),this.Ki=null}iv(){return this.Jp}k(){return this.Co.fontSize}lm(){let a=this.hd.N();return this.jv!==a.P&&(this.qv.On(),this.jv=a.P),a}om(){var a,b;if(null===this.Ki)return 0;let c=0,d=this.lm(),e=H(this.sm.canvasElement.getContext("2d",{colorSpace:this.yt.Gv().N().layout.colorSpace}));e.save();let f=this.Ki.Vl();e.font=this._m(),f.length>0&&(c=Math.max(this.qv.Ii(e,f[0].Jl),this.qv.Ii(e,f[f.length-1].Jl)));let g=this.um();for(let a=g.length;a--;){let b=this.qv.Ii(e,g[a].ri());b>c&&(c=b)}let h=this.Ki.Lt();if(null!==h&&null!==this.Uv&&2!==(a=this.Ps.crosshair).mode&&a.horzLine.visible&&a.horzLine.labelVisible){let a=this.Ki.Ds(1,h),b=this.Ki.Ds(this.Uv.height-2,h);c=Math.max(c,this.qv.Ii(e,this.Ki.Ji(Math.floor(Math.min(a,b))+.11111111111111,h)),this.qv.Ii(e,this.Ki.Ji(Math.ceil(Math.max(a,b))-.11111111111111,h)))}e.restore();let i=c||34;return(b=Math.ceil(d.S+d.C+d.V+d.B+5+i))+b%2}dm(a){null!==this.Uv&&c(this.Uv,a)||(this.Uv=a,this.Kv=!0,this.sm.resizeCanvasElement(a),this.nm.resizeCanvasElement(a),this.Kv=!1,this.Jp.style.width=`${a.width}px`,this.Jp.style.height=`${a.height}px`)}fm(){return H(this.Uv).width}cs(a){this.Ki!==a&&(null!==this.Ki&&this.Ki.r_().u(this),this.Ki=a,a.r_().i(this.do.bind(this),this))}Ft(){return this.Ki}On(){let a=this.yt.cv();this.yt.Gv().Qt().Q_(a,H(this.Ft()))}pm(a){if(null===this.Uv)return;let b={colorSpace:this.yt.Gv().N().layout.colorSpace};if(1!==a){this.vm(),this.sm.applySuggestedBitmapSize();let a=B(this.sm,b);null!==a&&(a.useBitmapCoordinateSpace(a=>{this.wm(a),this.gm(a)}),this.yt.Mm(a,this.im),this.bm(a),this.yt.Mm(a,this.Qv),this.Sm(a))}this.nm.applySuggestedBitmapSize();let c=B(this.nm,b);null!==c&&(c.useBitmapCoordinateSpace(({context:a,bitmapSize:b})=>{a.clearRect(0,0,b.width,b.height)}),this.xm(c),this.yt.Mm(c,this.tm))}nv(){return this.sm.bitmapSize}ev(a,b,c,d){let e=this.nv();if(e.width>0&&e.height>0&&(a.drawImage(this.sm.canvasElement,b,c),d)){let d=this.nm.canvasElement;a.drawImage(d,b,c)}}kt(){this.Ki?.Vl()}ov(a){if(null===this.Ki||this.Ki.Gi()||!this.Ps.handleScale.axisPressedMouseMove.price)return;let b=this.yt.Gv().Qt(),c=this.yt.cv();this.$v=!0,b.j_(c,this.Ki,a.localY)}_v(a){if(null===this.Ki||!this.Ps.handleScale.axisPressedMouseMove.price)return;let b=this.yt.Gv().Qt(),c=this.yt.cv(),d=this.Ki;b.Y_(c,d,a.localY)}rm(){if(null===this.Ki||!this.Ps.handleScale.axisPressedMouseMove.price)return;let a=this.yt.Gv().Qt(),b=this.yt.cv(),c=this.Ki;this.$v&&(this.$v=!1,a.K_(b,c))}uv(a){if(null===this.Ki||!this.Ps.handleScale.axisPressedMouseMove.price)return;let b=this.yt.Gv().Qt(),c=this.yt.cv();this.$v=!1,b.K_(c,this.Ki)}hm(a){this.Ps.handleScale.axisDoubleClickReset.price&&this.On()}am(a){null!==this.Ki&&(!this.yt.Gv().Qt().N().handleScale.axisPressedMouseMove.price||this.Ki.He()||this.Ki.Eo()||this.Cm(1))}lv(a){this.Cm(0)}um(){let a=[],b=null===this.Ki?void 0:this.Ki;return(c=>{for(let d=0;d<c.length;++d){let e=c[d].Ks(this.yt.cv(),b);for(let b=0;b<e.length;b++)a.push(e[b])}})(this.yt.cv().Dt()),a}wm({context:a,bitmapSize:b}){let{width:c,height:d}=b,e=this.yt.cv().Qt(),f=e.$(),g=e.Kd();f===g?ae(a,0,0,c,d,f):ah(a,0,0,c,d,f,g)}gm({context:a,bitmapSize:b,horizontalPixelRatio:c}){let d;if(null===this.Uv||null===this.Ki||!this.Ki.N().borderVisible)return;a.fillStyle=this.Ki.N().borderColor;let e=Math.max(1,Math.floor(this.lm().S*c));d=this.Jv?b.width-e:0,a.fillRect(d,0,e,b.height)}bm(a){if(null===this.Uv||null===this.Ki)return;let b=this.Ki.Vl(),c=this.Ki.N(),d=this.lm(),e=this.Jv?this.Uv.width-d.C:0;c.borderVisible&&c.ticksVisible&&a.useBitmapCoordinateSpace(({context:a,horizontalPixelRatio:f,verticalPixelRatio:g})=>{a.fillStyle=c.borderColor;let h=Math.max(1,Math.floor(g)),i=Math.floor(.5*g),j=Math.round(d.C*f);for(let c of(a.beginPath(),b))a.rect(Math.floor(e*f),Math.round(c.Pl*g)-i,j,h);a.fill()}),a.useMediaCoordinateSpace(({context:a})=>{a.font=this._m(),a.fillStyle=c.textColor??this.Co.textColor,a.textAlign=this.Jv?"right":"left",a.textBaseline="middle";let f=this.Jv?Math.round(e-d.V):Math.round(e+d.C+d.V),g=b.map(b=>this.qv.Di(a,b.Jl));for(let c=b.length;c--;){let d=b[c];a.fillText(d.Jl,f,d.Pl+g[c])}})}vm(){if(null===this.Uv||null===this.Ki)return;let a=this.Uv.height/2,b=[],c=this.Ki.Dt().slice(),d=this.yt.cv(),e=this.lm();this.Ki===d.Gn()&&this.yt.cv().Dt().forEach(a=>{d.Zn(a)&&c.push(a)});let f=this.Ki.Sl()[0],g=this.Ki;c.forEach(c=>{let e=c.Ks(d,g);e.forEach(a=>{a.$i()&&null===a.Wi()&&(a.Ui(null),b.push(a))}),f===c&&e.length>0&&(a=e[0].Ei())}),this.Ki.N().alignLabels&&this.ym(b,e,a)}ym(a,b,c){if(null===this.Uv)return;let d=a.filter(a=>a.Ei()<=c),e=a.filter(a=>a.Ei()>c);for(let c of(d.sort((a,b)=>b.Ei()-a.Ei()),d.length&&e.length&&e.push(d[0]),e.sort((a,b)=>a.Ei()-b.Ei()),a)){let a=Math.floor(c.$t(b)/2),d=c.Ei();d>-a&&d<a&&c.Ui(a),d>this.Uv.height-a&&d<this.Uv.height+a&&c.Ui(this.Uv.height-a)}ce(d,1,this.Uv.height,b),ce(e,-1,this.Uv.height,b)}Sm(a){if(null===this.Uv)return;let b=this.um(),c=this.lm(),d=this.Jv?"right":"left";b.forEach(b=>{b.qi()&&b.Tt(H(this.Ki)).nt(a,c,this.qv,d)})}xm(a){if(null===this.Uv||null===this.Ki)return;let b=this.yt.Gv().Qt(),c=[],d=this.yt.cv(),e=b.gd().Ks(d,this.Ki);e.length&&c.push(e);let f=this.lm(),g=this.Jv?"right":"left";c.forEach(b=>{b.forEach(b=>{b.Tt(H(this.Ki)).nt(a,f,this.qv,g)})})}Cm(a){this.Jp.style.cursor=1===a?"ns-resize":"default"}do(){let a=this.om();this.Yv<a&&this.yt.Gv().Qt().Ca(),this.Yv=a}_m(){return T(this.Co.fontSize,this.Co.fontFamily)}}function cg(a,b){return a.qa?.(b)??[]}function ch(a,b){return a.Ys?.(b)??[]}function ci(a,b){return a.ds?.(b)??[]}function cj(a,b){return a.Ha?.(b)??[]}class ck{constructor(a,c){this.Uv=b({width:0,height:0}),this.km=null,this.Pm=null,this.Tm=null,this.Rm=null,this.Dm=!1,this.Im=new J,this.Vm=new J,this.Bm=0,this.Em=!1,this.Am=null,this.Lm=!1,this.zm=null,this.Om=null,this.Kv=!1,this.Zv=()=>{this.Kv||null===this.Nm||this.ns().dr()},this.Xv=()=>{this.Kv||null===this.Nm||this.ns().dr()},this.Lv=a,this.Nm=c,this.Nm.nu().i(this.Fm.bind(this),this,!0),this.Wm=document.createElement("td"),this.Wm.style.padding="0",this.Wm.style.position="relative";const d=document.createElement("div");d.style.width="100%",d.style.height="100%",d.style.position="relative",d.style.overflow="hidden",this.Hm=document.createElement("td"),this.Hm.style.padding="0",this.Um=document.createElement("td"),this.Um.style.padding="0",this.Wm.appendChild(d),this.sm=b8(d,b({width:16,height:16})),this.sm.subscribeSuggestedBitmapSizeChanged(this.Zv);const e=this.sm.canvasElement;e.style.position="absolute",e.style.zIndex="1",e.style.left="0",e.style.top="0",this.nm=b8(d,b({width:16,height:16})),this.nm.subscribeSuggestedBitmapSizeChanged(this.Xv);const f=this.nm.canvasElement;f.style.position="absolute",f.style.zIndex="2",f.style.left="0",f.style.top="0",this.Xp=document.createElement("tr"),this.Xp.appendChild(this.Hm),this.Xp.appendChild(this.Wm),this.Xp.appendChild(this.Um),this.$m(),this.$p=new b$(this.nm.canvasElement,this,{dp:()=>null===this.Am&&!this.Lv.N().handleScroll.vertTouchDrag,fp:()=>null===this.Am&&!this.Lv.N().handleScroll.horzTouchDrag})}m(){null!==this.km&&this.km.m(),null!==this.Pm&&this.Pm.m(),this.Tm=null,this.nm.unsubscribeSuggestedBitmapSizeChanged(this.Xv),b9(this.nm.canvasElement),this.nm.dispose(),this.sm.unsubscribeSuggestedBitmapSizeChanged(this.Zv),b9(this.sm.canvasElement),this.sm.dispose(),null!==this.Nm&&(this.Nm.nu().u(this),this.Nm.m()),this.$p.m()}cv(){return H(this.Nm)}qm(a){null!==this.Nm&&this.Nm.nu().u(this),this.Nm=a,null!==this.Nm&&this.Nm.nu().i(ck.prototype.Fm.bind(this),this,!0),this.$m(),this.Lv.Zp().indexOf(this)===this.Lv.Zp().length-1?(this.Tm=this.Tm??new b7(this.Wm,this.Lv),this.Tm.kt()):(this.Tm?.Ov(),this.Tm=null)}Gv(){return this.Lv}iv(){return this.Xp}$m(){if(null!==this.Nm&&(this.jm(),0!==this.ns().tn().length)){if(null!==this.km){let a=this.Nm.U_();this.km.cs(H(a))}if(null!==this.Pm){let a=this.Nm.q_();this.Pm.cs(H(a))}}}Ym(){null!==this.km&&this.km.kt(),null!==this.Pm&&this.Pm.kt()}E_(){return null!==this.Nm?this.Nm.E_():0}A_(a){this.Nm&&this.Nm.A_(a)}lp(a){if(!this.Nm)return;this.Km();let b=a.localX,c=a.localY;this.Zm(b,c,a)}Pp(a){this.Km(),this.Gm(),this.Zm(a.localX,a.localY,a)}op(a){if(!this.Nm)return;this.Km();let b=a.localX,c=a.localY;this.Zm(b,c,a)}Sp(a){null!==this.Nm&&(this.Km(),this.Xm(a))}ip(a){null!==this.Nm&&this.Jm(this.Vm,a)}Xf(a){this.ip(a)}mp(a){this.Km(),this.Qm(a),this.Zm(a.localX,a.localY,a)}bp(a){null!==this.Nm&&(this.Km(),this.Em=!1,this.tw(a))}Mp(a){null!==this.Nm&&this.Xm(a)}Op(a){if(this.Em=!0,null===this.Am){let b={x:a.localX,y:a.localY};this.iw(b,b,a)}}zp(a){null!==this.Nm&&(this.Km(),this.Nm.Qt().vd(null),this.sw())}nw(){return this.Im}ew(){return this.Vm}Ip(){this.Bm=1,this.ns().dn()}Vp(a,b){if(!this.Lv.N().handleScale.pinch)return;let c=5*(b-this.Bm);this.Bm=b,this.ns().Td(a._t,c)}yp(a){this.Em=!1,this.Lm=null!==this.Am,this.Gm();let b=this.ns().gd();null!==this.Am&&b.It()&&(this.zm={x:b.si(),y:b.ni()},this.Am={x:a.localX,y:a.localY})}pp(a){if(null===this.Nm)return;let b=a.localX,c=a.localY;if(null===this.Am)this.Qm(a);else{this.Lm=!1;let d=H(this.zm),e=d.x+(b-this.Am.x),f=d.y+(c-this.Am.y);this.Zm(e,f,a)}}gp(a){0===this.Gv().N().trackingMode.exitMode&&(this.Lm=!0),this.rw(),this.tw(a)}Qn(a,b){let c=this.Nm;return null===c?null:bC(c,a,b)}hw(a,c){H("left"===c?this.km:this.Pm).dm(b({width:a,height:this.Uv.height}))}sv(){return this.Uv}dm(a){c(this.Uv,a)||(this.Uv=a,this.Kv=!0,this.sm.resizeCanvasElement(a),this.nm.resizeCanvasElement(a),this.Kv=!1,this.Wm.style.width=a.width+"px",this.Wm.style.height=a.height+"px")}aw(){let a=H(this.Nm);for(let b of(a.H_(a.U_()),a.H_(a.q_()),a.Sl()))if(a.Zn(b)){let c=b.Ft();null!==c&&a.H_(c),b.Ws()}for(let b of a.ru())b.Ws()}nv(){return this.sm.bitmapSize}ev(a,b,c,d){let e=this.nv();if(e.width>0&&e.height>0&&(a.drawImage(this.sm.canvasElement,b,c),d)){let d=this.nm.canvasElement;null!==a&&a.drawImage(d,b,c)}}pm(a){if(0===a||null===this.Nm)return;a>1&&this.aw(),null!==this.km&&this.km.pm(a),null!==this.Pm&&this.Pm.pm(a);let b={colorSpace:this.Lv.N().layout.colorSpace};if(1!==a){this.sm.applySuggestedBitmapSize();let a=B(this.sm,b);null!==a&&(a.useBitmapCoordinateSpace(a=>{this.wm(a)}),this.Nm&&(this.lw(a,cg),this.ow(a),this.lw(a,ch),this.lw(a,ci)))}this.nm.applySuggestedBitmapSize();let c=B(this.nm,b);null!==c&&(c.useBitmapCoordinateSpace(({context:a,bitmapSize:b})=>{a.clearRect(0,0,b.width,b.height)}),this._w(c),this.lw(c,cj),this.lw(c,ci))}uw(){return this.km}cw(){return this.Pm}Mm(a,b){this.lw(a,b)}Fm(){null!==this.Nm&&this.Nm.nu().u(this),this.Nm=null}Xm(a){this.Jm(this.Im,a)}Jm(a,b){let c=b.localX,d=b.localY;a.v()&&a.p(this.ns().Et().wc(c),{x:c,y:d},b)}wm({context:a,bitmapSize:b}){let{width:c,height:d}=b,e=this.ns(),f=e.$(),g=e.Kd();f===g?ae(a,0,0,c,d,g):ah(a,0,0,c,d,f,g)}ow(a){let b=H(this.Nm),c=b.eu().pr().Tt(b);null!==c&&c.nt(a,!1)}_w(a){this.dw(a,ch,cb,this.ns().gd())}lw(a,b){let c=H(this.Nm),d=c.Dt(),e=c.ru();for(let c of e)this.dw(a,b,ca,c);for(let c of d)this.dw(a,b,ca,c);for(let c of e)this.dw(a,b,cb,c);for(let c of d)this.dw(a,b,cb,c)}dw(a,b,c,d){let e=H(this.Nm),f=e.Qt().pd(),g=null!==f&&f.hu===d,h=null!==f&&g&&void 0!==f.au?f.au.ie:void 0;cc(b,b=>c(b,a,g,h),d,e)}jm(){if(null===this.Nm)return;let a=this.Lv,b=this.Nm.U_().N().visible,c=this.Nm.q_().N().visible;b||null===this.km||(this.Hm.removeChild(this.km.iv()),this.km.m(),this.km=null),c||null===this.Pm||(this.Um.removeChild(this.Pm.iv()),this.Pm.m(),this.Pm=null);let d=a.Qt().Nd();b&&null===this.km&&(this.km=new cf(this,a.N(),d,"left"),this.Hm.appendChild(this.km.iv())),c&&null===this.Pm&&(this.Pm=new cf(this,a.N(),d,"right"),this.Um.appendChild(this.Pm.iv()))}fw(a){return a.Np&&this.Em||null!==this.Am}Zm(a,b,c){a=Math.max(0,Math.min(a,this.Uv.width-1)),b=Math.max(0,Math.min(b,this.Uv.height-1)),this.ns().Ad(a,b,c,H(this.Nm))}sw(){this.ns().zd()}rw(){this.Lm&&(this.Am=null,this.sw())}iw(a,b,c){this.Am=a,this.Lm=!1,this.Zm(b.x,b.y,c);let d=this.ns().gd();this.zm={x:d.si(),y:d.ni()}}ns(){return this.Lv.Qt()}tw(a){if(!this.Dm)return;let b=this.ns(),c=this.cv();if(b.X_(c,c.Rs()),this.Rm=null,this.Dm=!1,b.Vd(),null!==this.Om){let a=performance.now(),c=b.Et();this.Om.fe(c.Cc(),a),this.Om.Ec(a)||b.vn(this.Om)}}Km(){this.Am=null}Gm(){if(this.Nm){if(this.ns().dn(),document.activeElement!==document.body&&document.activeElement!==document.documentElement)H(document.activeElement).blur();else{let a=document.getSelection();null!==a&&a.removeAllRanges()}this.Nm.Rs().Gi()||this.ns().Et().Gi()}}Qm(a){if(null===this.Nm)return;let b=this.ns(),c=b.Et();if(c.Gi())return;let d=this.Lv.N(),e=d.handleScroll,f=d.kineticScroll;if((!e.pressedMouseMove||a.Np)&&(!e.horzTouchDrag&&!e.vertTouchDrag||!a.Np))return;let g=this.Nm.Rs(),h=performance.now();if(null!==this.Rm||this.fw(a)||(this.Rm={x:a.clientX,y:a.clientY,cf:h,pw:a.localX,mw:a.localY}),null!==this.Rm&&!this.Dm&&(this.Rm.x!==a.clientX||this.Rm.y!==a.clientY)){if(a.Np&&f.touch||!a.Np&&f.mouse){let a=c.ul();this.Om=new b6(.2/a,7/a,.997,15/a),this.Om.Dv(c.Cc(),this.Rm.cf)}else this.Om=null;g.Gi()||b.Z_(this.Nm,g,a.localY),b.Dd(a.localX),this.Dm=!0}this.Dm&&(g.Gi()||b.G_(this.Nm,g,a.localY),b.Id(a.localX),null!==this.Om&&this.Om.Dv(c.Cc(),h))}}class cl{constructor(a,c,d,e,f){this.xt=!0,this.Uv=b({width:0,height:0}),this.Zv=()=>this.pm(3),this.Jv="left"===a,this.hd=d.Nd,this.Ps=c,this.ww=e,this.gw=f,this.Jp=document.createElement("div"),this.Jp.style.width="25px",this.Jp.style.height="100%",this.Jp.style.overflow="hidden",this.sm=b8(this.Jp,b({width:16,height:16})),this.sm.subscribeSuggestedBitmapSizeChanged(this.Zv)}m(){this.sm.unsubscribeSuggestedBitmapSizeChanged(this.Zv),b9(this.sm.canvasElement),this.sm.dispose()}iv(){return this.Jp}sv(){return this.Uv}dm(a){c(this.Uv,a)||(this.Uv=a,this.sm.resizeCanvasElement(a),this.Jp.style.width=`${a.width}px`,this.Jp.style.height=`${a.height}px`,this.xt=!0)}pm(a){if(a<3&&!this.xt||0===this.Uv.width||0===this.Uv.height)return;this.xt=!1,this.sm.applySuggestedBitmapSize();let b=B(this.sm,{colorSpace:this.Ps.layout.colorSpace});null!==b&&b.useBitmapCoordinateSpace(a=>{this.wm(a),this.gm(a)})}nv(){return this.sm.bitmapSize}ev(a,b,c){let d=this.nv();d.width>0&&d.height>0&&a.drawImage(this.sm.canvasElement,b,c)}gm({context:a,bitmapSize:b,horizontalPixelRatio:c,verticalPixelRatio:d}){if(!this.ww())return;a.fillStyle=this.Ps.timeScale.borderColor;let e=Math.floor(this.hd.N().S*c),f=Math.floor(this.hd.N().S*d),g=this.Jv?b.width-e:0;a.fillRect(g,0,e,f)}wm({context:a,bitmapSize:b}){ae(a,0,0,b.width,b.height,this.gw())}}function cm(a){return b=>b.Ka?.(a)??[]}let cn=cm("normal"),co=cm("top"),cp=cm("bottom");class cq{constructor(a,c){this.Mw=null,this.bw=null,this.M=null,this.Sw=!1,this.Uv=b({width:0,height:0}),this.xw=new J,this.qv=new ay(5),this.Kv=!1,this.Zv=()=>{this.Kv||this.Lv.Qt().dr()},this.Xv=()=>{this.Kv||this.Lv.Qt().dr()},this.Lv=a,this.cu=c,this.Ps=a.N().layout,this.Vv=document.createElement("tr"),this.Cw=document.createElement("td"),this.Cw.style.padding="0",this.yw=document.createElement("td"),this.yw.style.padding="0",this.Jp=document.createElement("td"),this.Jp.style.height="25px",this.Jp.style.padding="0",this.kw=document.createElement("div"),this.kw.style.width="100%",this.kw.style.height="100%",this.kw.style.position="relative",this.kw.style.overflow="hidden",this.Jp.appendChild(this.kw),this.sm=b8(this.kw,b({width:16,height:16})),this.sm.subscribeSuggestedBitmapSizeChanged(this.Zv);const d=this.sm.canvasElement;d.style.position="absolute",d.style.zIndex="1",d.style.left="0",d.style.top="0",this.nm=b8(this.kw,b({width:16,height:16})),this.nm.subscribeSuggestedBitmapSizeChanged(this.Xv);const e=this.nm.canvasElement;e.style.position="absolute",e.style.zIndex="2",e.style.left="0",e.style.top="0",this.Vv.appendChild(this.Cw),this.Vv.appendChild(this.Jp),this.Vv.appendChild(this.yw),this.Pw(),this.Lv.Qt().B_().i(this.Pw.bind(this),this),this.$p=new b$(this.nm.canvasElement,this,{dp:()=>!0,fp:()=>!this.Lv.N().handleScroll.horzTouchDrag})}m(){this.$p.m(),null!==this.Mw&&this.Mw.m(),null!==this.bw&&this.bw.m(),this.nm.unsubscribeSuggestedBitmapSizeChanged(this.Xv),b9(this.nm.canvasElement),this.nm.dispose(),this.sm.unsubscribeSuggestedBitmapSizeChanged(this.Zv),b9(this.sm.canvasElement),this.sm.dispose()}iv(){return this.Vv}Tw(){return this.Mw}Rw(){return this.bw}Pp(a){if(this.Sw)return;this.Sw=!0;let b=this.Lv.Qt();!b.Et().Gi()&&this.Lv.N().handleScale.axisPressedMouseMove.time&&b.Pd(a.localX)}yp(a){this.Pp(a)}Tp(){let a=this.Lv.Qt();!a.Et().Gi()&&this.Sw&&(this.Sw=!1,this.Lv.N().handleScale.axisPressedMouseMove.time&&a.Ed())}mp(a){let b=this.Lv.Qt();!b.Et().Gi()&&this.Lv.N().handleScale.axisPressedMouseMove.time&&b.Bd(a.localX)}pp(a){this.mp(a)}bp(){this.Sw=!1;let a=this.Lv.Qt();a.Et().Gi()&&!this.Lv.N().handleScale.axisPressedMouseMove.time||a.Ed()}gp(){this.bp()}ip(){this.Lv.N().handleScale.axisDoubleClickReset.time&&this.Lv.Qt().wn()}Xf(){this.ip()}lp(){this.Lv.Qt().N().handleScale.axisPressedMouseMove.time&&this.Cm(1)}zp(){this.Cm(0)}sv(){return this.Uv}Dw(){return this.xw}Iw(a,d,e){c(this.Uv,a)||(this.Uv=a,this.Kv=!0,this.sm.resizeCanvasElement(a),this.nm.resizeCanvasElement(a),this.Kv=!1,this.Jp.style.width=`${a.width}px`,this.Jp.style.height=`${a.height}px`,this.xw.p(a)),null!==this.Mw&&this.Mw.dm(b({width:d,height:a.height})),null!==this.bw&&this.bw.dm(b({width:e,height:a.height}))}Vw(){let a=this.Bw();return Math.ceil(a.S+a.C+a.k+a.A+a.I+a.Ew)}kt(){this.Lv.Qt().Et().Vl()}nv(){return this.sm.bitmapSize}ev(a,b,c,d){let e=this.nv();if(e.width>0&&e.height>0&&(a.drawImage(this.sm.canvasElement,b,c),d)){let d=this.nm.canvasElement;a.drawImage(d,b,c)}}pm(a){if(0===a)return;let b={colorSpace:this.Ps.colorSpace};if(1!==a){this.sm.applySuggestedBitmapSize();let c=B(this.sm,b);null!==c&&(c.useBitmapCoordinateSpace(a=>{this.wm(a),this.gm(a),this.Aw(c,cp)}),this.bm(c),this.Aw(c,cn)),null!==this.Mw&&this.Mw.pm(a),null!==this.bw&&this.bw.pm(a)}this.nm.applySuggestedBitmapSize();let c=B(this.nm,b);null!==c&&(c.useBitmapCoordinateSpace(({context:a,bitmapSize:b})=>{a.clearRect(0,0,b.width,b.height)}),this.Lw([...this.Lv.Qt().tn(),this.Lv.Qt().gd()],c),this.Aw(c,co))}Aw(a,b){let c=this.Lv.Qt().tn();for(let d of c)cc(b,b=>ca(b,a,!1,void 0),d,void 0);for(let d of c)cc(b,b=>cb(b,a,!1,void 0),d,void 0)}wm({context:a,bitmapSize:b}){ae(a,0,0,b.width,b.height,this.Lv.Qt().Kd())}gm({context:a,bitmapSize:b,verticalPixelRatio:c}){if(this.Lv.N().timeScale.borderVisible){a.fillStyle=this.zw();let d=Math.max(1,Math.floor(this.Bw().S*c));a.fillRect(0,0,b.width,d)}}bm(a){let b=this.Lv.Qt().Et(),c=b.Vl();if(!c||0===c.length)return;let d=this.cu.maxTickMarkWeight(c),e=this.Bw(),f=b.N();f.borderVisible&&f.ticksVisible&&a.useBitmapCoordinateSpace(({context:a,horizontalPixelRatio:b,verticalPixelRatio:d})=>{a.strokeStyle=this.zw(),a.fillStyle=this.zw();let f=Math.max(1,Math.floor(b)),g=Math.floor(.5*b);a.beginPath();let h=Math.round(e.C*d);for(let d=c.length;d--;){let e=Math.round(c[d].coord*b);a.rect(e-g,0,f,h)}a.fill()}),a.useMediaCoordinateSpace(({context:a})=>{let b=e.S+e.C+e.A+e.k/2;for(let e of(a.textAlign="center",a.textBaseline="middle",a.fillStyle=this.H(),a.font=this._m(),c))if(e.weight<d){let c=e.needAlignCoordinate?this.Ow(a,e.coord,e.label):e.coord;a.fillText(e.label,c,b)}for(let e of(this.Lv.N().timeScale.allowBoldLabels&&(a.font=this.Nw()),c))if(e.weight>=d){let c=e.needAlignCoordinate?this.Ow(a,e.coord,e.label):e.coord;a.fillText(e.label,c,b)}})}Ow(a,b,c){let d=this.qv.Ii(a,c),e=Math.floor(b-d/2)+.5;return e<0?b+=Math.abs(0-e):e+d>this.Uv.width&&(b-=Math.abs(this.Uv.width-(e+d))),b}Lw(a,b){let c=this.Bw();for(let d of a)for(let a of d.fs())a.Tt().nt(b,c)}zw(){return this.Lv.N().timeScale.borderColor}H(){return this.Ps.textColor}F(){return this.Ps.fontSize}_m(){return T(this.F(),this.Ps.fontFamily)}Nw(){return T(this.F(),this.Ps.fontFamily,"bold")}Bw(){null===this.M&&(this.M={S:1,L:NaN,A:NaN,I:NaN,ts:NaN,C:5,k:NaN,P:"",Qi:new ay,Ew:0});let a=this.M,b=this._m();if(a.P!==b){let c=this.F();a.k=c,a.P=b,a.A=3*c/12,a.I=3*c/12,a.ts=9*c/12,a.L=0,a.Ew=4*c/12,a.Qi.On()}return this.M}Cm(a){this.Jp.style.cursor=1===a?"ew-resize":"default"}Pw(){let a=this.Lv.Qt(),b=a.N();b.leftPriceScale.visible||null===this.Mw||(this.Cw.removeChild(this.Mw.iv()),this.Mw.m(),this.Mw=null),b.rightPriceScale.visible||null===this.bw||(this.yw.removeChild(this.bw.iv()),this.bw.m(),this.bw=null);let c={Nd:this.Lv.Qt().Nd()},d=()=>b.leftPriceScale.borderVisible&&a.Et().N().borderVisible,e=()=>a.Kd();b.leftPriceScale.visible&&null===this.Mw&&(this.Mw=new cl("left",b,c,d,e),this.Cw.appendChild(this.Mw.iv())),b.rightPriceScale.visible&&null===this.bw&&(this.bw=new cl("right",b,c,d,e),this.yw.appendChild(this.bw.iv()))}}class cr{constructor(a,b,c){var d;this.Fw=[],this.Ww=[],this.Hw=0,this.eo=0,this.S_=0,this.Uw=0,this.$w=0,this.qw=null,this.jw=!1,this.Im=new J,this.Vm=new J,this.nd=new J,this.Yw=null,this.Kw=null,this.Av=a,this.Ps=b,this.cu=c,this.Vv=document.createElement("div"),this.Vv.classList.add("tv-lightweight-charts"),this.Vv.style.overflow="hidden",this.Vv.style.direction="ltr",this.Vv.style.width="100%",this.Vv.style.height="100%",(d=this.Vv).style.userSelect="none",d.style.webkitUserSelect="none",d.style.msUserSelect="none",d.style.MozUserSelect="none",d.style.webkitTapHighlightColor="transparent",this.Zw=document.createElement("table"),this.Zw.setAttribute("cellspacing","0"),this.Vv.appendChild(this.Zw),this.Gw=this.Xw.bind(this),cs(this.Ps)&&this.Jw(!0),this.ns=new bK(this.rd.bind(this),this.Ps,c),this.Qt().Md().i(this.Qw.bind(this),this),this.tg=new cq(this,this.cu),this.Zw.appendChild(this.tg.iv());const e=b.autoSize&&this.ig();let f=this.Ps.width,g=this.Ps.height;if(e||0===f||0===g){const b=a.getBoundingClientRect();f=f||b.width,g=g||b.height}this.sg(f,g),this.ng(),a.appendChild(this.Vv),this.eg(),this.ns.Et().Oc().i(this.ns.Ca.bind(this.ns),this),this.ns.B_().i(this.ns.Ca.bind(this.ns),this)}Qt(){return this.ns}N(){return this.Ps}Zp(){return this.Fw}rg(){return this.tg}m(){for(let a of(this.Jw(!1),0!==this.Hw&&window.cancelAnimationFrame(this.Hw),this.ns.Md().u(this),this.ns.Et().Oc().u(this),this.ns.B_().u(this),this.ns.m(),this.Fw))this.Zw.removeChild(a.iv()),a.nw().u(this),a.ew().u(this),a.m();for(let a of(this.Fw=[],this.Ww))this.hg(a);this.Ww=[],H(this.tg).m(),null!==this.Vv.parentElement&&this.Vv.parentElement.removeChild(this.Vv),this.nd.m(),this.Im.m(),this.Vm.m(),this.ag()}sg(a,c,d=!1){var e;let f,g;if(this.eo===c&&this.S_===a)return;let h=(f=Math.floor((e=b({width:a,height:c})).width),b({width:f-f%2,height:(g=Math.floor(e.height))-g%2}));this.eo=h.height,this.S_=h.width;let i=this.eo+"px",j=this.S_+"px";H(this.Vv).style.height=i,H(this.Vv).style.width=j,this.Zw.style.height=i,this.Zw.style.width=j,d?this.lg(ar.yn(),performance.now()):this.ns.Ca()}pm(a){void 0===a&&(a=ar.yn());for(let b=0;b<this.Fw.length;b++)this.Fw[b].pm(a.un(b).an);this.Ps.timeScale.visible&&this.tg.pm(a._n())}cr(a){let b=cs(this.Ps);this.ns.cr(a);let c=cs(this.Ps);c!==b&&this.Jw(c),a.layout?.panes&&this.og(),this.eg(),this._g(a)}nw(){return this.Im}ew(){return this.Vm}Md(){return this.nd}ug(a=!1){null!==this.qw&&(this.lg(this.qw,performance.now()),this.qw=null);let b=this.cg(null),c=document.createElement("canvas");c.width=b.width,c.height=b.height;let d=H(c.getContext("2d"));return this.cg(d,a),c}dg(a){return("left"!==a||this.fg())&&("right"!==a||this.pg())&&0!==this.Fw.length?H("left"===a?this.Fw[0].uw():this.Fw[0].cw()).fm():0}vg(){return this.Ps.autoSize&&null!==this.Yw}hv(){return this.Vv}mg(a){this.Kw=a,this.Kw?this.hv().style.setProperty("cursor",a):this.hv().style.removeProperty("cursor")}wg(){return this.Kw}gg(a){return G(this.Fw[a]).sv()}og(){this.Ww.forEach(a=>{a.kt()})}_g(a){(void 0!==a.autoSize||!this.Yw||void 0===a.width&&void 0===a.height)&&(a.autoSize&&!this.Yw&&this.ig(),!1===a.autoSize&&null!==this.Yw&&this.ag(),a.autoSize||void 0===a.width&&void 0===a.height||this.sg(a.width||this.S_,a.height||this.eo))}cg(a,c){let d=0,e=0,f=this.Fw[0],g=(b,d)=>{let e=0;for(let f=0;f<this.Fw.length;f++){let g=this.Fw[f],h=H("left"===b?g.uw():g.cw()),i=h.nv();if(null!==a&&h.ev(a,d,e,c),e+=i.height,f<this.Fw.length-1){let b=this.Ww[f],c=b.nv();null!==a&&b.ev(a,d,e),e+=c.height}}};this.fg()&&(g("left",0),d+=H(f.uw()).nv().width);for(let b=0;b<this.Fw.length;b++){let f=this.Fw[b],g=f.nv();if(null!==a&&f.ev(a,d,e,c),e+=g.height,b<this.Fw.length-1){let c=this.Ww[b],f=c.nv();null!==a&&c.ev(a,d,e),e+=f.height}}d+=f.nv().width,this.pg()&&(g("right",d),d+=H(f.cw()).nv().width);let h=(b,c,d)=>{H("left"===b?this.tg.Tw():this.tg.Rw()).ev(H(a),c,d)};if(this.Ps.timeScale.visible){let b=this.tg.nv();if(null!==a){let d=0;this.fg()&&(h("left",d,e),d=H(f.uw()).nv().width),this.tg.ev(a,d,e,c),d+=b.width,this.pg()&&h("right",d,e)}e+=b.height}return b({width:d,height:e})}Mg(){var a,c,d;let e=0,f=0,g=0;for(let a of this.Fw)this.fg()&&(f=Math.max(f,H(a.uw()).om(),this.Ps.leftPriceScale.minimumWidth)),this.pg()&&(g=Math.max(g,H(a.cw()).om(),this.Ps.rightPriceScale.minimumWidth)),e+=a.E_();f=(c=f)+c%2,g=(d=g)+d%2;let h=this.S_,i=this.eo,j=Math.max(h-f-g,0),k=+this.Ww.length,l=this.Ps.timeScale.visible,m=l?Math.max(this.tg.Vw(),this.Ps.timeScale.minimumHeight):0,n=k+(m=(a=m)+a%2),o=i<n?0:i-n,p=o/e,q=0,r=window.devicePixelRatio||1;for(let a=0;a<this.Fw.length;++a){let c=this.Fw[a];c.qm(this.ns.Xs()[a]);let d=0;d=Math.max(a===this.Fw.length-1?Math.ceil((o-q)*r)/r:Math.round(c.E_()*p*r)/r,2),q+=d,c.dm(b({width:j,height:d})),this.fg()&&c.hw(f,"left"),this.pg()&&c.hw(g,"right"),c.cv()&&this.ns.bd(c.cv(),d)}this.tg.Iw(b({width:l?j:0,height:m}),l?f:0,l?g:0),this.ns.L_(j),this.Uw!==f&&(this.Uw=f),this.$w!==g&&(this.$w=g)}Jw(a){a?this.Vv.addEventListener("wheel",this.Gw,{passive:!1}):this.Vv.removeEventListener("wheel",this.Gw)}bg(a){switch(a.deltaMode){case a.DOM_DELTA_PAGE:return 120;case a.DOM_DELTA_LINE:return 32}return 1}Xw(a){if(!(0!==a.deltaX&&this.Ps.handleScroll.mouseWheel||0!==a.deltaY&&this.Ps.handleScale.mouseWheel))return;let b=this.bg(a),c=b*a.deltaX/100,d=-b*a.deltaY/100;if(a.cancelable&&a.preventDefault(),0!==d&&this.Ps.handleScale.mouseWheel){let b=Math.sign(d)*Math.min(1,Math.abs(d)),c=a.clientX-this.Vv.getBoundingClientRect().left;this.Qt().Td(c,b)}0!==c&&this.Ps.handleScroll.mouseWheel&&this.Qt().Rd(-80*c)}lg(a,b){let c=a._n();3===c&&this.Sg(),3!==c&&2!==c||(this.xg(a),this.Cg(a,b),this.tg.kt(),this.Fw.forEach(a=>{a.Ym()}),3===this.qw?._n()&&(this.qw.Sn(a),this.Sg(),this.xg(this.qw),this.Cg(this.qw,b),a=this.qw,this.qw=null)),this.pm(a)}Cg(a,b){for(let c of a.bn())this.xn(c,b)}xg(a){let b=this.ns.Xs();for(let c=0;c<b.length;c++)a.un(c).ln&&b[c].tu()}xn(a,b){let c=this.ns.Et();switch(a.fn){case 0:c.Fc();break;case 1:c.Wc(a.Wt);break;case 2:c.gn(a.Wt);break;case 3:c.Mn(a.Wt);break;case 4:c.Pc();break;case 5:a.Wt.Ec(b)||c.Mn(a.Wt.Ac(b))}}rd(a){null!==this.qw?this.qw.Sn(a):this.qw=a,this.jw||(this.jw=!0,this.Hw=window.requestAnimationFrame(a=>{if(this.jw=!1,this.Hw=0,null!==this.qw){let b=this.qw;for(let c of(this.qw=null,this.lg(b,a),b.bn()))if(5===c.fn&&!c.Wt.Ec(a)){this.Qt().vn(c.Wt);break}}}))}Sg(){this.ng()}hg(a){this.Zw.removeChild(a.iv()),a.m()}ng(){let a=this.ns.Xs(),b=a.length,c=this.Fw.length;for(let a=b;a<c;a++){let a=G(this.Fw.pop());this.Zw.removeChild(a.iv()),a.nw().u(this),a.ew().u(this),a.m();let b=this.Ww.pop();void 0!==b&&this.hg(b)}for(let d=c;d<b;d++){let b=new ck(this,a[d]);if(b.nw().i(this.yg.bind(this,b),this),b.ew().i(this.kg.bind(this,b),this),this.Fw.push(b),d>0){let a=new b4(this,d-1,d);this.Ww.push(a),this.Zw.insertBefore(a.iv(),this.tg.iv())}this.Zw.insertBefore(b.iv(),this.tg.iv())}for(let c=0;c<b;c++){let b=a[c],d=this.Fw[c];d.cv()!==b?d.qm(b):d.$m()}this.eg(),this.Mg()}Pg(a,b,c,d){let e,f=new Map;if(null!==a&&this.ns.tn().forEach(b=>{let c=b.qs().$s(a);null!==c&&f.set(b,c)}),null!==a){let b=this.ns.Et().es(a)?.originalTime;void 0!==b&&(e=b)}let g=this.Qt().pd(),h=null!==g&&g.hu instanceof bd?g.hu:void 0,i=null!==g&&void 0!==g.au?g.au.te:void 0,j=this.Tg(d);return{Gr:e,js:a??void 0,Rg:b??void 0,Dg:-1!==j?j:void 0,Ig:h,Vg:f,Bg:i,Eg:c??void 0}}Tg(a){let b=-1;if(a)b=this.Fw.indexOf(a);else{let a=this.Qt().gd().Gs();null!==a&&(b=this.Qt().Xs().indexOf(a))}return b}yg(a,b,c,d){this.Im.p(()=>this.Pg(b,c,d,a))}kg(a,b,c,d){this.Vm.p(()=>this.Pg(b,c,d,a))}Qw(a,b,c){this.mg(this.Qt().pd()?.ou??null),this.nd.p(()=>this.Pg(a,b,c))}eg(){let a=this.Ps.timeScale.visible?"":"none";this.tg.iv().style.display=a}fg(){return this.Fw[0].cv().U_().N().visible}pg(){return this.Fw[0].cv().q_().N().visible}ig(){return"ResizeObserver"in window&&(this.Yw=new ResizeObserver(a=>{let b=a[a.length-1];b&&this.sg(b.contentRect.width,b.contentRect.height)}),this.Yw.observe(this.Av,{box:"border-box"}),!0)}ag(){null!==this.Yw&&this.Yw.disconnect(),this.Yw=null}}function cs(a){return!!(a.handleScroll.mouseWheel||a.handleScale.mouseWheel)}function ct(a,b,c,d){let e=c.value,f={js:b,wt:a,Wt:[e,e,e,e],Gr:d};return void 0!==c.color&&(f.R=c.color),f}function cu(a,b,c,d){let e=c.value,f={js:b,wt:a,Wt:[e,e,e,e],Gr:d};return void 0!==c.lineColor&&(f.vt=c.lineColor),void 0!==c.topColor&&(f.eh=c.topColor),void 0!==c.bottomColor&&(f.rh=c.bottomColor),f}function cv(a,b,c,d){let e=c.value,f={js:b,wt:a,Wt:[e,e,e,e],Gr:d};return void 0!==c.topLineColor&&(f.hh=c.topLineColor),void 0!==c.bottomLineColor&&(f.ah=c.bottomLineColor),void 0!==c.topFillColor1&&(f.oh=c.topFillColor1),void 0!==c.topFillColor2&&(f._h=c.topFillColor2),void 0!==c.bottomFillColor1&&(f.uh=c.bottomFillColor1),void 0!==c.bottomFillColor2&&(f.dh=c.bottomFillColor2),f}function cw(a,b,c,d){let e={js:b,wt:a,Wt:[c.open,c.high,c.low,c.close],Gr:d};return void 0!==c.color&&(e.R=c.color),e}function cx(a,b,c,d){let e={js:b,wt:a,Wt:[c.open,c.high,c.low,c.close],Gr:d};return void 0!==c.color&&(e.R=c.color),void 0!==c.borderColor&&(e.Ht=c.borderColor),void 0!==c.wickColor&&(e.nh=c.wickColor),e}function cy(a,b,c,d,e){let f=G(e)(c),g=Math.max(...f),h=Math.min(...f),i=f[f.length-1],{time:j,color:k,...l}=c;return{js:b,wt:a,Wt:[i,g,h,i],Gr:d,le:l,R:k}}function cz(a){return void 0!==a.Wt}function cA(a,b){return void 0!==b.customValues&&(a.Ag=b.customValues),a}function cB(a){return(b,c,d,e,f,g)=>(g?g(d):void 0===d.open&&void 0===d.value)?cA({wt:b,js:c,Gr:e},d):cA(a(b,c,d,e,f),d)}function cC(a){return({Candlestick:cB(cx),Bar:cB(cw),Area:cB(cu),Baseline:cB(cv),Histogram:cB(ct),Line:cB(ct),Custom:cB(cy)})[a]}function cD(a){return{js:0,Lg:new Map,Ea:a}}function cE(a,b){if(void 0!==a&&0!==a.length)return{zg:b.key(a[0].wt),Og:b.key(a[a.length-1].wt)}}function cF(a){let b;return a.forEach(a=>{void 0===b&&(b=a.Gr)}),G(b)}class cG{constructor(a){this.Ng=new Map,this.Fg=new Map,this.Wg=new Map,this.Hg=[],this.cu=a}m(){this.Ng.clear(),this.Fg.clear(),this.Wg.clear(),this.Hg=[]}Ug(a,b){let c=0!==this.Ng.size,d=!1,e=this.Fg.get(a);if(void 0!==e)if(1===this.Fg.size)c=!1,d=!0,this.Ng.clear();else for(let b of this.Hg)b.pointData.Lg.delete(a)&&(d=!0);let f=[];if(0!==b.length){let c=b.map(a=>a.time),e=this.cu.createConverterToInternalObj(b),g=cC(a.wh()),h=a.rl(),i=a.hl();f=b.map((b,f)=>{let j=e(b.time),k=this.cu.key(j),l=this.Ng.get(k);void 0===l&&(l=cD(j),this.Ng.set(k,l),d=!0);let m=g(j,l.js,b,c[f],h,i);return l.Lg.set(a,m),m})}c&&this.$g(),this.qg(a,f);let g=-1;if(d){let a=[];this.Ng.forEach(b=>{a.push({timeWeight:0,time:b.Ea,pointData:b,originalTime:cF(b.Lg)})}),a.sort((a,b)=>this.cu.key(a.time)-this.cu.key(b.time)),g=this.jg(a)}return this.Yg(a,g,function(a,b,c){let d=cE(a,c),e=cE(b,c);if(void 0!==d&&void 0!==e)return{Kg:!1,Ta:d.Og>=e.Og&&d.zg>=e.zg}}(this.Fg.get(a),e,this.cu))}Hd(a){return this.Ug(a,[])}Zg(a,b,c){if(c&&a.La())throw Error("Historical updates are not supported when conflation is enabled. Conflation requires data to be processed in order.");void 0===b.Gr&&(b.Gr=b.time),this.cu.preprocessData(b);let d=this.cu.createConverterToInternalObj([b])(b.time),e=this.Wg.get(a);if(!c&&void 0!==e&&this.cu.key(d)<this.cu.key(e))throw Error(`Cannot update oldest data, last time=${e}, new time=${d}`);let f=this.Ng.get(this.cu.key(d));if(c&&void 0===f)throw Error("Cannot update non-existing data point when historicalUpdate is true");let g=void 0===f;void 0===f&&(f=cD(d),this.Ng.set(this.cu.key(d),f));let h=cC(a.wh()),i=a.rl(),j=a.hl(),k=h(d,f.js,b,b.Gr,i,j),l=!c&&!g&&void 0!==e&&this.cu.key(d)===this.cu.key(e);f.Lg.set(a,k),c?this.Gg(a,k,f.js):(l&&a.La()&&cz(k)&&a.kr(k),this.Xg(a,k));let m={Ta:cz(k),Kg:c};if(!g)return this.Yg(a,-1,m);let n={timeWeight:0,time:f.Ea,pointData:f,originalTime:cF(f.Lg)},o=aV(this.Hg,this.cu.key(n.time),(a,b)=>this.cu.key(a.time)<b);this.Hg.splice(o,0,n);for(let a=o;a<this.Hg.length;++a)cH(this.Hg[a].pointData,a);return this.cu.fillWeightsForPoints(this.Hg,o),this.Yg(a,o,m)}Jg(a,b){let c=this.Fg.get(a);if(void 0===c||b<=0)return[[],this.Qg()];b=Math.min(b,c.length);let d=c.splice(-b).reverse();for(let b of(0===c.length?this.Wg.delete(a):this.Wg.set(a,c[c.length-1].wt),d)){let c=this.Ng.get(this.cu.key(b.wt));if(c&&(c.Lg.delete(a),0===c.Lg.size)){this.Ng.delete(this.cu.key(c.Ea)),this.Hg.splice(c.js,1);for(let a=c.js;a<this.Hg.length;++a)cH(this.Hg[a].pointData,a)}}return[d,this.Yg(a,this.Hg.length-1,{Kg:!1,Ta:!1})]}Xg(a,b){let c=this.Fg.get(a);void 0===c&&(c=[],this.Fg.set(a,c));let d=0!==c.length?c[c.length-1]:null;null===d||this.cu.key(b.wt)>this.cu.key(d.wt)?cz(b)&&c.push(b):cz(b)?c[c.length-1]=b:c.splice(-1,1),this.Wg.set(a,b.wt)}Gg(a,b,c){let d=this.Fg.get(a);if(void 0===d)return;let e=aV(d,c,(a,b)=>a.js<b);cz(b)?d[e]=b:d.splice(e,1)}qg(a,b){0!==b.length?(this.Fg.set(a,b.filter(cz)),this.Wg.set(a,b[b.length-1].wt)):(this.Fg.delete(a),this.Wg.delete(a))}$g(){for(let a of this.Hg)0===a.pointData.Lg.size&&this.Ng.delete(this.cu.key(a.time))}jg(a){let b=-1;for(let c=0;c<this.Hg.length&&c<a.length;++c){let d=this.Hg[c],e=a[c];if(this.cu.key(d.time)!==this.cu.key(e.time)){b=c;break}e.timeWeight=d.timeWeight,cH(e.pointData,c)}if(-1===b&&this.Hg.length!==a.length&&(b=Math.min(this.Hg.length,a.length)),-1===b)return -1;for(let c=b;c<a.length;++c)cH(a[c].pointData,c);return this.cu.fillWeightsForPoints(a,b),this.Hg=a,b}tM(){if(0===this.Fg.size)return null;let a=0;return this.Fg.forEach(b=>{0!==b.length&&(a=Math.max(a,b[b.length-1].js))}),a}Yg(a,b,c){let d=this.Qg();if(-1!==b)this.Fg.forEach((b,e)=>{d.F_.set(e,{le:b,iM:e===a?c:void 0})}),this.Fg.has(a)||d.F_.set(a,{le:[],iM:c}),d.Et.sM=this.Hg,d.Et.nM=b;else{let b=this.Fg.get(a);d.F_.set(a,{le:b||[],iM:c})}return d}Qg(){return{F_:new Map,Et:{vc:this.tM()}}}}function cH(a,b){a.js=b,a.Lg.forEach(a=>{a.js=b})}function cI(a,b){return a.wt<b}function cJ(a,b){return b<a.wt}class cK{constructor(a,b,c){this.eM=!0,this.rM=!0,this.hM=!0,this.aM=[],this.lM=null,this.oM=-1,this.ee=a,this.re=b,this._M=c}kt(a){this.eM=!0,"data"===a&&(this.rM=!0),"options"===a&&(this.hM=!0)}Tt(){return this.ee.It()?(this.uM(),null===this.lM?null:this.cM):null}dM(){this.aM=this.aM.map(a=>({...a,...this.ee.ga().gh(a.wt)}))}fM(){this.lM=null}uM(){let a=this.re.Et(),b=a.N().enableConflation?a.Hc():0;b!==this.oM&&(this.rM=!0,this.oM=b),this.rM&&(this.pM(),this.rM=!1),this.hM&&(this.dM(),this.hM=!1),this.eM&&(this.vM(),this.eM=!1)}vM(){let a=this.ee.Ft(),b=this.re.Et();if(this.fM(),b.Gi()||a.Gi())return;let c=b.Ie();if(null===c||0===this.ee.qs().yh())return;let d=this.ee.Lt();null!==d&&(this.lM=function(a,b,c){let d=b.Aa(),e=b.bi(),f=aV(a,d,cI),g=aW(a,e,cJ);if(!c)return{from:f,to:g};let h=f,i=g;return f>0&&f<a.length&&a[f].wt>=d&&(h=f-1),g>0&&g<a.length&&a[g-1].wt<=e&&(i=g+1),{from:h,to:i}}(this.aM,c,this._M),this.mM(a,b,d.Wt),this.wM())}}class cL{constructor(a,b){this.gM=a,this.Ki=b}nt(a,b,c){this.gM.draw(a,this.Ki,b,c)}}class cM extends cK{constructor(a,b,c){super(a,b,!1),this.$h=c,this.cM=new cL(this.$h.renderer(),b=>{let c=a.Lt();return null===c?null:a.Ft().Nt(b,c.Wt)})}get ma(){return this.$h.conflationReducer}Oa(a){return this.$h.priceValueBuilder(a)}al(a){return this.$h.isWhitespace(a)}pM(){let a=this.ee.ga();this.aM=this.ee.Na().Dh().map(b=>({wt:b.js,_t:NaN,...a.gh(b.js),MM:b.le}))}mM(a,b){b.mc(this.aM,R(this.lM))}wM(){this.$h.update({bars:this.aM.map(cN),barSpacing:this.re.Et().ul(),visibleRange:this.lM,conflationFactor:this.re.Et().Hc()},this.ee.N())}}function cN(a){return{x:a._t,time:a.wt,originalData:a.MM,barColor:a.th}}let cO={color:"#2196f3"},cP=(a,b,c)=>new cM(a,b,I(c));function cQ(a){let b={value:a.Wt[3],time:a.Gr};return void 0!==a.Ag&&(b.customValues=a.Ag),b}function cR(a){let b=cQ(a);return void 0!==a.R&&(b.color=a.R),b}function cS(a){let b=cQ(a);return void 0!==a.vt&&(b.lineColor=a.vt),void 0!==a.eh&&(b.topColor=a.eh),void 0!==a.rh&&(b.bottomColor=a.rh),b}function cT(a){let b=cQ(a);return void 0!==a.hh&&(b.topLineColor=a.hh),void 0!==a.ah&&(b.bottomLineColor=a.ah),void 0!==a.oh&&(b.topFillColor1=a.oh),void 0!==a._h&&(b.topFillColor2=a._h),void 0!==a.uh&&(b.bottomFillColor1=a.uh),void 0!==a.dh&&(b.bottomFillColor2=a.dh),b}function cU(a){let b={open:a.Wt[0],high:a.Wt[1],low:a.Wt[2],close:a.Wt[3],time:a.Gr};return void 0!==a.Ag&&(b.customValues=a.Ag),b}function cV(a){let b=cU(a);return void 0!==a.R&&(b.color=a.R),b}function cW(a){let b=cU(a),{R:c,Ht:d,nh:e}=a;return void 0!==c&&(b.color=c),void 0!==d&&(b.borderColor=d),void 0!==e&&(b.wickColor=e),b}function cX(a){return({Area:cS,Line:cR,Baseline:cT,Histogram:cR,Bar:cV,Candlestick:cW,Custom:cY})[a]}function cY(a){let b=a.Gr;return{...a.le,time:b}}let cZ={vertLine:{color:"#9598A1",width:1,style:3,visible:!0,labelVisible:!0,labelBackgroundColor:"#131722"},horzLine:{color:"#9598A1",width:1,style:3,visible:!0,labelVisible:!0,labelBackgroundColor:"#131722"},mode:1,doNotSnapToHiddenSeriesIndices:!1},c$={vertLines:{color:"#D6DCDE",style:0,visible:!0},horzLines:{color:"#D6DCDE",style:0,visible:!0}},c_={background:{type:"solid",color:"#FFFFFF"},textColor:"#191919",fontSize:12,fontFamily:S,panes:{enableResize:!0,separatorColor:"#E0E3EB",separatorHoverColor:"rgba(178, 181, 189, 0.2)"},attributionLogo:!0,colorSpace:"srgb",colorParsers:[]},c0={autoScale:!0,mode:0,invertScale:!1,alignLabels:!0,borderVisible:!0,borderColor:"#2B2B43",entireTextOnly:!1,visible:!1,ticksVisible:!1,scaleMargins:{bottom:.1,top:.2},minimumWidth:0,ensureEdgeTickMarksVisible:!1},c1={rightOffset:0,barSpacing:6,minBarSpacing:.5,maxBarSpacing:0,fixLeftEdge:!1,fixRightEdge:!1,lockVisibleTimeRangeOnResize:!1,rightBarStaysOnScroll:!1,borderVisible:!0,borderColor:"#2B2B43",visible:!0,timeVisible:!1,secondsVisible:!0,shiftVisibleRangeOnNewBar:!0,allowShiftVisibleRangeOnWhitespaceReplacement:!1,ticksVisible:!1,uniformDistribution:!1,minimumHeight:0,allowBoldLabels:!0,ignoreWhitespaceIndices:!1,enableConflation:!1,conflationThresholdFactor:1,precomputeConflationOnInit:!1,precomputeConflationPriority:"background"};function c2(){return{addDefaultPane:!0,width:0,height:0,autoSize:!1,layout:c_,crosshair:cZ,grid:c$,overlayPriceScales:{...c0},leftPriceScale:{...c0,visible:!1},rightPriceScale:{...c0,visible:!0},timeScale:c1,localization:{locale:"",dateFormat:"dd MMM 'yy"},handleScroll:{mouseWheel:!0,pressedMouseMove:!0,horzTouchDrag:!0,vertTouchDrag:!0},handleScale:{axisPressedMouseMove:{time:!0,price:!0},axisDoubleClickReset:{time:!0,price:!0},mouseWheel:!0,pinch:!0},kineticScroll:{mouse:!1,touch:!0},trackingMode:{exitMode:1}}}class c3{constructor(a,b,c){this.Yp=a,this.bM=b,this.SM=c??0}applyOptions(a){this.Yp.Qt().md(this.bM,a,this.SM)}options(){return this.Ki().N()}width(){return aq(this.bM)?this.Yp.dg(this.bM):0}setVisibleRange(a){this.setAutoScale(!1),this.Ki().$o(new aK(a.from,a.to))}getVisibleRange(){let a,b,c=this.Ki().er();if(null===c)return null;if(this.Ki().io()){let d=this.Ki().m_(),e=bL(d);a=Number((Math.round((c=br(c,this.Ki().no())).Ze()/d)*d).toFixed(e)),b=Number((Math.round(c.Ge()/d)*d).toFixed(e))}else a=c.Ze(),b=c.Ge();return{from:a,to:b}}setAutoScale(a){this.applyOptions({autoScale:a})}Ki(){return H(this.Yp.Qt().wd(this.bM,this.SM)).Ft}}class c4{constructor(a,b,c,d){this.Yp=a,this.yt=c,this.xM=b,this.CM=d}getHeight(){return this.yt.$t()}setHeight(a){let b=this.Yp.Qt(),c=b.Gd(this.yt);b.xd(c,a)}getStretchFactor(){return this.yt.E_()}setStretchFactor(a){this.yt.A_(a),this.Yp.Qt().Ca()}paneIndex(){return this.Yp.Qt().Gd(this.yt)}moveTo(a){let b=this.paneIndex();b!==a&&(F(a>=0&&a<this.Yp.Zp().length,"Invalid pane index"),this.Yp.Qt().yd(b,a))}getSeries(){return this.yt.F_().map(a=>this.xM(a))??[]}getHTMLElement(){let a=this.Yp.Zp();return a&&0!==a.length&&a[this.paneIndex()]?a[this.paneIndex()].iv():null}attachPrimitive(a){this.yt.nl(a),a.attached&&a.attached({chart:this.CM,requestUpdate:()=>this.yt.Qt().Ca()})}detachPrimitive(a){this.yt.el(a)}priceScale(a){if(null===this.yt.V_(a))throw Error(`Cannot find price scale with id: ${a}`);return new c3(this.Yp,a,this.paneIndex())}setPreserveEmptyPane(a){this.yt.O_(a)}preserveEmptyPane(){return this.yt.N_()}addCustomSeries(a,b={},c=0){return this.CM.addCustomSeries(a,b,c)}addSeries(a,b={}){return this.CM.addSeries(a,b,this.paneIndex())}}let c5={color:"#FF0000",price:0,lineStyle:2,lineWidth:1,lineVisible:!0,axisLabelVisible:!0,title:"",axisLabelColor:"",axisLabelTextColor:""};class c6{constructor(a){this.hr=a}applyOptions(a){this.hr.cr(a)}options(){return this.hr.N()}yM(){return this.hr}}class c7{constructor(a,b,c,d,e,f){this.kM=new J,this.ee=a,this.PM=b,this.TM=c,this.cu=e,this.CM=d,this.RM=f}m(){this.kM.m()}priceFormatter(){return this.ee.Xa()}priceToCoordinate(a){let b=this.ee.Lt();return null===b?null:this.ee.Ft().Nt(a,b.Wt)}coordinateToPrice(a){let b=this.ee.Lt();return null===b?null:this.ee.Ft().Ds(a,b.Wt)}barsInLogicalRange(a){if(null===a)return null;let b=new bH(new bE(a.from,a.to)).Ru(),c=this.ee.qs();if(c.Gi())return null;let d=c.$s(b.Aa(),1),e=c.$s(b.bi(),-1),f=H(c.kh()),g=H(c.sn());if(null!==d&&null!==e&&d.js>e.js)return{barsBefore:a.from-f,barsAfter:g-a.to};let h={barsBefore:null===d||d.js===f?a.from-f:d.js-f,barsAfter:null===e||e.js===g?g-a.to:g-e.js};return null!==d&&null!==e&&(h.from=d.Gr,h.to=e.Gr),h}setData(a){this.cu,this.ee.wh(),this.PM.DM(this.ee,a),this.IM("full")}update(a,b=!1){this.ee.wh(),this.PM.VM(this.ee,a,b),this.IM("update")}pop(a=1){let b=this.PM.BM(this.ee,a);0!==b.length&&this.IM("update");let c=cX(this.seriesType());return b.map(a=>c(a))}dataByIndex(a,b){let c=this.ee.qs().$s(a,b);return null===c?null:cX(this.seriesType())(c)}data(){let a=cX(this.seriesType());return this.ee.qs().Dh().map(b=>a(b))}subscribeDataChanged(a){this.kM.i(a)}unsubscribeDataChanged(a){this.kM._(a)}applyOptions(a){this.ee.cr(a)}options(){return P(this.ee.N())}priceScale(){return this.TM.priceScale(this.ee.Ft().ol(),this.getPane().paneIndex())}createPriceLine(a){let b=K(P(c5),a);return new c6(this.ee.Da(b))}removePriceLine(a){this.ee.Ia(a.yM())}priceLines(){return this.ee.Va().map(a=>new c6(a))}seriesType(){return this.ee.wh()}lastValueData(a){let b=this.ee.Ve(a);return b.Be?{noData:!0}:{noData:!1,price:b.gt,color:b.R}}attachPrimitive(a){this.ee.nl(a),a.attached&&a.attached({chart:this.CM,series:this,requestUpdate:()=>this.ee.Qt().Ca(),horzScaleBehavior:this.cu})}detachPrimitive(a){this.ee.el(a),a.detached&&a.detached(),this.ee.Qt().Ca()}getPane(){let a=this.ee,b=H(this.ee.Qt().Kn(a));return this.RM(b)}moveToPane(a){this.ee.Qt().jd(this.ee,a)}seriesOrder(){let a=this.ee.Qt().Kn(this.ee);return null===a?-1:a.F_().indexOf(this.ee)}setSeriesOrder(a){let b=this.ee.Qt().Kn(this.ee);null!==b&&b.su(this.ee,a)}IM(a){this.kM.v()&&this.kM.p(a)}}class c8{constructor(a,b,c){this.EM=new J,this.Nu=new J,this.xw=new J,this.ns=a,this.Jh=a.Et(),this.tg=b,this.Jh.Lc().i(this.AM.bind(this)),this.Jh.zc().i(this.LM.bind(this)),this.tg.Dw().i(this.zM.bind(this)),this.cu=c}m(){this.Jh.Lc().u(this),this.Jh.zc().u(this),this.tg.Dw().u(this),this.EM.m(),this.Nu.m(),this.xw.m()}scrollPosition(){return this.Jh.Cc()}scrollToPosition(a,b){b?this.Jh.Bc(a,1e3):this.ns.Mn(a)}scrollToRealTime(){this.Jh.Vc()}getVisibleRange(){let a=this.Jh.lc();return null===a?null:{from:a.from.originalTime,to:a.to.originalTime}}setVisibleRange(a){let b={from:this.cu.convertHorzItemToInternal(a.from),to:this.cu.convertHorzItemToInternal(a.to)},c=this.Jh.cc(b);this.ns.$d(c)}getVisibleLogicalRange(){let a=this.Jh.ac();return null===a?null:{from:a.Aa(),to:a.bi()}}setVisibleLogicalRange(a){F(a.from<=a.to,"The from index cannot be after the to index."),this.ns.$d(a)}resetTimeScale(){this.ns.wn()}fitContent(){this.ns.Fc()}logicalToCoordinate(a){let b=this.ns.Et();return b.Gi()?null:b.qt(a)}coordinateToLogical(a){return this.Jh.Gi()?null:this.Jh.wc(a)}timeToIndex(a,b){let c=this.cu.convertHorzItemToInternal(a);return this.Jh.ec(c,b)}timeToCoordinate(a){let b=this.timeToIndex(a,!1);return null===b?null:this.Jh.qt(b)}coordinateToTime(a){let b=this.ns.Et(),c=b.wc(a),d=b.es(c);return null===d?null:d.originalTime}width(){return this.tg.sv().width}height(){return this.tg.sv().height}subscribeVisibleTimeRangeChange(a){this.EM.i(a)}unsubscribeVisibleTimeRangeChange(a){this.EM._(a)}subscribeVisibleLogicalRangeChange(a){this.Nu.i(a)}unsubscribeVisibleLogicalRangeChange(a){this.Nu._(a)}subscribeSizeChange(a){this.xw.i(a)}unsubscribeSizeChange(a){this.xw._(a)}applyOptions(a){this.Jh.cr(a)}options(){return{...P(this.Jh.N()),barSpacing:this.Jh.ul()}}AM(){this.EM.v()&&this.EM.p(this.getVisibleRange())}LM(){this.Nu.v()&&this.Nu.p(this.getVisibleLogicalRange())}zM(a){this.xw.p(a.width,a.height)}}function c9(a){return function(a){if(O(a.handleScale)){let b=a.handleScale;a.handleScale={axisDoubleClickReset:{time:b,price:b},axisPressedMouseMove:{time:b,price:b},mouseWheel:b,pinch:b}}else if(void 0!==a.handleScale){let{axisPressedMouseMove:b,axisDoubleClickReset:c}=a.handleScale;O(b)&&(a.handleScale.axisPressedMouseMove={time:b,price:b}),O(c)&&(a.handleScale.axisDoubleClickReset={time:c,price:c})}let b=a.handleScroll;O(b)&&(a.handleScroll={horzTouchDrag:b,vertTouchDrag:b,mouseWheel:b,pressedMouseMove:b})}(a),a}class da{constructor(a,b,c){this.OM=new Map,this.NM=new Map,this.FM=new J,this.WM=new J,this.HM=new J,this.Xc=new WeakMap,this.UM=new cG(b);const d=void 0===c?P(c2()):K(P(c2()),c9(c));this.$M=b,this.Yp=new cr(a,d,b),this.Yp.nw().i(a=>{this.FM.v()&&this.FM.p(this.qM(a()))},this),this.Yp.ew().i(a=>{this.WM.v()&&this.WM.p(this.qM(a()))},this),this.Yp.Md().i(a=>{this.HM.v()&&this.HM.p(this.qM(a()))},this);const e=this.Yp.Qt();this.jM=new c8(e,this.Yp.rg(),this.$M)}remove(){this.Yp.nw().u(this),this.Yp.ew().u(this),this.Yp.Md().u(this),this.jM.m(),this.Yp.m(),this.OM.clear(),this.NM.clear(),this.FM.m(),this.WM.m(),this.HM.m(),this.UM.m()}resize(a,b,c){this.autoSizeActive()||this.Yp.sg(a,b,c)}addCustomSeries(a,b={},c=0){let d,e=(d=I(a),{type:"Custom",isBuiltIn:!1,defaultOptions:{...cO,...d.defaultOptions()},YM:cP,KM:d});return this.ZM(e,b,c)}addSeries(a,b={},c=0){return this.ZM(a,b,c)}removeSeries(a){let b=G(this.OM.get(a)),c=this.UM.Hd(b);this.Yp.Qt().Hd(b),this.GM(c),this.OM.delete(a),this.NM.delete(b)}DM(a,b){this.GM(this.UM.Ug(a,b))}VM(a,b,c){this.GM(this.UM.Zg(a,b,c))}BM(a,b){let[c,d]=this.UM.Jg(a,b);return 0!==c.length&&this.GM(d),c}subscribeClick(a){this.FM.i(a)}unsubscribeClick(a){this.FM._(a)}subscribeCrosshairMove(a){this.HM.i(a)}unsubscribeCrosshairMove(a){this.HM._(a)}subscribeDblClick(a){this.WM.i(a)}unsubscribeDblClick(a){this.WM._(a)}priceScale(a,b=0){return new c3(this.Yp,a,b)}timeScale(){return this.jM}applyOptions(a){this.Yp.cr(c9(a))}options(){return this.Yp.N()}takeScreenshot(a=!1,b=!1){let c,d;try{b||(c=this.Yp.Qt().N().crosshair.mode,this.Yp.cr({crosshair:{mode:2}})),d=this.Yp.ug(a)}finally{b||void 0===c||this.Yp.Qt().cr({crosshair:{mode:c}})}return d}addPane(a=!1){let b=this.Yp.Qt().Xd();return b.O_(a),this.XM(b)}removePane(a){this.Yp.Qt().Sd(a)}swapPanes(a,b){this.Yp.Qt().Cd(a,b)}autoSizeActive(){return this.Yp.vg()}chartElement(){return this.Yp.hv()}panes(){return this.Yp.Qt().Xs().map(a=>this.XM(a))}paneSize(a=0){let b=this.Yp.gg(a);return{height:b.height,width:b.width}}setCrosshairPosition(a,b,c){let d=this.OM.get(c);if(void 0===d)return;let e=this.Yp.Qt().Kn(d);null!==e&&this.Yp.Qt().Ld(a,b,e)}clearCrosshairPosition(){this.Yp.Qt().zd(!0)}horzBehaviour(){return this.$M}ZM(a,b={},c=0){var d;F(void 0!==a.YM),void 0===(d=b.priceFormat)||"custom"===d.type||void 0!==d.minMove&&void 0===d.precision&&(d.precision=bL(d.minMove)),"Candlestick"===a.type&&(void 0!==b.borderColor&&(b.borderUpColor=b.borderColor,b.borderDownColor=b.borderColor),void 0!==b.wickColor&&(b.wickUpColor=b.wickColor,b.wickDownColor=b.wickColor));let e=K(P(C),P(a.defaultOptions),b),f=a.YM,g=new bd(this.Yp.Qt(),a.type,e,f,a.KM);this.Yp.Qt().Fd(g,c);let h=new c7(g,this,this,this,this.$M,a=>this.XM(a));return this.OM.set(h,g),this.NM.set(g,h),h}GM(a){let b=this.Yp.Qt();b.Od(a.Et.vc,a.Et.sM,a.Et.nM),a.F_.forEach((a,b)=>b.ht(a.le,a.iM)),b.Et().Ju(),b.Sc()}JM(a){return G(this.NM.get(a))}qM(a){let b=new Map;a.Vg.forEach((a,c)=>{let d=c.wh(),e=cX(d)(a);if("Custom"!==d){var f;F(void 0!==(f=e).open||void 0!==f.value)}else{let a=c.hl();F(!a||!1===a(e))}b.set(this.JM(c),e)});let c=void 0!==a.Ig&&this.NM.has(a.Ig)?this.JM(a.Ig):void 0;return{time:a.Gr,logical:a.js,point:a.Rg,paneIndex:a.Dg,hoveredSeries:c,hoveredObjectId:a.Bg,seriesData:b,sourceEvent:a.Eg}}XM(a){let b=this.Xc.get(a);return b||(b=new c4(this.Yp,a=>this.JM(a),a,this),this.Xc.set(a,b)),b}}function db(a,b){var c,d;let e;return c=new bZ,d=bZ.pf(b),e=new da(function(a){if(N(a)){let b=document.getElementById(a);return F(null!==b,`Cannot find element in DOM with id=${a}`),b}return a}(a),c,d),c.setOptions(e.options()),e}class dc extends cK{constructor(a,b){super(a,b,!0)}mM(a,b,c){b.mc(this.aM,R(this.lM)),a.Yo(this.aM,c,R(this.lM))}QM(a,b){return{wt:a,gt:b,_t:NaN,ut:NaN}}pM(){let a=this.ee.ga();this.aM=this.ee.Na().Dh().map(b=>{let c;if((b.jr??1)>1){let a=b.Wt[1],d=b.Wt[2],e=b.Wt[3];c=Math.abs(a-e)>Math.abs(d-e)?a:d}else c=b.Wt[3];return this.tb(b.js,c,a)})}}function dd(a,b,c,d,e,f,g){if(0===b.length||d.from>=b.length||d.to<=0)return;let{context:h,horizontalPixelRatio:i,verticalPixelRatio:j}=a,k=b[d.from],l=f(a,k),m=k;if(d.to-d.from<2){let b=e/2;h.beginPath();let c={_t:k._t-b,ut:k.ut},d={_t:k._t+b,ut:k.ut};h.moveTo(c._t*i,c.ut*j),h.lineTo(d._t*i,d.ut*j),g(a,l,c,d)}else{let e=(b,c)=>{g(a,l,m,c),h.beginPath(),l=b,m=c},n=m;h.beginPath(),h.moveTo(k._t*i,k.ut*j);for(let g=d.from+1;g<d.to;++g){let d=f(a,n=b[g]);switch(c){case 0:h.lineTo(n._t*i,n.ut*j);break;case 1:h.lineTo(n._t*i,b[g-1].ut*j),d!==l&&(e(d,n),h.lineTo(n._t*i,b[g-1].ut*j)),h.lineTo(n._t*i,n.ut*j);break;case 2:{let[a,c]=function(a,b,c){var d,e;let f=Math.max(0,b-1),g=Math.min(a.length-1,c+1);return[(d=a[b],e=df(de(a[c],a[f]),6),{_t:d._t+e._t,ut:d.ut+e.ut}),de(a[c],df(de(a[g],a[b]),6))]}(b,g-1,g);h.bezierCurveTo(a._t*i,a.ut*j,c._t*i,c.ut*j,n._t*i,n.ut*j)}}1!==c&&d!==l&&(e(d,n),h.moveTo(n._t*i,n.ut*j))}(m!==n||m===n&&1===c)&&g(a,l,m,n)}}function de(a,b){return{_t:a._t-b._t,ut:a.ut-b.ut}}function df(a,b){return{_t:a._t/b,ut:a.ut/b}}function dg(a,b){let c=a.context;c.strokeStyle=b,c.stroke()}class dh extends Z{constructor(){super(...arguments),this.rt=null}ht(a){this.rt=a}et(a){if(null===this.rt)return;let{ot:b,lt:c,ib:d,sb:e,ct:f,Zt:g,nb:h}=this.rt;if(null===c)return;let i=a.context;i.lineCap="butt",i.lineWidth=f*a.verticalPixelRatio,D(i,g),i.lineJoin="round";let j=this.eb.bind(this);void 0!==e&&dd(a,b,e,c,d,j,dg),h&&function(a,b,c,d,e){if(d.to-d.from<=0)return;let{horizontalPixelRatio:f,verticalPixelRatio:g,context:h}=a,i=null,j=Math.max(1,Math.floor(f))%2/2,k=c*g+j;for(let c=d.to-1;c>=d.from;--c){let d=b[c];if(d){let b=e(a,d);b!==i&&(h.beginPath(),null!==i&&h.fill(),h.fillStyle=b,i=b);let c=Math.round(d._t*f)+j,l=d.ut*g;h.moveTo(c,l),h.arc(c,l,k,0,2*Math.PI)}}h.fill()}(a,b,h,c,j)}}class di extends dh{eb(a,b){return b.vt}}class dj extends dc{constructor(){super(...arguments),this.cM=new di}tb(a,b,c){return{...this.QM(a,b),...c.gh(a)}}wM(){let a=this.ee.N(),b={ot:this.aM,Zt:a.lineStyle,sb:a.lineVisible?a.lineType:void 0,ct:a.lineWidth,nb:a.pointMarkersVisible?a.pointMarkersRadius||a.lineWidth/2+2:void 0,lt:this.lM,ib:this.re.Et().ul()};this.cM.ht(b)}}let dk={type:"Line",isBuiltIn:!0,defaultOptions:{color:"#2196f3",lineStyle:0,lineWidth:3,lineType:0,lineVisible:!0,crosshairMarkerVisible:!0,crosshairMarkerRadius:4,crosshairMarkerBorderColor:"",crosshairMarkerBorderWidth:2,crosshairMarkerBackgroundColor:"",lastPriceAnimation:0,pointMarkersVisible:!1},YM:(a,b)=>new dj(a,b)};class dl extends Z{constructor(){super(...arguments),this.jt=null,this.Wb=[]}ht(a){this.jt=a,this.Wb=[]}et({context:a,horizontalPixelRatio:b,verticalPixelRatio:c}){if(null===this.jt||0===this.jt.ot.length||null===this.jt.lt)return;this.Wb.length||this.Hb(b);let d=Math.max(1,Math.floor(c)),e=Math.round(this.jt.Ub*c)-Math.floor(d/2),f=e+d;for(let b=this.jt.lt.from;b<this.jt.lt.to;b++){let g,h,i=this.jt.ot[b],j=this.Wb[b-this.jt.lt.from],k=Math.round(i.ut*c);a.fillStyle=i.th,k<=e?(g=k,h=f):(g=e,h=k-Math.floor(d/2)+d),a.fillRect(j.Aa,g,j.bi-j.Aa+1,h-g)}}Hb(a){if(null===this.jt||0===this.jt.ot.length||null===this.jt.lt)return void(this.Wb=[]);let b=1>=Math.ceil(this.jt.ul*a)?0:Math.max(1,Math.floor(a)),c=Math.round(this.jt.ul*a)-b;this.Wb=Array(this.jt.lt.to-this.jt.lt.from);for(let b=this.jt.lt.from;b<this.jt.lt.to;b++){let d,e,f=this.jt.ot[b],g=Math.round(f._t*a);if(c%2){let a=(c-1)/2;d=g-a,e=g+a}else{let a=c/2;d=g-a,e=g+a-1}this.Wb[b-this.jt.lt.from]={Aa:d,bi:e,$b:g,oe:f._t*a,wt:f.wt}}for(let a=this.jt.lt.from+1;a<this.jt.lt.to;a++){let c=this.Wb[a-this.jt.lt.from],d=this.Wb[a-this.jt.lt.from-1];c.wt===d.wt+1&&c.Aa-d.bi!==b+1&&(d.$b>d.oe?d.bi=c.Aa-b-1:c.Aa=d.bi+b+1)}let d=Math.ceil(this.jt.ul*a);for(let a=this.jt.lt.from;a<this.jt.lt.to;a++){let b=this.Wb[a-this.jt.lt.from];b.bi<b.Aa&&(b.bi=b.Aa),d=Math.min(b.bi-b.Aa+1,d)}if(b>0&&d<4)for(let a=this.jt.lt.from;a<this.jt.lt.to;a++){let b=this.Wb[a-this.jt.lt.from];b.bi-b.Aa+1>d&&(b.$b>b.oe?b.bi-=1:b.Aa+=1)}}}class dm extends dc{constructor(){super(...arguments),this.cM=new dl}tb(a,b,c){return{...this.QM(a,b),...c.gh(a)}}wM(){let a={ot:this.aM,ul:this.re.Et().ul(),lt:this.lM,Ub:this.ee.Ft().Nt(this.ee.N().base,H(this.ee.Lt()).Wt)};this.cM.ht(a)}}let dn={type:"Histogram",isBuiltIn:!0,defaultOptions:{color:"#26a69a",base:0},YM:(a,b)=>new dm(a,b)};a.s(["ColorType",()=>v,"CrosshairMode",()=>p,"HistogramSeries",()=>dn,"LineSeries",()=>dk,"createChart",()=>db],27306)},92780,a=>{"use strict";var b=a.i(7807);a.s(["assetsApi",0,{list:(a,c=20,d=0)=>b.apiClient.get("/assets/",{params:{...a,limit:c,offset:d}}),get:a=>b.apiClient.get(`/assets/${a}`),getPrice:a=>b.apiClient.get(`/assets/${a}/price`),getHistorical(a,c,d,e="1d"){let f={interval:e};return c&&(f.from_date=c),d&&(f.to_date=d),b.apiClient.get(`/assets/${a}/historical`,{params:f})},getFundamentals:a=>b.apiClient.get(`/assets/${a}/fundamentals`),getNews:(a,c=10)=>b.apiClient.get(`/assets/${a}/news`,{params:{limit:c}})}])},77750,a=>{"use strict";let b=(0,a.i(78360).default)("chart-candlestick",[["path",{d:"M9 5v4",key:"14uxtq"}],["rect",{width:"4",height:"6",x:"7",y:"9",rx:"1",key:"f4fvz0"}],["path",{d:"M9 15v2",key:"r5rk32"}],["path",{d:"M17 3v2",key:"1l2re6"}],["rect",{width:"4",height:"8",x:"15",y:"5",rx:"1",key:"z38je5"}],["path",{d:"M17 13v3",key:"5l0wba"}],["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}]]);a.s(["CandlestickChart",()=>b],77750)},42738,94814,a=>{"use strict";let b,c;function d(a){return a+.5|0}let e=(a,b,c)=>Math.max(Math.min(a,c),b);function f(a){return e(d(2.55*a),0,255)}function g(a){return e(d(255*a),0,255)}function h(a){return e(d(a/2.55)/100,0,1)}function i(a){return e(d(100*a),0,100)}let j={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},k=[..."0123456789ABCDEF"],l=a=>k[15&a],m=a=>k[(240&a)>>4]+k[15&a],n=a=>(240&a)>>4==(15&a),o=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function p(a,b,c){let d=b*Math.min(c,1-c),e=(b,e=(b+a/30)%12)=>c-d*Math.max(Math.min(e-3,9-e,1),-1);return[e(0),e(8),e(4)]}function q(a,b,c){let d=(d,e=(d+a/60)%6)=>c-c*b*Math.max(Math.min(e,4-e,1),0);return[d(5),d(3),d(1)]}function r(a,b,c){let d,e=p(a,1,.5);for(b+c>1&&(d=1/(b+c),b*=d,c*=d),d=0;d<3;d++)e[d]*=1-b-c,e[d]+=b;return e}function s(a){let b,c,d,e=a.r/255,f=a.g/255,g=a.b/255,h=Math.max(e,f,g),i=Math.min(e,f,g),j=(h+i)/2;h!==i&&(d=h-i,c=j>.5?d/(2-h-i):d/(h+i),b=60*(b=e===h?(f-g)/d+6*(f<g):f===h?(g-e)/d+2:(e-f)/d+4)+.5);return[0|b,c||0,j]}function t(a,b,c,d){return(Array.isArray(b)?a(b[0],b[1],b[2]):a(b,c,d)).map(g)}function u(a){return(a%360+360)%360}let v={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},w={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"},x=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/,y=a=>a<=.0031308?12.92*a:1.055*Math.pow(a,1/2.4)-.055,z=a=>a<=.04045?a/12.92:Math.pow((a+.055)/1.055,2.4);function A(a,b,c){if(a){let d=s(a);d[b]=Math.max(0,Math.min(d[b]+d[b]*c,0===b?360:1)),a.r=(d=t(p,d,void 0,void 0))[0],a.g=d[1],a.b=d[2]}}function B(a,b){return a?Object.assign(b||{},a):a}function C(a){var b={r:0,g:0,b:0,a:255};return Array.isArray(a)?a.length>=3&&(b={r:a[0],g:a[1],b:a[2],a:255},a.length>3&&(b.a=g(a[3]))):(b=B(a,{r:0,g:0,b:0,a:1})).a=g(b.a),b}class D{constructor(a){let c;if(a instanceof D)return a;const d=typeof a;"object"===d?c=C(a):"string"===d&&(c=function(a){var b,c=a.length;return"#"===a[0]&&(4===c||5===c?b={r:255&17*j[a[1]],g:255&17*j[a[2]],b:255&17*j[a[3]],a:5===c?17*j[a[4]]:255}:(7===c||9===c)&&(b={r:j[a[1]]<<4|j[a[2]],g:j[a[3]]<<4|j[a[4]],b:j[a[5]]<<4|j[a[6]],a:9===c?j[a[7]]<<4|j[a[8]]:255})),b}(a)||function(a){b||((b=function(){let a,b,c,d,e,f={},g=Object.keys(w),h=Object.keys(v);for(a=0;a<g.length;a++){for(b=0,d=e=g[a];b<h.length;b++)c=h[b],e=e.replace(c,v[c]);c=parseInt(w[d],16),f[e]=[c>>16&255,c>>8&255,255&c]}return f}()).transparent=[0,0,0,0]);let c=b[a.toLowerCase()];return c&&{r:c[0],g:c[1],b:c[2],a:4===c.length?c[3]:255}}(a)||function(a){return"r"===a.charAt(0)?function(a){let b,c,d,g=x.exec(a),h=255;if(g){if(g[7]!==b){let a=+g[7];h=g[8]?f(a):e(255*a,0,255)}return b=+g[1],c=+g[3],d=+g[5],b=255&(g[2]?f(b):e(b,0,255)),{r:b,g:c=255&(g[4]?f(c):e(c,0,255)),b:d=255&(g[6]?f(d):e(d,0,255)),a:h}}}(a):function(a){let b,c=o.exec(a),d=255;if(!c)return;c[5]!==b&&(d=c[6]?f(+c[5]):g(+c[5]));let e=u(+c[2]),h=c[3]/100,i=c[4]/100;return{r:(b="hwb"===c[1]?t(r,e,h,i):"hsv"===c[1]?t(q,e,h,i):t(p,e,h,i))[0],g:b[1],b:b[2],a:d}}(a)}(a)),this._rgb=c,this._valid=!!c}get valid(){return this._valid}get rgb(){var a=B(this._rgb);return a&&(a.a=h(a.a)),a}set rgb(a){this._rgb=C(a)}rgbString(){var a;return this._valid?(a=this._rgb)&&(a.a<255?`rgba(${a.r}, ${a.g}, ${a.b}, ${h(a.a)})`:`rgb(${a.r}, ${a.g}, ${a.b})`):void 0}hexString(){var a,b;let c,d;return this._valid?(b=n((c=a=this._rgb).r)&&n(c.g)&&n(c.b)&&n(c.a)?l:m,a?"#"+b(a.r)+b(a.g)+b(a.b)+(d=a.a,d<255?b(d):""):void 0):void 0}hslString(){return this._valid?function(a){if(!a)return;let b=s(a),c=b[0],d=i(b[1]),e=i(b[2]);return a.a<255?`hsla(${c}, ${d}%, ${e}%, ${h(a.a)})`:`hsl(${c}, ${d}%, ${e}%)`}(this._rgb):void 0}mix(a,b){if(a){let c,d=this.rgb,e=a.rgb,f=b===c?.5:b,g=2*f-1,h=d.a-e.a,i=((g*h==-1?g:(g+h)/(1+g*h))+1)/2;c=1-i,d.r=255&i*d.r+c*e.r+.5,d.g=255&i*d.g+c*e.g+.5,d.b=255&i*d.b+c*e.b+.5,d.a=f*d.a+(1-f)*e.a,this.rgb=d}return this}interpolate(a,b){var c,d;let e,f,i;return a&&(this._rgb=(c=this._rgb,d=a._rgb,e=z(h(c.r)),f=z(h(c.g)),i=z(h(c.b)),{r:g(y(e+b*(z(h(d.r))-e))),g:g(y(f+b*(z(h(d.g))-f))),b:g(y(i+b*(z(h(d.b))-i))),a:c.a+b*(d.a-c.a)})),this}clone(){return new D(this.rgb)}alpha(a){return this._rgb.a=g(a),this}clearer(a){let b=this._rgb;return b.a*=1-a,this}greyscale(){let a=this._rgb,b=d(.3*a.r+.59*a.g+.11*a.b);return a.r=a.g=a.b=b,this}opaquer(a){let b=this._rgb;return b.a*=1+a,this}negate(){let a=this._rgb;return a.r=255-a.r,a.g=255-a.g,a.b=255-a.b,this}lighten(a){return A(this._rgb,2,a),this}darken(a){return A(this._rgb,2,-a),this}saturate(a){return A(this._rgb,1,a),this}desaturate(a){return A(this._rgb,1,-a),this}rotate(a){var b,c;return b=this._rgb,(c=s(b))[0]=u(c[0]+a),b.r=(c=t(p,c,void 0,void 0))[0],b.g=c[1],b.b=c[2],this}}function E(){}let F=(c=0,()=>c++);function G(a){return null==a}function H(a){if(Array.isArray&&Array.isArray(a))return!0;let b=Object.prototype.toString.call(a);return"[object"===b.slice(0,7)&&"Array]"===b.slice(-6)}function I(a){return null!==a&&"[object Object]"===Object.prototype.toString.call(a)}function J(a){return("number"==typeof a||a instanceof Number)&&isFinite(+a)}function K(a,b){return J(a)?a:b}function L(a,b){return void 0===a?b:a}let M=(a,b)=>"string"==typeof a&&a.endsWith("%")?parseFloat(a)/100*b:+a;function N(a,b,c){if(a&&"function"==typeof a.call)return a.apply(c,b)}function O(a,b,c,d){let e,f,g;if(H(a))if(f=a.length,d)for(e=f-1;e>=0;e--)b.call(c,a[e],e);else for(e=0;e<f;e++)b.call(c,a[e],e);else if(I(a))for(e=0,f=(g=Object.keys(a)).length;e<f;e++)b.call(c,a[g[e]],g[e])}function P(a,b){let c,d,e,f;if(!a||!b||a.length!==b.length)return!1;for(c=0,d=a.length;c<d;++c)if(e=a[c],f=b[c],e.datasetIndex!==f.datasetIndex||e.index!==f.index)return!1;return!0}function Q(a){if(H(a))return a.map(Q);if(I(a)){let b=Object.create(null),c=Object.keys(a),d=c.length,e=0;for(;e<d;++e)b[c[e]]=Q(a[c[e]]);return b}return a}function R(a){return -1===["__proto__","prototype","constructor"].indexOf(a)}function S(a,b,c,d){if(!R(a))return;let e=b[a],f=c[a];I(e)&&I(f)?T(e,f,d):b[a]=Q(f)}function T(a,b,c){let d,e=H(b)?b:[b],f=e.length;if(!I(a))return a;let g=(c=c||{}).merger||S;for(let b=0;b<f;++b){if(!I(d=e[b]))continue;let f=Object.keys(d);for(let b=0,e=f.length;b<e;++b)g(f[b],a,d,c)}return a}function U(a,b){return T(a,b,{merger:V})}function V(a,b,c){if(!R(a))return;let d=b[a],e=c[a];I(d)&&I(e)?U(d,e):Object.prototype.hasOwnProperty.call(b,a)||(b[a]=Q(e))}let W={"":a=>a,x:a=>a.x,y:a=>a.y};function X(a,b){let c;return(W[b]||(W[b]=(c=function(a){let b=a.split("."),c=[],d="";for(let a of b)(d+=a).endsWith("\\")?d=d.slice(0,-1)+".":(c.push(d),d="");return c}(b),a=>{for(let b of c){if(""===b)break;a=a&&a[b]}return a})))(a)}function Y(a){return a.charAt(0).toUpperCase()+a.slice(1)}let Z=a=>void 0!==a,$=a=>"function"==typeof a,_=(a,b)=>{if(a.size!==b.size)return!1;for(let c of a)if(!b.has(c))return!1;return!0},aa=Math.PI,ab=2*aa,ac=ab+aa,ad=aa/180,ae=aa/2,af=aa/4,ag=2*aa/3,ah=Math.log10,ai=Math.sign;function aj(a,b,c){return Math.abs(a-b)<c}function ak(a){let b=Math.round(a),c=Math.pow(10,Math.floor(ah(a=aj(a,b,a/1e3)?b:a))),d=a/c;return(d<=1?1:d<=2?2:d<=5?5:10)*c}function al(a){return"symbol"!=typeof a&&("object"!=typeof a||null===a||!!(Symbol.toPrimitive in a||"toString"in a||"valueOf"in a))&&!isNaN(parseFloat(a))&&isFinite(a)}function am(a,b,c){let d,e,f;for(d=0,e=a.length;d<e;d++)isNaN(f=a[d][c])||(b.min=Math.min(b.min,f),b.max=Math.max(b.max,f))}function an(a){return aa/180*a}function ao(a){if(!J(a))return;let b=1,c=0;for(;Math.round(a*b)/b!==a;)b*=10,c++;return c}function ap(a,b){let c=b.x-a.x,d=b.y-a.y,e=Math.sqrt(c*c+d*d),f=Math.atan2(d,c);return f<-.5*aa&&(f+=ab),{angle:f,distance:e}}function aq(a,b){return Math.sqrt(Math.pow(b.x-a.x,2)+Math.pow(b.y-a.y,2))}function ar(a,b){return(a-b+ac)%ab-aa}function as(a){return(a%ab+ab)%ab}function at(a,b,c,d){let e=as(a),f=as(b),g=as(c),h=as(f-e),i=as(g-e),j=as(e-f),k=as(e-g);return e===f||e===g||d&&f===g||h>i&&j<k}function au(a,b,c){return Math.max(b,Math.min(c,a))}function av(a,b,c,d=1e-6){return a>=Math.min(b,c)-d&&a<=Math.max(b,c)+d}function aw(a,b,c){let d;c=c||(c=>a[c]<b);let e=a.length-1,f=0;for(;e-f>1;)c(d=f+e>>1)?f=d:e=d;return{lo:f,hi:e}}let ax=(a,b,c,d)=>aw(a,c,d?d=>{let e=a[d][b];return e<c||e===c&&a[d+1][b]===c}:d=>a[d][b]<c),ay=(a,b,c)=>aw(a,c,d=>a[d][b]>=c),az=["push","pop","shift","splice","unshift"];function aA(a,b){let c=a._chartjs;if(!c)return;let d=c.listeners,e=d.indexOf(b);-1!==e&&d.splice(e,1),d.length>0||(az.forEach(b=>{delete a[b]}),delete a._chartjs)}function aB(a){let b=new Set(a);return b.size===a.length?a:Array.from(b)}let aC=function(a){return a()},aD=a=>"start"===a?"left":"end"===a?"right":"center",aE=(a,b,c)=>"start"===a?b:"end"===a?c:(b+c)/2;function aF(a,b,c){let d=b.length,e=0,f=d;if(a._sorted){let{iScale:g,vScale:h,_parsed:i}=a,j=a.dataset&&a.dataset.options?a.dataset.options.spanGaps:null,k=g.axis,{min:l,max:m,minDefined:n,maxDefined:o}=g.getUserBounds();if(n){if(e=Math.min(ax(i,k,l).lo,c?d:ax(b,k,g.getPixelForValue(l)).lo),j){let a=i.slice(0,e+1).reverse().findIndex(a=>!G(a[h.axis]));e-=Math.max(0,a)}e=au(e,0,d-1)}if(o){let a=Math.max(ax(i,g.axis,m,!0).hi+1,c?0:ax(b,k,g.getPixelForValue(m),!0).hi+1);if(j){let b=i.slice(a-1).findIndex(a=>!G(a[h.axis]));a+=Math.max(0,b)}f=au(a,e,d)-e}else f=d-e}return{start:e,count:f}}function aG(a){let{xScale:b,yScale:c,_scaleRanges:d}=a,e={xmin:b.min,xmax:b.max,ymin:c.min,ymax:c.max};if(!d)return a._scaleRanges=e,!0;let f=d.xmin!==b.min||d.xmax!==b.max||d.ymin!==c.min||d.ymax!==c.max;return Object.assign(d,e),f}let aH=a=>0===a||1===a,aI=(a,b,c)=>-(Math.pow(2,10*(a-=1))*Math.sin((a-b)*ab/c)),aJ=(a,b,c)=>Math.pow(2,-10*a)*Math.sin((a-b)*ab/c)+1,aK={linear:a=>a,easeInQuad:a=>a*a,easeOutQuad:a=>-a*(a-2),easeInOutQuad:a=>(a/=.5)<1?.5*a*a:-.5*(--a*(a-2)-1),easeInCubic:a=>a*a*a,easeOutCubic:a=>(a-=1)*a*a+1,easeInOutCubic:a=>(a/=.5)<1?.5*a*a*a:.5*((a-=2)*a*a+2),easeInQuart:a=>a*a*a*a,easeOutQuart:a=>-((a-=1)*a*a*a-1),easeInOutQuart:a=>(a/=.5)<1?.5*a*a*a*a:-.5*((a-=2)*a*a*a-2),easeInQuint:a=>a*a*a*a*a,easeOutQuint:a=>(a-=1)*a*a*a*a+1,easeInOutQuint:a=>(a/=.5)<1?.5*a*a*a*a*a:.5*((a-=2)*a*a*a*a+2),easeInSine:a=>-Math.cos(a*ae)+1,easeOutSine:a=>Math.sin(a*ae),easeInOutSine:a=>-.5*(Math.cos(aa*a)-1),easeInExpo:a=>0===a?0:Math.pow(2,10*(a-1)),easeOutExpo:a=>1===a?1:-Math.pow(2,-10*a)+1,easeInOutExpo:a=>aH(a)?a:a<.5?.5*Math.pow(2,10*(2*a-1)):.5*(-Math.pow(2,-10*(2*a-1))+2),easeInCirc:a=>a>=1?a:-(Math.sqrt(1-a*a)-1),easeOutCirc:a=>Math.sqrt(1-(a-=1)*a),easeInOutCirc:a=>(a/=.5)<1?-.5*(Math.sqrt(1-a*a)-1):.5*(Math.sqrt(1-(a-=2)*a)+1),easeInElastic:a=>aH(a)?a:aI(a,.075,.3),easeOutElastic:a=>aH(a)?a:aJ(a,.075,.3),easeInOutElastic:a=>aH(a)?a:a<.5?.5*aI(2*a,.1125,.45):.5+.5*aJ(2*a-1,.1125,.45),easeInBack:a=>a*a*(2.70158*a-1.70158),easeOutBack:a=>(a-=1)*a*(2.70158*a+1.70158)+1,easeInOutBack(a){let b=1.70158;return(a/=.5)<1?.5*(a*a*(((b*=1.525)+1)*a-b)):.5*((a-=2)*a*(((b*=1.525)+1)*a+b)+2)},easeInBounce:a=>1-aK.easeOutBounce(1-a),easeOutBounce:a=>a<.36363636363636365?7.5625*a*a:a<.7272727272727273?7.5625*(a-=.5454545454545454)*a+.75:a<.9090909090909091?7.5625*(a-=.8181818181818182)*a+.9375:7.5625*(a-=.9545454545454546)*a+.984375,easeInOutBounce:a=>a<.5?.5*aK.easeInBounce(2*a):.5*aK.easeOutBounce(2*a-1)+.5};function aL(a){if(a&&"object"==typeof a){let b=a.toString();return"[object CanvasPattern]"===b||"[object CanvasGradient]"===b}return!1}function aM(a){return aL(a)?a:new D(a)}function aN(a){return aL(a)?a:new D(a).saturate(.5).darken(.1).hexString()}let aO=["x","y","borderWidth","radius","tension"],aP=["color","borderColor","backgroundColor"],aQ=new Map;function aR(a,b,c){var d;let e,f;return(e=b+JSON.stringify(d=(d=c)||{}),!(f=aQ.get(e))&&(f=new Intl.NumberFormat(b,d),aQ.set(e,f)),f).format(a)}let aS={values:a=>H(a)?a:""+a,numeric(a,b,c){let d;if(0===a)return"0";let e=this.chart.options.locale,f=a;if(c.length>1){var g,h;let b,e=Math.max(Math.abs(c[0].value),Math.abs(c[c.length-1].value));(e<1e-4||e>1e15)&&(d="scientific"),g=a,Math.abs(b=(h=c).length>3?h[2].value-h[1].value:h[1].value-h[0].value)>=1&&g!==Math.floor(g)&&(b=g-Math.floor(g)),f=b}let i=ah(Math.abs(f)),j=isNaN(i)?1:Math.max(Math.min(-1*Math.floor(i),20),0),k={notation:d,minimumFractionDigits:j,maximumFractionDigits:j};return Object.assign(k,this.options.ticks.format),aR(a,e,k)},logarithmic(a,b,c){return 0===a?"0":[1,2,3,5,10,15].includes(c[b].significand||a/Math.pow(10,Math.floor(ah(a))))||b>.8*c.length?aS.numeric.call(this,a,b,c):""}},aT=Object.create(null),aU=Object.create(null);function aV(a,b){if(!b)return a;let c=b.split(".");for(let b=0,d=c.length;b<d;++b){let d=c[b];a=a[d]||(a[d]=Object.create(null))}return a}function aW(a,b,c){return"string"==typeof b?T(aV(a,b),c):T(aV(a,""),b)}var aX=new class{constructor(a,b){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=a=>a.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(a,b)=>aN(b.backgroundColor),this.hoverBorderColor=(a,b)=>aN(b.borderColor),this.hoverColor=(a,b)=>aN(b.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(a),this.apply(b)}set(a,b){return aW(this,a,b)}get(a){return aV(this,a)}describe(a,b){return aW(aU,a,b)}override(a,b){return aW(aT,a,b)}route(a,b,c,d){let e=aV(this,a),f=aV(this,c),g="_"+b;Object.defineProperties(e,{[g]:{value:e[b],writable:!0},[b]:{enumerable:!0,get(){let a=this[g],b=f[d];return I(a)?Object.assign({},b,a):L(a,b)},set(a){this[g]=a}}})}apply(a){a.forEach(a=>a(this))}}({_scriptable:a=>!a.startsWith("on"),_indexable:a=>"events"!==a,hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[function(a){a.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),a.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:a=>"onProgress"!==a&&"onComplete"!==a&&"fn"!==a}),a.set("animations",{colors:{type:"color",properties:aP},numbers:{type:"number",properties:aO}}),a.describe("animations",{_fallback:"animation"}),a.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:a=>0|a}}}})},function(a){a.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})},function(a){a.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(a,b)=>b.lineWidth,tickColor:(a,b)=>b.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:aS.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),a.route("scale.ticks","color","","color"),a.route("scale.grid","color","","borderColor"),a.route("scale.border","color","","borderColor"),a.route("scale.title","color","","color"),a.describe("scale",{_fallback:!1,_scriptable:a=>!a.startsWith("before")&&!a.startsWith("after")&&"callback"!==a&&"parser"!==a,_indexable:a=>"borderDash"!==a&&"tickBorderDash"!==a&&"dash"!==a}),a.describe("scales",{_fallback:"scale"}),a.describe("scale.ticks",{_scriptable:a=>"backdropPadding"!==a&&"callback"!==a,_indexable:a=>"backdropPadding"!==a})}]);function aY(a,b,c,d,e){let f=b[e];return f||(f=b[e]=a.measureText(e).width,c.push(e)),f>d&&(d=f),d}function aZ(a,b,c){let d=a.currentDevicePixelRatio,e=0!==c?Math.max(c/2,.5):0;return Math.round((b-e)*d)/d+e}function a$(a,b){(b||a)&&((b=b||a.getContext("2d")).save(),b.resetTransform(),b.clearRect(0,0,a.width,a.height),b.restore())}function a_(a,b,c,d){a0(a,b,c,d,null)}function a0(a,b,c,d,e){let f,g,h,i,j,k,l,m,n=b.pointStyle,o=b.rotation,p=b.radius,q=(o||0)*ad;if(n&&"object"==typeof n&&("[object HTMLImageElement]"===(f=n.toString())||"[object HTMLCanvasElement]"===f)){a.save(),a.translate(c,d),a.rotate(q),a.drawImage(n,-n.width/2,-n.height/2,n.width,n.height),a.restore();return}if(!isNaN(p)&&!(p<=0)){switch(a.beginPath(),n){default:e?a.ellipse(c,d,e/2,p,0,0,ab):a.arc(c,d,p,0,ab),a.closePath();break;case"triangle":k=e?e/2:p,a.moveTo(c+Math.sin(q)*k,d-Math.cos(q)*p),q+=ag,a.lineTo(c+Math.sin(q)*k,d-Math.cos(q)*p),q+=ag,a.lineTo(c+Math.sin(q)*k,d-Math.cos(q)*p),a.closePath();break;case"rectRounded":j=.516*p,g=Math.cos(q+af)*(i=p-j),l=Math.cos(q+af)*(e?e/2-j:i),h=Math.sin(q+af)*i,m=Math.sin(q+af)*(e?e/2-j:i),a.arc(c-l,d-h,j,q-aa,q-ae),a.arc(c+m,d-g,j,q-ae,q),a.arc(c+l,d+h,j,q,q+ae),a.arc(c-m,d+g,j,q+ae,q+aa),a.closePath();break;case"rect":if(!o){i=Math.SQRT1_2*p,k=e?e/2:i,a.rect(c-k,d-i,2*k,2*i);break}q+=af;case"rectRot":l=Math.cos(q)*(e?e/2:p),g=Math.cos(q)*p,h=Math.sin(q)*p,m=Math.sin(q)*(e?e/2:p),a.moveTo(c-l,d-h),a.lineTo(c+m,d-g),a.lineTo(c+l,d+h),a.lineTo(c-m,d+g),a.closePath();break;case"crossRot":q+=af;case"cross":l=Math.cos(q)*(e?e/2:p),g=Math.cos(q)*p,h=Math.sin(q)*p,m=Math.sin(q)*(e?e/2:p),a.moveTo(c-l,d-h),a.lineTo(c+l,d+h),a.moveTo(c+m,d-g),a.lineTo(c-m,d+g);break;case"star":l=Math.cos(q)*(e?e/2:p),g=Math.cos(q)*p,h=Math.sin(q)*p,m=Math.sin(q)*(e?e/2:p),a.moveTo(c-l,d-h),a.lineTo(c+l,d+h),a.moveTo(c+m,d-g),a.lineTo(c-m,d+g),q+=af,l=Math.cos(q)*(e?e/2:p),g=Math.cos(q)*p,h=Math.sin(q)*p,m=Math.sin(q)*(e?e/2:p),a.moveTo(c-l,d-h),a.lineTo(c+l,d+h),a.moveTo(c+m,d-g),a.lineTo(c-m,d+g);break;case"line":g=e?e/2:Math.cos(q)*p,h=Math.sin(q)*p,a.moveTo(c-g,d-h),a.lineTo(c+g,d+h);break;case"dash":a.moveTo(c,d),a.lineTo(c+Math.cos(q)*(e?e/2:p),d+Math.sin(q)*p);break;case!1:a.closePath()}a.fill(),b.borderWidth>0&&a.stroke()}}function a1(a,b,c){return c=c||.5,!b||a&&a.x>b.left-c&&a.x<b.right+c&&a.y>b.top-c&&a.y<b.bottom+c}function a2(a,b){a.save(),a.beginPath(),a.rect(b.left,b.top,b.right-b.left,b.bottom-b.top),a.clip()}function a3(a){a.restore()}function a4(a,b,c,d,e){if(!b)return a.lineTo(c.x,c.y);if("middle"===e){let d=(b.x+c.x)/2;a.lineTo(d,b.y),a.lineTo(d,c.y)}else"after"===e!=!!d?a.lineTo(b.x,c.y):a.lineTo(c.x,b.y);a.lineTo(c.x,c.y)}function a5(a,b,c,d){if(!b)return a.lineTo(c.x,c.y);a.bezierCurveTo(d?b.cp1x:b.cp2x,d?b.cp1y:b.cp2y,d?c.cp2x:c.cp1x,d?c.cp2y:c.cp1y,c.x,c.y)}function a6(a,b,c,d,e,f={}){let g,h,i=H(b)?b:[b],j=f.strokeWidth>0&&""!==f.strokeColor;for(a.save(),a.font=e.string,f.translation&&a.translate(f.translation[0],f.translation[1]),G(f.rotation)||a.rotate(f.rotation),f.color&&(a.fillStyle=f.color),f.textAlign&&(a.textAlign=f.textAlign),f.textBaseline&&(a.textBaseline=f.textBaseline),g=0;g<i.length;++g)h=i[g],f.backdrop&&function(a,b){let c=a.fillStyle;a.fillStyle=b.color,a.fillRect(b.left,b.top,b.width,b.height),a.fillStyle=c}(a,f.backdrop),j&&(f.strokeColor&&(a.strokeStyle=f.strokeColor),G(f.strokeWidth)||(a.lineWidth=f.strokeWidth),a.strokeText(h,c,d,f.maxWidth)),a.fillText(h,c,d,f.maxWidth),function(a,b,c,d,e){if(e.strikethrough||e.underline){let f=a.measureText(d),g=b-f.actualBoundingBoxLeft,h=b+f.actualBoundingBoxRight,i=c-f.actualBoundingBoxAscent,j=c+f.actualBoundingBoxDescent,k=e.strikethrough?(i+j)/2:j;a.strokeStyle=a.fillStyle,a.beginPath(),a.lineWidth=e.decorationWidth||2,a.moveTo(g,k),a.lineTo(h,k),a.stroke()}}(a,c,d,h,f),d+=Number(e.lineHeight);a.restore()}function a7(a,b){let{x:c,y:d,w:e,h:f,radius:g}=b;a.arc(c+g.topLeft,d+g.topLeft,g.topLeft,1.5*aa,aa,!0),a.lineTo(c,d+f-g.bottomLeft),a.arc(c+g.bottomLeft,d+f-g.bottomLeft,g.bottomLeft,aa,ae,!0),a.lineTo(c+e-g.bottomRight,d+f),a.arc(c+e-g.bottomRight,d+f-g.bottomRight,g.bottomRight,ae,0,!0),a.lineTo(c+e,d+g.topRight),a.arc(c+e-g.topRight,d+g.topRight,g.topRight,0,-ae,!0),a.lineTo(c+g.topLeft,d)}let a8=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,a9=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/,ba=a=>+a||0;function bb(a,b){let c={},d=I(b),e=d?Object.keys(b):b,f=I(a)?d?c=>L(a[c],a[b[c]]):b=>a[b]:()=>a;for(let a of e)c[a]=ba(f(a));return c}function bc(a){return bb(a,{top:"y",right:"x",bottom:"y",left:"x"})}function bd(a){return bb(a,["topLeft","topRight","bottomLeft","bottomRight"])}function be(a){let b=bc(a);return b.width=b.left+b.right,b.height=b.top+b.bottom,b}function bf(a,b){a=a||{},b=b||aX.font;let c=L(a.size,b.size);"string"==typeof c&&(c=parseInt(c,10));let d=L(a.style,b.style);d&&!(""+d).match(a9)&&(console.warn('Invalid font style specified: "'+d+'"'),d=void 0);let e={family:L(a.family,b.family),lineHeight:function(a,b){let c=(""+a).match(a8);if(!c||"normal"===c[1])return 1.2*b;switch(a=+c[2],c[3]){case"px":return a;case"%":a/=100}return b*a}(L(a.lineHeight,b.lineHeight),c),size:c,style:d,weight:L(a.weight,b.weight),string:""};return e.string=!e||G(e.size)||G(e.family)?null:(e.style?e.style+" ":"")+(e.weight?e.weight+" ":"")+e.size+"px "+e.family,e}function bg(a,b,c,d){let e,f,g,h=!0;for(e=0,f=a.length;e<f;++e)if(void 0!==(g=a[e])&&(void 0!==b&&"function"==typeof g&&(g=g(b),h=!1),void 0!==c&&H(g)&&(g=g[c%g.length],h=!1),void 0!==g))return d&&!h&&(d.cacheable=!1),g}function bh(a,b){return Object.assign(Object.create(a),b)}function bi(a,b=[""],c,d,e=()=>a[0]){let f=c||a;return void 0===d&&(d=br("_fallback",a)),new Proxy({[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:a,_rootScopes:f,_fallback:d,_getTarget:e,override:c=>bi([c,...a],b,f,d)},{deleteProperty:(b,c)=>(delete b[c],delete b._keys,delete a[0][c],!0),get:(c,d)=>bn(c,d,()=>(function(a,b,c,d){let e;for(let f of b)if(void 0!==(e=br(bl(f,a),c)))return bm(a,e)?bp(c,d,a,e):e})(d,b,a,c)),getOwnPropertyDescriptor:(a,b)=>Reflect.getOwnPropertyDescriptor(a._scopes[0],b),getPrototypeOf:()=>Reflect.getPrototypeOf(a[0]),has:(a,b)=>bs(a).includes(b),ownKeys:a=>bs(a),set(a,b,c){let d=a._storage||(a._storage=e());return a[b]=d[b]=c,delete a._keys,!0}})}function bj(a,b,c,d){return new Proxy({_cacheable:!1,_proxy:a,_context:b,_subProxy:c,_stack:new Set,_descriptors:bk(a,d),setContext:b=>bj(a,b,c,d),override:e=>bj(a.override(e),b,c,d)},{deleteProperty:(b,c)=>(delete b[c],delete a[c],!0),get:(a,b,c)=>bn(a,b,()=>(function(a,b,c){let{_proxy:d,_context:e,_subProxy:f,_descriptors:g}=a,h=d[b];return $(h)&&g.isScriptable(b)&&(h=function(a,b,c,d){let{_proxy:e,_context:f,_subProxy:g,_stack:h}=c;if(h.has(a))throw Error("Recursion detected: "+Array.from(h).join("->")+"->"+a);h.add(a);let i=b(f,g||d);return h.delete(a),bm(a,i)&&(i=bp(e._scopes,e,a,i)),i}(b,h,a,c)),H(h)&&h.length&&(h=function(a,b,c,d){let{_proxy:e,_context:f,_subProxy:g,_descriptors:h}=c;if(void 0!==f.index&&d(a))return b[f.index%b.length];if(I(b[0])){let c=b,d=e._scopes.filter(a=>a!==c);for(let i of(b=[],c)){let c=bp(d,e,a,i);b.push(bj(c,f,g&&g[a],h))}}return b}(b,h,a,g.isIndexable)),bm(b,h)&&(h=bj(h,e,f&&f[b],g)),h})(a,b,c)),getOwnPropertyDescriptor:(b,c)=>b._descriptors.allKeys?Reflect.has(a,c)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(a,c),getPrototypeOf:()=>Reflect.getPrototypeOf(a),has:(b,c)=>Reflect.has(a,c),ownKeys:()=>Reflect.ownKeys(a),set:(b,c,d)=>(a[c]=d,delete b[c],!0)})}function bk(a,b={scriptable:!0,indexable:!0}){let{_scriptable:c=b.scriptable,_indexable:d=b.indexable,_allKeys:e=b.allKeys}=a;return{allKeys:e,scriptable:c,indexable:d,isScriptable:$(c)?c:()=>c,isIndexable:$(d)?d:()=>d}}let bl=(a,b)=>a?a+Y(b):b,bm=(a,b)=>I(b)&&"adapters"!==a&&(null===Object.getPrototypeOf(b)||b.constructor===Object);function bn(a,b,c){if(Object.prototype.hasOwnProperty.call(a,b)||"constructor"===b)return a[b];let d=c();return a[b]=d,d}let bo=(a,b)=>!0===a?b:"string"==typeof a?X(b,a):void 0;function bp(a,b,c,d){var e;let f=b._rootScopes,g=(e=b._fallback,$(e)?e(c,d):e),h=[...a,...f],i=new Set;i.add(d);let j=bq(i,h,c,g||c,d);return null!==j&&(void 0===g||g===c||null!==(j=bq(i,h,g,j,d)))&&bi(Array.from(i),[""],f,g,()=>{var a,e,f;let g,h;return a=b,e=c,f=d,e in(g=a._getTarget())||(g[e]={}),H(h=g[e])&&I(f)?f:h||{}})}function bq(a,b,c,d,e){for(;c;)c=function(a,b,c,d,e){for(let g of b){let b=bo(c,g);if(b){var f;a.add(b);let g=(f=b._fallback,$(f)?f(c,e):f);if(void 0!==g&&g!==c&&g!==d)return g}else if(!1===b&&void 0!==d&&c!==d)return null}return!1}(a,b,c,d,e);return c}function br(a,b){for(let c of b){if(!c)continue;let b=c[a];if(void 0!==b)return b}}function bs(a){let b=a._keys;return b||(b=a._keys=function(a){let b=new Set;for(let c of a)for(let a of Object.keys(c).filter(a=>!a.startsWith("_")))b.add(a);return Array.from(b)}(a._scopes)),b}function bt(a,b,c,d){let e,f,g,{iScale:h}=a,{key:i="r"}=this._parsing,j=Array(d);for(e=0;e<d;++e)g=b[f=e+c],j[e]={r:h.parse(X(g,i),f)};return j}let bu=Number.EPSILON||1e-14,bv=(a,b)=>b<a.length&&!a[b].skip&&a[b],bw=a=>"x"===a?"y":"x";function bx(a,b,c){return Math.max(Math.min(a,c),b)}let by=a=>a.ownerDocument.defaultView.getComputedStyle(a,null),bz=["top","right","bottom","left"];function bA(a,b,c){let d={};c=c?"-"+c:"";for(let e=0;e<4;e++){let f=bz[e];d[f]=parseFloat(a[b+"-"+f+c])||0}return d.width=d.left+d.right,d.height=d.top+d.bottom,d}function bB(a,b){if("native"in a)return a;let{canvas:c,currentDevicePixelRatio:d}=b,e=by(c),f="border-box"===e.boxSizing,g=bA(e,"padding"),h=bA(e,"border","width"),{x:i,y:j,box:k}=function(a,b){let c,d,e,f=a.touches,g=f&&f.length?f[0]:a,{offsetX:h,offsetY:i}=g,j=!1;if(e=a.target,(h>0||i>0)&&(!e||!e.shadowRoot))c=h,d=i;else{let a=b.getBoundingClientRect();c=g.clientX-a.left,d=g.clientY-a.top,j=!0}return{x:c,y:d,box:j}}(a,c),l=g.left+(k&&h.left),m=g.top+(k&&h.top),{width:n,height:o}=b;return f&&(n-=g.width+h.width,o-=g.height+h.height),{x:Math.round((i-l)/n*c.width/d),y:Math.round((j-m)/o*c.height/d)}}let bC=a=>Math.round(10*a)/10;function bD(a,b,c){let d=b||1,e=bC(a.height*d),f=bC(a.width*d);a.height=bC(a.height),a.width=bC(a.width);let g=a.canvas;return g.style&&(c||!g.style.height&&!g.style.width)&&(g.style.height=`${a.height}px`,g.style.width=`${a.width}px`),(a.currentDevicePixelRatio!==d||g.height!==e||g.width!==f)&&(a.currentDevicePixelRatio=d,g.height=e,g.width=f,a.ctx.setTransform(d,0,0,d,0,0),!0)}function bE(a,b,c,d){return{x:a.x+c*(b.x-a.x),y:a.y+c*(b.y-a.y)}}function bF(a,b,c,d){return{x:a.x+c*(b.x-a.x),y:"middle"===d?c<.5?a.y:b.y:"after"===d?c<1?a.y:b.y:c>0?b.y:a.y}}function bG(a,b,c,d){let e={x:a.cp2x,y:a.cp2y},f={x:b.cp1x,y:b.cp1y},g=bE(a,e,c),h=bE(e,f,c),i=bE(f,b,c),j=bE(g,h,c),k=bE(h,i,c);return bE(j,k,c)}function bH(a,b,c){var d;return a?(d=c,{x:a=>b+b+d-a,setWidth(a){d=a},textAlign:a=>"center"===a?a:"right"===a?"left":"right",xPlus:(a,b)=>a-b,leftForLtr:(a,b)=>a-b}):{x:a=>a,setWidth(a){},textAlign:a=>a,xPlus:(a,b)=>a+b,leftForLtr:(a,b)=>a}}function bI(a,b){let c,d;("ltr"===b||"rtl"===b)&&(d=[(c=a.canvas.style).getPropertyValue("direction"),c.getPropertyPriority("direction")],c.setProperty("direction",b,"important"),a.prevTextDirection=d)}function bJ(a,b){void 0!==b&&(delete a.prevTextDirection,a.canvas.style.setProperty("direction",b[0],b[1]))}function bK(a){return"angle"===a?{between:at,compare:ar,normalize:as}:{between:av,compare:(a,b)=>a-b,normalize:a=>a}}function bL({start:a,end:b,count:c,loop:d,style:e}){return{start:a%c,end:b%c,loop:d&&(b-a+1)%c==0,style:e}}function bM(a,b,c){let d,e,f;if(!c)return[a];let{property:g,start:h,end:i}=c,j=b.length,{compare:k,between:l,normalize:m}=bK(g),{start:n,end:o,loop:p,style:q}=function(a,b,c){let d,{property:e,start:f,end:g}=c,{between:h,normalize:i}=bK(e),j=b.length,{start:k,end:l,loop:m}=a;if(m){for(k+=j,l+=j,d=0;d<j&&h(i(b[k%j][e]),f,g);++d)k--,l--;k%=j,l%=j}return l<k&&(l+=j),{start:k,end:l,loop:m,style:a.style}}(a,b,c),r=[],s=!1,t=null,u=()=>s||l(h,f,d)&&0!==k(h,f),v=()=>!s||0===k(i,d)||l(i,f,d);for(let a=n,c=n;a<=o;++a)(e=b[a%j]).skip||(d=m(e[g]))!==f&&(s=l(d,h,i),null===t&&u()&&(t=0===k(d,h)?a:c),null!==t&&v()&&(r.push(bL({start:t,end:a,loop:p,count:j,style:q})),t=null),c=a,f=d);return null!==t&&r.push(bL({start:t,end:o,loop:p,count:j,style:q})),r}function bN(a,b){let c=[],d=a.segments;for(let e=0;e<d.length;e++){let f=bM(d[e],a.points,b);f.length&&c.push(...f)}return c}function bO(a,b,c,d){return d&&d.setContext&&c?function(a,b,c,d){let e=a._chart.getContext(),f=bP(a.options),{_datasetIndex:g,options:{spanGaps:h}}=a,i=c.length,j=[],k=f,l=b[0].start,m=l;function n(a,b,d,e){let f=h?-1:1;if(a!==b){for(a+=i;c[a%i].skip;)a-=f;for(;c[b%i].skip;)b+=f;a%i!=b%i&&(j.push({start:a%i,end:b%i,loop:d,style:e}),k=e,l=b%i)}}for(let a of b){let b,f=c[(l=h?l:a.start)%i];for(m=l+1;m<=a.end;m++){let h=c[m%i];(function(a,b){if(!b)return!1;let c=[],d=function(a,b){return aL(b)?(c.includes(b)||c.push(b),c.indexOf(b)):b};return JSON.stringify(a,d)!==JSON.stringify(b,d)})(b=bP(d.setContext(bh(e,{type:"segment",p0:f,p1:h,p0DataIndex:(m-1)%i,p1DataIndex:m%i,datasetIndex:g}))),k)&&n(l,m-1,a.loop,k),f=h,k=b}l<m-1&&n(l,m-1,a.loop,k)}return j}(a,b,c,d):b}function bP(a){return{backgroundColor:a.backgroundColor,borderCapStyle:a.borderCapStyle,borderDash:a.borderDash,borderDashOffset:a.borderDashOffset,borderJoinStyle:a.borderJoinStyle,borderWidth:a.borderWidth,borderColor:a.borderColor}}function bQ(a,b,c){return a.options.clip?a[c]:b[c]}function bR(a,b){let c=b._clip;if(c.disabled)return!1;let d=function(a,b){let{xScale:c,yScale:d}=a;return c&&d?{left:bQ(c,b,"left"),right:bQ(c,b,"right"),top:bQ(d,b,"top"),bottom:bQ(d,b,"bottom")}:b}(b,a.chartArea);return{left:!1===c.left?0:d.left-(!0===c.left?0:c.left),right:!1===c.right?a.width:d.right+(!0===c.right?0:c.right),top:!1===c.top?0:d.top-(!0===c.top?0:c.top),bottom:!1===c.bottom?a.height:d.bottom+(!0===c.bottom?0:c.bottom)}}var bS=new class{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(a,b,c,d){let e=b.listeners[d],f=b.duration;e.forEach(d=>d({chart:a,initial:b.initial,numSteps:f,currentStep:Math.min(c-b.start,f)}))}_refresh(){this._request||(this._running=!0,this._request=aC.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(a=Date.now()){let b=0;this._charts.forEach((c,d)=>{let e;if(!c.running||!c.items.length)return;let f=c.items,g=f.length-1,h=!1;for(;g>=0;--g)(e=f[g])._active?(e._total>c.duration&&(c.duration=e._total),e.tick(a),h=!0):(f[g]=f[f.length-1],f.pop());h&&(d.draw(),this._notify(d,c,a,"progress")),f.length||(c.running=!1,this._notify(d,c,a,"complete"),c.initial=!1),b+=f.length}),this._lastDate=a,0===b&&(this._running=!1)}_getAnims(a){let b=this._charts,c=b.get(a);return c||(c={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},b.set(a,c)),c}listen(a,b,c){this._getAnims(a).listeners[b].push(c)}add(a,b){b&&b.length&&this._getAnims(a).items.push(...b)}has(a){return this._getAnims(a).items.length>0}start(a){let b=this._charts.get(a);b&&(b.running=!0,b.start=Date.now(),b.duration=b.items.reduce((a,b)=>Math.max(a,b._duration),0),this._refresh())}running(a){if(!this._running)return!1;let b=this._charts.get(a);return!!b&&!!b.running&&!!b.items.length}stop(a){let b=this._charts.get(a);if(!b||!b.items.length)return;let c=b.items,d=c.length-1;for(;d>=0;--d)c[d].cancel();b.items=[],this._notify(a,b,Date.now(),"complete")}remove(a){return this._charts.delete(a)}};let bT="transparent",bU={boolean:(a,b,c)=>c>.5?b:a,color(a,b,c){let d=aM(a||bT),e=d.valid&&aM(b||bT);return e&&e.valid?e.mix(d,c).hexString():b},number:(a,b,c)=>a+(b-a)*c};class bV{constructor(a,b,c,d){const e=b[c];d=bg([a.to,d,e,a.from]);const f=bg([a.from,e,d]);this._active=!0,this._fn=a.fn||bU[a.type||typeof f],this._easing=aK[a.easing]||aK.linear,this._start=Math.floor(Date.now()+(a.delay||0)),this._duration=this._total=Math.floor(a.duration),this._loop=!!a.loop,this._target=b,this._prop=c,this._from=f,this._to=d,this._promises=void 0}active(){return this._active}update(a,b,c){if(this._active){this._notify(!1);let d=this._target[this._prop],e=c-this._start,f=this._duration-e;this._start=c,this._duration=Math.floor(Math.max(f,a.duration)),this._total+=e,this._loop=!!a.loop,this._to=bg([a.to,b,d,a.from]),this._from=bg([a.from,d,b])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(a){let b,c=a-this._start,d=this._duration,e=this._prop,f=this._from,g=this._loop,h=this._to;if(this._active=f!==h&&(g||c<d),!this._active){this._target[e]=h,this._notify(!0);return}if(c<0){this._target[e]=f;return}b=c/d%2,b=g&&b>1?2-b:b,b=this._easing(Math.min(1,Math.max(0,b))),this._target[e]=this._fn(f,h,b)}wait(){let a=this._promises||(this._promises=[]);return new Promise((b,c)=>{a.push({res:b,rej:c})})}_notify(a){let b=a?"res":"rej",c=this._promises||[];for(let a=0;a<c.length;a++)c[a][b]()}}class bW{constructor(a,b){this._chart=a,this._properties=new Map,this.configure(b)}configure(a){if(!I(a))return;let b=Object.keys(aX.animation),c=this._properties;Object.getOwnPropertyNames(a).forEach(d=>{let e=a[d];if(!I(e))return;let f={};for(let a of b)f[a]=e[a];(H(e.properties)&&e.properties||[d]).forEach(a=>{a!==d&&c.has(a)||c.set(a,f)})})}_animateOptions(a,b){let c=b.options,d=function(a,b){if(!b)return;let c=a.options;if(!c){a.options=b;return}return c.$shared&&(a.options=c=Object.assign({},c,{$shared:!1,$animations:{}})),c}(a,c);if(!d)return[];let e=this._createAnimations(d,c);return c.$shared&&(function(a,b){let c=[],d=Object.keys(b);for(let b=0;b<d.length;b++){let e=a[d[b]];e&&e.active()&&c.push(e.wait())}return Promise.all(c)})(a.options.$animations,c).then(()=>{a.options=c},()=>{}),e}_createAnimations(a,b){let c,d=this._properties,e=[],f=a.$animations||(a.$animations={}),g=Object.keys(b),h=Date.now();for(c=g.length-1;c>=0;--c){let i=g[c];if("$"===i.charAt(0))continue;if("options"===i){e.push(...this._animateOptions(a,b));continue}let j=b[i],k=f[i],l=d.get(i);if(k)if(l&&k.active()){k.update(l,j,h);continue}else k.cancel();if(!l||!l.duration){a[i]=j;continue}f[i]=k=new bV(l,a,i,j),e.push(k)}return e}update(a,b){if(0===this._properties.size)return void Object.assign(a,b);let c=this._createAnimations(a,b);if(c.length)return bS.add(this._chart,c),!0}}function bX(a,b){let c=a&&a.options||{},d=c.reverse,e=void 0===c.min?b:0,f=void 0===c.max?b:0;return{start:d?f:e,end:d?e:f}}function bY(a,b){let c,d,e=[],f=a._getSortedDatasetMetas(b);for(c=0,d=f.length;c<d;++c)e.push(f[c].index);return e}function bZ(a,b,c,d={}){let e,f,g,h,i=a.keys,j="single"===d.mode;if(null===b)return;let k=!1;for(e=0,f=i.length;e<f;++e){if((g=+i[e])===c){if(k=!0,d.all)continue;break}J(h=a.values[g])&&(j||0===b||ai(b)===ai(h))&&(b+=h)}return k||d.all?b:0}function b$(a,b){let c=a&&a.options.stacked;return c||void 0===c&&void 0!==b.stack}function b_(a,b,c,d){for(let e of b.getMatchingVisibleMetas(d).reverse()){let b=a[e.index];if(c&&b>0||!c&&b<0)return e.index}return null}function b0(a,b){let c,{chart:d,_cachedMeta:e}=a,f=d._stacks||(d._stacks={}),{iScale:g,vScale:h,index:i}=e,j=g.axis,k=h.axis,l=`${g.id}.${h.id}.${e.stack||e.type}`,m=b.length;for(let a=0;a<m;++a){let d=b[a],{[j]:g,[k]:m}=d;(c=(d._stacks||(d._stacks={}))[k]=function(a,b,c){let d=a[b]||(a[b]={});return d[c]||(d[c]={})}(f,l,g))[i]=m,c._top=b_(c,h,!0,e.type),c._bottom=b_(c,h,!1,e.type),(c._visualValues||(c._visualValues={}))[i]=m}}function b1(a,b){let c=a.scales;return Object.keys(c).filter(a=>c[a].axis===b).shift()}function b2(a,b){let c=a.controller.index,d=a.vScale&&a.vScale.axis;if(d)for(let e of b=b||a._parsed){let a=e._stacks;if(!a||void 0===a[d]||void 0===a[d][c])return;delete a[d][c],void 0!==a[d]._visualValues&&void 0!==a[d]._visualValues[c]&&delete a[d]._visualValues[c]}}let b3=a=>"reset"===a||"none"===a,b4=(a,b)=>b?a:Object.assign({},a);class b5{static defaults={};static datasetElementType=null;static dataElementType=null;constructor(a,b){this.chart=a,this._ctx=a.ctx,this.index=b,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){let a=this._cachedMeta;this.configure(),this.linkScales(),a._stacked=b$(a.vScale,a),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(a){this.index!==a&&b2(this._cachedMeta),this.index=a}linkScales(){let a=this.chart,b=this._cachedMeta,c=this.getDataset(),d=(a,b,c,d)=>"x"===a?b:"r"===a?d:c,e=b.xAxisID=L(c.xAxisID,b1(a,"x")),f=b.yAxisID=L(c.yAxisID,b1(a,"y")),g=b.rAxisID=L(c.rAxisID,b1(a,"r")),h=b.indexAxis,i=b.iAxisID=d(h,e,f,g),j=b.vAxisID=d(h,f,e,g);b.xScale=this.getScaleForId(e),b.yScale=this.getScaleForId(f),b.rScale=this.getScaleForId(g),b.iScale=this.getScaleForId(i),b.vScale=this.getScaleForId(j)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(a){return this.chart.scales[a]}_getOtherScale(a){let b=this._cachedMeta;return a===b.iScale?b.vScale:b.iScale}reset(){this._update("reset")}_destroy(){let a=this._cachedMeta;this._data&&aA(this._data,this),a._stacked&&b2(a)}_dataCheck(){let a=this.getDataset(),b=a.data||(a.data=[]),c=this._data;if(I(b)){let a=this._cachedMeta;this._data=function(a,b){let c,d,e,{iScale:f,vScale:g}=b,h="x"===f.axis?"x":"y",i="x"===g.axis?"x":"y",j=Object.keys(a),k=Array(j.length);for(c=0,d=j.length;c<d;++c)e=j[c],k[c]={[h]:e,[i]:a[e]};return k}(b,a)}else if(c!==b){if(c){aA(c,this);let a=this._cachedMeta;b2(a),a._parsed=[]}b&&Object.isExtensible(b)&&(b._chartjs?b._chartjs.listeners.push(this):(Object.defineProperty(b,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[this]}}),az.forEach(a=>{let c="_onData"+Y(a),d=b[a];Object.defineProperty(b,a,{configurable:!0,enumerable:!1,value(...a){let e=d.apply(this,a);return b._chartjs.listeners.forEach(b=>{"function"==typeof b[c]&&b[c](...a)}),e}})}))),this._syncList=[],this._data=b}}addElements(){let a=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(a.dataset=new this.datasetElementType)}buildOrUpdateElements(a){let b=this._cachedMeta,c=this.getDataset(),d=!1;this._dataCheck();let e=b._stacked;b._stacked=b$(b.vScale,b),b.stack!==c.stack&&(d=!0,b2(b),b.stack=c.stack),this._resyncElements(a),(d||e!==b._stacked)&&(b0(this,b._parsed),b._stacked=b$(b.vScale,b))}configure(){let a=this.chart.config,b=a.datasetScopeKeys(this._type),c=a.getOptionScopes(this.getDataset(),b,!0);this.options=a.createResolver(c,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(a,b){let c,d,e,{_cachedMeta:f,_data:g}=this,{iScale:h,_stacked:i}=f,j=h.axis,k=0===a&&b===g.length||f._sorted,l=a>0&&f._parsed[a-1];if(!1===this._parsing)f._parsed=g,f._sorted=!0,e=g;else{e=H(g[a])?this.parseArrayData(f,g,a,b):I(g[a])?this.parseObjectData(f,g,a,b):this.parsePrimitiveData(f,g,a,b);let h=()=>null===d[j]||l&&d[j]<l[j];for(c=0;c<b;++c)f._parsed[c+a]=d=e[c],k&&(h()&&(k=!1),l=d);f._sorted=k}i&&b0(this,e)}parsePrimitiveData(a,b,c,d){let e,f,{iScale:g,vScale:h}=a,i=g.axis,j=h.axis,k=g.getLabels(),l=g===h,m=Array(d);for(e=0;e<d;++e)f=e+c,m[e]={[i]:l||g.parse(k[f],f),[j]:h.parse(b[f],f)};return m}parseArrayData(a,b,c,d){let e,f,g,{xScale:h,yScale:i}=a,j=Array(d);for(e=0;e<d;++e)g=b[f=e+c],j[e]={x:h.parse(g[0],f),y:i.parse(g[1],f)};return j}parseObjectData(a,b,c,d){let e,f,g,{xScale:h,yScale:i}=a,{xAxisKey:j="x",yAxisKey:k="y"}=this._parsing,l=Array(d);for(e=0;e<d;++e)g=b[f=e+c],l[e]={x:h.parse(X(g,j),f),y:i.parse(X(g,k),f)};return l}getParsed(a){return this._cachedMeta._parsed[a]}getDataElement(a){return this._cachedMeta.data[a]}applyStack(a,b,c){let d=this.chart,e=this._cachedMeta,f=b[a.axis];return bZ({keys:bY(d,!0),values:b._stacks[a.axis]._visualValues},f,e.index,{mode:c})}updateRangeFromParsed(a,b,c,d){let e=c[b.axis],f=null===e?NaN:e,g=d&&c._stacks[b.axis];d&&g&&(d.values=g,f=bZ(d,e,this._cachedMeta.index)),a.min=Math.min(a.min,f),a.max=Math.max(a.max,f)}getMinMax(a,b){let c,d,e,f=this._cachedMeta,g=f._parsed,h=f._sorted&&a===f.iScale,i=g.length,j=this._getOtherScale(a),k=(e=this.chart,b&&!f.hidden&&f._stacked&&{keys:bY(e,!0),values:null}),l={min:1/0,max:-1/0},{min:m,max:n}=function(a){let{min:b,max:c,minDefined:d,maxDefined:e}=a.getUserBounds();return{min:d?b:-1/0,max:e?c:1/0}}(j);function o(){let b=(d=g[c])[j.axis];return!J(d[a.axis])||m>b||n<b}for(c=0;c<i&&(o()||(this.updateRangeFromParsed(l,a,d,k),!h));++c);if(h){for(c=i-1;c>=0;--c)if(!o()){this.updateRangeFromParsed(l,a,d,k);break}}return l}getAllParsedValues(a){let b,c,d,e=this._cachedMeta._parsed,f=[];for(b=0,c=e.length;b<c;++b)J(d=e[b][a.axis])&&f.push(d);return f}getMaxOverflow(){return!1}getLabelAndValue(a){let b=this._cachedMeta,c=b.iScale,d=b.vScale,e=this.getParsed(a);return{label:c?""+c.getLabelForValue(e[c.axis]):"",value:d?""+d.getLabelForValue(e[d.axis]):""}}_update(a){var b;let c,d,e,f,g=this._cachedMeta;this.update(a||"default"),I(b=L(this.options.clip,function(a,b,c){if(!1===c)return!1;let d=bX(a,c),e=bX(b,c);return{top:e.end,right:d.end,bottom:e.start,left:d.start}}(g.xScale,g.yScale,this.getMaxOverflow())))?(c=b.top,d=b.right,e=b.bottom,f=b.left):c=d=e=f=b,g._clip={top:c,right:d,bottom:e,left:f,disabled:!1===b}}update(a){}draw(){let a,b=this._ctx,c=this.chart,d=this._cachedMeta,e=d.data||[],f=c.chartArea,g=[],h=this._drawStart||0,i=this._drawCount||e.length-h,j=this.options.drawActiveElementsOnTop;for(d.dataset&&d.dataset.draw(b,f,h,i),a=h;a<h+i;++a){let c=e[a];c.hidden||(c.active&&j?g.push(c):c.draw(b,f))}for(a=0;a<g.length;++a)g[a].draw(b,f)}getStyle(a,b){let c=b?"active":"default";return void 0===a&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(c):this.resolveDataElementOptions(a||0,c)}getContext(a,b,c){var d,e;let f,g=this.getDataset();if(a>=0&&a<this._cachedMeta.data.length){let b=this._cachedMeta.data[a];(f=b.$context||(d=this.getContext(),b.$context=bh(d,{active:!1,dataIndex:a,parsed:void 0,raw:void 0,element:b,index:a,mode:"default",type:"data"}))).parsed=this.getParsed(a),f.raw=g.data[a],f.index=f.dataIndex=a}else(f=this.$context||(this.$context=bh(this.chart.getContext(),{active:!1,dataset:void 0,datasetIndex:e=this.index,index:e,mode:"default",type:"dataset"}))).dataset=g,f.index=f.datasetIndex=this.index;return f.active=!!b,f.mode=c,f}resolveDatasetElementOptions(a){return this._resolveElementOptions(this.datasetElementType.id,a)}resolveDataElementOptions(a,b){return this._resolveElementOptions(this.dataElementType.id,b,a)}_resolveElementOptions(a,b="default",c){let d="active"===b,e=this._cachedDataOpts,f=a+"-"+b,g=e[f],h=this.enableOptionSharing&&Z(c);if(g)return b4(g,h);let i=this.chart.config,j=i.datasetElementScopeKeys(this._type,a),k=d?[`${a}Hover`,"hover",a,""]:[a,""],l=i.getOptionScopes(this.getDataset(),j),m=Object.keys(aX.elements[a]),n=()=>this.getContext(c,d,b),o=i.resolveNamedOptions(l,m,n,k);return o.$shared&&(o.$shared=h,e[f]=Object.freeze(b4(o,h))),o}_resolveAnimations(a,b,c){let d,e=this.chart,f=this._cachedDataOpts,g=`animation-${b}`,h=f[g];if(h)return h;if(!1!==e.options.animation){let e=this.chart.config,f=e.datasetAnimationScopeKeys(this._type,b),g=e.getOptionScopes(this.getDataset(),f);d=e.createResolver(g,this.getContext(a,c,b))}let i=new bW(e,d&&d.animations);return d&&d._cacheable&&(f[g]=Object.freeze(i)),i}getSharedOptions(a){if(a.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},a))}includeOptions(a,b){return!b||b3(a)||this.chart._animationsDisabled}_getSharedOptions(a,b){let c=this.resolveDataElementOptions(a,b),d=this._sharedOptions,e=this.getSharedOptions(c),f=this.includeOptions(b,e)||e!==d;return this.updateSharedOptions(e,b,c),{sharedOptions:e,includeOptions:f}}updateElement(a,b,c,d){b3(d)?Object.assign(a,c):this._resolveAnimations(b,d).update(a,c)}updateSharedOptions(a,b,c){a&&!b3(b)&&this._resolveAnimations(void 0,b).update(a,c)}_setStyle(a,b,c,d){a.active=d;let e=this.getStyle(b,d);this._resolveAnimations(b,c,d).update(a,{options:!d&&this.getSharedOptions(e)||e})}removeHoverStyle(a,b,c){this._setStyle(a,c,"active",!1)}setHoverStyle(a,b,c){this._setStyle(a,c,"active",!0)}_removeDatasetHoverStyle(){let a=this._cachedMeta.dataset;a&&this._setStyle(a,void 0,"active",!1)}_setDatasetHoverStyle(){let a=this._cachedMeta.dataset;a&&this._setStyle(a,void 0,"active",!0)}_resyncElements(a){let b=this._data,c=this._cachedMeta.data;for(let[a,b,c]of this._syncList)this[a](b,c);this._syncList=[];let d=c.length,e=b.length,f=Math.min(e,d);f&&this.parse(0,f),e>d?this._insertElements(d,e-d,a):e<d&&this._removeElements(e,d-e)}_insertElements(a,b,c=!0){let d,e=this._cachedMeta,f=e.data,g=a+b,h=a=>{for(a.length+=b,d=a.length-1;d>=g;d--)a[d]=a[d-b]};for(h(f),d=a;d<g;++d)f[d]=new this.dataElementType;this._parsing&&h(e._parsed),this.parse(a,b),c&&this.updateElements(f,a,b,"reset")}updateElements(a,b,c,d){}_removeElements(a,b){let c=this._cachedMeta;if(this._parsing){let d=c._parsed.splice(a,b);c._stacked&&b2(c,d)}c.data.splice(a,b)}_sync(a){if(this._parsing)this._syncList.push(a);else{let[b,c,d]=a;this[b](c,d)}this.chart._dataChanges.push([this.index,...a])}_onDataPush(){let a=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-a,a])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(a,b){b&&this._sync(["_removeElements",a,b]);let c=arguments.length-2;c&&this._sync(["_insertElements",a,c])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}function b6(a,b,c,d){if(H(a)){let e,f,g,h,i,j;e=c.parse(a[0],d),g=Math.min(e,f=c.parse(a[1],d)),h=Math.max(e,f),i=g,j=h,Math.abs(g)>Math.abs(h)&&(i=h,j=g),b[c.axis]=j,b._custom={barStart:i,barEnd:j,start:e,end:f,min:g,max:h}}else b[c.axis]=c.parse(a,d);return b}function b7(a,b,c,d){let e,f,g,h,i=a.iScale,j=a.vScale,k=i.getLabels(),l=i===j,m=[];for(e=c,f=c+d;e<f;++e)h=b[e],(g={})[i.axis]=l||i.parse(k[e],e),m.push(b6(h,g,j,e));return m}function b8(a){return a&&void 0!==a.barStart&&void 0!==a.barEnd}function b9(a,b,c,d){var e,f,g;return d?ca((e=a,f=b,g=c,a=e===f?g:e===g?f:e),c,b):ca(a,b,c)}function ca(a,b,c){return"start"===a?b:"end"===a?c:a}class cb extends b5{static id="bar";static defaults={datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}};static overrides={scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}};parsePrimitiveData(a,b,c,d){return b7(a,b,c,d)}parseArrayData(a,b,c,d){return b7(a,b,c,d)}parseObjectData(a,b,c,d){let e,f,g,h,{iScale:i,vScale:j}=a,{xAxisKey:k="x",yAxisKey:l="y"}=this._parsing,m="x"===i.axis?k:l,n="x"===j.axis?k:l,o=[];for(e=c,f=c+d;e<f;++e)h=b[e],(g={})[i.axis]=i.parse(X(h,m),e),o.push(b6(X(h,n),g,j,e));return o}updateRangeFromParsed(a,b,c,d){super.updateRangeFromParsed(a,b,c,d);let e=c._custom;e&&b===this._cachedMeta.vScale&&(a.min=Math.min(a.min,e.min),a.max=Math.max(a.max,e.max))}getMaxOverflow(){return 0}getLabelAndValue(a){let{iScale:b,vScale:c}=this._cachedMeta,d=this.getParsed(a),e=d._custom,f=b8(e)?"["+e.start+", "+e.end+"]":""+c.getLabelForValue(d[c.axis]);return{label:""+b.getLabelForValue(d[b.axis]),value:f}}initialize(){this.enableOptionSharing=!0,super.initialize(),this._cachedMeta.stack=this.getDataset().stack}update(a){let b=this._cachedMeta;this.updateElements(b.data,0,b.data.length,a)}updateElements(a,b,c,d){let e="reset"===d,{index:f,_cachedMeta:{vScale:g}}=this,h=g.getBasePixel(),i=g.isHorizontal(),j=this._getRuler(),{sharedOptions:k,includeOptions:l}=this._getSharedOptions(b,d);for(let m=b;m<b+c;m++){let b=this.getParsed(m),c=e||G(b[g.axis])?{base:h,head:h}:this._calculateBarValuePixels(m),n=this._calculateBarIndexPixels(m,j),o=(b._stacks||{})[g.axis],p={horizontal:i,base:c.base,enableBorderRadius:!o||b8(b._custom)||f===o._top||f===o._bottom,x:i?c.head:n.center,y:i?n.center:c.head,height:i?n.size:Math.abs(c.size),width:i?Math.abs(c.size):n.size};l&&(p.options=k||this.resolveDataElementOptions(m,a[m].active?"active":d));let q=p.options||a[m].options;!function(a,b,c,d){let e,f,g,h,i,j=b.borderSkipped,k={};if(!j){a.borderSkipped=k;return}if(!0===j){a.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}let{start:l,end:m,reverse:n,top:o,bottom:p}=(a.horizontal?(e=a.base>a.x,f="left",g="right"):(e=a.base<a.y,f="bottom",g="top"),e?(h="end",i="start"):(h="start",i="end"),{start:f,end:g,reverse:e,top:h,bottom:i});"middle"===j&&c&&(a.enableBorderRadius=!0,(c._top||0)===d?j=o:(c._bottom||0)===d?j=p:(k[b9(p,l,m,n)]=!0,j=o)),k[b9(j,l,m,n)]=!0,a.borderSkipped=k}(p,q,o,f),function(a,{inflateAmount:b},c){a.inflateAmount="auto"===b?.33*(1===c):b}(p,q,j.ratio),this.updateElement(a[m],m,p,d)}}_getStacks(a,b){let{iScale:c}=this._cachedMeta,d=c.getMatchingVisibleMetas(this._type).filter(a=>a.controller.options.grouped),e=c.options.stacked,f=[],g=this._cachedMeta.controller.getParsed(b),h=g&&g[c.axis],i=a=>{let b=a._parsed.find(a=>a[c.axis]===h),d=b&&b[a.vScale.axis];if(G(d)||isNaN(d))return!0};for(let c of d)if(!(void 0!==b&&i(c))&&((!1===e||-1===f.indexOf(c.stack)||void 0===e&&void 0===c.stack)&&f.push(c.stack),c.index===a))break;return f.length||f.push(void 0),f}_getStackCount(a){return this._getStacks(void 0,a).length}_getAxisCount(){return this._getAxis().length}getFirstScaleIdForIndexAxis(){let a=this.chart.scales,b=this.chart.options.indexAxis;return Object.keys(a).filter(c=>a[c].axis===b).shift()}_getAxis(){let a={},b=this.getFirstScaleIdForIndexAxis();for(let c of this.chart.data.datasets)a[L("x"===this.chart.options.indexAxis?c.xAxisID:c.yAxisID,b)]=!0;return Object.keys(a)}_getStackIndex(a,b,c){let d=this._getStacks(a,c),e=void 0!==b?d.indexOf(b):-1;return -1===e?d.length-1:e}_getRuler(){let a,b,c=this.options,d=this._cachedMeta,e=d.iScale,f=[];for(a=0,b=d.data.length;a<b;++a)f.push(e.getPixelForValue(this.getParsed(a)[e.axis],a));let g=c.barThickness;return{min:g||function(a){let b,c,d,e,f=a.iScale,g=function(a,b){if(!a._cache.$bar){let c=a.getMatchingVisibleMetas(b),d=[];for(let b=0,e=c.length;b<e;b++)d=d.concat(c[b].controller.getAllParsedValues(a));a._cache.$bar=aB(d.sort((a,b)=>a-b))}return a._cache.$bar}(f,a.type),h=f._length,i=()=>{32767!==d&&-32768!==d&&(Z(e)&&(h=Math.min(h,Math.abs(d-e)||h)),e=d)};for(b=0,c=g.length;b<c;++b)d=f.getPixelForValue(g[b]),i();for(b=0,e=void 0,c=f.ticks.length;b<c;++b)d=f.getPixelForTick(b),i();return h}(d),pixels:f,start:e._startPixel,end:e._endPixel,stackCount:this._getStackCount(),scale:e,grouped:c.grouped,ratio:g?1:c.categoryPercentage*c.barPercentage}}_calculateBarValuePixels(a){let b,c,{_cachedMeta:{vScale:d,_stacked:e,index:f},options:{base:g,minBarLength:h}}=this,i=g||0,j=this.getParsed(a),k=j._custom,l=b8(k),m=j[d.axis],n=0,o=e?this.applyStack(d,j,e):m;o!==m&&(n=o-m,o=m),l&&(m=k.barStart,o=k.barEnd-k.barStart,0!==m&&ai(m)!==ai(k.barEnd)&&(n=0),n+=m);let p=G(g)||l?n:g,q=d.getPixelForValue(p);if(Math.abs(c=(b=this.chart.getDataVisibility(a)?d.getPixelForValue(n+o):q)-q)<h){var r;c=(0!==(r=c)?ai(r):(d.isHorizontal()?1:-1)*(d.min>=i?1:-1))*h,m===i&&(q-=c/2);let a=d.getPixelForDecimal(0),g=d.getPixelForDecimal(1),k=Math.min(a,g);b=(q=Math.max(Math.min(q,Math.max(a,g)),k))+c,e&&!l&&(j._stacks[d.axis]._visualValues[f]=d.getValueForPixel(b)-d.getValueForPixel(q))}if(q===d.getPixelForValue(i)){let a=ai(c)*d.getLineWidthForValue(i)/2;q+=a,c-=a}return{size:c,base:q,head:b,center:b+c/2}}_calculateBarIndexPixels(a,b){let c,d,e=b.scale,f=this.options,g=f.skipNull,h=L(f.maxBarThickness,1/0),i=this._getAxisCount();if(b.grouped){var j,k;let e,l,m,n,o,p,q,r,s,t=g?this._getStackCount(a):b.stackCount,u="flex"===f.barThickness?(j=t*i,l=(e=b.pixels)[a],m=a>0?e[a-1]:null,n=a<e.length-1?e[a+1]:null,o=f.categoryPercentage,null===m&&(m=l-(null===n?b.end-b.start:n-l)),null===n&&(n=l+l-m),p=l-(l-Math.min(m,n))/2*o,{chunk:Math.abs(n-m)/2*o/j,ratio:f.barPercentage,start:p}):(k=t*i,G(s=f.barThickness)?(q=b.min*f.categoryPercentage,r=f.barPercentage):(q=s*k,r=1),{chunk:q/k,ratio:r,start:b.pixels[a]-q/2}),v="x"===this.chart.options.indexAxis?this.getDataset().xAxisID:this.getDataset().yAxisID,w=this._getAxis().indexOf(L(v,this.getFirstScaleIdForIndexAxis())),x=this._getStackIndex(this.index,this._cachedMeta.stack,g?a:void 0)+w;c=u.start+u.chunk*x+u.chunk/2,d=Math.min(h,u.chunk*u.ratio)}else c=e.getPixelForValue(this.getParsed(a)[e.axis],a),d=Math.min(h,b.min*b.ratio);return{base:c-d/2,head:c+d/2,center:c,size:d}}draw(){let a=this._cachedMeta,b=a.vScale,c=a.data,d=c.length,e=0;for(;e<d;++e)null===this.getParsed(e)[b.axis]||c[e].hidden||c[e].draw(this._ctx)}}class cc extends b5{static id="bubble";static defaults={datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}};static overrides={scales:{x:{type:"linear"},y:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(a,b,c,d){let e=super.parsePrimitiveData(a,b,c,d);for(let a=0;a<e.length;a++)e[a]._custom=this.resolveDataElementOptions(a+c).radius;return e}parseArrayData(a,b,c,d){let e=super.parseArrayData(a,b,c,d);for(let a=0;a<e.length;a++){let d=b[c+a];e[a]._custom=L(d[2],this.resolveDataElementOptions(a+c).radius)}return e}parseObjectData(a,b,c,d){let e=super.parseObjectData(a,b,c,d);for(let a=0;a<e.length;a++){let d=b[c+a];e[a]._custom=L(d&&d.r&&+d.r,this.resolveDataElementOptions(a+c).radius)}return e}getMaxOverflow(){let a=this._cachedMeta.data,b=0;for(let c=a.length-1;c>=0;--c)b=Math.max(b,a[c].size(this.resolveDataElementOptions(c))/2);return b>0&&b}getLabelAndValue(a){let b=this._cachedMeta,c=this.chart.data.labels||[],{xScale:d,yScale:e}=b,f=this.getParsed(a),g=d.getLabelForValue(f.x),h=e.getLabelForValue(f.y),i=f._custom;return{label:c[a]||"",value:"("+g+", "+h+(i?", "+i:"")+")"}}update(a){let b=this._cachedMeta.data;this.updateElements(b,0,b.length,a)}updateElements(a,b,c,d){let e="reset"===d,{iScale:f,vScale:g}=this._cachedMeta,{sharedOptions:h,includeOptions:i}=this._getSharedOptions(b,d),j=f.axis,k=g.axis;for(let l=b;l<b+c;l++){let b=a[l],c=!e&&this.getParsed(l),m={},n=m[j]=e?f.getPixelForDecimal(.5):f.getPixelForValue(c[j]),o=m[k]=e?g.getBasePixel():g.getPixelForValue(c[k]);m.skip=isNaN(n)||isNaN(o),i&&(m.options=h||this.resolveDataElementOptions(l,b.active?"active":d),e&&(m.options.radius=0)),this.updateElement(b,l,m,d)}}resolveDataElementOptions(a,b){let c=this.getParsed(a),d=super.resolveDataElementOptions(a,b);d.$shared&&(d=Object.assign({},d,{$shared:!1}));let e=d.radius;return"active"!==b&&(d.radius=0),d.radius+=L(c&&c._custom,e),d}}class cd extends b5{static id="doughnut";static defaults={datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"};static descriptors={_scriptable:a=>"spacing"!==a,_indexable:a=>"spacing"!==a&&!a.startsWith("borderDash")&&!a.startsWith("hoverBorderDash")};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(a){let b=a.data,{labels:{pointStyle:c,textAlign:d,color:e,useBorderRadius:f,borderRadius:g}}=a.legend.options;return b.labels.length&&b.datasets.length?b.labels.map((b,h)=>{let i=a.getDatasetMeta(0).controller.getStyle(h);return{text:b,fillStyle:i.backgroundColor,fontColor:e,hidden:!a.getDataVisibility(h),lineDash:i.borderDash,lineDashOffset:i.borderDashOffset,lineJoin:i.borderJoinStyle,lineWidth:i.borderWidth,strokeStyle:i.borderColor,textAlign:d,pointStyle:c,borderRadius:f&&(g||i.borderRadius),index:h}}):[]}},onClick(a,b,c){c.chart.toggleDataVisibility(b.index),c.chart.update()}}}};constructor(a,b){super(a,b),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(a,b){let c=this.getDataset().data,d=this._cachedMeta;if(!1===this._parsing)d._parsed=c;else{let e,f,g=a=>+c[a];if(I(c[a])){let{key:a="value"}=this._parsing;g=b=>+X(c[b],a)}for(e=a,f=a+b;e<f;++e)d._parsed[e]=g(e)}}_getRotation(){return an(this.options.rotation-90)}_getCircumference(){return an(this.options.circumference)}_getRotationExtents(){let a=ab,b=-ab;for(let c=0;c<this.chart.data.datasets.length;++c)if(this.chart.isDatasetVisible(c)&&this.chart.getDatasetMeta(c).type===this._type){let d=this.chart.getDatasetMeta(c).controller,e=d._getRotation(),f=d._getCircumference();a=Math.min(a,e),b=Math.max(b,e+f)}return{rotation:a,circumference:b-a}}update(a){let b,{chartArea:c}=this.chart,d=this._cachedMeta,e=d.data,f=this.getMaxBorderWidth()+this.getMaxOffset(e)+this.options.spacing,g=Math.max((Math.min(c.width,c.height)-f)/2,0),h=Math.min((b=this.options.cutout,"string"==typeof b&&b.endsWith("%")?parseFloat(b)/100:b/g),1),i=this._getRingWeight(this.index),{circumference:j,rotation:k}=this._getRotationExtents(),{ratioX:l,ratioY:m,offsetX:n,offsetY:o}=function(a,b,c){let d=1,e=1,f=0,g=0;if(b<ab){let h=a+b,i=Math.cos(a),j=Math.sin(a),k=Math.cos(h),l=Math.sin(h),m=(b,d,e)=>at(b,a,h,!0)?1:Math.max(d,d*c,e,e*c),n=(b,d,e)=>at(b,a,h,!0)?-1:Math.min(d,d*c,e,e*c),o=m(0,i,k),p=m(ae,j,l),q=n(aa,i,k),r=n(aa+ae,j,l);d=(o-q)/2,e=(p-r)/2,f=-(o+q)/2,g=-(p+r)/2}return{ratioX:d,ratioY:e,offsetX:f,offsetY:g}}(k,j,h),p=Math.max(Math.min((c.width-f)/l,(c.height-f)/m)/2,0),q=M(this.options.radius,p),r=Math.max(q*h,0),s=(q-r)/this._getVisibleDatasetWeightTotal();this.offsetX=n*q,this.offsetY=o*q,d.total=this.calculateTotal(),this.outerRadius=q-s*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-s*i,0),this.updateElements(e,0,e.length,a)}_circumference(a,b){let c=this.options,d=this._cachedMeta,e=this._getCircumference();return b&&c.animation.animateRotate||!this.chart.getDataVisibility(a)||null===d._parsed[a]||d.data[a].hidden?0:this.calculateCircumference(d._parsed[a]*e/ab)}updateElements(a,b,c,d){let e,f="reset"===d,g=this.chart,h=g.chartArea,i=g.options.animation,j=(h.left+h.right)/2,k=(h.top+h.bottom)/2,l=f&&i.animateScale,m=l?0:this.innerRadius,n=l?0:this.outerRadius,{sharedOptions:o,includeOptions:p}=this._getSharedOptions(b,d),q=this._getRotation();for(e=0;e<b;++e)q+=this._circumference(e,f);for(e=b;e<b+c;++e){let b=this._circumference(e,f),c=a[e],g={x:j+this.offsetX,y:k+this.offsetY,startAngle:q,endAngle:q+b,circumference:b,outerRadius:n,innerRadius:m};p&&(g.options=o||this.resolveDataElementOptions(e,c.active?"active":d)),q+=b,this.updateElement(c,e,g,d)}}calculateTotal(){let a,b=this._cachedMeta,c=b.data,d=0;for(a=0;a<c.length;a++){let e=b._parsed[a];null!==e&&!isNaN(e)&&this.chart.getDataVisibility(a)&&!c[a].hidden&&(d+=Math.abs(e))}return d}calculateCircumference(a){let b=this._cachedMeta.total;return b>0&&!isNaN(a)?Math.abs(a)/b*ab:0}getLabelAndValue(a){let b=this._cachedMeta,c=this.chart,d=c.data.labels||[],e=aR(b._parsed[a],c.options.locale);return{label:d[a]||"",value:e}}getMaxBorderWidth(a){let b,c,d,e,f,g=0,h=this.chart;if(!a){for(b=0,c=h.data.datasets.length;b<c;++b)if(h.isDatasetVisible(b)){a=(d=h.getDatasetMeta(b)).data,e=d.controller;break}}if(!a)return 0;for(b=0,c=a.length;b<c;++b)"inner"!==(f=e.resolveDataElementOptions(b)).borderAlign&&(g=Math.max(g,f.borderWidth||0,f.hoverBorderWidth||0));return g}getMaxOffset(a){let b=0;for(let c=0,d=a.length;c<d;++c){let a=this.resolveDataElementOptions(c);b=Math.max(b,a.offset||0,a.hoverOffset||0)}return b}_getRingWeightOffset(a){let b=0;for(let c=0;c<a;++c)this.chart.isDatasetVisible(c)&&(b+=this._getRingWeight(c));return b}_getRingWeight(a){return Math.max(L(this.chart.data.datasets[a].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}class ce extends b5{static id="line";static defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1};static overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(a){let b=this._cachedMeta,{dataset:c,data:d=[],_dataset:e}=b,f=this.chart._animationsDisabled,{start:g,count:h}=aF(b,d,f);this._drawStart=g,this._drawCount=h,aG(b)&&(g=0,h=d.length),c._chart=this.chart,c._datasetIndex=this.index,c._decimated=!!e._decimated,c.points=d;let i=this.resolveDatasetElementOptions(a);this.options.showLine||(i.borderWidth=0),i.segment=this.options.segment,this.updateElement(c,void 0,{animated:!f,options:i},a),this.updateElements(d,g,h,a)}updateElements(a,b,c,d){let e="reset"===d,{iScale:f,vScale:g,_stacked:h,_dataset:i}=this._cachedMeta,{sharedOptions:j,includeOptions:k}=this._getSharedOptions(b,d),l=f.axis,m=g.axis,{spanGaps:n,segment:o}=this.options,p=al(n)?n:1/0,q=this.chart._animationsDisabled||e||"none"===d,r=b+c,s=a.length,t=b>0&&this.getParsed(b-1);for(let c=0;c<s;++c){let n=a[c],s=q?n:{};if(c<b||c>=r){s.skip=!0;continue}let u=this.getParsed(c),v=G(u[m]),w=s[l]=f.getPixelForValue(u[l],c),x=s[m]=e||v?g.getBasePixel():g.getPixelForValue(h?this.applyStack(g,u,h):u[m],c);s.skip=isNaN(w)||isNaN(x)||v,s.stop=c>0&&Math.abs(u[l]-t[l])>p,o&&(s.parsed=u,s.raw=i.data[c]),k&&(s.options=j||this.resolveDataElementOptions(c,n.active?"active":d)),q||this.updateElement(n,c,s,d),t=u}}getMaxOverflow(){let a=this._cachedMeta,b=a.dataset,c=b.options&&b.options.borderWidth||0,d=a.data||[];return d.length?Math.max(c,d[0].size(this.resolveDataElementOptions(0)),d[d.length-1].size(this.resolveDataElementOptions(d.length-1)))/2:c}draw(){let a=this._cachedMeta;a.dataset.updateControlPoints(this.chart.chartArea,a.iScale.axis),super.draw()}}class cf extends b5{static id="polarArea";static defaults={dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(a){let b=a.data;if(b.labels.length&&b.datasets.length){let{labels:{pointStyle:c,color:d}}=a.legend.options;return b.labels.map((b,e)=>{let f=a.getDatasetMeta(0).controller.getStyle(e);return{text:b,fillStyle:f.backgroundColor,strokeStyle:f.borderColor,fontColor:d,lineWidth:f.borderWidth,pointStyle:c,hidden:!a.getDataVisibility(e),index:e}})}return[]}},onClick(a,b,c){c.chart.toggleDataVisibility(b.index),c.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}};constructor(a,b){super(a,b),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(a){let b=this._cachedMeta,c=this.chart,d=c.data.labels||[],e=aR(b._parsed[a].r,c.options.locale);return{label:d[a]||"",value:e}}parseObjectData(a,b,c,d){return bt.bind(this)(a,b,c,d)}update(a){let b=this._cachedMeta.data;this._updateRadius(),this.updateElements(b,0,b.length,a)}getMinMax(){let a=this._cachedMeta,b={min:1/0,max:-1/0};return a.data.forEach((a,c)=>{let d=this.getParsed(c).r;!isNaN(d)&&this.chart.getDataVisibility(c)&&(d<b.min&&(b.min=d),d>b.max&&(b.max=d))}),b}_updateRadius(){let a=this.chart,b=a.chartArea,c=a.options,d=Math.max(Math.min(b.right-b.left,b.bottom-b.top)/2,0),e=Math.max(c.cutoutPercentage?d/100*c.cutoutPercentage:1,0),f=(d-e)/a.getVisibleDatasetCount();this.outerRadius=d-f*this.index,this.innerRadius=this.outerRadius-f}updateElements(a,b,c,d){let e,f="reset"===d,g=this.chart,h=g.options.animation,i=this._cachedMeta.rScale,j=i.xCenter,k=i.yCenter,l=i.getIndexAngle(0)-.5*aa,m=l,n=360/this.countVisibleElements();for(e=0;e<b;++e)m+=this._computeAngle(e,d,n);for(e=b;e<b+c;e++){let b=a[e],c=m,o=m+this._computeAngle(e,d,n),p=g.getDataVisibility(e)?i.getDistanceFromCenterForValue(this.getParsed(e).r):0;m=o,f&&(h.animateScale&&(p=0),h.animateRotate&&(c=o=l));let q={x:j,y:k,innerRadius:0,outerRadius:p,startAngle:c,endAngle:o,options:this.resolveDataElementOptions(e,b.active?"active":d)};this.updateElement(b,e,q,d)}}countVisibleElements(){let a=this._cachedMeta,b=0;return a.data.forEach((a,c)=>{!isNaN(this.getParsed(c).r)&&this.chart.getDataVisibility(c)&&b++}),b}_computeAngle(a,b,c){return this.chart.getDataVisibility(a)?an(this.resolveDataElementOptions(a,b).angle||c):0}}class cg extends cd{static id="pie";static defaults={cutout:0,rotation:0,circumference:360,radius:"100%"}}class ch extends b5{static id="radar";static defaults={datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}};static overrides={aspectRatio:1,scales:{r:{type:"radialLinear"}}};getLabelAndValue(a){let b=this._cachedMeta.vScale,c=this.getParsed(a);return{label:b.getLabels()[a],value:""+b.getLabelForValue(c[b.axis])}}parseObjectData(a,b,c,d){return bt.bind(this)(a,b,c,d)}update(a){let b=this._cachedMeta,c=b.dataset,d=b.data||[],e=b.iScale.getLabels();if(c.points=d,"resize"!==a){let b=this.resolveDatasetElementOptions(a);this.options.showLine||(b.borderWidth=0);let f={_loop:!0,_fullLoop:e.length===d.length,options:b};this.updateElement(c,void 0,f,a)}this.updateElements(d,0,d.length,a)}updateElements(a,b,c,d){let e=this._cachedMeta.rScale,f="reset"===d;for(let g=b;g<b+c;g++){let b=a[g],c=this.resolveDataElementOptions(g,b.active?"active":d),h=e.getPointPositionForValue(g,this.getParsed(g).r),i=f?e.xCenter:h.x,j=f?e.yCenter:h.y,k={x:i,y:j,angle:h.angle,skip:isNaN(i)||isNaN(j),options:c};this.updateElement(b,g,k,d)}}}class ci extends b5{static id="scatter";static defaults={datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1};static overrides={interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}};getLabelAndValue(a){let b=this._cachedMeta,c=this.chart.data.labels||[],{xScale:d,yScale:e}=b,f=this.getParsed(a),g=d.getLabelForValue(f.x),h=e.getLabelForValue(f.y);return{label:c[a]||"",value:"("+g+", "+h+")"}}update(a){let b=this._cachedMeta,{data:c=[]}=b,d=this.chart._animationsDisabled,{start:e,count:f}=aF(b,c,d);if(this._drawStart=e,this._drawCount=f,aG(b)&&(e=0,f=c.length),this.options.showLine){this.datasetElementType||this.addElements();let{dataset:e,_dataset:f}=b;e._chart=this.chart,e._datasetIndex=this.index,e._decimated=!!f._decimated,e.points=c;let g=this.resolveDatasetElementOptions(a);g.segment=this.options.segment,this.updateElement(e,void 0,{animated:!d,options:g},a)}else this.datasetElementType&&(delete b.dataset,this.datasetElementType=!1);this.updateElements(c,e,f,a)}addElements(){let{showLine:a}=this.options;!this.datasetElementType&&a&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(a,b,c,d){let e="reset"===d,{iScale:f,vScale:g,_stacked:h,_dataset:i}=this._cachedMeta,j=this.resolveDataElementOptions(b,d),k=this.getSharedOptions(j),l=this.includeOptions(d,k),m=f.axis,n=g.axis,{spanGaps:o,segment:p}=this.options,q=al(o)?o:1/0,r=this.chart._animationsDisabled||e||"none"===d,s=b>0&&this.getParsed(b-1);for(let j=b;j<b+c;++j){let b=a[j],c=this.getParsed(j),o=r?b:{},t=G(c[n]),u=o[m]=f.getPixelForValue(c[m],j),v=o[n]=e||t?g.getBasePixel():g.getPixelForValue(h?this.applyStack(g,c,h):c[n],j);o.skip=isNaN(u)||isNaN(v)||t,o.stop=j>0&&Math.abs(c[m]-s[m])>q,p&&(o.parsed=c,o.raw=i.data[j]),l&&(o.options=k||this.resolveDataElementOptions(j,b.active?"active":d)),r||this.updateElement(b,j,o,d),s=c}this.updateSharedOptions(k,d,j)}getMaxOverflow(){let a=this._cachedMeta,b=a.data||[];if(!this.options.showLine){let a=0;for(let c=b.length-1;c>=0;--c)a=Math.max(a,b[c].size(this.resolveDataElementOptions(c))/2);return a>0&&a}let c=a.dataset,d=c.options&&c.options.borderWidth||0;return b.length?Math.max(d,b[0].size(this.resolveDataElementOptions(0)),b[b.length-1].size(this.resolveDataElementOptions(b.length-1)))/2:d}}var cj=Object.freeze({__proto__:null,BarController:cb,BubbleController:cc,DoughnutController:cd,LineController:ce,PieController:cg,PolarAreaController:cf,RadarController:ch,ScatterController:ci});function ck(){throw Error("This method is not implemented: Check that a complete date adapter is provided.")}class cl{static override(a){Object.assign(cl.prototype,a)}options;constructor(a){this.options=a||{}}init(){}formats(){return ck()}parse(){return ck()}format(){return ck()}add(){return ck()}diff(){return ck()}startOf(){return ck()}endOf(){return ck()}}function cm(a,b,c,d,e){let f=a.getSortedVisibleDatasetMetas(),g=c[b];for(let a=0,c=f.length;a<c;++a){let{index:c,data:h}=f[a],{lo:i,hi:j}=function(a,b,c,d){let{controller:e,data:f,_sorted:g}=a,h=e._cachedMeta.iScale,i=a.dataset&&a.dataset.options?a.dataset.options.spanGaps:null;if(h&&b===h.axis&&"r"!==b&&g&&f.length){let g=h._reversePixels?ay:ax;if(d){if(e._sharedOptions){let a=f[0],d="function"==typeof a.getRange&&a.getRange(b);if(d){let a=g(f,b,c-d),e=g(f,b,c+d);return{lo:a.lo,hi:e.hi}}}}else{let d=g(f,b,c);if(i){let{vScale:b}=e._cachedMeta,{_parsed:c}=a,f=c.slice(0,d.lo+1).reverse().findIndex(a=>!G(a[b.axis]));d.lo-=Math.max(0,f);let g=c.slice(d.hi).findIndex(a=>!G(a[b.axis]));d.hi+=Math.max(0,g)}return d}}return{lo:0,hi:f.length-1}}(f[a],b,g,e);for(let a=i;a<=j;++a){let b=h[a];b.skip||d(b,c,a)}}}function cn(a,b,c,d,e){let f=[];return(e||a.isPointInArea(b))&&cm(a,c,b,function(c,g,h){(e||a1(c,a.chartArea,0))&&c.inRange(b.x,b.y,d)&&f.push({element:c,datasetIndex:g,index:h})},!0),f}function co(a,b,c,d,e,f){let g,h,i,j,k,l;return f||a.isPointInArea(b)?"r"!==c||d?(g=[],h=-1!==c.indexOf("x"),i=-1!==c.indexOf("y"),j=function(a,b){return Math.sqrt(Math.pow(h?Math.abs(a.x-b.x):0,2)+Math.pow(i?Math.abs(a.y-b.y):0,2))},k=1/0,cm(a,c,b,function(c,h,i){let l=c.inRange(b.x,b.y,e);if(d&&!l)return;let m=c.getCenterPoint(e);if(!(f||a.isPointInArea(m))&&!l)return;let n=j(b,m);n<k?(g=[{element:c,datasetIndex:h,index:i}],k=n):n===k&&g.push({element:c,datasetIndex:h,index:i})}),g):(l=[],cm(a,c,b,function(a,c,d){let{startAngle:f,endAngle:g}=a.getProps(["startAngle","endAngle"],e),{angle:h}=ap(a,{x:b.x,y:b.y});at(h,f,g)&&l.push({element:a,datasetIndex:c,index:d})}),l):[]}function cp(a,b,c,d,e){let f=[],g="x"===c?"inXRange":"inYRange",h=!1;return(cm(a,c,b,(a,d,i)=>{a[g]&&a[g](b[c],e)&&(f.push({element:a,datasetIndex:d,index:i}),h=h||a.inRange(b.x,b.y,e))}),d&&!h)?[]:f}var cq={modes:{index(a,b,c,d){let e=bB(b,a),f=c.axis||"x",g=c.includeInvisible||!1,h=c.intersect?cn(a,e,f,d,g):co(a,e,f,!1,d,g),i=[];return h.length?(a.getSortedVisibleDatasetMetas().forEach(a=>{let b=h[0].index,c=a.data[b];c&&!c.skip&&i.push({element:c,datasetIndex:a.index,index:b})}),i):[]},dataset(a,b,c,d){let e=bB(b,a),f=c.axis||"xy",g=c.includeInvisible||!1,h=c.intersect?cn(a,e,f,d,g):co(a,e,f,!1,d,g);if(h.length>0){let b=h[0].datasetIndex,c=a.getDatasetMeta(b).data;h=[];for(let a=0;a<c.length;++a)h.push({element:c[a],datasetIndex:b,index:a})}return h},point(a,b,c,d){let e=bB(b,a);return cn(a,e,c.axis||"xy",d,c.includeInvisible||!1)},nearest(a,b,c,d){let e=bB(b,a),f=c.axis||"xy",g=c.includeInvisible||!1;return co(a,e,f,c.intersect,d,g)},x(a,b,c,d){let e=bB(b,a);return cp(a,e,"x",c.intersect,d)},y(a,b,c,d){let e=bB(b,a);return cp(a,e,"y",c.intersect,d)}}};let cr=["left","top","right","bottom"];function cs(a,b){return a.filter(a=>a.pos===b)}function ct(a,b){return a.filter(a=>-1===cr.indexOf(a.pos)&&a.box.axis===b)}function cu(a,b){return a.sort((a,c)=>{let d=b?c:a,e=b?a:c;return d.weight===e.weight?d.index-e.index:d.weight-e.weight})}function cv(a,b,c,d){return Math.max(a[c],b[c])+Math.max(a[d],b[d])}function cw(a,b){a.top=Math.max(a.top,b.top),a.left=Math.max(a.left,b.left),a.bottom=Math.max(a.bottom,b.bottom),a.right=Math.max(a.right,b.right)}function cx(a,b,c,d){let e,f,g,h,i,j,k=[];for(e=0,f=a.length,i=0;e<f;++e){(h=(g=a[e]).box).update(g.width||b.w,g.height||b.h,function(a,b){let c=b.maxPadding;return function(a){let d={left:0,top:0,right:0,bottom:0};return a.forEach(a=>{d[a]=Math.max(b[a],c[a])}),d}(a?["left","right"]:["top","bottom"])}(g.horizontal,b));let{same:f,other:l}=function(a,b,c,d){let{pos:e,box:f}=c,g=a.maxPadding;if(!I(e)){c.size&&(a[e]-=c.size);let b=d[c.stack]||{size:0,count:1};b.size=Math.max(b.size,c.horizontal?f.height:f.width),c.size=b.size/b.count,a[e]+=c.size}f.getPadding&&cw(g,f.getPadding());let h=Math.max(0,b.outerWidth-cv(g,a,"left","right")),i=Math.max(0,b.outerHeight-cv(g,a,"top","bottom")),j=h!==a.w,k=i!==a.h;return a.w=h,a.h=i,c.horizontal?{same:j,other:k}:{same:k,other:j}}(b,c,g,d);i|=f&&k.length,j=j||l,h.fullSize||k.push(g)}return i&&cx(k,b,c,d)||j}function cy(a,b,c,d,e){a.top=c,a.left=b,a.right=b+d,a.bottom=c+e,a.width=d,a.height=e}function cz(a,b,c,d){let e=c.padding,{x:f,y:g}=b;for(let h of a){let a=h.box,i=d[h.stack]||{count:1,placed:0,weight:1},j=h.stackWeight/i.weight||1;if(h.horizontal){let d=b.w*j,f=i.size||a.height;Z(i.start)&&(g=i.start),a.fullSize?cy(a,e.left,g,c.outerWidth-e.right-e.left,f):cy(a,b.left+i.placed,g,d,f),i.start=g,i.placed+=d,g=a.bottom}else{let d=b.h*j,g=i.size||a.width;Z(i.start)&&(f=i.start),a.fullSize?cy(a,f,e.top,g,c.outerHeight-e.bottom-e.top):cy(a,f,b.top+i.placed,g,d),i.start=f,i.placed+=d,f=a.right}}b.x=f,b.y=g}var cA={addBox(a,b){a.boxes||(a.boxes=[]),b.fullSize=b.fullSize||!1,b.position=b.position||"top",b.weight=b.weight||0,b._layers=b._layers||function(){return[{z:0,draw(a){b.draw(a)}}]},a.boxes.push(b)},removeBox(a,b){let c=a.boxes?a.boxes.indexOf(b):-1;-1!==c&&a.boxes.splice(c,1)},configure(a,b,c){b.fullSize=c.fullSize,b.position=c.position,b.weight=c.weight},update(a,b,c,d){let e,f,g,h,i,j,k,l;if(!a)return;let m=be(a.options.layout.padding),n=Math.max(b-m.width,0),o=Math.max(c-m.height,0),p=(f=cu((e=function(a){let b,c,d,e,f,g,h=[];for(b=0,c=(a||[]).length;b<c;++b)d=a[b],({position:e,options:{stack:f,stackWeight:g=1}}=d),h.push({index:b,box:d,pos:e,horizontal:d.isHorizontal(),weight:d.weight,stack:f&&e+f,stackWeight:g});return h}(a.boxes)).filter(a=>a.box.fullSize),!0),g=cu(cs(e,"left"),!0),h=cu(cs(e,"right")),i=cu(cs(e,"top"),!0),j=cu(cs(e,"bottom")),k=ct(e,"x"),l=ct(e,"y"),{fullSize:f,leftAndTop:g.concat(i),rightAndBottom:h.concat(l).concat(j).concat(k),chartArea:cs(e,"chartArea"),vertical:g.concat(h).concat(l),horizontal:i.concat(j).concat(k)}),q=p.vertical,r=p.horizontal;O(a.boxes,a=>{"function"==typeof a.beforeLayout&&a.beforeLayout()});let s=Object.freeze({outerWidth:b,outerHeight:c,padding:m,availableWidth:n,availableHeight:o,vBoxMaxWidth:n/2/(q.reduce((a,b)=>b.box.options&&!1===b.box.options.display?a:a+1,0)||1),hBoxMaxHeight:o/2}),t=Object.assign({},m);cw(t,be(d));let u=Object.assign({maxPadding:t,w:n,h:o,x:m.left,y:m.top},m),v=function(a,b){let c,d,e,f=function(a){let b={};for(let c of a){let{stack:a,pos:d,stackWeight:e}=c;if(!a||!cr.includes(d))continue;let f=b[a]||(b[a]={count:0,placed:0,weight:0,size:0});f.count++,f.weight+=e}return b}(a),{vBoxMaxWidth:g,hBoxMaxHeight:h}=b;for(c=0,d=a.length;c<d;++c){let{fullSize:d}=(e=a[c]).box,i=f[e.stack],j=i&&e.stackWeight/i.weight;e.horizontal?(e.width=j?j*g:d&&b.availableWidth,e.height=h):(e.width=g,e.height=j?j*h:d&&b.availableHeight)}return f}(q.concat(r),s);cx(p.fullSize,u,s,v),cx(q,u,s,v),cx(r,u,s,v)&&cx(q,u,s,v);let w=u.maxPadding;function x(a){let b=Math.max(w[a]-u[a],0);return u[a]+=b,b}u.y+=x("top"),u.x+=x("left"),x("right"),x("bottom"),cz(p.leftAndTop,u,s,v),u.x+=u.w,u.y+=u.h,cz(p.rightAndBottom,u,s,v),a.chartArea={left:u.left,top:u.top,right:u.left+u.w,bottom:u.top+u.h,height:u.h,width:u.w},O(p.chartArea,b=>{let c=b.box;Object.assign(c,a.chartArea),c.update(u.w,u.h,{left:0,top:0,right:0,bottom:0})})}};class cB{acquireContext(a,b){}releaseContext(a){return!1}addEventListener(a,b,c){}removeEventListener(a,b,c){}getDevicePixelRatio(){return 1}getMaximumSize(a,b,c,d){return b=Math.max(0,b||a.width),c=c||a.height,{width:b,height:Math.max(0,d?Math.floor(b/d):c)}}isAttached(a){return!0}updateConfig(a){}}class cC extends cB{acquireContext(a){return a&&a.getContext&&a.getContext("2d")||null}updateConfig(a){a.options.animation=!1}}class cD{static defaults={};static defaultRoutes=void 0;x;y;active=!1;options;$animations;tooltipPosition(a){let{x:b,y:c}=this.getProps(["x","y"],a);return{x:b,y:c}}hasValue(){return al(this.x)&&al(this.y)}getProps(a,b){let c=this.$animations;if(!b||!c)return this;let d={};return a.forEach(a=>{d[a]=c[a]&&c[a].active()?c[a]._to:this[a]}),d}}function cE(a,b,c,d,e){let f,g,h,i=L(d,0),j=Math.min(L(e,a.length),a.length),k=0;for(c=Math.ceil(c),e&&(c=(f=e-d)/Math.floor(f/c)),h=i;h<0;)h=Math.round(i+ ++k*c);for(g=Math.max(i,0);g<j;g++)g===h&&(b.push(a[g]),h=Math.round(i+ ++k*c))}let cF=(a,b,c)=>"top"===b||"left"===b?a[b]+c:a[b]-c,cG=(a,b)=>Math.min(b||a,a);function cH(a,b){let c=[],d=a.length/b,e=a.length,f=0;for(;f<e;f+=d)c.push(a[Math.floor(f)]);return c}function cI(a){return a.drawTicks?a.tickLength:0}function cJ(a,b){if(!a.display)return 0;let c=bf(a.font,b),d=be(a.padding);return(H(a.text)?a.text.length:1)*c.lineHeight+d.height}class cK extends cD{constructor(a){super(),this.id=a.id,this.type=a.type,this.options=void 0,this.ctx=a.ctx,this.chart=a.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(a){this.options=a.setContext(this.getContext()),this.axis=a.axis,this._userMin=this.parse(a.min),this._userMax=this.parse(a.max),this._suggestedMin=this.parse(a.suggestedMin),this._suggestedMax=this.parse(a.suggestedMax)}parse(a,b){return a}getUserBounds(){let{_userMin:a,_userMax:b,_suggestedMin:c,_suggestedMax:d}=this;return a=K(a,1/0),b=K(b,-1/0),c=K(c,1/0),d=K(d,-1/0),{min:K(a,c),max:K(b,d),minDefined:J(a),maxDefined:J(b)}}getMinMax(a){let b,{min:c,max:d,minDefined:e,maxDefined:f}=this.getUserBounds();if(e&&f)return{min:c,max:d};let g=this.getMatchingVisibleMetas();for(let h=0,i=g.length;h<i;++h)b=g[h].controller.getMinMax(this,a),e||(c=Math.min(c,b.min)),f||(d=Math.max(d,b.max));return c=f&&c>d?d:c,d=e&&c>d?c:d,{min:K(c,K(d,c)),max:K(d,K(c,d))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){let a=this.chart.data;return this.options.labels||(this.isHorizontal()?a.xLabels:a.yLabels)||a.labels||[]}getLabelItems(a=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(a))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){N(this.options.beforeUpdate,[this])}update(a,b,c){let{beginAtZero:d,grace:e,ticks:f}=this.options,g=f.sampleSize;this.beforeUpdate(),this.maxWidth=a,this.maxHeight=b,this._margins=c=Object.assign({left:0,right:0,top:0,bottom:0},c),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+c.left+c.right:this.height+c.top+c.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=function(a,b,c){let{min:d,max:e}=a,f=M(b,(e-d)/2),g=(a,b)=>c&&0===a?0:a+b;return{min:g(d,-Math.abs(f)),max:g(e,f)}}(this,e,d),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();let h=g<this.ticks.length;this._convertTicksToLabels(h?cH(this.ticks,g):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),f.display&&(f.autoSkip||"auto"===f.source)&&(this.ticks=function(a,b){var c;let d,e,f=a.options.ticks,g=(d=(c=a).options.offset,e=c._tickSize(),Math.floor(Math.min(c._length/e+ +!d,c._maxLength/e))),h=Math.min(f.maxTicksLimit||g,g),i=f.major.enabled?function(a){let b,c,d=[];for(b=0,c=a.length;b<c;b++)a[b].major&&d.push(b);return d}(b):[],j=i.length,k=i[0],l=i[j-1],m=[];if(j>h)return function(a,b,c,d){let e,f=0,g=c[0];for(e=0,d=Math.ceil(d);e<a.length;e++)e===g&&(b.push(a[e]),g=c[++f*d])}(b,m,i,j/h),m;let n=function(a,b,c){let d=function(a){let b,c,d=a.length;if(d<2)return!1;for(c=a[0],b=1;b<d;++b)if(a[b]-a[b-1]!==c)return!1;return c}(a),e=b.length/c;if(!d)return Math.max(e,1);let f=function(a){let b,c=[],d=Math.sqrt(a);for(b=1;b<d;b++)a%b==0&&(c.push(b),c.push(a/b));return d===(0|d)&&c.push(d),c.sort((a,b)=>a-b).pop(),c}(d);for(let a=0,b=f.length-1;a<b;a++){let b=f[a];if(b>e)return b}return Math.max(e,1)}(i,b,h);if(j>0){let a,c,d=j>1?Math.round((l-k)/(j-1)):null;for(cE(b,m,n,G(d)?0:k-d,k),a=0,c=j-1;a<c;a++)cE(b,m,n,i[a],i[a+1]);return cE(b,m,n,l,G(d)?b.length:l+d),m}return cE(b,m,n),m}(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),h&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let a,b,c=this.options.reverse;this.isHorizontal()?(a=this.left,b=this.right):(a=this.top,b=this.bottom,c=!c),this._startPixel=a,this._endPixel=b,this._reversePixels=c,this._length=b-a,this._alignToPixels=this.options.alignToPixels}afterUpdate(){N(this.options.afterUpdate,[this])}beforeSetDimensions(){N(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){N(this.options.afterSetDimensions,[this])}_callHooks(a){this.chart.notifyPlugins(a,this.getContext()),N(this.options[a],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){N(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(a){let b,c,d,e=this.options.ticks;for(b=0,c=a.length;b<c;b++)(d=a[b]).label=N(e.callback,[d.value,b,a],this)}afterTickToLabelConversion(){N(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){N(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){let a,b,c,d=this.options,e=d.ticks,f=cG(this.ticks.length,d.ticks.maxTicksLimit),g=e.minRotation||0,h=e.maxRotation,i=g;if(!this._isVisible()||!e.display||g>=h||f<=1||!this.isHorizontal()){this.labelRotation=g;return}let j=this._getLabelSizes(),k=j.widest.width,l=j.highest.height,m=au(this.chart.width-k,0,this.maxWidth);k+6>(a=d.offset?this.maxWidth/f:m/(f-1))&&(a=m/(f-(d.offset?.5:1)),b=this.maxHeight-cI(d.grid)-e.padding-cJ(d.title,this.chart.options.font),c=Math.sqrt(k*k+l*l),i=Math.max(g,Math.min(h,i=180/aa*Math.min(Math.asin(au((j.highest.height+6)/a,-1,1)),Math.asin(au(b/c,-1,1))-Math.asin(au(l/c,-1,1)))))),this.labelRotation=i}afterCalculateLabelRotation(){N(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){N(this.options.beforeFit,[this])}fit(){let a={width:0,height:0},{chart:b,options:{ticks:c,title:d,grid:e}}=this,f=this._isVisible(),g=this.isHorizontal();if(f){let f=cJ(d,b.options.font);if(g?(a.width=this.maxWidth,a.height=cI(e)+f):(a.height=this.maxHeight,a.width=cI(e)+f),c.display&&this.ticks.length){let{first:b,last:d,widest:e,highest:f}=this._getLabelSizes(),h=2*c.padding,i=an(this.labelRotation),j=Math.cos(i),k=Math.sin(i);if(g){let b=c.mirror?0:k*e.width+j*f.height;a.height=Math.min(this.maxHeight,a.height+b+h)}else{let b=c.mirror?0:j*e.width+k*f.height;a.width=Math.min(this.maxWidth,a.width+b+h)}this._calculatePadding(b,d,k,j)}}this._handleMargins(),g?(this.width=this._length=b.width-this._margins.left-this._margins.right,this.height=a.height):(this.width=a.width,this.height=this._length=b.height-this._margins.top-this._margins.bottom)}_calculatePadding(a,b,c,d){let{ticks:{align:e,padding:f},position:g}=this.options,h=0!==this.labelRotation,i="top"!==g&&"x"===this.axis;if(this.isHorizontal()){let g=this.getPixelForTick(0)-this.left,j=this.right-this.getPixelForTick(this.ticks.length-1),k=0,l=0;h?i?(k=d*a.width,l=c*b.height):(k=c*a.height,l=d*b.width):"start"===e?l=b.width:"end"===e?k=a.width:"inner"!==e&&(k=a.width/2,l=b.width/2),this.paddingLeft=Math.max((k-g+f)*this.width/(this.width-g),0),this.paddingRight=Math.max((l-j+f)*this.width/(this.width-j),0)}else{let c=b.height/2,d=a.height/2;"start"===e?(c=0,d=a.height):"end"===e&&(c=b.height,d=0),this.paddingTop=c+f,this.paddingBottom=d+f}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){N(this.options.afterFit,[this])}isHorizontal(){let{axis:a,position:b}=this.options;return"top"===b||"bottom"===b||"x"===a}isFullSize(){return this.options.fullSize}_convertTicksToLabels(a){let b,c;for(this.beforeTickToLabelConversion(),this.generateTickLabels(a),b=0,c=a.length;b<c;b++)G(a[b].label)&&(a.splice(b,1),c--,b--);this.afterTickToLabelConversion()}_getLabelSizes(){let a=this._labelSizes;if(!a){let b=this.options.ticks.sampleSize,c=this.ticks;b<c.length&&(c=cH(c,b)),this._labelSizes=a=this._computeLabelSizes(c,c.length,this.options.ticks.maxTicksLimit)}return a}_computeLabelSizes(a,b,c){let d,e,f,g,h,i,j,k,l,m,n,{ctx:o,_longestTextCache:p}=this,q=[],r=[],s=Math.floor(b/cG(b,c)),t=0,u=0;for(d=0;d<b;d+=s){if(g=a[d].label,o.font=i=(h=this._resolveTickFontOptions(d)).string,j=p[i]=p[i]||{data:{},gc:[]},k=h.lineHeight,l=m=0,G(g)||H(g)){if(H(g))for(e=0,f=g.length;e<f;++e)G(n=g[e])||H(n)||(l=aY(o,j.data,j.gc,l,n),m+=k)}else l=aY(o,j.data,j.gc,l,g),m=k;q.push(l),r.push(m),t=Math.max(l,t),u=Math.max(m,u)}O(p,a=>{let c,d=a.gc,e=d.length/2;if(e>b){for(c=0;c<e;++c)delete a.data[d[c]];d.splice(0,e)}});let v=q.indexOf(t),w=r.indexOf(u),x=a=>({width:q[a]||0,height:r[a]||0});return{first:x(0),last:x(b-1),widest:x(v),highest:x(w),widths:q,heights:r}}getLabelForValue(a){return a}getPixelForValue(a,b){return NaN}getValueForPixel(a){}getPixelForTick(a){let b=this.ticks;return a<0||a>b.length-1?null:this.getPixelForValue(b[a].value)}getPixelForDecimal(a){this._reversePixels&&(a=1-a);let b=this._startPixel+a*this._length;return au(this._alignToPixels?aZ(this.chart,b,0):b,-32768,32767)}getDecimalForPixel(a){let b=(a-this._startPixel)/this._length;return this._reversePixels?1-b:b}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){let{min:a,max:b}=this;return a<0&&b<0?b:a>0&&b>0?a:0}getContext(a){var b,c;let d=this.ticks||[];if(a>=0&&a<d.length){let c=d[a];return c.$context||(b=this.getContext(),c.$context=bh(b,{tick:c,index:a,type:"tick"}))}return this.$context||(this.$context=(c=this.chart.getContext(),bh(c,{scale:this,type:"scale"})))}_tickSize(){let a=this.options.ticks,b=an(this.labelRotation),c=Math.abs(Math.cos(b)),d=Math.abs(Math.sin(b)),e=this._getLabelSizes(),f=a.autoSkipPadding||0,g=e?e.widest.width+f:0,h=e?e.highest.height+f:0;return this.isHorizontal()?h*c>g*d?g/c:h/d:h*d<g*c?h/c:g/d}_isVisible(){let a=this.options.display;return"auto"!==a?!!a:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(a){let b,c,d,e,f,g,h,i,j,k,l,m,n=this.axis,o=this.chart,p=this.options,{grid:q,position:r,border:s}=p,t=q.offset,u=this.isHorizontal(),v=this.ticks.length+ +!!t,w=cI(q),x=[],y=s.setContext(this.getContext()),z=y.display?y.width:0,A=z/2,B=function(a){return aZ(o,a,z)};if("top"===r)b=B(this.bottom),g=this.bottom-w,i=b-A,k=B(a.top)+A,m=a.bottom;else if("bottom"===r)b=B(this.top),k=a.top,m=B(a.bottom)-A,g=b+A,i=this.top+w;else if("left"===r)b=B(this.right),f=this.right-w,h=b-A,j=B(a.left)+A,l=a.right;else if("right"===r)b=B(this.left),j=a.left,l=B(a.right)-A,f=b+A,h=this.left+w;else if("x"===n){if("center"===r)b=B((a.top+a.bottom)/2+.5);else if(I(r)){let a=Object.keys(r)[0],c=r[a];b=B(this.chart.scales[a].getPixelForValue(c))}k=a.top,m=a.bottom,i=(g=b+A)+w}else if("y"===n){if("center"===r)b=B((a.left+a.right)/2);else if(I(r)){let a=Object.keys(r)[0],c=r[a];b=B(this.chart.scales[a].getPixelForValue(c))}h=(f=b-A)-w,j=a.left,l=a.right}let C=L(p.ticks.maxTicksLimit,v),D=Math.max(1,Math.ceil(v/C));for(c=0;c<v;c+=D){let a=this.getContext(c),b=q.setContext(a),n=s.setContext(a),p=b.lineWidth,r=b.color,v=n.dash||[],w=n.dashOffset,y=b.tickWidth,z=b.tickColor,A=b.tickBorderDash||[],B=b.tickBorderDashOffset;void 0!==(d=function(a,b,c){let d,e=a.ticks.length,f=Math.min(b,e-1),g=a._startPixel,h=a._endPixel,i=a.getPixelForTick(f);if(!c||(d=1===e?Math.max(i-g,h-i):0===b?(a.getPixelForTick(1)-i)/2:(i-a.getPixelForTick(f-1))/2,!((i+=f<b?d:-d)<g-1e-6)&&!(i>h+1e-6)))return i}(this,c,t))&&(e=aZ(o,d,p),u?f=h=j=l=e:g=i=k=m=e,x.push({tx1:f,ty1:g,tx2:h,ty2:i,x1:j,y1:k,x2:l,y2:m,width:p,color:r,borderDash:v,borderDashOffset:w,tickWidth:y,tickColor:z,tickBorderDash:A,tickBorderDashOffset:B}))}return this._ticksLength=v,this._borderValue=b,x}_computeLabelItems(a){let b,c,d,e,f,g,h,i,j,k,l,m=this.axis,n=this.options,{position:o,ticks:p}=n,q=this.isHorizontal(),r=this.ticks,{align:s,crossAlign:t,padding:u,mirror:v}=p,w=cI(n.grid),x=w+u,y=v?-u:x,z=-an(this.labelRotation),A=[],B="middle";if("top"===o)f=this.bottom-y,g=this._getXAxisLabelAlignment();else if("bottom"===o)f=this.top+y,g=this._getXAxisLabelAlignment();else if("left"===o){let a=this._getYAxisLabelAlignment(w);g=a.textAlign,e=a.x}else if("right"===o){let a=this._getYAxisLabelAlignment(w);g=a.textAlign,e=a.x}else if("x"===m){if("center"===o)f=(a.top+a.bottom)/2+x;else if(I(o)){let a=Object.keys(o)[0],b=o[a];f=this.chart.scales[a].getPixelForValue(b)+x}g=this._getXAxisLabelAlignment()}else if("y"===m){if("center"===o)e=(a.left+a.right)/2-x;else if(I(o)){let a=Object.keys(o)[0],b=o[a];e=this.chart.scales[a].getPixelForValue(b)}g=this._getYAxisLabelAlignment(w).textAlign}"y"===m&&("start"===s?B="top":"end"===s&&(B="bottom"));let C=this._getLabelSizes();for(b=0,c=r.length;b<c;++b){let a;d=r[b].label;let m=p.setContext(this.getContext(b));h=this.getPixelForTick(b)+p.labelOffset,j=(i=this._resolveTickFontOptions(b)).lineHeight;let n=(k=H(d)?d.length:1)/2,s=m.color,u=m.textStrokeColor,w=m.textStrokeWidth,x=g;if(q?(e=h,"inner"===g&&(x=b===c-1?this.options.reverse?"left":"right":0===b?this.options.reverse?"right":"left":"center"),l="top"===o?"near"===t||0!==z?-k*j+j/2:"center"===t?-C.highest.height/2-n*j+j:-C.highest.height+j/2:"near"===t||0!==z?j/2:"center"===t?C.highest.height/2-n*j:C.highest.height-k*j,v&&(l*=-1),0===z||m.showLabelBackdrop||(e+=j/2*Math.sin(z))):(f=h,l=(1-k)*j/2),m.showLabelBackdrop){let d=be(m.backdropPadding),e=C.heights[b],f=C.widths[b],h=l-d.top,i=0-d.left;switch(B){case"middle":h-=e/2;break;case"bottom":h-=e}switch(g){case"center":i-=f/2;break;case"right":i-=f;break;case"inner":b===c-1?i-=f:b>0&&(i-=f/2)}a={left:i,top:h,width:f+d.width,height:e+d.height,color:m.backdropColor}}A.push({label:d,font:i,textOffset:l,options:{rotation:z,color:s,strokeColor:u,strokeWidth:w,textAlign:x,textBaseline:B,translation:[e,f],backdrop:a}})}return A}_getXAxisLabelAlignment(){let{position:a,ticks:b}=this.options;if(-an(this.labelRotation))return"top"===a?"left":"right";let c="center";return"start"===b.align?c="left":"end"===b.align?c="right":"inner"===b.align&&(c="inner"),c}_getYAxisLabelAlignment(a){let b,c,{position:d,ticks:{crossAlign:e,mirror:f,padding:g}}=this.options,h=this._getLabelSizes(),i=a+g,j=h.widest.width;return"left"===d?f?(c=this.right+g,"near"===e?b="left":"center"===e?(b="center",c+=j/2):(b="right",c+=j)):(c=this.right-i,"near"===e?b="right":"center"===e?(b="center",c-=j/2):(b="left",c=this.left)):"right"===d?f?(c=this.left+g,"near"===e?b="right":"center"===e?(b="center",c-=j/2):(b="left",c-=j)):(c=this.left+i,"near"===e?b="left":"center"===e?(b="center",c+=j/2):(b="right",c=this.right)):b="right",{textAlign:b,x:c}}_computeLabelArea(){if(this.options.ticks.mirror)return;let a=this.chart,b=this.options.position;return"left"===b||"right"===b?{top:0,left:this.left,bottom:a.height,right:this.right}:"top"===b||"bottom"===b?{top:this.top,left:0,bottom:this.bottom,right:a.width}:void 0}drawBackground(){let{ctx:a,options:{backgroundColor:b},left:c,top:d,width:e,height:f}=this;b&&(a.save(),a.fillStyle=b,a.fillRect(c,d,e,f),a.restore())}getLineWidthForValue(a){let b=this.options.grid;if(!this._isVisible()||!b.display)return 0;let c=this.ticks.findIndex(b=>b.value===a);return c>=0?b.setContext(this.getContext(c)).lineWidth:0}drawGrid(a){let b,c,d=this.options.grid,e=this.ctx,f=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(a)),g=(a,b,c)=>{c.width&&c.color&&(e.save(),e.lineWidth=c.width,e.strokeStyle=c.color,e.setLineDash(c.borderDash||[]),e.lineDashOffset=c.borderDashOffset,e.beginPath(),e.moveTo(a.x,a.y),e.lineTo(b.x,b.y),e.stroke(),e.restore())};if(d.display)for(b=0,c=f.length;b<c;++b){let a=f[b];d.drawOnChartArea&&g({x:a.x1,y:a.y1},{x:a.x2,y:a.y2},a),d.drawTicks&&g({x:a.tx1,y:a.ty1},{x:a.tx2,y:a.ty2},{color:a.tickColor,width:a.tickWidth,borderDash:a.tickBorderDash,borderDashOffset:a.tickBorderDashOffset})}}drawBorder(){let a,b,c,d,{chart:e,ctx:f,options:{border:g,grid:h}}=this,i=g.setContext(this.getContext()),j=g.display?i.width:0;if(!j)return;let k=h.setContext(this.getContext(0)).lineWidth,l=this._borderValue;this.isHorizontal()?(a=aZ(e,this.left,j)-j/2,b=aZ(e,this.right,k)+k/2,c=d=l):(c=aZ(e,this.top,j)-j/2,d=aZ(e,this.bottom,k)+k/2,a=b=l),f.save(),f.lineWidth=i.width,f.strokeStyle=i.color,f.beginPath(),f.moveTo(a,c),f.lineTo(b,d),f.stroke(),f.restore()}drawLabels(a){if(!this.options.ticks.display)return;let b=this.ctx,c=this._computeLabelArea();for(let d of(c&&a2(b,c),this.getLabelItems(a))){let a=d.options,c=d.font;a6(b,d.label,0,d.textOffset,c,a)}c&&a3(b)}drawTitle(){let a,b,{ctx:c,options:{position:d,title:e,reverse:f}}=this;if(!e.display)return;let g=bf(e.font),h=be(e.padding),i=e.align,j=g.lineHeight/2;"bottom"===d||"center"===d||I(d)?(j+=h.bottom,H(e.text)&&(j+=g.lineHeight*(e.text.length-1))):j+=h.top;let{titleX:k,titleY:l,maxWidth:m,rotation:n}=function(a,b,c,d){let e,f,g,{top:h,left:i,bottom:j,right:k,chart:l}=a,{chartArea:m,scales:n}=l,o=0,p=j-h,q=k-i;if(a.isHorizontal()){if(f=aE(d,i,k),I(c)){let a=Object.keys(c)[0],d=c[a];g=n[a].getPixelForValue(d)+p-b}else g="center"===c?(m.bottom+m.top)/2+p-b:cF(a,c,b);e=k-i}else{if(I(c)){let a=Object.keys(c)[0],d=c[a];f=n[a].getPixelForValue(d)-q+b}else f="center"===c?(m.left+m.right)/2-q+b:cF(a,c,b);g=aE(d,j,h),o="left"===c?-ae:ae}return{titleX:f,titleY:g,maxWidth:e,rotation:o}}(this,j,d,i);a6(c,e.text,0,0,g,{color:e.color,maxWidth:m,rotation:n,textAlign:(a=aD(i),(f&&"right"!==d||!f&&"right"===d)&&(a="left"===(b=a)?"right":"right"===b?"left":b),a),textBaseline:"middle",translation:[k,l]})}draw(a){this._isVisible()&&(this.drawBackground(),this.drawGrid(a),this.drawBorder(),this.drawTitle(),this.drawLabels(a))}_layers(){let a=this.options,b=a.ticks&&a.ticks.z||0,c=L(a.grid&&a.grid.z,-1),d=L(a.border&&a.border.z,0);return this._isVisible()&&this.draw===cK.prototype.draw?[{z:c,draw:a=>{this.drawBackground(),this.drawGrid(a),this.drawTitle()}},{z:d,draw:()=>{this.drawBorder()}},{z:b,draw:a=>{this.drawLabels(a)}}]:[{z:b,draw:a=>{this.draw(a)}}]}getMatchingVisibleMetas(a){let b,c,d=this.chart.getSortedVisibleDatasetMetas(),e=this.axis+"AxisID",f=[];for(b=0,c=d.length;b<c;++b){let c=d[b];c[e]!==this.id||a&&c.type!==a||f.push(c)}return f}_resolveTickFontOptions(a){return bf(this.options.ticks.setContext(this.getContext(a)).font)}_maxDigits(){let a=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/a}}class cL{constructor(a,b,c){this.type=a,this.scope=b,this.override=c,this.items=Object.create(null)}isForType(a){return Object.prototype.isPrototypeOf.call(this.type.prototype,a.prototype)}register(a){var b,c,d,e,f,g;let h,i,j=Object.getPrototypeOf(a);"id"in(b=j)&&"defaults"in b&&(i=this.register(j));let k=this.items,l=a.id,m=this.scope+"."+l;if(!l)throw Error("class does not have id: "+a);return l in k||(k[l]=a,c=a,d=m,e=i,h=T(Object.create(null),[e?aX.get(e):{},aX.get(d),c.defaults]),aX.set(d,h),c.defaultRoutes&&(f=d,Object.keys(g=c.defaultRoutes).forEach(a=>{let b=a.split("."),c=b.pop(),d=[f].concat(b).join("."),e=g[a].split("."),h=e.pop(),i=e.join(".");aX.route(d,c,i,h)})),c.descriptors&&aX.describe(d,c.descriptors),this.override&&aX.override(a.id,a.overrides)),m}get(a){return this.items[a]}unregister(a){let b=this.items,c=a.id,d=this.scope;c in b&&delete b[c],d&&c in aX[d]&&(delete aX[d][c],this.override&&delete aT[c])}}var cM=new class{constructor(){this.controllers=new cL(b5,"datasets",!0),this.elements=new cL(cD,"elements"),this.plugins=new cL(Object,"plugins"),this.scales=new cL(cK,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...a){this._each("register",a)}remove(...a){this._each("unregister",a)}addControllers(...a){this._each("register",a,this.controllers)}addElements(...a){this._each("register",a,this.elements)}addPlugins(...a){this._each("register",a,this.plugins)}addScales(...a){this._each("register",a,this.scales)}getController(a){return this._get(a,this.controllers,"controller")}getElement(a){return this._get(a,this.elements,"element")}getPlugin(a){return this._get(a,this.plugins,"plugin")}getScale(a){return this._get(a,this.scales,"scale")}removeControllers(...a){this._each("unregister",a,this.controllers)}removeElements(...a){this._each("unregister",a,this.elements)}removePlugins(...a){this._each("unregister",a,this.plugins)}removeScales(...a){this._each("unregister",a,this.scales)}_each(a,b,c){[...b].forEach(b=>{let d=c||this._getRegistryForType(b);c||d.isForType(b)||d===this.plugins&&b.id?this._exec(a,d,b):O(b,b=>{let d=c||this._getRegistryForType(b);this._exec(a,d,b)})})}_exec(a,b,c){let d=Y(a);N(c["before"+d],[],c),b[a](c),N(c["after"+d],[],c)}_getRegistryForType(a){for(let b=0;b<this._typedRegistries.length;b++){let c=this._typedRegistries[b];if(c.isForType(a))return c}return this.plugins}_get(a,b,c){let d=b.get(a);if(void 0===d)throw Error('"'+a+'" is not a registered '+c+".");return d}};class cN{constructor(){this._init=void 0}notify(a,b,c,d){if("beforeInit"===b&&(this._init=this._createDescriptors(a,!0),this._notify(this._init,a,"install")),void 0===this._init)return;let e=d?this._descriptors(a).filter(d):this._descriptors(a),f=this._notify(e,a,b,c);return"afterDestroy"===b&&(this._notify(e,a,"stop"),this._notify(this._init,a,"uninstall"),this._init=void 0),f}_notify(a,b,c,d){for(let e of(d=d||{},a)){let a=e.plugin;if(!1===N(a[c],[b,d,e.options],a)&&d.cancelable)return!1}return!0}invalidate(){G(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(a){if(this._cache)return this._cache;let b=this._cache=this._createDescriptors(a);return this._notifyStateChanges(a),b}_createDescriptors(a,b){let c=a&&a.config,d=L(c.options&&c.options.plugins,{}),e=function(a){let b={},c=[],d=Object.keys(cM.plugins.items);for(let a=0;a<d.length;a++)c.push(cM.getPlugin(d[a]));let e=a.plugins||[];for(let a=0;a<e.length;a++){let d=e[a];-1===c.indexOf(d)&&(c.push(d),b[d.id]=!0)}return{plugins:c,localIds:b}}(c);return!1!==d||b?function(a,{plugins:b,localIds:c},d,e){let f=[],g=a.getContext();for(let i of b){var h;let b=i.id,j=(h=d[b],e||!1!==h?!0===h?{}:h:null);null!==j&&f.push({plugin:i,options:function(a,{plugin:b,local:c},d,e){let f=a.pluginScopeKeys(b),g=a.getOptionScopes(d,f);return c&&b.defaults&&g.push(b.defaults),a.createResolver(g,e,[""],{scriptable:!1,indexable:!1,allKeys:!0})}(a.config,{plugin:i,local:c[b]},j,g)})}return f}(a,e,d,b):[]}_notifyStateChanges(a){let b=this._oldCache||[],c=this._cache,d=(a,b)=>a.filter(a=>!b.some(b=>a.plugin.id===b.plugin.id));this._notify(d(b,c),a,"stop"),this._notify(d(c,b),a,"start")}}function cO(a,b){let c=aX.datasets[a]||{};return((b.datasets||{})[a]||{}).indexAxis||b.indexAxis||c.indexAxis||"x"}function cP(a){if("x"===a||"y"===a||"r"===a)return a}function cQ(a,...b){if(cP(a))return a;for(let d of b){var c;let b=d.axis||("top"===(c=d.position)||"bottom"===c?"x":"left"===c||"right"===c?"y":void 0)||a.length>1&&cP(a[0].toLowerCase());if(b)return b}throw Error(`Cannot determine type of '${a}' axis. Please provide 'axis' or 'position' option.`)}function cR(a,b,c){if(c[b+"AxisID"]===a)return{axis:b}}function cS(a){let b,c,d,e,f=a.options||(a.options={});f.plugins=L(f.plugins,{}),b=aT[a.type]||{scales:{}},c=f.scales||{},d=cO(a.type,f),e=Object.create(null),Object.keys(c).forEach(f=>{let g=c[f];if(!I(g))return console.error(`Invalid scale configuration for scale: ${f}`);if(g._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${f}`);let h=cQ(f,g,function(a,b){if(b.data&&b.data.datasets){let c=b.data.datasets.filter(b=>b.xAxisID===a||b.yAxisID===a);if(c.length)return cR(a,"x",c[0])||cR(a,"y",c[0])}return{}}(f,a),aX.scales[g.type]),i=h===d?"_index_":"_value_",j=b.scales||{};e[f]=U(Object.create(null),[{axis:h},g,j[h],j[i]])}),a.data.datasets.forEach(b=>{let d=b.type||a.type,g=b.indexAxis||cO(d,f),h=(aT[d]||{}).scales||{};Object.keys(h).forEach(a=>{let d,f=(d=a,"_index_"===a?d=g:"_value_"===a&&(d="x"===g?"y":"x"),d),i=b[f+"AxisID"]||f;e[i]=e[i]||Object.create(null),U(e[i],[{axis:f},c[i],h[a]])})}),Object.keys(e).forEach(a=>{let b=e[a];U(b,[aX.scales[b.type],aX.scale])}),f.scales=e}function cT(a){return(a=a||{}).datasets=a.datasets||[],a.labels=a.labels||[],a}let cU=new Map,cV=new Set;function cW(a,b){let c=cU.get(a);return c||(c=b(),cU.set(a,c),cV.add(c)),c}let cX=(a,b,c)=>{let d=X(b,c);void 0!==d&&a.add(d)};class cY{constructor(a){this._config=function(a){return(a=a||{}).data=cT(a.data),cS(a),a}(a),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(a){this._config.type=a}get data(){return this._config.data}set data(a){this._config.data=cT(a)}get options(){return this._config.options}set options(a){this._config.options=a}get plugins(){return this._config.plugins}update(){let a=this._config;this.clearCache(),cS(a)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(a){return cW(a,()=>[[`datasets.${a}`,""]])}datasetAnimationScopeKeys(a,b){return cW(`${a}.transition.${b}`,()=>[[`datasets.${a}.transitions.${b}`,`transitions.${b}`],[`datasets.${a}`,""]])}datasetElementScopeKeys(a,b){return cW(`${a}-${b}`,()=>[[`datasets.${a}.elements.${b}`,`datasets.${a}`,`elements.${b}`,""]])}pluginScopeKeys(a){let b=a.id,c=this.type;return cW(`${c}-plugin-${b}`,()=>[[`plugins.${b}`,...a.additionalOptionScopes||[]]])}_cachedScopes(a,b){let c=this._scopeCache,d=c.get(a);return(!d||b)&&(d=new Map,c.set(a,d)),d}getOptionScopes(a,b,c){let{options:d,type:e}=this,f=this._cachedScopes(a,c),g=f.get(b);if(g)return g;let h=new Set;b.forEach(b=>{a&&(h.add(a),b.forEach(b=>cX(h,a,b))),b.forEach(a=>cX(h,d,a)),b.forEach(a=>cX(h,aT[e]||{},a)),b.forEach(a=>cX(h,aX,a)),b.forEach(a=>cX(h,aU,a))});let i=Array.from(h);return 0===i.length&&i.push(Object.create(null)),cV.has(b)&&f.set(b,i),i}chartOptionScopes(){let{options:a,type:b}=this;return[a,aT[b]||{},aX.datasets[b]||{},{type:b},aX,aU]}resolveNamedOptions(a,b,c,d=[""]){let e={$shared:!0},{resolver:f,subPrefixes:g}=cZ(this._resolverCache,a,d),h=f;if(function(a,b){let{isScriptable:c,isIndexable:d}=bk(a);for(let e of b){let b=c(e),f=d(e),g=(f||b)&&a[e];if(b&&($(g)||c$(g))||f&&H(g))return!0}return!1}(f,b)){e.$shared=!1,c=$(c)?c():c;let b=this.createResolver(a,c,g);h=bj(f,c,b)}for(let a of b)e[a]=h[a];return e}createResolver(a,b,c=[""],d){let{resolver:e}=cZ(this._resolverCache,a,c);return I(b)?bj(e,b,void 0,d):e}}function cZ(a,b,c){let d=a.get(b);d||(d=new Map,a.set(b,d));let e=c.join(),f=d.get(e);return f||(f={resolver:bi(b,c),subPrefixes:c.filter(a=>!a.toLowerCase().includes("hover"))},d.set(e,f)),f}let c$=a=>I(a)&&Object.getOwnPropertyNames(a).some(b=>$(a[b])),c_=["top","bottom","left","right","chartArea"];function c0(a,b){return"top"===a||"bottom"===a||-1===c_.indexOf(a)&&"x"===b}function c1(a,b){return function(c,d){return c[a]===d[a]?c[b]-d[b]:c[a]-d[a]}}function c2(a){let b=a.chart,c=b.options.animation;b.notifyPlugins("afterRender"),N(c&&c.onComplete,[a],b)}function c3(a){let b=a.chart,c=b.options.animation;N(c&&c.onProgress,[a],b)}function c4(a){return a&&a.length&&(a=a[0]),a&&a.canvas&&(a=a.canvas),a}let c5={},c6=a=>{let b=c4(a);return Object.values(c5).filter(a=>a.canvas===b).pop()};class c7{static defaults=aX;static instances=c5;static overrides=aT;static registry=cM;static version="4.5.1";static getChart=c6;static register(...a){cM.add(...a),c8()}static unregister(...a){cM.remove(...a),c8()}constructor(a,b){const c=this.config=new cY(b),d=c4(a),e=c6(d);if(e)throw Error("Canvas is already in use. Chart with ID '"+e.id+"' must be destroyed before the canvas with ID '"+e.canvas.id+"' can be reused.");const f=c.createResolver(c.chartOptionScopes(),this.getContext());this.platform=new(c.platform||cC),this.platform.updateConfig(c);const g=this.platform.acquireContext(d,f.aspectRatio),h=g&&g.canvas,i=h&&h.height,j=h&&h.width;if(this.id=F(),this.ctx=g,this.canvas=h,this.width=j,this.height=i,this._options=f,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new cN,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=function(a,b){let c;return function(...d){return b?(clearTimeout(c),c=setTimeout(a,b,d)):a.apply(this,d),b}}(a=>this.update(a),f.resizeDelay||0),this._dataChanges=[],c5[this.id]=this,!g||!h)return void console.error("Failed to create chart: can't acquire context from the given item");bS.listen(this,"complete",c2),bS.listen(this,"progress",c3),this._initialize(),this.attached&&this.update()}get aspectRatio(){let{options:{aspectRatio:a,maintainAspectRatio:b},width:c,height:d,_aspectRatio:e}=this;return G(a)?b&&e?e:d?c/d:null:a}get data(){return this.config.data}set data(a){this.config.data=a}get options(){return this._options}set options(a){this.config.options=a}get registry(){return cM}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():bD(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return a$(this.canvas,this.ctx),this}stop(){return bS.stop(this),this}resize(a,b){bS.running(this)?this._resizeBeforeDraw={width:a,height:b}:this._resize(a,b)}_resize(a,b){let c=this.options,d=this.canvas,e=c.maintainAspectRatio&&this.aspectRatio,f=this.platform.getMaximumSize(d,a,b,e),g=c.devicePixelRatio||this.platform.getDevicePixelRatio(),h=this.width?"resize":"attach";this.width=f.width,this.height=f.height,this._aspectRatio=this.aspectRatio,bD(this,g,!0)&&(this.notifyPlugins("resize",{size:f}),N(c.onResize,[this,f],this),this.attached&&this._doResize(h)&&this.render())}ensureScalesHaveIDs(){O(this.options.scales||{},(a,b)=>{a.id=b})}buildOrUpdateScales(){let a=this.options,b=a.scales,c=this.scales,d=Object.keys(c).reduce((a,b)=>(a[b]=!1,a),{}),e=[];b&&(e=e.concat(Object.keys(b).map(a=>{let c=b[a],d=cQ(a,c),e="r"===d,f="x"===d;return{options:c,dposition:e?"chartArea":f?"bottom":"left",dtype:e?"radialLinear":f?"category":"linear"}}))),O(e,b=>{let e=b.options,f=e.id,g=cQ(f,e),h=L(e.type,b.dtype);(void 0===e.position||c0(e.position,g)!==c0(b.dposition))&&(e.position=b.dposition),d[f]=!0;let i=null;f in c&&c[f].type===h?i=c[f]:c[(i=new(cM.getScale(h))({id:f,type:h,ctx:this.ctx,chart:this})).id]=i,i.init(e,a)}),O(d,(a,b)=>{a||delete c[b]}),O(c,a=>{cA.configure(this,a,a.options),cA.addBox(this,a)})}_updateMetasets(){let a=this._metasets,b=this.data.datasets.length,c=a.length;if(a.sort((a,b)=>a.index-b.index),c>b){for(let a=b;a<c;++a)this._destroyDatasetMeta(a);a.splice(b,c-b)}this._sortedMetasets=a.slice(0).sort(c1("order","index"))}_removeUnreferencedMetasets(){let{_metasets:a,data:{datasets:b}}=this;a.length>b.length&&delete this._stacks,a.forEach((a,c)=>{0===b.filter(b=>b===a._dataset).length&&this._destroyDatasetMeta(c)})}buildOrUpdateControllers(){let a,b,c=[],d=this.data.datasets;for(this._removeUnreferencedMetasets(),a=0,b=d.length;a<b;a++){let b=d[a],e=this.getDatasetMeta(a),f=b.type||this.config.type;if(e.type&&e.type!==f&&(this._destroyDatasetMeta(a),e=this.getDatasetMeta(a)),e.type=f,e.indexAxis=b.indexAxis||cO(f,this.options),e.order=b.order||0,e.index=a,e.label=""+b.label,e.visible=this.isDatasetVisible(a),e.controller)e.controller.updateIndex(a),e.controller.linkScales();else{let b=cM.getController(f),{datasetElementType:d,dataElementType:g}=aX.datasets[f];Object.assign(b,{dataElementType:cM.getElement(g),datasetElementType:d&&cM.getElement(d)}),e.controller=new b(this,a),c.push(e.controller)}}return this._updateMetasets(),c}_resetElements(){O(this.data.datasets,(a,b)=>{this.getDatasetMeta(b).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(a){let b=this.config;b.update();let c=this._options=b.createResolver(b.chartOptionScopes(),this.getContext()),d=this._animationsDisabled=!c.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),!1===this.notifyPlugins("beforeUpdate",{mode:a,cancelable:!0}))return;let e=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let f=0;for(let a=0,b=this.data.datasets.length;a<b;a++){let{controller:b}=this.getDatasetMeta(a),c=!d&&-1===e.indexOf(b);b.buildOrUpdateElements(c),f=Math.max(+b.getMaxOverflow(),f)}f=this._minPadding=c.layout.autoPadding?f:0,this._updateLayout(f),d||O(e,a=>{a.reset()}),this._updateDatasets(a),this.notifyPlugins("afterUpdate",{mode:a}),this._layers.sort(c1("z","_idx"));let{_active:g,_lastEvent:h}=this;h?this._eventHandler(h,!0):g.length&&this._updateHoverStyles(g,g,!0),this.render()}_updateScales(){O(this.scales,a=>{cA.removeBox(this,a)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){let a=this.options;_(new Set(Object.keys(this._listeners)),new Set(a.events))&&!!this._responsiveListeners===a.responsive||(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){let{_hiddenIndices:a}=this;for(let{method:c,start:d,count:e}of this._getUniformDataChanges()||[]){var b="_removeElements"===c?-e:e;for(let c of Object.keys(a)){let e=+c;if(e>=d){let f=a[c];delete a[c],(b>0||e>d)&&(a[e+b]=f)}}}}_getUniformDataChanges(){let a=this._dataChanges;if(!a||!a.length)return;this._dataChanges=[];let b=this.data.datasets.length,c=b=>new Set(a.filter(a=>a[0]===b).map((a,b)=>b+","+a.splice(1).join(","))),d=c(0);for(let a=1;a<b;a++)if(!_(d,c(a)))return;return Array.from(d).map(a=>a.split(",")).map(a=>({method:a[1],start:+a[2],count:+a[3]}))}_updateLayout(a){if(!1===this.notifyPlugins("beforeLayout",{cancelable:!0}))return;cA.update(this,this.width,this.height,a);let b=this.chartArea,c=b.width<=0||b.height<=0;this._layers=[],O(this.boxes,a=>{c&&"chartArea"===a.position||(a.configure&&a.configure(),this._layers.push(...a._layers()))},this),this._layers.forEach((a,b)=>{a._idx=b}),this.notifyPlugins("afterLayout")}_updateDatasets(a){if(!1!==this.notifyPlugins("beforeDatasetsUpdate",{mode:a,cancelable:!0})){for(let a=0,b=this.data.datasets.length;a<b;++a)this.getDatasetMeta(a).controller.configure();for(let b=0,c=this.data.datasets.length;b<c;++b)this._updateDataset(b,$(a)?a({datasetIndex:b}):a);this.notifyPlugins("afterDatasetsUpdate",{mode:a})}}_updateDataset(a,b){let c=this.getDatasetMeta(a),d={meta:c,index:a,mode:b,cancelable:!0};!1!==this.notifyPlugins("beforeDatasetUpdate",d)&&(c.controller._update(b),d.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",d))}render(){!1!==this.notifyPlugins("beforeRender",{cancelable:!0})&&(bS.has(this)?this.attached&&!bS.running(this)&&bS.start(this):(this.draw(),c2({chart:this})))}draw(){let a;if(this._resizeBeforeDraw){let{width:a,height:b}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(a,b)}if(this.clear(),this.width<=0||this.height<=0||!1===this.notifyPlugins("beforeDraw",{cancelable:!0}))return;let b=this._layers;for(a=0;a<b.length&&b[a].z<=0;++a)b[a].draw(this.chartArea);for(this._drawDatasets();a<b.length;++a)b[a].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(a){let b,c,d=this._sortedMetasets,e=[];for(b=0,c=d.length;b<c;++b){let c=d[b];(!a||c.visible)&&e.push(c)}return e}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(!1===this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0}))return;let a=this.getSortedVisibleDatasetMetas();for(let b=a.length-1;b>=0;--b)this._drawDataset(a[b]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(a){let b=this.ctx,c={meta:a,index:a.index,cancelable:!0},d=bR(this,a);!1!==this.notifyPlugins("beforeDatasetDraw",c)&&(d&&a2(b,d),a.controller.draw(),d&&a3(b),c.cancelable=!1,this.notifyPlugins("afterDatasetDraw",c))}isPointInArea(a){return a1(a,this.chartArea,this._minPadding)}getElementsAtEventForMode(a,b,c,d){let e=cq.modes[b];return"function"==typeof e?e(this,a,c,d):[]}getDatasetMeta(a){let b=this.data.datasets[a],c=this._metasets,d=c.filter(a=>a&&a._dataset===b).pop();return d||(d={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:b&&b.order||0,index:a,_dataset:b,_parsed:[],_sorted:!1},c.push(d)),d}getContext(){return this.$context||(this.$context=bh(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(a){let b=this.data.datasets[a];if(!b)return!1;let c=this.getDatasetMeta(a);return"boolean"==typeof c.hidden?!c.hidden:!b.hidden}setDatasetVisibility(a,b){this.getDatasetMeta(a).hidden=!b}toggleDataVisibility(a){this._hiddenIndices[a]=!this._hiddenIndices[a]}getDataVisibility(a){return!this._hiddenIndices[a]}_updateVisibility(a,b,c){let d=c?"show":"hide",e=this.getDatasetMeta(a),f=e.controller._resolveAnimations(void 0,d);Z(b)?(e.data[b].hidden=!c,this.update()):(this.setDatasetVisibility(a,c),f.update(e,{visible:c}),this.update(b=>b.datasetIndex===a?d:void 0))}hide(a,b){this._updateVisibility(a,b,!1)}show(a,b){this._updateVisibility(a,b,!0)}_destroyDatasetMeta(a){let b=this._metasets[a];b&&b.controller&&b.controller._destroy(),delete this._metasets[a]}_stop(){let a,b;for(this.stop(),bS.remove(this),a=0,b=this.data.datasets.length;a<b;++a)this._destroyDatasetMeta(a)}destroy(){this.notifyPlugins("beforeDestroy");let{canvas:a,ctx:b}=this;this._stop(),this.config.clearCache(),a&&(this.unbindEvents(),a$(a,b),this.platform.releaseContext(b),this.canvas=null,this.ctx=null),delete c5[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...a){return this.canvas.toDataURL(...a)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){let a=this._listeners,b=this.platform,c=(c,d)=>{b.addEventListener(this,c,d),a[c]=d},d=(a,b,c)=>{a.offsetX=b,a.offsetY=c,this._eventHandler(a)};O(this.options.events,a=>c(a,d))}bindResponsiveEvents(){let a;this._responsiveListeners||(this._responsiveListeners={});let b=this._responsiveListeners,c=this.platform,d=(a,d)=>{c.addEventListener(this,a,d),b[a]=d},e=(a,d)=>{b[a]&&(c.removeEventListener(this,a,d),delete b[a])},f=(a,b)=>{this.canvas&&this.resize(a,b)},g=()=>{e("attach",g),this.attached=!0,this.resize(),d("resize",f),d("detach",a)};a=()=>{this.attached=!1,e("resize",f),this._stop(),this._resize(0,0),d("attach",g)},c.isAttached(this.canvas)?g():a()}unbindEvents(){O(this._listeners,(a,b)=>{this.platform.removeEventListener(this,b,a)}),this._listeners={},O(this._responsiveListeners,(a,b)=>{this.platform.removeEventListener(this,b,a)}),this._responsiveListeners=void 0}updateHoverStyle(a,b,c){let d,e,f,g=c?"set":"remove";for("dataset"===b&&this.getDatasetMeta(a[0].datasetIndex).controller["_"+g+"DatasetHoverStyle"](),e=0,f=a.length;e<f;++e){let b=(d=a[e])&&this.getDatasetMeta(d.datasetIndex).controller;b&&b[g+"HoverStyle"](d.element,d.datasetIndex,d.index)}}getActiveElements(){return this._active||[]}setActiveElements(a){let b=this._active||[],c=a.map(({datasetIndex:a,index:b})=>{let c=this.getDatasetMeta(a);if(!c)throw Error("No dataset found at index "+a);return{datasetIndex:a,element:c.data[b],index:b}});P(c,b)||(this._active=c,this._lastEvent=null,this._updateHoverStyles(c,b))}notifyPlugins(a,b,c){return this._plugins.notify(this,a,b,c)}isPluginEnabled(a){return 1===this._plugins._cache.filter(b=>b.plugin.id===a).length}_updateHoverStyles(a,b,c){let d=this.options.hover,e=(a,b)=>a.filter(a=>!b.some(b=>a.datasetIndex===b.datasetIndex&&a.index===b.index)),f=e(b,a),g=c?a:e(a,b);f.length&&this.updateHoverStyle(f,d.mode,!1),g.length&&d.mode&&this.updateHoverStyle(g,d.mode,!0)}_eventHandler(a,b){let c={event:a,replay:b,cancelable:!0,inChartArea:this.isPointInArea(a)},d=b=>(b.options.events||this.options.events).includes(a.native.type);if(!1===this.notifyPlugins("beforeEvent",c,d))return;let e=this._handleEvent(a,b,c.inChartArea);return c.cancelable=!1,this.notifyPlugins("afterEvent",c,d),(e||c.changed)&&this.render(),this}_handleEvent(a,b,c){var d;let{_active:e=[],options:f}=this,g=this._getActiveElements(a,e,c,b),h="mouseup"===a.type||"click"===a.type||"contextmenu"===a.type,i=(d=this._lastEvent,c&&"mouseout"!==a.type?h?d:a:null);c&&(this._lastEvent=null,N(f.onHover,[a,g,this],this),h&&N(f.onClick,[a,g,this],this));let j=!P(g,e);return(j||b)&&(this._active=g,this._updateHoverStyles(g,e,b)),this._lastEvent=i,j}_getActiveElements(a,b,c,d){if("mouseout"===a.type)return[];if(!c)return b;let e=this.options.hover;return this.getElementsAtEventForMode(a,e.mode,e,d)}}function c8(){return O(c7.instances,a=>a._plugins.invalidate())}function c9(a,b,c,d){return{x:c+a*Math.cos(b),y:d+a*Math.sin(b)}}function da(a,b,c,d,e,f){var g,h,i,j;let k,l,m,n,{x:o,y:p,startAngle:q,pixelMargin:r,innerRadius:s}=b,t=Math.max(b.outerRadius+d+c-r,0),u=s>0?s+d+c+r:0,v=0,w=e-q;if(d){let a=t>0?t-d:0,b=((s>0?s-d:0)+a)/2;v=(w-(0!==b?w*b/(b+d):w))/2}let x=Math.max(.001,w*t-c/aa)/t,y=(w-x)/2,z=q+y+v,A=e-y-v,{outerStart:B,outerEnd:C,innerStart:D,innerEnd:E}=(g=b,h=u,i=t,j=A-z,k=bb(g.options.borderRadius,["outerStart","outerEnd","innerStart","innerEnd"]),m=Math.min(l=(i-h)/2,j*h/2),{outerStart:(n=a=>{let b=(i-Math.min(l,a))*j/2;return au(a,0,Math.min(l,b))})(k.outerStart),outerEnd:n(k.outerEnd),innerStart:au(k.innerStart,0,m),innerEnd:au(k.innerEnd,0,m)}),F=t-B,G=t-C,H=z+B/F,I=A-C/G,J=u+D,K=u+E,L=z+D/J,M=A-E/K;if(a.beginPath(),f){let b=(H+I)/2;if(a.arc(o,p,t,H,b),a.arc(o,p,t,b,I),C>0){let b=c9(G,I,o,p);a.arc(b.x,b.y,C,I,A+ae)}let c=c9(K,A,o,p);if(a.lineTo(c.x,c.y),E>0){let b=c9(K,M,o,p);a.arc(b.x,b.y,E,A+ae,M+Math.PI)}let d=(A-E/u+(z+D/u))/2;if(a.arc(o,p,u,A-E/u,d,!0),a.arc(o,p,u,d,z+D/u,!0),D>0){let b=c9(J,L,o,p);a.arc(b.x,b.y,D,L+Math.PI,z-ae)}let e=c9(F,z,o,p);if(a.lineTo(e.x,e.y),B>0){let b=c9(F,H,o,p);a.arc(b.x,b.y,B,z-ae,H)}}else{a.moveTo(o,p);let b=Math.cos(H)*t+o,c=Math.sin(H)*t+p;a.lineTo(b,c);let d=Math.cos(I)*t+o,e=Math.sin(I)*t+p;a.lineTo(d,e)}a.closePath()}function db(a,b,c=b){a.lineCap=L(c.borderCapStyle,b.borderCapStyle),a.setLineDash(L(c.borderDash,b.borderDash)),a.lineDashOffset=L(c.borderDashOffset,b.borderDashOffset),a.lineJoin=L(c.borderJoinStyle,b.borderJoinStyle),a.lineWidth=L(c.borderWidth,b.borderWidth),a.strokeStyle=L(c.borderColor,b.borderColor)}function dc(a,b,c){a.lineTo(c.x,c.y)}function dd(a,b,c={}){let d=a.length,{start:e=0,end:f=d-1}=c,{start:g,end:h}=b,i=Math.max(e,g),j=Math.min(f,h);return{count:d,start:i,loop:b.loop,ilen:j<i&&!(e<g&&f<g||e>h&&f>h)?d+j-i:j-i}}function de(a,b,c,d){let e,f,g,{points:h,options:i}=b,{count:j,start:k,loop:l,ilen:m}=dd(h,c,d),n=i.stepped?a4:i.tension||"monotone"===i.cubicInterpolationMode?a5:dc,{move:o=!0,reverse:p}=d||{};for(e=0;e<=m;++e)(f=h[(k+(p?m-e:e))%j]).skip||(o?(a.moveTo(f.x,f.y),o=!1):n(a,g,f,p,i.stepped),g=f);return l&&n(a,g,f=h[(k+(p?m:0))%j],p,i.stepped),!!l}function df(a,b,c,d){let e,f,g,h,i,j,k=b.points,{count:l,start:m,ilen:n}=dd(k,c,d),{move:o=!0,reverse:p}=d||{},q=0,r=0,s=a=>(m+(p?n-a:a))%l,t=()=>{h!==i&&(a.lineTo(q,i),a.lineTo(q,h),a.lineTo(q,j))};for(o&&(f=k[s(0)],a.moveTo(f.x,f.y)),e=0;e<=n;++e){if((f=k[s(e)]).skip)continue;let b=f.x,c=f.y,d=0|b;d===g?(c<h?h=c:c>i&&(i=c),q=(r*q+b)/++r):(t(),a.lineTo(b,c),g=d,r=0,h=i=c),j=c}t()}function dg(a){let b=a.options,c=b.borderDash&&b.borderDash.length;return a._decimated||a._loop||b.tension||"monotone"===b.cubicInterpolationMode||b.stepped||c?de:df}let dh="function"==typeof Path2D;class di extends cD{static id="line";static defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};static descriptors={_scriptable:!0,_indexable:a=>"borderDash"!==a&&"fill"!==a};constructor(a){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,a&&Object.assign(this,a)}updateControlPoints(a,b){let c=this.options;if((c.tension||"monotone"===c.cubicInterpolationMode)&&!c.stepped&&!this._pointsUpdated){let d=c.spanGaps?this._loop:this._fullLoop;!function(a,b,c,d,e){let f,g,h,i;if(b.spanGaps&&(a=a.filter(a=>!a.skip)),"monotone"===b.cubicInterpolationMode)!function(a,b="x"){let c,d,e,f=bw(b),g=a.length,h=Array(g).fill(0),i=Array(g),j=bv(a,0);for(c=0;c<g;++c)if(d=e,e=j,j=bv(a,c+1),e){if(j){let a=j[b]-e[b];h[c]=0!==a?(j[f]-e[f])/a:0}i[c]=d?j?ai(h[c-1])!==ai(h[c])?0:(h[c-1]+h[c])/2:h[c-1]:h[c]}!function(a,b,c){let d,e,f,g,h,i=a.length,j=bv(a,0);for(let k=0;k<i-1;++k)if(h=j,j=bv(a,k+1),h&&j){if(aj(b[k],0,bu)){c[k]=c[k+1]=0;continue}(g=Math.pow(d=c[k]/b[k],2)+Math.pow(e=c[k+1]/b[k],2))<=9||(f=3/Math.sqrt(g),c[k]=d*f*b[k],c[k+1]=e*f*b[k])}}(a,h,i),function(a,b,c="x"){let d,e,f,g=bw(c),h=a.length,i=bv(a,0);for(let j=0;j<h;++j){if(e=f,f=i,i=bv(a,j+1),!f)continue;let h=f[c],k=f[g];e&&(d=(h-e[c])/3,f[`cp1${c}`]=h-d,f[`cp1${g}`]=k-d*b[j]),i&&(d=(i[c]-h)/3,f[`cp2${c}`]=h+d,f[`cp2${g}`]=k+d*b[j])}}(a,i,b)}(a,e);else{let c=d?a[a.length-1]:a[0];for(f=0,g=a.length;f<g;++f)i=function(a,b,c,d){let e=a.skip?b:a,f=c.skip?b:c,g=aq(b,e),h=aq(f,b),i=g/(g+h),j=h/(g+h);i=isNaN(i)?0:i,j=isNaN(j)?0:j;let k=d*i,l=d*j;return{previous:{x:b.x-k*(f.x-e.x),y:b.y-k*(f.y-e.y)},next:{x:b.x+l*(f.x-e.x),y:b.y+l*(f.y-e.y)}}}(c,h=a[f],a[Math.min(f+1,g-!d)%g],b.tension),h.cp1x=i.previous.x,h.cp1y=i.previous.y,h.cp2x=i.next.x,h.cp2y=i.next.y,c=h}b.capBezierPoints&&function(a,b){let c,d,e,f,g,h=a1(a[0],b);for(c=0,d=a.length;c<d;++c)g=f,f=h,h=c<d-1&&a1(a[c+1],b),f&&(e=a[c],g&&(e.cp1x=bx(e.cp1x,b.left,b.right),e.cp1y=bx(e.cp1y,b.top,b.bottom)),h&&(e.cp2x=bx(e.cp2x,b.left,b.right),e.cp2y=bx(e.cp2y,b.top,b.bottom)))}(a,c)}(this._points,c,a,d,b),this._pointsUpdated=!0}}set points(a){this._points=a,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=function(a,b){let c=a.points,d=a.options.spanGaps,e=c.length;if(!e)return[];let f=!!a._loop,{start:g,end:h}=function(a,b,c,d){let e=0,f=b-1;if(c&&!d)for(;e<b&&!a[e].skip;)e++;for(;e<b&&a[e].skip;)e++;for(e%=b,c&&(f+=e);f>e&&a[f%b].skip;)f--;return{start:e,end:f%=b}}(c,e,f,d);if(!0===d)return bO(a,[{start:g,end:h,loop:f}],c,b);let i=h<g?h+e:h,j=!!a._fullLoop&&0===g&&h===e-1;return bO(a,function(a,b,c,d){let e,f=a.length,g=[],h=b,i=a[b];for(e=b+1;e<=c;++e){let c=a[e%f];c.skip||c.stop?i.skip||(d=!1,g.push({start:b%f,end:(e-1)%f,loop:d}),b=h=c.stop?e:null):(h=e,i.skip&&(b=e)),i=c}return null!==h&&g.push({start:b%f,end:h%f,loop:d}),g}(c,g,i,j),c,b)}(this,this.options.segment))}first(){let a=this.segments,b=this.points;return a.length&&b[a[0].start]}last(){let a=this.segments,b=this.points,c=a.length;return c&&b[a[c-1].end]}interpolate(a,b){let c,d,e=this.options,f=a[b],g=this.points,h=bN(this,{property:b,start:f,end:f});if(!h.length)return;let i=[],j=e.stepped?bF:e.tension||"monotone"===e.cubicInterpolationMode?bG:bE;for(c=0,d=h.length;c<d;++c){let{start:d,end:k}=h[c],l=g[d],m=g[k];if(l===m){i.push(l);continue}let n=Math.abs((f-l[b])/(m[b]-l[b])),o=j(l,m,n,e.stepped);o[b]=a[b],i.push(o)}return 1===i.length?i[0]:i}pathSegment(a,b,c){return dg(this)(a,this,b,c)}path(a,b,c){let d=this.segments,e=dg(this),f=this._loop;for(let g of(b=b||0,c=c||this.points.length-b,d))f&=e(a,this,g,{start:b,end:b+c-1});return!!f}draw(a,b,c,d){let e=this.options||{};(this.points||[]).length&&e.borderWidth&&(a.save(),function(a,b,c,d){if(dh&&!b.options.segment){let e;(e=b._path)||(e=b._path=new Path2D,b.path(e,c,d)&&e.closePath()),db(a,b.options),a.stroke(e)}else!function(a,b,c,d){let{segments:e,options:f}=b,g=dg(b);for(let h of e)db(a,f,h.style),a.beginPath(),g(a,b,h,{start:c,end:c+d-1})&&a.closePath(),a.stroke()}(a,b,c,d)}(a,this,c,d),a.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}function dj(a,b,c,d){let e=a.options,{[c]:f}=a.getProps([c],d);return Math.abs(b-f)<e.radius+e.hitRadius}class dk extends cD{static id="point";parsed;skip;stop;static defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(a){super(),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,a&&Object.assign(this,a)}inRange(a,b,c){let d=this.options,{x:e,y:f}=this.getProps(["x","y"],c);return Math.pow(a-e,2)+Math.pow(b-f,2)<Math.pow(d.hitRadius+d.radius,2)}inXRange(a,b){return dj(this,a,"x",b)}inYRange(a,b){return dj(this,a,"y",b)}getCenterPoint(a){let{x:b,y:c}=this.getProps(["x","y"],a);return{x:b,y:c}}size(a){let b=(a=a||this.options||{}).radius||0,c=(b=Math.max(b,b&&a.hoverRadius||0))&&a.borderWidth||0;return(b+c)*2}draw(a,b){let c=this.options;!this.skip&&!(c.radius<.1)&&a1(this,b,this.size(c)/2)&&(a.strokeStyle=c.borderColor,a.lineWidth=c.borderWidth,a.fillStyle=c.backgroundColor,a_(a,c,this.x,this.y))}getRange(){let a=this.options||{};return a.radius+a.hitRadius}}function dl(a,b){let c,d,e,f,g,{x:h,y:i,base:j,width:k,height:l}=a.getProps(["x","y","base","width","height"],b);return a.horizontal?(g=l/2,c=Math.min(h,j),d=Math.max(h,j),e=i-g,f=i+g):(c=h-(g=k/2),d=h+g,e=Math.min(i,j),f=Math.max(i,j)),{left:c,top:e,right:d,bottom:f}}function dm(a,b,c,d){return a?0:au(b,c,d)}function dn(a,b,c,d){let e=null===b,f=null===c,g=a&&!(e&&f)&&dl(a,d);return g&&(e||av(b,g.left,g.right))&&(f||av(c,g.top,g.bottom))}function dp(a,b){a.rect(b.x,b.y,b.w,b.h)}function dq(a,b,c={}){let d=a.x!==c.x?-b:0,e=a.y!==c.y?-b:0,f=(a.x+a.w!==c.x+c.w?b:0)-d,g=(a.y+a.h!==c.y+c.h?b:0)-e;return{x:a.x+d,y:a.y+e,w:a.w+f,h:a.h+g,radius:a.radius}}class dr extends cD{static id="bar";static defaults={borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(a){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,a&&Object.assign(this,a)}draw(a){var b,c,d;let e,f,g,h,i,j,k,l,{inflateAmount:m,options:{borderColor:n,backgroundColor:o}}=this,{inner:p,outer:q}=(f=(e=dl(this)).right-e.left,g=e.bottom-e.top,b=f/2,c=g/2,h=this.options.borderWidth,i=this.borderSkipped,j=bc(h),k={t:dm(i.top,j.top,0,c),r:dm(i.right,j.right,0,b),b:dm(i.bottom,j.bottom,0,c),l:dm(i.left,j.left,0,b)},l=function(a,b,c){let{enableBorderRadius:d}=a.getProps(["enableBorderRadius"]),e=a.options.borderRadius,f=bd(e),g=Math.min(b,c),h=a.borderSkipped,i=d||I(e);return{topLeft:dm(!i||h.top||h.left,f.topLeft,0,g),topRight:dm(!i||h.top||h.right,f.topRight,0,g),bottomLeft:dm(!i||h.bottom||h.left,f.bottomLeft,0,g),bottomRight:dm(!i||h.bottom||h.right,f.bottomRight,0,g)}}(this,f/2,g/2),{outer:{x:e.left,y:e.top,w:f,h:g,radius:l},inner:{x:e.left+k.l,y:e.top+k.t,w:f-k.l-k.r,h:g-k.t-k.b,radius:{topLeft:Math.max(0,l.topLeft-Math.max(k.t,k.l)),topRight:Math.max(0,l.topRight-Math.max(k.t,k.r)),bottomLeft:Math.max(0,l.bottomLeft-Math.max(k.b,k.l)),bottomRight:Math.max(0,l.bottomRight-Math.max(k.b,k.r))}}}),r=(d=q.radius).topLeft||d.topRight||d.bottomLeft||d.bottomRight?a7:dp;a.save(),(q.w!==p.w||q.h!==p.h)&&(a.beginPath(),r(a,dq(q,m,p)),a.clip(),r(a,dq(p,-m,q)),a.fillStyle=n,a.fill("evenodd")),a.beginPath(),r(a,dq(p,m)),a.fillStyle=o,a.fill(),a.restore()}inRange(a,b,c){return dn(this,a,b,c)}inXRange(a,b){return dn(this,a,null,b)}inYRange(a,b){return dn(this,null,a,b)}getCenterPoint(a){let{x:b,y:c,base:d,horizontal:e}=this.getProps(["x","y","base","horizontal"],a);return{x:e?(b+d)/2:b,y:e?c:(c+d)/2}}getRange(a){return"x"===a?this.width/2:this.height/2}}var ds=Object.freeze({__proto__:null,ArcElement:class extends cD{static id="arc";static defaults={borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0,selfJoin:!1};static defaultRoutes={backgroundColor:"backgroundColor"};static descriptors={_scriptable:!0,_indexable:a=>"borderDash"!==a};circumference;endAngle;fullCircles;innerRadius;outerRadius;pixelMargin;startAngle;constructor(a){super(),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,a&&Object.assign(this,a)}inRange(a,b,c){let{angle:d,distance:e}=ap(this.getProps(["x","y"],c),{x:a,y:b}),{startAngle:f,endAngle:g,innerRadius:h,outerRadius:i,circumference:j}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],c),k=(this.options.spacing+this.options.borderWidth)/2,l=L(j,g-f),m=at(d,f,g)&&f!==g,n=l>=ab||m,o=av(e,h+k,i+k);return n&&o}getCenterPoint(a){let{x:b,y:c,startAngle:d,endAngle:e,innerRadius:f,outerRadius:g}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],a),{offset:h,spacing:i}=this.options,j=(d+e)/2,k=(f+g+i+h)/2;return{x:b+Math.cos(j)*k,y:c+Math.sin(j)*k}}tooltipPosition(a){return this.getCenterPoint(a)}draw(a){let{options:b,circumference:c}=this,d=(b.offset||0)/4,e=(b.spacing||0)/2,f=b.circular;if(this.pixelMargin=.33*("inner"===b.borderAlign),this.fullCircles=c>ab?Math.floor(c/ab):0,0===c||this.innerRadius<0||this.outerRadius<0)return;a.save();let g=(this.startAngle+this.endAngle)/2;a.translate(Math.cos(g)*d,Math.sin(g)*d);let h=d*(1-Math.sin(Math.min(aa,c||0)));a.fillStyle=b.backgroundColor,a.strokeStyle=b.borderColor,function(a,b,c,d,e){let{fullCircles:f,startAngle:g,circumference:h}=b,i=b.endAngle;if(f){da(a,b,c,d,i,e);for(let b=0;b<f;++b)a.fill();isNaN(h)||(i=g+(h%ab||ab))}da(a,b,c,d,i,e),a.fill()}(a,this,h,e,f),function(a,b,c,d,e){let{fullCircles:f,startAngle:g,circumference:h,options:i}=b,{borderWidth:j,borderJoinStyle:k,borderDash:l,borderDashOffset:m,borderRadius:n}=i,o="inner"===i.borderAlign;if(!j)return;a.setLineDash(l||[]),a.lineDashOffset=m,o?(a.lineWidth=2*j,a.lineJoin=k||"round"):(a.lineWidth=j,a.lineJoin=k||"bevel");let p=b.endAngle;if(f){da(a,b,c,d,p,e);for(let b=0;b<f;++b)a.stroke();isNaN(h)||(p=g+(h%ab||ab))}o&&function(a,b,c){let{startAngle:d,pixelMargin:e,x:f,y:g,outerRadius:h,innerRadius:i}=b,j=e/h;a.beginPath(),a.arc(f,g,h,d-j,c+j),i>e?(j=e/i,a.arc(f,g,i,c+j,d-j,!0)):a.arc(f,g,e,c+ae,d-ae),a.closePath(),a.clip()}(a,b,p),i.selfJoin&&p-g>=aa&&0===n&&"miter"!==k&&function(a,b,c){let{startAngle:d,x:e,y:f,outerRadius:g,innerRadius:h,options:i}=b,{borderWidth:j,borderJoinStyle:k}=i,l=Math.min(j/g,as(d-c));if(a.beginPath(),a.arc(e,f,g-j/2,d+l/2,c-l/2),h>0){let b=Math.min(j/h,as(d-c));a.arc(e,f,h+j/2,c-b/2,d+b/2,!0)}else{let b=Math.min(j/2,g*as(d-c));if("round"===k)a.arc(e,f,b,c-aa/2,d+aa/2,!0);else if("bevel"===k){let g=2*b*b,h=-g*Math.cos(c+aa/2)+e,i=-g*Math.sin(c+aa/2)+f,j=g*Math.cos(d+aa/2)+e,k=g*Math.sin(d+aa/2)+f;a.lineTo(h,i),a.lineTo(j,k)}}a.closePath(),a.moveTo(0,0),a.rect(0,0,a.canvas.width,a.canvas.height),a.clip("evenodd")}(a,b,p),f||(da(a,b,c,d,p,e),a.stroke())}(a,this,h,e,f),a.restore()}},BarElement:dr,LineElement:di,PointElement:dk});let dt=["rgb(54, 162, 235)","rgb(255, 99, 132)","rgb(255, 159, 64)","rgb(255, 205, 86)","rgb(75, 192, 192)","rgb(153, 102, 255)","rgb(201, 203, 207)"],du=dt.map(a=>a.replace("rgb(","rgba(").replace(")",", 0.5)"));function dv(a){return dt[a%dt.length]}function dw(a){return du[a%du.length]}function dx(a){let b;for(b in a)if(a[b].borderColor||a[b].backgroundColor)return!0;return!1}function dy(a){if(a._decimated){let b=a._data;delete a._decimated,delete a._data,Object.defineProperty(a,"data",{configurable:!0,enumerable:!0,writable:!0,value:b})}}function dz(a){a.data.datasets.forEach(a=>{dy(a)})}function dA(a,b,c,d){if(d)return;let e=b[a],f=c[a];return"angle"===a&&(e=as(e),f=as(f)),{property:a,start:e,end:f}}function dB(a,b,c){for(;b>a;b--){let a=c[b];if(!isNaN(a.x)&&!isNaN(a.y))break}return b}function dC(a,b,c,d){return a&&b?d(a[c],b[c]):a?a[c]:b?b[c]:0}function dD(a,b){let c=[],d=!1;return H(a)?(d=!0,c=a):c=function(a,b){let{x:c=null,y:d=null}=a||{},e=b.points,f=[];return b.segments.forEach(({start:a,end:b})=>{b=dB(a,b,e);let g=e[a],h=e[b];null!==d?(f.push({x:g.x,y:d}),f.push({x:h.x,y:d})):null!==c&&(f.push({x:c,y:g.y}),f.push({x:c,y:h.y}))}),f}(a,b),c.length?new di({points:c,options:{tension:0},_loop:d,_fullLoop:d}):null}function dE(a){return a&&!1!==a.fill}class dF{constructor(a){this.x=a.x,this.y=a.y,this.radius=a.radius}pathSegment(a,b,c){let{x:d,y:e,radius:f}=this;return b=b||{start:0,end:ab},a.arc(d,e,f,b.end,b.start,!0),!c.bounds}interpolate(a){let{x:b,y:c,radius:d}=this,e=a.angle;return{x:b+Math.cos(e)*d,y:c+Math.sin(e)*d,angle:e}}}function dG(a,b,c){let d=function(a){var b,c,d;let{chart:e,fill:f,line:g}=a;if(J(f)){let a;return b=e,c=f,(a=b.getDatasetMeta(c))&&b.isDatasetVisible(c)?a.dataset:null}if("stack"===f)return function(a){let{scale:b,index:c,line:d}=a,e=[],f=d.segments,g=d.points,h=function(a,b){let c=[],d=a.getMatchingVisibleMetas("line");for(let a=0;a<d.length;a++){let e=d[a];if(e.index===b)break;e.hidden||c.unshift(e.dataset)}return c}(b,c);h.push(dD({x:null,y:b.bottom},d));for(let a=0;a<f.length;a++){let b=f[a];for(let a=b.start;a<=b.end;a++)!function(a,b,c){let d=[];for(let e=0;e<c.length;e++){let{first:f,last:g,point:h}=function(a,b,c){let d=a.interpolate(b,"x");if(!d)return{};let e=d.x,f=a.segments,g=a.points,h=!1,i=!1;for(let a=0;a<f.length;a++){let b=f[a],c=g[b.start].x,d=g[b.end].x;if(av(e,c,d)){h=e===c,i=e===d;break}}return{first:h,last:i,point:d}}(c[e],b,"x");if(h&&(!f||!g)){if(f)d.unshift(h);else if(a.push(h),!g)break}}a.push(...d)}(e,g[a],h)}return new di({points:e,options:{}})}(a);if("shape"===f)return!0;let h=((d=a).scale||{}).getPointPositionForValue?function(a){let{scale:b,fill:c}=a,d=b.options,e=b.getLabels().length,f=d.reverse?b.max:b.min,g="start"===c?f:"end"===c?b.options.reverse?b.min:b.max:I(c)?c.value:b.getBaseValue(),h=[];if(d.grid.circular){let a=b.getPointPositionForValue(0,f);return new dF({x:a.x,y:a.y,radius:b.getDistanceFromCenterForValue(g)})}for(let a=0;a<e;++a)h.push(b.getPointPositionForValue(a,g));return h}(d):function(a){let b,{scale:c={},fill:d}=a,e=(b=null,"start"===d?b=c.bottom:"end"===d?b=c.top:I(d)?b=c.getPixelForValue(d.value):c.getBasePixel&&(b=c.getBasePixel()),b);if(J(e)){let a=c.isHorizontal();return{x:a?e:null,y:a?null:e}}return null}(d);return h instanceof dF?h:dD(h,g)}(b),{chart:e,index:f,line:g,scale:h,axis:i}=b,j=g.options,k=j.fill,l=j.backgroundColor,{above:m=l,below:n=l}=k||{},o=e.getDatasetMeta(f),p=bR(e,o);d&&g.points.length&&(a2(a,c),function(a,b){let{line:c,target:d,above:e,below:f,area:g,scale:h,clip:i}=b,j=c._loop?"angle":b.axis;a.save();let k=f;f!==e&&("x"===j?(dH(a,d,g.top),dJ(a,{line:c,target:d,color:e,scale:h,property:j,clip:i}),a.restore(),a.save(),dH(a,d,g.bottom)):"y"===j&&(dI(a,d,g.left),dJ(a,{line:c,target:d,color:f,scale:h,property:j,clip:i}),a.restore(),a.save(),dI(a,d,g.right),k=e)),dJ(a,{line:c,target:d,color:k,scale:h,property:j,clip:i}),a.restore()}(a,{line:g,target:d,above:m,below:n,area:c,scale:h,axis:i,clip:p}),a3(a))}function dH(a,b,c){let{segments:d,points:e}=b,f=!0,g=!1;for(let h of(a.beginPath(),d)){let{start:d,end:i}=h,j=e[d],k=e[dB(d,i,e)];f?(a.moveTo(j.x,j.y),f=!1):(a.lineTo(j.x,c),a.lineTo(j.x,j.y)),(g=!!b.pathSegment(a,h,{move:g}))?a.closePath():a.lineTo(k.x,c)}a.lineTo(b.first().x,c),a.closePath(),a.clip()}function dI(a,b,c){let{segments:d,points:e}=b,f=!0,g=!1;for(let h of(a.beginPath(),d)){let{start:d,end:i}=h,j=e[d],k=e[dB(d,i,e)];f?(a.moveTo(j.x,j.y),f=!1):(a.lineTo(c,j.y),a.lineTo(j.x,j.y)),(g=!!b.pathSegment(a,h,{move:g}))?a.closePath():a.lineTo(c,k.y)}a.lineTo(c,b.first().y),a.closePath(),a.clip()}function dJ(a,b){let{line:c,target:d,property:e,color:f,scale:g,clip:h}=b;for(let{source:b,target:i,start:j,end:k}of function(a,b,c){let d=a.segments,e=a.points,f=b.points,g=[];for(let a of d){let{start:d,end:h}=a;h=dB(d,h,e);let i=dA(c,e[d],e[h],a.loop);if(!b.segments){g.push({source:a,target:i,start:e[d],end:e[h]});continue}for(let d of bN(b,i)){let b=dA(c,f[d.start],f[d.end],d.loop);for(let f of bM(a,e,b))g.push({source:f,target:d,start:{[c]:dC(i,b,"start",Math.max)},end:{[c]:dC(i,b,"end",Math.min)}})}}return g}(c,d,e)){let l,{style:{backgroundColor:m=f}={}}=b,n=!0!==d;a.save(),a.fillStyle=m,function(a,b,c,d){let e=b.chart.chartArea,{property:f,start:g,end:h}=d||{};if("x"===f||"y"===f){let b,d,i,j;"x"===f?(b=g,d=e.top,i=h,j=e.bottom):(b=e.left,d=g,i=e.right,j=h),a.beginPath(),c&&(b=Math.max(b,c.left),i=Math.min(i,c.right),d=Math.max(d,c.top),j=Math.min(j,c.bottom)),a.rect(b,d,i-b,j-d),a.clip()}}(a,g,h,n&&dA(e,j,k)),a.beginPath();let o=!!c.pathSegment(a,b);if(n){o?a.closePath():dK(a,d,k,e);let b=!!d.pathSegment(a,i,{move:o,reverse:!0});(l=o&&b)||dK(a,d,j,e)}a.closePath(),a.fill(l?"evenodd":"nonzero"),a.restore()}}function dK(a,b,c,d){let e=b.interpolate(c,d);e&&a.lineTo(e.x,e.y)}var dL={id:"filler",afterDatasetsUpdate(a,b,c){let d,e,f,g,h=(a.data.datasets||[]).length,i=[];for(e=0;e<h;++e)f=(d=a.getDatasetMeta(e)).dataset,g=null,f&&f.options&&f instanceof di&&(g={visible:a.isDatasetVisible(e),index:e,fill:function(a,b,c){var d,e,f,g;let h=function(a){let b=a.options,c=b.fill,d=L(c&&c.target,c);return void 0===d&&(d=!!b.backgroundColor),!1!==d&&null!==d&&(!0===d?"origin":d)}(a);if(I(h))return!isNaN(h.value)&&h;let i=parseFloat(h);return J(i)&&Math.floor(i)===i?(d=h[0],e=b,f=i,g=c,("-"===d||"+"===d)&&(f=e+f),f!==e&&!(f<0)&&!(f>=g)&&f):["origin","start","end","stack","shape"].indexOf(h)>=0&&h}(f,e,h),chart:a,axis:d.controller.options.indexAxis,scale:d.vScale,line:f}),d.$filler=g,i.push(g);for(e=0;e<h;++e)(g=i[e])&&!1!==g.fill&&(g.fill=function(a,b,c){let d,e=a[b].fill,f=[b];if(!c)return e;for(;!1!==e&&-1===f.indexOf(e);){if(!J(e))return e;if(!(d=a[e]))break;if(d.visible)return e;f.push(e),e=d.fill}return!1}(i,e,c.propagate))},beforeDraw(a,b,c){let d="beforeDraw"===c.drawTime,e=a.getSortedVisibleDatasetMetas(),f=a.chartArea;for(let b=e.length-1;b>=0;--b){let c=e[b].$filler;c&&(c.line.updateControlPoints(f,c.axis),d&&c.fill&&dG(a.ctx,c,f))}},beforeDatasetsDraw(a,b,c){if("beforeDatasetsDraw"!==c.drawTime)return;let d=a.getSortedVisibleDatasetMetas();for(let b=d.length-1;b>=0;--b){let c=d[b].$filler;dE(c)&&dG(a.ctx,c,a.chartArea)}},beforeDatasetDraw(a,b,c){let d=b.meta.$filler;dE(d)&&"beforeDatasetDraw"===c.drawTime&&dG(a.ctx,d,a.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};let dM=(a,b)=>{let{boxHeight:c=b,boxWidth:d=b}=a;return a.usePointStyle&&(c=Math.min(c,b),d=a.pointStyleWidth||Math.min(d,b)),{boxWidth:d,boxHeight:c,itemHeight:Math.max(b,c)}};class dN extends cD{constructor(a){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=a.chart,this.options=a.options,this.ctx=a.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(a,b,c){this.maxWidth=a,this.maxHeight=b,this._margins=c,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){let a=this.options.labels||{},b=N(a.generateLabels,[this.chart],this)||[];a.filter&&(b=b.filter(b=>a.filter(b,this.chart.data))),a.sort&&(b=b.sort((b,c)=>a.sort(b,c,this.chart.data))),this.options.reverse&&b.reverse(),this.legendItems=b}fit(){let a,b,{options:c,ctx:d}=this;if(!c.display){this.width=this.height=0;return}let e=c.labels,f=bf(e.font),g=f.size,h=this._computeTitleHeight(),{boxWidth:i,itemHeight:j}=dM(e,g);d.font=f.string,this.isHorizontal()?(a=this.maxWidth,b=this._fitRows(h,g,i,j)+10):(b=this.maxHeight,a=this._fitCols(h,f,i,j)+10),this.width=Math.min(a,c.maxWidth||this.maxWidth),this.height=Math.min(b,c.maxHeight||this.maxHeight)}_fitRows(a,b,c,d){let{ctx:e,maxWidth:f,options:{labels:{padding:g}}}=this,h=this.legendHitBoxes=[],i=this.lineWidths=[0],j=d+g,k=a;e.textAlign="left",e.textBaseline="middle";let l=-1,m=-j;return this.legendItems.forEach((a,n)=>{let o=c+b/2+e.measureText(a.text).width;(0===n||i[i.length-1]+o+2*g>f)&&(k+=j,i[i.length-(n>0?0:1)]=0,m+=j,l++),h[n]={left:0,top:m,row:l,width:o,height:d},i[i.length-1]+=o+g}),k}_fitCols(a,b,c,d){let{ctx:e,maxHeight:f,options:{labels:{padding:g}}}=this,h=this.legendHitBoxes=[],i=this.columnSizes=[],j=f-a,k=g,l=0,m=0,n=0,o=0;return this.legendItems.forEach((a,f)=>{var p,q,r,s,t,u,v,w,x,y,z,A;let B,C,{itemWidth:D,itemHeight:E}=(p=c,q=b,r=e,s=a,t=d,{itemWidth:(u=s,v=p,w=q,x=r,(B=u.text)&&"string"!=typeof B&&(B=B.reduce((a,b)=>a.length>b.length?a:b)),v+w.size/2+x.measureText(B).width),itemHeight:(y=t,z=s,A=q.lineHeight,C=y,"string"!=typeof z.text&&(C=dO(z,A)),C)});f>0&&m+E+2*g>j&&(k+=l+g,i.push({width:l,height:m}),n+=l+g,o++,l=m=0),h[f]={left:n,top:m,col:o,width:D,height:E},l=Math.max(l,D),m+=E+g}),k+=l,i.push({width:l,height:m}),k}adjustHitBoxes(){if(!this.options.display)return;let a=this._computeTitleHeight(),{legendHitBoxes:b,options:{align:c,labels:{padding:d},rtl:e}}=this,f=bH(e,this.left,this.width);if(this.isHorizontal()){let e=0,g=aE(c,this.left+d,this.right-this.lineWidths[e]);for(let h of b)e!==h.row&&(e=h.row,g=aE(c,this.left+d,this.right-this.lineWidths[e])),h.top+=this.top+a+d,h.left=f.leftForLtr(f.x(g),h.width),g+=h.width+d}else{let e=0,g=aE(c,this.top+a+d,this.bottom-this.columnSizes[e].height);for(let h of b)h.col!==e&&(e=h.col,g=aE(c,this.top+a+d,this.bottom-this.columnSizes[e].height)),h.top=g,h.left+=this.left+d,h.left=f.leftForLtr(f.x(h.left),h.width),g+=h.height+d}}isHorizontal(){return"top"===this.options.position||"bottom"===this.options.position}draw(){if(this.options.display){let a=this.ctx;a2(a,this),this._draw(),a3(a)}}_draw(){let a,{options:b,columnSizes:c,lineWidths:d,ctx:e}=this,{align:f,labels:g}=b,h=aX.color,i=bH(b.rtl,this.left,this.width),j=bf(g.font),{padding:k}=g,l=j.size,m=l/2;this.drawTitle(),e.textAlign=i.textAlign("left"),e.textBaseline="middle",e.lineWidth=.5,e.font=j.string;let{boxWidth:n,boxHeight:o,itemHeight:p}=dM(g,l),q=function(a,b,c){if(isNaN(n)||n<=0||isNaN(o)||o<0)return;e.save();let d=L(c.lineWidth,1);if(e.fillStyle=L(c.fillStyle,h),e.lineCap=L(c.lineCap,"butt"),e.lineDashOffset=L(c.lineDashOffset,0),e.lineJoin=L(c.lineJoin,"miter"),e.lineWidth=d,e.strokeStyle=L(c.strokeStyle,h),e.setLineDash(L(c.lineDash,[])),g.usePointStyle)a0(e,{radius:o*Math.SQRT2/2,pointStyle:c.pointStyle,rotation:c.rotation,borderWidth:d},i.xPlus(a,n/2),b+m,g.pointStyleWidth&&n);else{let f=b+Math.max((l-o)/2,0),g=i.leftForLtr(a,n),h=bd(c.borderRadius);e.beginPath(),Object.values(h).some(a=>0!==a)?a7(e,{x:g,y:f,w:n,h:o,radius:h}):e.rect(g,f,n,o),e.fill(),0!==d&&e.stroke()}e.restore()},r=function(a,b,c){a6(e,c.text,a,b+p/2,j,{strikethrough:c.hidden,textAlign:i.textAlign(c.textAlign)})},s=this.isHorizontal(),t=this._computeTitleHeight();a=s?{x:aE(f,this.left+k,this.right-d[0]),y:this.top+k+t,line:0}:{x:this.left+k,y:aE(f,this.top+t+k,this.bottom-c[0].height),line:0},bI(this.ctx,b.textDirection);let u=p+k;this.legendItems.forEach((h,l)=>{var o,p;e.strokeStyle=h.fontColor,e.fillStyle=h.fontColor;let v=e.measureText(h.text).width,w=i.textAlign(h.textAlign||(h.textAlign=g.textAlign)),x=n+m+v,y=a.x,z=a.y;if(i.setWidth(this.width),s?l>0&&y+x+k>this.right&&(z=a.y+=u,a.line++,y=a.x=aE(f,this.left+k,this.right-d[a.line])):l>0&&z+u>this.bottom&&(y=a.x=y+c[a.line].width+k,a.line++,z=a.y=aE(f,this.top+t+k,this.bottom-c[a.line].height)),q(i.x(y),z,h),o=y+n+m,p=s?y+x:this.right,y=w===(b.rtl?"left":"right")?p:"center"===w?(o+p)/2:o,r(i.x(y),z,h),s)a.x+=x+k;else if("string"!=typeof h.text){let b=j.lineHeight;a.y+=dO(h,b)+k}else a.y+=u}),bJ(this.ctx,b.textDirection)}drawTitle(){let a,b=this.options,c=b.title,d=bf(c.font),e=be(c.padding);if(!c.display)return;let f=bH(b.rtl,this.left,this.width),g=this.ctx,h=c.position,i=d.size/2,j=e.top+i,k=this.left,l=this.width;if(this.isHorizontal())l=Math.max(...this.lineWidths),a=this.top+j,k=aE(b.align,k,this.right-l);else{let c=this.columnSizes.reduce((a,b)=>Math.max(a,b.height),0);a=j+aE(b.align,this.top,this.bottom-c-b.labels.padding-this._computeTitleHeight())}let m=aE(h,k,k+l);g.textAlign=f.textAlign(aD(h)),g.textBaseline="middle",g.strokeStyle=c.color,g.fillStyle=c.color,g.font=d.string,a6(g,c.text,m,a,d)}_computeTitleHeight(){let a=this.options.title,b=bf(a.font),c=be(a.padding);return a.display?b.lineHeight+c.height:0}_getLegendItemAt(a,b){let c,d,e;if(av(a,this.left,this.right)&&av(b,this.top,this.bottom)){for(c=0,e=this.legendHitBoxes;c<e.length;++c)if(av(a,(d=e[c]).left,d.left+d.width)&&av(b,d.top,d.top+d.height))return this.legendItems[c]}return null}handleEvent(a){var b,c;let d=this.options;if(b=a.type,c=d,("mousemove"!==b&&"mouseout"!==b||!c.onHover&&!c.onLeave)&&(!c.onClick||"click"!==b&&"mouseup"!==b))return;let e=this._getLegendItemAt(a.x,a.y);if("mousemove"===a.type||"mouseout"===a.type){let b=this._hoveredItem,c=null!==b&&null!==e&&b.datasetIndex===e.datasetIndex&&b.index===e.index;b&&!c&&N(d.onLeave,[a,b,this],this),this._hoveredItem=e,e&&!c&&N(d.onHover,[a,e,this],this)}else e&&N(d.onClick,[a,e,this],this)}}function dO(a,b){return b*(a.text?a.text.length:0)}var dP={id:"legend",_element:dN,start(a,b,c){let d=a.legend=new dN({ctx:a.ctx,options:c,chart:a});cA.configure(a,d,c),cA.addBox(a,d)},stop(a){cA.removeBox(a,a.legend),delete a.legend},beforeUpdate(a,b,c){let d=a.legend;cA.configure(a,d,c),d.options=c},afterUpdate(a){let b=a.legend;b.buildLabels(),b.adjustHitBoxes()},afterEvent(a,b){b.replay||a.legend.handleEvent(b.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(a,b,c){let d=b.datasetIndex,e=c.chart;e.isDatasetVisible(d)?(e.hide(d),b.hidden=!0):(e.show(d),b.hidden=!1)},onHover:null,onLeave:null,labels:{color:a=>a.chart.options.color,boxWidth:40,padding:10,generateLabels(a){let b=a.data.datasets,{labels:{usePointStyle:c,pointStyle:d,textAlign:e,color:f,useBorderRadius:g,borderRadius:h}}=a.legend.options;return a._getSortedDatasetMetas().map(a=>{let i=a.controller.getStyle(c?0:void 0),j=be(i.borderWidth);return{text:b[a.index].label,fillStyle:i.backgroundColor,fontColor:f,hidden:!a.visible,lineCap:i.borderCapStyle,lineDash:i.borderDash,lineDashOffset:i.borderDashOffset,lineJoin:i.borderJoinStyle,lineWidth:(j.width+j.height)/4,strokeStyle:i.borderColor,pointStyle:d||i.pointStyle,rotation:i.rotation,textAlign:e||i.textAlign,borderRadius:g&&(h||i.borderRadius),datasetIndex:a.index}},this)}},title:{color:a=>a.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:a=>!a.startsWith("on"),labels:{_scriptable:a=>!["generateLabels","filter","sort"].includes(a)}}};class dQ extends cD{constructor(a){super(),this.chart=a.chart,this.options=a.options,this.ctx=a.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(a,b){let c=this.options;if(this.left=0,this.top=0,!c.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=a,this.height=this.bottom=b;let d=H(c.text)?c.text.length:1;this._padding=be(c.padding);let e=d*bf(c.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=e:this.width=e}isHorizontal(){let a=this.options.position;return"top"===a||"bottom"===a}_drawArgs(a){let b,c,d,{top:e,left:f,bottom:g,right:h,options:i}=this,j=i.align,k=0;return this.isHorizontal()?(c=aE(j,f,h),d=e+a,b=h-f):("left"===i.position?(c=f+a,d=aE(j,g,e),k=-.5*aa):(c=h-a,d=aE(j,e,g),k=.5*aa),b=g-e),{titleX:c,titleY:d,maxWidth:b,rotation:k}}draw(){let a=this.ctx,b=this.options;if(!b.display)return;let c=bf(b.font),d=c.lineHeight/2+this._padding.top,{titleX:e,titleY:f,maxWidth:g,rotation:h}=this._drawArgs(d);a6(a,b.text,0,0,c,{color:b.color,maxWidth:g,rotation:h,textAlign:aD(b.align),textBaseline:"middle",translation:[e,f]})}}let dR=new WeakMap,dS={average(a){let b,c;if(!a.length)return!1;let d=new Set,e=0,f=0;for(b=0,c=a.length;b<c;++b){let c=a[b].element;if(c&&c.hasValue()){let a=c.tooltipPosition();d.add(a.x),e+=a.y,++f}}return 0!==f&&0!==d.size&&{x:[...d].reduce((a,b)=>a+b)/d.size,y:e/f}},nearest(a,b){let c,d,e;if(!a.length)return!1;let f=b.x,g=b.y,h=1/0;for(c=0,d=a.length;c<d;++c){let d=a[c].element;if(d&&d.hasValue()){let a=aq(b,d.getCenterPoint());a<h&&(h=a,e=d)}}if(e){let a=e.tooltipPosition();f=a.x,g=a.y}return{x:f,y:g}}};function dT(a,b){return b&&(H(b)?Array.prototype.push.apply(a,b):a.push(b)),a}function dU(a){return("string"==typeof a||a instanceof String)&&a.indexOf("\n")>-1?a.split("\n"):a}function dV(a,b){let c=a.chart.ctx,{body:d,footer:e,title:f}=a,{boxWidth:g,boxHeight:h}=b,i=bf(b.bodyFont),j=bf(b.titleFont),k=bf(b.footerFont),l=f.length,m=e.length,n=d.length,o=be(b.padding),p=o.height,q=0,r=d.reduce((a,b)=>a+b.before.length+b.lines.length+b.after.length,0);r+=a.beforeBody.length+a.afterBody.length,l&&(p+=l*j.lineHeight+(l-1)*b.titleSpacing+b.titleMarginBottom),r&&(p+=n*(b.displayColors?Math.max(h,i.lineHeight):i.lineHeight)+(r-n)*i.lineHeight+(r-1)*b.bodySpacing),m&&(p+=b.footerMarginTop+m*k.lineHeight+(m-1)*b.footerSpacing);let s=0,t=function(a){q=Math.max(q,c.measureText(a).width+s)};return c.save(),c.font=j.string,O(a.title,t),c.font=i.string,O(a.beforeBody.concat(a.afterBody),t),s=b.displayColors?g+2+b.boxPadding:0,O(d,a=>{O(a.before,t),O(a.lines,t),O(a.after,t)}),s=0,c.font=k.string,O(a.footer,t),c.restore(),{width:q+=o.width,height:p}}function dW(a,b,c){let d=c.yAlign||b.yAlign||function(a,b){let{y:c,height:d}=b;return c<d/2?"top":c>a.height-d/2?"bottom":"center"}(a,c);return{xAlign:c.xAlign||b.xAlign||function(a,b,c,d){let{x:e,width:f}=c,{width:g,chartArea:{left:h,right:i}}=a,j="center";return"center"===d?j=e<=(h+i)/2?"left":"right":e<=f/2?j="left":e>=g-f/2&&(j="right"),function(a,b,c,d){let{x:e,width:f}=d,g=c.caretSize+c.caretPadding;if("left"===a&&e+f+g>b.width||"right"===a&&e-f-g<0)return!0}(j,a,b,c)&&(j="center"),j}(a,b,c,d),yAlign:d}}function dX(a,b,c,d){let{caretSize:e,caretPadding:f,cornerRadius:g}=a,{xAlign:h,yAlign:i}=c,j=e+f,{topLeft:k,topRight:l,bottomLeft:m,bottomRight:n}=bd(g),o=function(a,b){let{x:c,width:d}=a;return"right"===b?c-=d:"center"===b&&(c-=d/2),c}(b,h),p=function(a,b,c){let{y:d,height:e}=a;return"top"===b?d+=c:"bottom"===b?d-=e+c:d-=e/2,d}(b,i,j);return"center"===i?"left"===h?o+=j:"right"===h&&(o-=j):"left"===h?o-=Math.max(k,m)+e:"right"===h&&(o+=Math.max(l,n)+e),{x:au(o,0,d.width-b.width),y:au(p,0,d.height-b.height)}}function dY(a,b,c){let d=be(c.padding);return"center"===b?a.x+a.width/2:"right"===b?a.x+a.width-d.right:a.x+d.left}function dZ(a,b){let c=b&&b.dataset&&b.dataset.tooltip&&b.dataset.tooltip.callbacks;return c?a.override(c):a}let d$={beforeTitle:E,title(a){if(a.length>0){let b=a[0],c=b.chart.data.labels,d=c?c.length:0;if(this&&this.options&&"dataset"===this.options.mode)return b.dataset.label||"";if(b.label)return b.label;if(d>0&&b.dataIndex<d)return c[b.dataIndex]}return""},afterTitle:E,beforeBody:E,beforeLabel:E,label(a){if(this&&this.options&&"dataset"===this.options.mode)return a.label+": "+a.formattedValue||a.formattedValue;let b=a.dataset.label||"";b&&(b+=": ");let c=a.formattedValue;return G(c)||(b+=c),b},labelColor(a){let b=a.chart.getDatasetMeta(a.datasetIndex).controller.getStyle(a.dataIndex);return{borderColor:b.borderColor,backgroundColor:b.backgroundColor,borderWidth:b.borderWidth,borderDash:b.borderDash,borderDashOffset:b.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(a){let b=a.chart.getDatasetMeta(a.datasetIndex).controller.getStyle(a.dataIndex);return{pointStyle:b.pointStyle,rotation:b.rotation}},afterLabel:E,afterBody:E,beforeFooter:E,footer:E,afterFooter:E};function d_(a,b,c,d){let e=a[b].call(c,d);return void 0===e?d$[b].call(c,d):e}class d0 extends cD{static positioners=dS;constructor(a){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=a.chart,this.options=a.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(a){this.options=a,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){let a=this._cachedAnimations;if(a)return a;let b=this.chart,c=this.options.setContext(this.getContext()),d=c.enabled&&b.options.animation&&c.animations,e=new bW(this.chart,d);return d._cacheable&&(this._cachedAnimations=Object.freeze(e)),e}getContext(){var a;return this.$context||(this.$context=(a=this.chart.getContext(),bh(a,{tooltip:this,tooltipItems:this._tooltipItems,type:"tooltip"})))}getTitle(a,b){let{callbacks:c}=b,d=d_(c,"beforeTitle",this,a),e=d_(c,"title",this,a),f=d_(c,"afterTitle",this,a),g=[];return g=dT(g,dU(d)),g=dT(g,dU(e)),g=dT(g,dU(f))}getBeforeBody(a,b){return dT([],dU(d_(b.callbacks,"beforeBody",this,a)))}getBody(a,b){let{callbacks:c}=b,d=[];return O(a,a=>{let b={before:[],lines:[],after:[]},e=dZ(c,a);dT(b.before,dU(d_(e,"beforeLabel",this,a))),dT(b.lines,d_(e,"label",this,a)),dT(b.after,dU(d_(e,"afterLabel",this,a))),d.push(b)}),d}getAfterBody(a,b){return dT([],dU(d_(b.callbacks,"afterBody",this,a)))}getFooter(a,b){let{callbacks:c}=b,d=d_(c,"beforeFooter",this,a),e=d_(c,"footer",this,a),f=d_(c,"afterFooter",this,a),g=[];return g=dT(g,dU(d)),g=dT(g,dU(e)),g=dT(g,dU(f))}_createItems(a){let b,c,d=this._active,e=this.chart.data,f=[],g=[],h=[],i=[];for(b=0,c=d.length;b<c;++b)i.push(function(a,b){let{element:c,datasetIndex:d,index:e}=b,f=a.getDatasetMeta(d).controller,{label:g,value:h}=f.getLabelAndValue(e);return{chart:a,label:g,parsed:f.getParsed(e),raw:a.data.datasets[d].data[e],formattedValue:h,dataset:f.getDataset(),dataIndex:e,datasetIndex:d,element:c}}(this.chart,d[b]));return a.filter&&(i=i.filter((b,c,d)=>a.filter(b,c,d,e))),a.itemSort&&(i=i.sort((b,c)=>a.itemSort(b,c,e))),O(i,b=>{let c=dZ(a.callbacks,b);f.push(d_(c,"labelColor",this,b)),g.push(d_(c,"labelPointStyle",this,b)),h.push(d_(c,"labelTextColor",this,b))}),this.labelColors=f,this.labelPointStyles=g,this.labelTextColors=h,this.dataPoints=i,i}update(a,b){let c,d=this.options.setContext(this.getContext()),e=this._active,f=[];if(e.length){let a=dS[d.position].call(this,e,this._eventPosition);f=this._createItems(d),this.title=this.getTitle(f,d),this.beforeBody=this.getBeforeBody(f,d),this.body=this.getBody(f,d),this.afterBody=this.getAfterBody(f,d),this.footer=this.getFooter(f,d);let b=this._size=dV(this,d),g=Object.assign({},a,b),h=dW(this.chart,d,g),i=dX(d,g,h,this.chart);this.xAlign=h.xAlign,this.yAlign=h.yAlign,c={opacity:1,x:i.x,y:i.y,width:b.width,height:b.height,caretX:a.x,caretY:a.y}}else 0!==this.opacity&&(c={opacity:0});this._tooltipItems=f,this.$context=void 0,c&&this._resolveAnimations().update(this,c),a&&d.external&&d.external.call(this,{chart:this.chart,tooltip:this,replay:b})}drawCaret(a,b,c,d){let e=this.getCaretPosition(a,c,d);b.lineTo(e.x1,e.y1),b.lineTo(e.x2,e.y2),b.lineTo(e.x3,e.y3)}getCaretPosition(a,b,c){let d,e,f,g,h,i,{xAlign:j,yAlign:k}=this,{caretSize:l,cornerRadius:m}=c,{topLeft:n,topRight:o,bottomLeft:p,bottomRight:q}=bd(m),{x:r,y:s}=a,{width:t,height:u}=b;return"center"===k?(h=s+u/2,"left"===j?(e=(d=r)-l,g=h+l,i=h-l):(e=(d=r+t)+l,g=h-l,i=h+l),f=d):(e="left"===j?r+Math.max(n,p)+l:"right"===j?r+t-Math.max(o,q)-l:this.caretX,"top"===k?(h=(g=s)-l,d=e-l,f=e+l):(h=(g=s+u)+l,d=e+l,f=e-l),i=g),{x1:d,x2:e,x3:f,y1:g,y2:h,y3:i}}drawTitle(a,b,c){let d,e,f,g=this.title,h=g.length;if(h){let i=bH(c.rtl,this.x,this.width);for(f=0,a.x=dY(this,c.titleAlign,c),b.textAlign=i.textAlign(c.titleAlign),b.textBaseline="middle",d=bf(c.titleFont),e=c.titleSpacing,b.fillStyle=c.titleColor,b.font=d.string;f<h;++f)b.fillText(g[f],i.x(a.x),a.y+d.lineHeight/2),a.y+=d.lineHeight+e,f+1===h&&(a.y+=c.titleMarginBottom-e)}}_drawColorBox(a,b,c,d,e){let f=this.labelColors[c],g=this.labelPointStyles[c],{boxHeight:h,boxWidth:i}=e,j=bf(e.bodyFont),k=dY(this,"left",e),l=d.x(k),m=h<j.lineHeight?(j.lineHeight-h)/2:0,n=b.y+m;if(e.usePointStyle){let b={radius:Math.min(i,h)/2,pointStyle:g.pointStyle,rotation:g.rotation,borderWidth:1},c=d.leftForLtr(l,i)+i/2,j=n+h/2;a.strokeStyle=e.multiKeyBackground,a.fillStyle=e.multiKeyBackground,a_(a,b,c,j),a.strokeStyle=f.borderColor,a.fillStyle=f.backgroundColor,a_(a,b,c,j)}else{a.lineWidth=I(f.borderWidth)?Math.max(...Object.values(f.borderWidth)):f.borderWidth||1,a.strokeStyle=f.borderColor,a.setLineDash(f.borderDash||[]),a.lineDashOffset=f.borderDashOffset||0;let b=d.leftForLtr(l,i),c=d.leftForLtr(d.xPlus(l,1),i-2),g=bd(f.borderRadius);Object.values(g).some(a=>0!==a)?(a.beginPath(),a.fillStyle=e.multiKeyBackground,a7(a,{x:b,y:n,w:i,h:h,radius:g}),a.fill(),a.stroke(),a.fillStyle=f.backgroundColor,a.beginPath(),a7(a,{x:c,y:n+1,w:i-2,h:h-2,radius:g}),a.fill()):(a.fillStyle=e.multiKeyBackground,a.fillRect(b,n,i,h),a.strokeRect(b,n,i,h),a.fillStyle=f.backgroundColor,a.fillRect(c,n+1,i-2,h-2))}a.fillStyle=this.labelTextColors[c]}drawBody(a,b,c){let d,e,f,g,h,i,{body:j}=this,{bodySpacing:k,bodyAlign:l,displayColors:m,boxHeight:n,boxWidth:o,boxPadding:p}=c,q=bf(c.bodyFont),r=q.lineHeight,s=0,t=bH(c.rtl,this.x,this.width),u=function(c){b.fillText(c,t.x(a.x+s),a.y+r/2),a.y+=r+k},v=t.textAlign(l);for(b.textAlign=l,b.textBaseline="middle",b.font=q.string,a.x=dY(this,v,c),b.fillStyle=c.bodyColor,O(this.beforeBody,u),s=m&&"right"!==v?"center"===l?o/2+p:o+2+p:0,f=0,h=j.length;f<h;++f){for(d=j[f],b.fillStyle=this.labelTextColors[f],O(d.before,u),e=d.lines,m&&e.length&&(this._drawColorBox(b,a,f,t,c),r=Math.max(q.lineHeight,n)),g=0,i=e.length;g<i;++g)u(e[g]),r=q.lineHeight;O(d.after,u)}s=0,r=q.lineHeight,O(this.afterBody,u),a.y-=k}drawFooter(a,b,c){let d,e,f=this.footer,g=f.length;if(g){let h=bH(c.rtl,this.x,this.width);for(a.x=dY(this,c.footerAlign,c),a.y+=c.footerMarginTop,b.textAlign=h.textAlign(c.footerAlign),b.textBaseline="middle",d=bf(c.footerFont),b.fillStyle=c.footerColor,b.font=d.string,e=0;e<g;++e)b.fillText(f[e],h.x(a.x),a.y+d.lineHeight/2),a.y+=d.lineHeight+c.footerSpacing}}drawBackground(a,b,c,d){let{xAlign:e,yAlign:f}=this,{x:g,y:h}=a,{width:i,height:j}=c,{topLeft:k,topRight:l,bottomLeft:m,bottomRight:n}=bd(d.cornerRadius);b.fillStyle=d.backgroundColor,b.strokeStyle=d.borderColor,b.lineWidth=d.borderWidth,b.beginPath(),b.moveTo(g+k,h),"top"===f&&this.drawCaret(a,b,c,d),b.lineTo(g+i-l,h),b.quadraticCurveTo(g+i,h,g+i,h+l),"center"===f&&"right"===e&&this.drawCaret(a,b,c,d),b.lineTo(g+i,h+j-n),b.quadraticCurveTo(g+i,h+j,g+i-n,h+j),"bottom"===f&&this.drawCaret(a,b,c,d),b.lineTo(g+m,h+j),b.quadraticCurveTo(g,h+j,g,h+j-m),"center"===f&&"left"===e&&this.drawCaret(a,b,c,d),b.lineTo(g,h+k),b.quadraticCurveTo(g,h,g+k,h),b.closePath(),b.fill(),d.borderWidth>0&&b.stroke()}_updateAnimationTarget(a){let b=this.chart,c=this.$animations,d=c&&c.x,e=c&&c.y;if(d||e){let c=dS[a.position].call(this,this._active,this._eventPosition);if(!c)return;let f=this._size=dV(this,a),g=Object.assign({},c,this._size),h=dW(b,a,g),i=dX(a,g,h,b);(d._to!==i.x||e._to!==i.y)&&(this.xAlign=h.xAlign,this.yAlign=h.yAlign,this.width=f.width,this.height=f.height,this.caretX=c.x,this.caretY=c.y,this._resolveAnimations().update(this,i))}}_willRender(){return!!this.opacity}draw(a){let b=this.options.setContext(this.getContext()),c=this.opacity;if(!c)return;this._updateAnimationTarget(b);let d={width:this.width,height:this.height},e={x:this.x,y:this.y};c=.001>Math.abs(c)?0:c;let f=be(b.padding),g=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;b.enabled&&g&&(a.save(),a.globalAlpha=c,this.drawBackground(e,a,d,b),bI(a,b.textDirection),e.y+=f.top,this.drawTitle(e,a,b),this.drawBody(e,a,b),this.drawFooter(e,a,b),bJ(a,b.textDirection),a.restore())}getActiveElements(){return this._active||[]}setActiveElements(a,b){let c=this._active,d=a.map(({datasetIndex:a,index:b})=>{let c=this.chart.getDatasetMeta(a);if(!c)throw Error("Cannot find a dataset at index "+a);return{datasetIndex:a,element:c.data[b],index:b}}),e=!P(c,d),f=this._positionChanged(d,b);(e||f)&&(this._active=d,this._eventPosition=b,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(a,b,c=!0){if(b&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;let d=this.options,e=this._active||[],f=this._getActiveElements(a,e,b,c),g=this._positionChanged(f,a),h=b||!P(f,e)||g;return h&&(this._active=f,(d.enabled||d.external)&&(this._eventPosition={x:a.x,y:a.y},this.update(!0,b))),h}_getActiveElements(a,b,c,d){let e=this.options;if("mouseout"===a.type)return[];if(!d)return b.filter(a=>this.chart.data.datasets[a.datasetIndex]&&void 0!==this.chart.getDatasetMeta(a.datasetIndex).controller.getParsed(a.index));let f=this.chart.getElementsAtEventForMode(a,e.mode,e,c);return e.reverse&&f.reverse(),f}_positionChanged(a,b){let{caretX:c,caretY:d,options:e}=this,f=dS[e.position].call(this,a,b);return!1!==f&&(c!==f.x||d!==f.y)}}var d1={id:"tooltip",_element:d0,positioners:dS,afterInit(a,b,c){c&&(a.tooltip=new d0({chart:a,options:c}))},beforeUpdate(a,b,c){a.tooltip&&a.tooltip.initialize(c)},reset(a,b,c){a.tooltip&&a.tooltip.initialize(c)},afterDraw(a){let b=a.tooltip;if(b&&b._willRender()){let c={tooltip:b};if(!1===a.notifyPlugins("beforeTooltipDraw",{...c,cancelable:!0}))return;b.draw(a.ctx),a.notifyPlugins("afterTooltipDraw",c)}},afterEvent(a,b){if(a.tooltip){let c=b.replay;a.tooltip.handleEvent(b.event,c,b.inChartArea)&&(b.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(a,b)=>b.bodyFont.size,boxWidth:(a,b)=>b.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:d$},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:a=>"filter"!==a&&"itemSort"!==a&&"external"!==a,_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]},d2=Object.freeze({__proto__:null,Colors:{id:"colors",defaults:{enabled:!0,forceOverride:!1},beforeLayout(a,b,c){let d;if(!c.enabled)return;let{data:{datasets:e},options:f}=a.config,{elements:g}=f,h=dx(e)||f&&(f.borderColor||f.backgroundColor)||g&&dx(g)||"rgba(0,0,0,0.1)"!==aX.borderColor||"rgba(0,0,0,0.1)"!==aX.backgroundColor;if(!c.forceOverride&&h)return;let i=(d=0,(b,c)=>{var e,f,g;let h=a.getDatasetMeta(c).controller;h instanceof cd?(e=d,b.backgroundColor=b.data.map(()=>dv(e++)),d=e):h instanceof cf?(f=d,b.backgroundColor=b.data.map(()=>dw(f++)),d=f):h&&(b.borderColor=dv(g=d),b.backgroundColor=dw(g),d=++g)});e.forEach(i)}},Decimation:{id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(a,b,c)=>{if(!c.enabled)return void dz(a);let d=a.width;a.data.datasets.forEach((b,e)=>{let f,{_data:g,indexAxis:h}=b,i=a.getDatasetMeta(e),j=g||b.data;if("y"===bg([h,a.options.indexAxis])||!i.controller.supportsDecimation)return;let k=a.scales[i.xAxisID];if("linear"!==k.type&&"time"!==k.type||a.options.parsing)return;let{start:l,count:m}=function(a,b){let c,d=b.length,e=0,{iScale:f}=a,{min:g,max:h,minDefined:i,maxDefined:j}=f.getUserBounds();return i&&(e=au(ax(b,f.axis,g).lo,0,d-1)),c=j?au(ax(b,f.axis,h).hi+1,e,d)-e:d-e,{start:e,count:c}}(i,j);if(m<=(c.threshold||4*d))return void dy(b);switch(G(g)&&(b._data=j,delete b.data,Object.defineProperty(b,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(a){this._data=a}})),c.algorithm){case"lttb":f=function(a,b,c,d,e){let f,g,h,i,j,k=e.samples||d;if(k>=c)return a.slice(b,b+c);let l=[],m=(c-2)/(k-2),n=0,o=b+c-1,p=b;for(f=0,l[n++]=a[p];f<k-2;f++){let d,e=0,k=0,o=Math.floor((f+1)*m)+1+b,q=Math.min(Math.floor((f+2)*m)+1,c)+b,r=q-o;for(d=o;d<q;d++)e+=a[d].x,k+=a[d].y;e/=r,k/=r;let s=Math.floor(f*m)+1+b,t=Math.min(Math.floor((f+1)*m)+1,c)+b,{x:u,y:v}=a[p];for(h=i=-1,d=s;d<t;d++)(i=.5*Math.abs((u-e)*(a[d].y-v)-(u-a[d].x)*(k-v)))>h&&(h=i,g=a[d],j=d);l[n++]=g,p=j}return l[n++]=a[o],l}(j,l,m,d,c);break;case"min-max":f=function(a,b,c,d){let e,f,g,h,i,j,k,l,m,n,o=0,p=0,q=[],r=a[b].x,s=a[b+c-1].x-r;for(e=b;e<b+c;++e){g=((f=a[e]).x-r)/s*d,h=f.y;let b=0|g;if(b===i)h<m?(m=h,j=e):h>n&&(n=h,k=e),o=(p*o+f.x)/++p;else{let c=e-1;if(!G(j)&&!G(k)){let b=Math.min(j,k),d=Math.max(j,k);b!==l&&b!==c&&q.push({...a[b],x:o}),d!==l&&d!==c&&q.push({...a[d],x:o})}e>0&&c!==l&&q.push(a[c]),q.push(f),i=b,p=0,m=n=h,j=k=l=e}}return q}(j,l,m,d);break;default:throw Error(`Unsupported decimation algorithm '${c.algorithm}'`)}b._decimated=f})},destroy(a){dz(a)}},Filler:dL,Legend:dP,SubTitle:{id:"subtitle",start(a,b,c){let d=new dQ({ctx:a.ctx,options:c,chart:a});cA.configure(a,d,c),cA.addBox(a,d),dR.set(a,d)},stop(a){cA.removeBox(a,dR.get(a)),dR.delete(a)},beforeUpdate(a,b,c){let d=dR.get(a);cA.configure(a,d,c),d.options=c},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}},Title:{id:"title",_element:dQ,start(a,b,c){let d;d=new dQ({ctx:a.ctx,options:c,chart:a}),cA.configure(a,d,c),cA.addBox(a,d),a.titleBlock=d},stop(a){let b=a.titleBlock;cA.removeBox(a,b),delete a.titleBlock},beforeUpdate(a,b,c){let d=a.titleBlock;cA.configure(a,d,c),d.options=c},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}},Tooltip:d1});function d3(a){let b=this.getLabels();return a>=0&&a<b.length?b[a]:a}class d4 extends cK{static id="category";static defaults={ticks:{callback:d3}};constructor(a){super(a),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(a){let b=this._addedLabels;if(b.length){let a=this.getLabels();for(let{index:c,label:d}of b)a[c]===d&&a.splice(c,1);this._addedLabels=[]}super.init(a)}parse(a,b){let c,d;if(G(a))return null;let e=this.getLabels();return c=b=isFinite(b)&&e[b]===a?b:function(a,b,c,d){let e=a.indexOf(b);if(-1===e){var f;return f=c,"string"==typeof b?(f=a.push(b)-1,d.unshift({index:f,label:b})):isNaN(b)&&(f=null),f}return e!==a.lastIndexOf(b)?c:e}(e,a,L(b,a),this._addedLabels),d=e.length-1,null===c?null:au(Math.round(c),0,d)}determineDataLimits(){let{minDefined:a,maxDefined:b}=this.getUserBounds(),{min:c,max:d}=this.getMinMax(!0);"ticks"===this.options.bounds&&(a||(c=0),b||(d=this.getLabels().length-1)),this.min=c,this.max=d}buildTicks(){let a=this.min,b=this.max,c=this.options.offset,d=[],e=this.getLabels();e=0===a&&b===e.length-1?e:e.slice(a,b+1),this._valueRange=Math.max(e.length-!c,1),this._startValue=this.min-.5*!!c;for(let c=a;c<=b;c++)d.push({value:c});return d}getLabelForValue(a){return d3.call(this,a)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(a){return"number"!=typeof a&&(a=this.parse(a)),null===a?NaN:this.getPixelForDecimal((a-this._startValue)/this._valueRange)}getPixelForTick(a){let b=this.ticks;return a<0||a>b.length-1?null:this.getPixelForValue(b[a].value)}getValueForPixel(a){return Math.round(this._startValue+this.getDecimalForPixel(a)*this._valueRange)}getBasePixel(){return this.bottom}}function d5(a,b,{horizontal:c,minRotation:d}){let e=an(d),f=(c?Math.sin(e):Math.cos(e))||.001,g=.75*b*(""+a).length;return Math.min(b/f,g)}class d6 extends cK{constructor(a){super(a),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(a,b){return G(a)||("number"==typeof a||a instanceof Number)&&!isFinite(+a)?null:+a}handleTickRangeOptions(){let{beginAtZero:a}=this.options,{minDefined:b,maxDefined:c}=this.getUserBounds(),{min:d,max:e}=this,f=a=>d=b?d:a,g=a=>e=c?e:a;if(a){let a=ai(d),b=ai(e);a<0&&b<0?g(0):a>0&&b>0&&f(0)}if(d===e){let b=0===e?1:Math.abs(.05*e);g(e+b),a||f(d-b)}this.min=d,this.max=e}getTickLimit(){let a,{maxTicksLimit:b,stepSize:c}=this.options.ticks;return c?(a=Math.ceil(this.max/c)-Math.floor(this.min/c)+1)>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${c} would result generating up to ${a} ticks. Limiting to 1000.`),a=1e3):(a=this.computeTickLimit(),b=b||11),b&&(a=Math.min(b,a)),a}computeTickLimit(){return 1/0}buildTicks(){let a=this.options,b=a.ticks,c=this.getTickLimit(),d=function(a,b){var c,d;let e,f,g,h,i,j=[],{bounds:k,step:l,min:m,max:n,precision:o,count:p,maxTicks:q,maxDigits:r,includeBounds:s}=a,t=l||1,u=q-1,{min:v,max:w}=b,x=!G(m),y=!G(n),z=!G(p),A=(w-v)/(r+1),B=ak((w-v)/u/t)*t;if(B<1e-14&&!x&&!y)return[{value:v},{value:w}];(h=Math.ceil(w/B)-Math.floor(v/B))>u&&(B=ak(h*B/u/t)*t),G(o)||(B=Math.ceil(B*(e=Math.pow(10,o)))/e),"ticks"===k?(f=Math.floor(v/B)*B,g=Math.ceil(w/B)*B):(f=v,g=w),x&&y&&l&&(c=(n-m)/l,d=B/1e3,(i=Math.round(c))-d<=c&&i+d>=c)?(h=Math.round(Math.min((n-m)/B,q)),B=(n-m)/h,f=m,g=n):z?(f=x?m:f,B=((g=y?n:g)-f)/(h=p-1)):h=aj(h=(g-f)/B,Math.round(h),B/1e3)?Math.round(h):Math.ceil(h);let C=Math.max(ao(B),ao(f));f=Math.round(f*(e=Math.pow(10,G(o)?C:o)))/e,g=Math.round(g*e)/e;let D=0;for(x&&(s&&f!==m?(j.push({value:m}),f<m&&D++,aj(Math.round((f+D*B)*e)/e,m,d5(m,A,a))&&D++):f<m&&D++);D<h;++D){let a=Math.round((f+D*B)*e)/e;if(y&&a>n)break;j.push({value:a})}return y&&s&&g!==n?j.length&&aj(j[j.length-1].value,n,d5(n,A,a))?j[j.length-1].value=n:j.push({value:n}):y&&g!==n||j.push({value:g}),j}({maxTicks:c=Math.max(2,c),bounds:a.bounds,min:a.min,max:a.max,precision:b.precision,step:b.stepSize,count:b.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:b.minRotation||0,includeBounds:!1!==b.includeBounds},this._range||this);return"ticks"===a.bounds&&am(d,this,"value"),a.reverse?(d.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),d}configure(){let a=this.ticks,b=this.min,c=this.max;if(super.configure(),this.options.offset&&a.length){let d=(c-b)/Math.max(a.length-1,1)/2;b-=d,c+=d}this._startValue=b,this._endValue=c,this._valueRange=c-b}getLabelForValue(a){return aR(a,this.chart.options.locale,this.options.ticks.format)}}class d7 extends d6{static id="linear";static defaults={ticks:{callback:aS.numeric}};determineDataLimits(){let{min:a,max:b}=this.getMinMax(!0);this.min=J(a)?a:0,this.max=J(b)?b:1,this.handleTickRangeOptions()}computeTickLimit(){let a=this.isHorizontal(),b=a?this.width:this.height,c=an(this.options.ticks.minRotation),d=(a?Math.sin(c):Math.cos(c))||.001;return Math.ceil(b/Math.min(40,this._resolveTickFontOptions(0).lineHeight/d))}getPixelForValue(a){return null===a?NaN:this.getPixelForDecimal((a-this._startValue)/this._valueRange)}getValueForPixel(a){return this._startValue+this.getDecimalForPixel(a)*this._valueRange}}let d8=a=>Math.floor(ah(a)),d9=(a,b)=>Math.pow(10,d8(a)+b);function ea(a){return 1==a/Math.pow(10,d8(a))}function eb(a,b,c){let d=Math.pow(10,c),e=Math.floor(a/d);return Math.ceil(b/d)-e}class ec extends cK{static id="logarithmic";static defaults={ticks:{callback:aS.logarithmic,major:{enabled:!0}}};constructor(a){super(a),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(a,b){let c=d6.prototype.parse.apply(this,[a,b]);if(0===c){this._zero=!0;return}return J(c)&&c>0?c:null}determineDataLimits(){let{min:a,max:b}=this.getMinMax(!0);this.min=J(a)?Math.max(0,a):null,this.max=J(b)?Math.max(0,b):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!J(this._userMin)&&(this.min=a===d9(this.min,0)?d9(this.min,-1):d9(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){let{minDefined:a,maxDefined:b}=this.getUserBounds(),c=this.min,d=this.max,e=b=>c=a?c:b,f=a=>d=b?d:a;c===d&&(c<=0?(e(1),f(10)):(e(d9(c,-1)),f(d9(d,1)))),c<=0&&e(d9(d,-1)),d<=0&&f(d9(c,1)),this.min=c,this.max=d}buildTicks(){let a=this.options,b=function(a,{min:b,max:c}){b=K(a.min,b);let d=[],e=d8(b),f=function(a,b){let c=d8(b-a);for(;eb(a,b,c)>10;)c++;for(;10>eb(a,b,c);)c--;return Math.min(c,d8(a))}(b,c),g=f<0?Math.pow(10,Math.abs(f)):1,h=Math.pow(10,f),i=e>f?Math.pow(10,e):0,j=Math.round((b-i)*g)/g,k=Math.floor((b-i)/h/10)*h*10,l=Math.floor((j-k)/Math.pow(10,f)),m=K(a.min,Math.round((i+k+l*Math.pow(10,f))*g)/g);for(;m<c;)d.push({value:m,major:ea(m),significand:l}),l>=10?l=l<15?15:20:l++,l>=20&&(l=2,g=++f>=0?1:g),m=Math.round((i+k+l*Math.pow(10,f))*g)/g;let n=K(a.max,m);return d.push({value:n,major:ea(n),significand:l}),d}({min:this._userMin,max:this._userMax},this);return"ticks"===a.bounds&&am(b,this,"value"),a.reverse?(b.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),b}getLabelForValue(a){return void 0===a?"0":aR(a,this.chart.options.locale,this.options.ticks.format)}configure(){let a=this.min;super.configure(),this._startValue=ah(a),this._valueRange=ah(this.max)-ah(a)}getPixelForValue(a){return((void 0===a||0===a)&&(a=this.min),null===a||isNaN(a))?NaN:this.getPixelForDecimal(a===this.min?0:(ah(a)-this._startValue)/this._valueRange)}getValueForPixel(a){let b=this.getDecimalForPixel(a);return Math.pow(10,this._startValue+b*this._valueRange)}}function ed(a){let b=a.ticks;if(b.display&&a.display){let a=be(b.backdropPadding);return L(b.font&&b.font.size,aX.font.size)+a.height}return 0}function ee(a,b,c,d,e){return a===d||a===e?{start:b-c/2,end:b+c/2}:a<d||a>e?{start:b-c,end:b}:{start:b,end:b+c}}function ef(a,b,c,d){let{ctx:e}=a;if(c)e.arc(a.xCenter,a.yCenter,b,0,ab);else{let c=a.getPointPosition(0,b);e.moveTo(c.x,c.y);for(let f=1;f<d;f++)c=a.getPointPosition(f,b),e.lineTo(c.x,c.y)}}class eg extends d6{static id="radialLinear";static defaults={display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:aS.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback:a=>a,padding:5,centerPointLabels:!1}};static defaultRoutes={"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"};static descriptors={angleLines:{_fallback:"grid"}};constructor(a){super(a),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){let a=this._padding=be(ed(this.options)/2),b=this.width=this.maxWidth-a.width,c=this.height=this.maxHeight-a.height;this.xCenter=Math.floor(this.left+b/2+a.left),this.yCenter=Math.floor(this.top+c/2+a.top),this.drawingArea=Math.floor(Math.min(b,c)/2)}determineDataLimits(){let{min:a,max:b}=this.getMinMax(!1);this.min=J(a)&&!isNaN(a)?a:0,this.max=J(b)&&!isNaN(b)?b:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/ed(this.options))}generateTickLabels(a){d6.prototype.generateTickLabels.call(this,a),this._pointLabels=this.getLabels().map((a,b)=>{let c=N(this.options.pointLabels.callback,[a,b],this);return c||0===c?c:""}).filter((a,b)=>this.chart.getDataVisibility(b))}fit(){let a=this.options;a.display&&a.pointLabels.display?function(a){let b={l:a.left+a._padding.left,r:a.right-a._padding.right,t:a.top+a._padding.top,b:a.bottom-a._padding.bottom},c=Object.assign({},b),d=[],e=[],f=a._pointLabels.length,g=a.options.pointLabels,h=g.centerPointLabels?aa/f:0;for(let k=0;k<f;k++){var i,j;let f=g.setContext(a.getPointLabelContext(k));e[k]=f.padding;let l=a.getPointPosition(k,a.drawingArea+e[k],h),m=bf(f.font),n=(i=a.ctx,j=H(j=a._pointLabels[k])?j:[j],{w:function(a,b,c,d){let e,f,g,h,i,j=(d=d||{}).data=d.data||{},k=d.garbageCollect=d.garbageCollect||[];d.font!==b&&(j=d.data={},k=d.garbageCollect=[],d.font=b),a.save(),a.font=b;let l=0,m=c.length;for(e=0;e<m;e++)if(null==(h=c[e])||H(h)){if(H(h))for(f=0,g=h.length;f<g;f++)null==(i=h[f])||H(i)||(l=aY(a,j,k,l,i))}else l=aY(a,j,k,l,h);a.restore();let n=k.length/2;if(n>c.length){for(e=0;e<n;e++)delete j[k[e]];k.splice(0,n)}return l}(i,m.string,j),h:j.length*m.lineHeight});d[k]=n;let o=as(a.getIndexAngle(k)+h),p=Math.round(180/aa*o);!function(a,b,c,d,e){let f=Math.abs(Math.sin(c)),g=Math.abs(Math.cos(c)),h=0,i=0;d.start<b.l?(h=(b.l-d.start)/f,a.l=Math.min(a.l,b.l-h)):d.end>b.r&&(h=(d.end-b.r)/f,a.r=Math.max(a.r,b.r+h)),e.start<b.t?(i=(b.t-e.start)/g,a.t=Math.min(a.t,b.t-i)):e.end>b.b&&(i=(e.end-b.b)/g,a.b=Math.max(a.b,b.b+i))}(c,b,o,ee(p,l.x,n.w,0,180),ee(p,l.y,n.h,90,270))}a.setCenterPoint(b.l-c.l,c.r-b.r,b.t-c.t,c.b-b.b),a._pointLabelItems=function(a,b,c){let d,e=[],f=a._pointLabels.length,g=a.options,{centerPointLabels:h,display:i}=g.pointLabels,j={extra:ed(g)/2,additionalAngle:h?aa/f:0};for(let g=0;g<f;g++){j.padding=c[g],j.size=b[g];let f=function(a,b,c){var d,e,f,g,h,i,j;let k=a.drawingArea,{extra:l,additionalAngle:m,padding:n,size:o}=c,p=a.getPointPosition(b,k+l+n,m),q=Math.round(180/aa*as(p.angle+ae)),r=(d=p.y,e=o.h,90===(f=q)||270===f?d-=e/2:(f>270||f<90)&&(d-=e),d),s=0===(g=q)||180===g?"center":g<180?"left":"right",t=(h=p.x,i=o.w,"right"===(j=s)?h-=i:"center"===j&&(h-=i/2),h);return{visible:!0,x:p.x,y:r,textAlign:s,left:t,top:r,right:t+o.w,bottom:r+o.h}}(a,g,j);e.push(f),"auto"===i&&(f.visible=function(a,b){if(!b)return!0;let{left:c,top:d,right:e,bottom:f}=a;return!(a1({x:c,y:d},b)||a1({x:c,y:f},b)||a1({x:e,y:d},b)||a1({x:e,y:f},b))}(f,d),f.visible&&(d=f))}return e}(a,d,e)}(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(a,b,c,d){this.xCenter+=Math.floor((a-b)/2),this.yCenter+=Math.floor((c-d)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(a,b,c,d))}getIndexAngle(a){return as(a*(ab/(this._pointLabels.length||1))+an(this.options.startAngle||0))}getDistanceFromCenterForValue(a){if(G(a))return NaN;let b=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-a)*b:(a-this.min)*b}getValueForDistanceFromCenter(a){if(G(a))return NaN;let b=a/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-b:this.min+b}getPointLabelContext(a){let b=this._pointLabels||[];if(a>=0&&a<b.length){var c;let d=b[a];return c=this.getContext(),bh(c,{label:d,index:a,type:"pointLabel"})}}getPointPosition(a,b,c=0){let d=this.getIndexAngle(a)-ae+c;return{x:Math.cos(d)*b+this.xCenter,y:Math.sin(d)*b+this.yCenter,angle:d}}getPointPositionForValue(a,b){return this.getPointPosition(a,this.getDistanceFromCenterForValue(b))}getBasePosition(a){return this.getPointPositionForValue(a||0,this.getBaseValue())}getPointLabelPosition(a){let{left:b,top:c,right:d,bottom:e}=this._pointLabelItems[a];return{left:b,top:c,right:d,bottom:e}}drawBackground(){let{backgroundColor:a,grid:{circular:b}}=this.options;if(a){let c=this.ctx;c.save(),c.beginPath(),ef(this,this.getDistanceFromCenterForValue(this._endValue),b,this._pointLabels.length),c.closePath(),c.fillStyle=a,c.fill(),c.restore()}}drawGrid(){let a,b,c,d=this.ctx,e=this.options,{angleLines:f,grid:g,border:h}=e,i=this._pointLabels.length;if(e.pointLabels.display&&function(a,b){let{ctx:c,options:{pointLabels:d}}=a;for(let e=b-1;e>=0;e--){let b=a._pointLabelItems[e];if(!b.visible)continue;let f=d.setContext(a.getPointLabelContext(e));!function(a,b,c){let{left:d,top:e,right:f,bottom:g}=c,{backdropColor:h}=b;if(!G(h)){let c=bd(b.borderRadius),i=be(b.backdropPadding);a.fillStyle=h;let j=d-i.left,k=e-i.top,l=f-d+i.width,m=g-e+i.height;Object.values(c).some(a=>0!==a)?(a.beginPath(),a7(a,{x:j,y:k,w:l,h:m,radius:c}),a.fill()):a.fillRect(j,k,l,m)}}(c,f,b);let g=bf(f.font),{x:h,y:i,textAlign:j}=b;a6(c,a._pointLabels[e],h,i+g.lineHeight/2,g,{color:f.color,textAlign:j,textBaseline:"middle"})}}(this,i),g.display&&this.ticks.forEach((a,c)=>{if(0!==c||0===c&&this.min<0){b=this.getDistanceFromCenterForValue(a.value);let d=this.getContext(c),e=g.setContext(d),f=h.setContext(d);!function(a,b,c,d,e){let f=a.ctx,g=b.circular,{color:h,lineWidth:i}=b;(g||d)&&h&&i&&!(c<0)&&(f.save(),f.strokeStyle=h,f.lineWidth=i,f.setLineDash(e.dash||[]),f.lineDashOffset=e.dashOffset,f.beginPath(),ef(a,c,g,d),f.closePath(),f.stroke(),f.restore())}(this,e,b,i,f)}}),f.display){for(d.save(),a=i-1;a>=0;a--){let g=f.setContext(this.getPointLabelContext(a)),{color:h,lineWidth:i}=g;i&&h&&(d.lineWidth=i,d.strokeStyle=h,d.setLineDash(g.borderDash),d.lineDashOffset=g.borderDashOffset,b=this.getDistanceFromCenterForValue(e.reverse?this.min:this.max),c=this.getPointPosition(a,b),d.beginPath(),d.moveTo(this.xCenter,this.yCenter),d.lineTo(c.x,c.y),d.stroke())}d.restore()}}drawBorder(){}drawLabels(){let a,b,c=this.ctx,d=this.options,e=d.ticks;if(!e.display)return;let f=this.getIndexAngle(0);c.save(),c.translate(this.xCenter,this.yCenter),c.rotate(f),c.textAlign="center",c.textBaseline="middle",this.ticks.forEach((f,g)=>{if(0===g&&this.min>=0&&!d.reverse)return;let h=e.setContext(this.getContext(g)),i=bf(h.font);if(a=this.getDistanceFromCenterForValue(this.ticks[g].value),h.showLabelBackdrop){c.font=i.string,b=c.measureText(f.label).width,c.fillStyle=h.backdropColor;let d=be(h.backdropPadding);c.fillRect(-b/2-d.left,-a-i.size/2-d.top,b+d.width,i.size+d.height)}a6(c,f.label,0,-a,i,{color:h.color,strokeColor:h.textStrokeColor,strokeWidth:h.textStrokeWidth})}),c.restore()}drawTitle(){}}let eh={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},ei=Object.keys(eh);function ej(a,b){return a-b}function ek(a,b){if(G(b))return null;let c=a._adapter,{parser:d,round:e,isoWeekday:f}=a._parseOpts,g=b;return("function"==typeof d&&(g=d(g)),J(g)||(g="string"==typeof d?c.parse(g,d):c.parse(g)),null===g)?null:(e&&(g="week"===e&&(al(f)||!0===f)?c.startOf(g,"isoWeek",f):c.startOf(g,e)),+g)}function el(a,b,c,d){let e=ei.length;for(let f=ei.indexOf(a);f<e-1;++f){let a=eh[ei[f]],e=a.steps?a.steps:Number.MAX_SAFE_INTEGER;if(a.common&&Math.ceil((c-b)/(e*a.size))<=d)return ei[f]}return ei[e-1]}function em(a,b,c){if(c){if(c.length){let{lo:d,hi:e}=aw(c,b);a[c[d]>=b?c[d]:c[e]]=!0}}else a[b]=!0}function en(a,b,c){let d,e,f=[],g={},h=b.length;for(d=0;d<h;++d)g[e=b[d]]=d,f.push({value:e,major:!1});return 0!==h&&c?function(a,b,c,d){let e,f,g=a._adapter,h=+g.startOf(b[0].value,d),i=b[b.length-1].value;for(e=h;e<=i;e=+g.add(e,1,d))(f=c[e])>=0&&(b[f].major=!0);return b}(a,f,g,c):f}class eo extends cK{static id="time";static defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}};constructor(a){super(a),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(a,b={}){let c=a.time||(a.time={}),d=this._adapter=new cl(a.adapters.date);d.init(b),U(c.displayFormats,d.formats()),this._parseOpts={parser:c.parser,round:c.round,isoWeekday:c.isoWeekday},super.init(a),this._normalized=b.normalized}parse(a,b){return void 0===a?null:ek(this,a)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){let a=this.options,b=this._adapter,c=a.time.unit||"day",{min:d,max:e,minDefined:f,maxDefined:g}=this.getUserBounds();function h(a){f||isNaN(a.min)||(d=Math.min(d,a.min)),g||isNaN(a.max)||(e=Math.max(e,a.max))}f&&g||(h(this._getLabelBounds()),("ticks"!==a.bounds||"labels"!==a.ticks.source)&&h(this.getMinMax(!1))),d=J(d)&&!isNaN(d)?d:+b.startOf(Date.now(),c),e=J(e)&&!isNaN(e)?e:+b.endOf(Date.now(),c)+1,this.min=Math.min(d,e-1),this.max=Math.max(d+1,e)}_getLabelBounds(){let a=this.getLabelTimestamps(),b=1/0,c=-1/0;return a.length&&(b=a[0],c=a[a.length-1]),{min:b,max:c}}buildTicks(){let a=this.options,b=a.time,c=a.ticks,d="labels"===c.source?this.getLabelTimestamps():this._generate();"ticks"===a.bounds&&d.length&&(this.min=this._userMin||d[0],this.max=this._userMax||d[d.length-1]);let e=this.min,f=function(a,b,c){let d=0,e=a.length;for(;d<e&&a[d]<b;)d++;for(;e>d&&a[e-1]>c;)e--;return d>0||e<a.length?a.slice(d,e):a}(d,e,this.max);return this._unit=b.unit||(c.autoSkip?el(b.minUnit,this.min,this.max,this._getLabelCapacity(e)):function(a,b,c,d,e){for(let f=ei.length-1;f>=ei.indexOf(c);f--){let c=ei[f];if(eh[c].common&&a._adapter.diff(e,d,c)>=b-1)return c}return ei[c?ei.indexOf(c):0]}(this,f.length,b.minUnit,this.min,this.max)),this._majorUnit=c.major.enabled&&"year"!==this._unit?function(a){for(let b=ei.indexOf(a)+1,c=ei.length;b<c;++b)if(eh[ei[b]].common)return ei[b]}(this._unit):void 0,this.initOffsets(d),a.reverse&&f.reverse(),en(this,f,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(a=>+a.value))}initOffsets(a=[]){let b,c,d=0,e=0;this.options.offset&&a.length&&(b=this.getDecimalForValue(a[0]),d=1===a.length?1-b:(this.getDecimalForValue(a[1])-b)/2,c=this.getDecimalForValue(a[a.length-1]),e=1===a.length?c:(c-this.getDecimalForValue(a[a.length-2]))/2);let f=a.length<3?.5:.25;d=au(d,0,f),e=au(e,0,f),this._offsets={start:d,end:e,factor:1/(d+1+e)}}_generate(){let a,b,c=this._adapter,d=this.min,e=this.max,f=this.options,g=f.time,h=g.unit||el(g.minUnit,d,e,this._getLabelCapacity(d)),i=L(f.ticks.stepSize,1),j="week"===h&&g.isoWeekday,k=al(j)||!0===j,l={},m=d;if(k&&(m=+c.startOf(m,"isoWeek",j)),m=+c.startOf(m,k?"day":h),c.diff(e,d,h)>1e5*i)throw Error(d+" and "+e+" are too far apart with stepSize of "+i+" "+h);let n="data"===f.ticks.source&&this.getDataTimestamps();for(a=m,b=0;a<e;a=+c.add(a,i,h),b++)em(l,a,n);return(a===e||"ticks"===f.bounds||1===b)&&em(l,a,n),Object.keys(l).sort(ej).map(a=>+a)}getLabelForValue(a){let b=this._adapter,c=this.options.time;return c.tooltipFormat?b.format(a,c.tooltipFormat):b.format(a,c.displayFormats.datetime)}format(a,b){let c=this.options.time.displayFormats,d=this._unit,e=b||c[d];return this._adapter.format(a,e)}_tickFormatFunction(a,b,c,d){let e=this.options,f=e.ticks.callback;if(f)return N(f,[a,b,c],this);let g=e.time.displayFormats,h=this._unit,i=this._majorUnit,j=h&&g[h],k=i&&g[i],l=c[b],m=i&&k&&l&&l.major;return this._adapter.format(a,d||(m?k:j))}generateTickLabels(a){let b,c,d;for(b=0,c=a.length;b<c;++b)(d=a[b]).label=this._tickFormatFunction(d.value,b,a)}getDecimalForValue(a){return null===a?NaN:(a-this.min)/(this.max-this.min)}getPixelForValue(a){let b=this._offsets,c=this.getDecimalForValue(a);return this.getPixelForDecimal((b.start+c)*b.factor)}getValueForPixel(a){let b=this._offsets,c=this.getDecimalForPixel(a)/b.factor-b.end;return this.min+c*(this.max-this.min)}_getLabelSize(a){let b=this.options.ticks,c=this.ctx.measureText(a).width,d=an(this.isHorizontal()?b.maxRotation:b.minRotation),e=Math.cos(d),f=Math.sin(d),g=this._resolveTickFontOptions(0).size;return{w:c*e+g*f,h:c*f+g*e}}_getLabelCapacity(a){let b=this.options.time,c=b.displayFormats,d=c[b.unit]||c.millisecond,e=this._tickFormatFunction(a,0,en(this,[a],this._majorUnit),d),f=this._getLabelSize(e),g=Math.floor(this.isHorizontal()?this.width/f.w:this.height/f.h)-1;return g>0?g:1}getDataTimestamps(){let a,b,c=this._cache.data||[];if(c.length)return c;let d=this.getMatchingVisibleMetas();if(this._normalized&&d.length)return this._cache.data=d[0].controller.getAllParsedValues(this);for(a=0,b=d.length;a<b;++a)c=c.concat(d[a].controller.getAllParsedValues(this));return this._cache.data=this.normalize(c)}getLabelTimestamps(){let a,b,c=this._cache.labels||[];if(c.length)return c;let d=this.getLabels();for(a=0,b=d.length;a<b;++a)c.push(ek(this,d[a]));return this._cache.labels=this._normalized?c:this.normalize(c)}normalize(a){return aB(a.sort(ej))}}function ep(a,b,c){let d,e,f,g,h=0,i=a.length-1;c?(b>=a[h].pos&&b<=a[i].pos&&({lo:h,hi:i}=ax(a,"pos",b)),{pos:d,time:f}=a[h],{pos:e,time:g}=a[i]):(b>=a[h].time&&b<=a[i].time&&({lo:h,hi:i}=ax(a,"time",b)),{time:d,pos:f}=a[h],{time:e,pos:g}=a[i]);let j=e-d;return j?f+(g-f)*(b-d)/j:f}class eq extends eo{static id="timeseries";static defaults=eo.defaults;constructor(a){super(a),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){let a=this._getTimestampsForTable(),b=this._table=this.buildLookupTable(a);this._minPos=ep(b,this.min),this._tableRange=ep(b,this.max)-this._minPos,super.initOffsets(a)}buildLookupTable(a){let b,c,d,{min:e,max:f}=this,g=[],h=[];for(b=0,c=a.length;b<c;++b)(d=a[b])>=e&&d<=f&&g.push(d);if(g.length<2)return[{time:e,pos:0},{time:f,pos:1}];for(b=0,c=g.length;b<c;++b)Math.round((g[b+1]+g[b-1])/2)!==(d=g[b])&&h.push({time:d,pos:b/(c-1)});return h}_generate(){let a=this.min,b=this.max,c=super.getDataTimestamps();return c.includes(a)&&c.length||c.splice(0,0,a),c.includes(b)&&1!==c.length||c.push(b),c.sort((a,b)=>a-b)}_getTimestampsForTable(){let a=this._cache.all||[];if(a.length)return a;let b=this.getDataTimestamps(),c=this.getLabelTimestamps();return a=b.length&&c.length?this.normalize(b.concat(c)):b.length?b:c,a=this._cache.all=a}getDecimalForValue(a){return(ep(this._table,a)-this._minPos)/this._tableRange}getValueForPixel(a){let b=this._offsets,c=this.getDecimalForPixel(a)/b.factor-b.end;return ep(this._table,c*this._tableRange+this._minPos,!0)}}let er=[cj,ds,d2,Object.freeze({__proto__:null,CategoryScale:d4,LinearScale:d7,LogarithmicScale:ec,RadialLinearScale:eg,TimeScale:eo,TimeSeriesScale:eq})];a.s(["BarController",()=>cb,"BarElement",()=>dr,"BubbleController",()=>cc,"CategoryScale",()=>d4,"Chart",()=>c7,"DoughnutController",()=>cd,"Filler",()=>dL,"Legend",()=>dP,"LineController",()=>ce,"LineElement",()=>di,"LinearScale",()=>d7,"PieController",()=>cg,"PointElement",()=>dk,"PolarAreaController",()=>cf,"RadarController",()=>ch,"ScatterController",()=>ci,"Tooltip",()=>d1,"registerables",()=>er],94814),c7.register(...er),a.s([],42738)}];

//# sourceMappingURL=apps_frontend_src_7d3ace7f._.js.map
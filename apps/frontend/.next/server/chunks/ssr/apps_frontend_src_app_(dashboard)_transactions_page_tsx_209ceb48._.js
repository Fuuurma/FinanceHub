module.exports=[14885,a=>{"use strict";var b=a.i(86531),c=a.i(9644),d=a.i(7807),e=a.i(49657),f=a.i(61219),g=a.i(48047),h=a.i(51145),i=a.i(47627),j=a.i(59820),k=a.i(22253),l=a.i(6047),m=a.i(83688),n=a.i(55694),o=a.i(80298),p=a.i(18588),q=a.i(18754);function r(){let[a]=(0,c.useState)("default"),[r]=(0,c.useState)("My Portfolio"),[s,t]=(0,c.useState)([]),[u,v]=(0,c.useState)(!0),[w,x]=(0,c.useState)(""),[y,z]=(0,c.useState)(!1),[A,B]=(0,c.useState)("all"),[C,D]=(0,c.useState)(!1),[E,F]=(0,c.useState)({transaction_type:"buy",asset_id:"",quantity:"",price_per_share:"",fees:"0",date:new Date().toISOString().split("T")[0],notes:""});(0,c.useEffect)(()=>{G()},[a,A]);let G=async()=>{v(!0),x("");try{let b,c,e={};"all"!==A&&(e.transaction_type=A);let f=await (b=a,c=e,d.apiClient.get(`/portfolios/${b}/transactions`,{params:c}));t(f)}catch(a){x(a instanceof Error?a.message:"Failed to fetch transactions")}finally{v(!1)}},H=async b=>{b.preventDefault();try{let b,c;await (b=a,c={...E,quantity:E.quantity||void 0,fees:E.fees||void 0},d.apiClient.post(`/portfolios/${b}/transactions`,c)),z(!1),F({transaction_type:"buy",asset_id:"",quantity:"",price_per_share:"",fees:"0",date:new Date().toISOString().split("T")[0],notes:""}),G()}catch(a){x(a instanceof Error?a.message:"Failed to create transaction")}},I=async b=>{if(confirm("Are you sure you want to delete this transaction?"))try{let c,e;await (c=a,e=b,d.apiClient.delete(`/portfolios/${c}/transactions/${e}`)),G()}catch(a){x(a instanceof Error?a.message:"Failed to delete transaction")}},J=s.filter(a=>"buy"===a.transaction_type).reduce((a,b)=>a+parseFloat(b.total_amount),0),K=s.filter(a=>"sell"===a.transaction_type).reduce((a,b)=>a+parseFloat(b.total_amount),0),L=s.filter(a=>"dividend"===a.transaction_type).reduce((a,b)=>a+parseFloat(b.total_amount),0);return(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-3xl font-bold",children:r}),(0,b.jsx)("p",{className:"text-muted-foreground",children:"Transaction History"})]}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsxs)(f.Button,{variant:"outline",onClick:()=>D(!C),children:[(0,b.jsx)(o.Filter,{className:"w-4 h-4 mr-2"}),"Filter"]}),(0,b.jsxs)(f.Button,{variant:"outline",onClick:()=>{let a=new Blob([JSON.stringify(s,null,2)],{type:"application/json"}),b=URL.createObjectURL(a),c=document.createElement("a");c.href=b,c.download=`transactions-${r}-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(c),c.click(),document.body.removeChild(c),URL.revokeObjectURL(b)},children:[(0,b.jsx)(n.Download,{className:"w-4 h-4 mr-2"}),"Export"]}),(0,b.jsxs)(k.Dialog,{open:y,onOpenChange:z,children:[(0,b.jsx)(k.DialogTrigger,{asChild:!0,children:(0,b.jsxs)(f.Button,{children:[(0,b.jsx)(m.Plus,{className:"w-4 h-4 mr-2"}),"Record Transaction"]})}),(0,b.jsxs)(k.DialogContent,{children:[(0,b.jsxs)(k.DialogHeader,{children:[(0,b.jsx)(k.DialogTitle,{children:"Record Transaction"}),(0,b.jsx)(k.DialogDescription,{children:"Add a new transaction to your portfolio"})]}),(0,b.jsxs)("form",{onSubmit:H,className:"space-y-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(h.Label,{htmlFor:"type",children:"Transaction Type"}),(0,b.jsxs)(i.Select,{value:E.transaction_type,onValueChange:a=>F({...E,transaction_type:a}),children:[(0,b.jsx)(i.SelectTrigger,{children:(0,b.jsx)(i.SelectValue,{})}),(0,b.jsxs)(i.SelectContent,{children:[(0,b.jsx)(i.SelectItem,{value:"buy",children:"Buy"}),(0,b.jsx)(i.SelectItem,{value:"sell",children:"Sell"}),(0,b.jsx)(i.SelectItem,{value:"dividend",children:"Dividend"})]})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(h.Label,{htmlFor:"assetId",children:"Asset ID"}),(0,b.jsx)(g.Input,{id:"assetId",value:E.asset_id,onChange:a=>F({...E,asset_id:a.target.value}),placeholder:"Enter asset UUID",required:!0})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(h.Label,{htmlFor:"quantity",children:"Quantity"}),(0,b.jsx)(g.Input,{id:"quantity",type:"number",step:"any",value:E.quantity,onChange:a=>F({...E,quantity:a.target.value}),placeholder:"0.00"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(h.Label,{htmlFor:"price",children:"Price per Share"}),(0,b.jsx)(g.Input,{id:"price",type:"number",step:"any",value:E.price_per_share,onChange:a=>F({...E,price_per_share:a.target.value}),placeholder:"0.00",required:!0})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(h.Label,{htmlFor:"fees",children:"Fees"}),(0,b.jsx)(g.Input,{id:"fees",type:"number",step:"any",value:E.fees,onChange:a=>F({...E,fees:a.target.value}),placeholder:"0.00"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(h.Label,{htmlFor:"date",children:"Date"}),(0,b.jsx)(g.Input,{id:"date",type:"date",value:E.date,onChange:a=>F({...E,date:a.target.value}),required:!0})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(h.Label,{htmlFor:"notes",children:"Notes"}),(0,b.jsx)(g.Input,{id:"notes",value:E.notes,onChange:a=>F({...E,notes:a.target.value}),placeholder:"Optional notes"})]}),(0,b.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,b.jsx)(f.Button,{type:"button",variant:"outline",onClick:()=>z(!1),children:"Cancel"}),(0,b.jsx)(f.Button,{type:"submit",children:"Record"})]})]})]})]})]})]}),w&&(0,b.jsx)("div",{className:"bg-destructive/10 text-destructive p-4 rounded-lg",children:(0,b.jsx)("p",{children:w})}),C&&(0,b.jsx)(e.Card,{children:(0,b.jsx)(e.CardContent,{className:"pt-6",children:(0,b.jsx)("div",{className:"flex gap-4",children:(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(h.Label,{children:"Type Filter"}),(0,b.jsxs)(i.Select,{value:A,onValueChange:B,children:[(0,b.jsx)(i.SelectTrigger,{className:"w-40",children:(0,b.jsx)(i.SelectValue,{})}),(0,b.jsxs)(i.SelectContent,{children:[(0,b.jsx)(i.SelectItem,{value:"all",children:"All"}),(0,b.jsx)(i.SelectItem,{value:"buy",children:"Buy"}),(0,b.jsx)(i.SelectItem,{value:"sell",children:"Sell"}),(0,b.jsx)(i.SelectItem,{value:"dividend",children:"Dividend"})]})]})]})})})}),(0,b.jsxs)("div",{className:"grid gap-4 md:grid-cols-4",children:[(0,b.jsxs)(e.Card,{children:[(0,b.jsx)(e.CardHeader,{children:(0,b.jsx)(e.CardDescription,{children:"Total Buys"})}),(0,b.jsx)(e.CardContent,{children:(0,b.jsxs)("p",{className:"text-2xl font-bold text-green-600",children:["$",J.toLocaleString()]})})]}),(0,b.jsxs)(e.Card,{children:[(0,b.jsx)(e.CardHeader,{children:(0,b.jsx)(e.CardDescription,{children:"Total Sells"})}),(0,b.jsx)(e.CardContent,{children:(0,b.jsxs)("p",{className:"text-2xl font-bold text-red-600",children:["$",K.toLocaleString()]})})]}),(0,b.jsxs)(e.Card,{children:[(0,b.jsx)(e.CardHeader,{children:(0,b.jsx)(e.CardDescription,{children:"Dividends"})}),(0,b.jsx)(e.CardContent,{children:(0,b.jsxs)("p",{className:"text-2xl font-bold text-blue-600",children:["$",L.toLocaleString()]})})]}),(0,b.jsxs)(e.Card,{children:[(0,b.jsx)(e.CardHeader,{children:(0,b.jsx)(e.CardDescription,{children:"Total Transactions"})}),(0,b.jsx)(e.CardContent,{children:(0,b.jsx)("p",{className:"text-2xl font-bold",children:s.length})})]})]}),u?(0,b.jsx)("div",{className:"space-y-3",children:[1,2,3,4,5].map(a=>(0,b.jsx)(e.Card,{children:(0,b.jsx)(e.CardContent,{className:"pt-6",children:(0,b.jsx)(j.Skeleton,{className:"h-16 w-full"})})},a))}):0===s.length?(0,b.jsx)(e.Card,{children:(0,b.jsxs)(e.CardContent,{className:"py-12 text-center",children:[(0,b.jsx)(p.Calendar,{className:"w-12 h-12 mx-auto text-muted-foreground mb-4"}),(0,b.jsx)("p",{className:"text-muted-foreground mb-4",children:"No transactions found"}),(0,b.jsxs)(f.Button,{onClick:()=>z(!0),children:[(0,b.jsx)(m.Plus,{className:"w-4 h-4 mr-2"}),"Record Your First Transaction"]})]})}):(0,b.jsx)("div",{className:"space-y-3",children:s.map(a=>(0,b.jsx)(e.Card,{children:(0,b.jsx)(e.CardContent,{className:"p-6",children:(0,b.jsxs)("div",{className:"flex items-start justify-between",children:[(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(a=>{switch(a){case"buy":return(0,b.jsx)(l.Badge,{className:"bg-green-100 text-green-800",children:"Buy"});case"sell":return(0,b.jsx)(l.Badge,{className:"bg-red-100 text-red-800",children:"Sell"});case"dividend":return(0,b.jsx)(l.Badge,{className:"bg-blue-100 text-blue-800",children:"Dividend"});default:return(0,b.jsx)(l.Badge,{variant:"outline",children:a})}})(a.transaction_type),(0,b.jsx)("span",{className:"font-semibold",children:a.asset.ticker}),(0,b.jsx)("span",{className:"text-sm text-muted-foreground",children:a.asset.name})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Date"}),(0,b.jsx)("p",{className:"font-medium",children:new Date(a.date).toLocaleDateString()})]}),a.quantity&&(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Quantity"}),(0,b.jsx)("p",{className:"font-medium",children:parseFloat(a.quantity).toLocaleString()})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Price"}),(0,b.jsxs)("p",{className:"font-medium",children:["$",parseFloat(a.price_per_share).toFixed(2)]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Total"}),(0,b.jsxs)("p",{className:"font-semibold",children:["$",parseFloat(a.total_amount).toFixed(2)]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Fees"}),(0,b.jsxs)("p",{className:"font-medium",children:["$",parseFloat(a.fees).toFixed(2)]})]})]}),a.notes&&(0,b.jsxs)("p",{className:"text-sm text-muted-foreground mt-2",children:["Note: ",a.notes]})]}),(0,b.jsx)(f.Button,{variant:"ghost",size:"icon",onClick:()=>I(a.id),children:(0,b.jsx)(q.Trash2,{className:"w-4 h-4 text-destructive"})})]})})},a.id))})]})}a.s(["default",()=>r],14885)}];

//# sourceMappingURL=apps_frontend_src_app_%28dashboard%29_transactions_page_tsx_209ceb48._.js.map
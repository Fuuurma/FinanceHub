module.exports=[28858,85100,a=>{"use strict";var b,c=a.i(86531),d=a.i(9644);a.i(42738);var e=a.i(94814);let f="label";function g(a,b){"function"==typeof a?a(b):a&&(a.current=b)}function h(a,b,c=f){let d=[];a.datasets=b.map(b=>{let e=a.datasets.find(a=>a[c]===b[c]);return!e||!b.data||d.includes(e)?{...b}:(d.push(e),Object.assign(e,b),e)})}let i=(0,d.forwardRef)(function(a,b){let{height:i=150,width:j=300,redraw:k=!1,datasetIdKey:l,type:m,data:n,options:o,plugins:p=[],fallbackContent:q,updateMode:r,...s}=a,t=(0,d.useRef)(null),u=(0,d.useRef)(null),v=()=>{t.current&&(u.current=new e.Chart(t.current,{type:m,data:function(a,b=f){let c={labels:[],datasets:[]};return c.labels=a.labels,h(c,a.datasets,b),c}(n,l),options:o&&{...o},plugins:p}),g(b,u.current))},w=()=>{g(b,null),u.current&&(u.current.destroy(),u.current=null)};return(0,d.useEffect)(()=>{var a;let b;!k&&u.current&&o&&(a=u.current,(b=a.options)&&o&&Object.assign(b,o))},[k,o]),(0,d.useEffect)(()=>{!k&&u.current&&(u.current.config.data.labels=n.labels)},[k,n.labels]),(0,d.useEffect)(()=>{!k&&u.current&&n.datasets&&h(u.current.config.data,n.datasets,l)},[k,n.datasets]),(0,d.useEffect)(()=>{u.current&&(k?(w(),setTimeout(v)):u.current.update(r))},[k,o,n.labels,n.datasets,r]),(0,d.useEffect)(()=>{u.current&&(w(),setTimeout(v))},[m]),(0,d.useEffect)(()=>(v(),()=>w()),[]),(0,c.jsx)("canvas",{ref:t,role:"img",height:i,width:j,...s,children:q})});e.LineController;let j=(b=e.BarController,e.Chart.register(b),(0,d.forwardRef)((a,b)=>(0,c.jsx)(i,{...a,ref:b,type:"bar"})));e.RadarController,e.DoughnutController,e.PolarAreaController,e.BubbleController,e.PieController,e.ScatterController;var k=a.i(47627),l=a.i(4631),m=a.i(1581),n=a.i(2605);function o({symbol:a,depth:b=n.ORDERBOOK_CONFIG.DEFAULT_DEPTH}){let{orderBooks:e,subscribeSingle:f,unsubscribeSingle:g}=(0,m.useRealtimeStore)(),[h,i]=(0,d.useState)(b),[o,p]=(0,d.useState)(null);(0,d.useEffect)(()=>(f(a,["orderbook"]),()=>{g(a,["orderbook"])}),[a,f,g]);let q=e[a];if((0,d.useEffect)(()=>{p(null);let a=setTimeout(()=>{p(null)},n.ORDERBOOK_CONFIG.UPDATE_DEBOUNCE_MS);return p(a),()=>{a&&clearTimeout(a)}},[q]),!q||0===q.levels.length)return(0,c.jsx)("div",{className:"flex items-center justify-center h-96 border rounded-lg bg-background",children:(0,c.jsx)("p",{className:"text-muted-foreground",children:"No order book data available"})});let r=q.levels.slice(0,h),s=q.midPrice||q.levels.reduce((a,b)=>a+b.price,0)/q.levels.length,t=r.filter(a=>a.price<s).reverse(),u=r.filter(a=>a.price>s),v=t.map(a=>a.price),w=t.map(a=>a.volume),x=u.map(a=>a.price),y=u.map(a=>a.volume),z={labels:[...v.reverse(),...x],datasets:[{label:"Bids",data:[...w.reverse()],backgroundColor:"rgba(34, 197, 94, 0.8)",borderColor:"rgb(34, 197, 94)",borderWidth:1,borderRadius:4},{label:"Asks",data:y,backgroundColor:"rgba(239, 68, 68, 0.8)",borderColor:"rgb(239, 68, 68)",borderWidth:1,borderRadius:4}]},A=Math.max(...t.map(a=>a.volume),...u.map(a=>a.volume));return(0,c.jsxs)("div",{className:"space-y-4",children:[(0,c.jsxs)("div",{className:"flex items-center justify-between",children:[(0,c.jsxs)("h3",{className:"text-lg font-semibold",children:["Order Book - ",a]}),(0,c.jsxs)("div",{className:"flex items-center gap-2",children:[(0,c.jsx)("span",{className:"text-sm text-muted-foreground",children:"Depth:"}),(0,c.jsxs)(k.Select,{value:String(h),onValueChange:a=>{i(a)},children:[(0,c.jsx)(k.SelectTrigger,{className:"w-24",children:(0,c.jsx)(k.SelectValue,{})}),(0,c.jsx)(k.SelectContent,{children:n.ORDERBOOK_CONFIG.DEPTH_OPTIONS.map(a=>(0,c.jsx)(k.SelectItem,{value:String(a),children:a},a))})]})]})]}),(0,c.jsxs)(l.Tabs,{defaultValue:"depth",className:"w-full",children:[(0,c.jsxs)(l.TabsList,{className:"grid w-full grid-cols-2",children:[(0,c.jsx)(l.TabsTrigger,{value:"depth",children:"Depth Chart"}),(0,c.jsx)(l.TabsTrigger,{value:"ladder",children:"Bid/Ask Ladder"})]}),(0,c.jsx)(l.TabsContent,{value:"depth",children:(0,c.jsx)("div",{className:"h-96",children:(0,c.jsx)(j,{data:z,options:{indexAxis:"y",responsive:!0,maintainAspectRatio:!1,interaction:{mode:"index",intersect:!1},plugins:{legend:{position:"top"},tooltip:{backgroundColor:"rgba(0, 0, 0, 0.8)",titleColor:"white",bodyColor:"white",borderColor:"rgba(255, 255, 255, 0.1)",borderWidth:1,padding:12,cornerRadius:8,callbacks:{label:a=>{let b=a.dataset,c=a.label,d=a.parsed.x;return`${b.label}: ${d?.toLocaleString()} @ $${c?.toFixed(2)}`}}}},scales:{x:{stacked:!0,grid:{color:"rgba(148, 163, 184, 0.1)"},ticks:{color:"rgba(148, 163, 184, 0.5)",callback:a=>a?.toLocaleString()}},y:{grid:{color:"rgba(148, 163, 184, 0.1)"},ticks:{color:"rgba(148, 163, 184, 0.5)",callback:a=>`$${a?.toFixed(2)}`}}}}})})}),(0,c.jsxs)(l.TabsContent,{value:"ladder",className:"h-96 overflow-auto",children:[(0,c.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,c.jsxs)("div",{className:"space-y-1",children:[(0,c.jsx)("div",{className:"text-xs font-semibold text-center text-green-600 p-2 border-b",children:"BIDS"}),t.map((a,b)=>(0,c.jsxs)("div",{className:"flex items-center justify-between p-2 hover:bg-muted/50",children:[(0,c.jsxs)("span",{className:"text-sm font-mono text-green-600",children:["$",a.price.toFixed(2)]}),(0,c.jsxs)("div",{className:"flex items-center gap-2 flex-1 justify-end",children:[(0,c.jsx)("div",{className:"h-4 bg-green-600/20 rounded",style:{width:`${a.volume/A*100}%`}}),(0,c.jsx)("span",{className:"text-sm font-mono",children:a.volume.toLocaleString()})]})]},`bid-${b}`))]}),(0,c.jsxs)("div",{className:"space-y-1",children:[(0,c.jsx)("div",{className:"text-xs font-semibold text-center text-red-600 p-2 border-b",children:"ASKS"}),u.map((a,b)=>(0,c.jsxs)("div",{className:"flex items-center justify-between p-2 hover:bg-muted/50",children:[(0,c.jsxs)("div",{className:"flex items-center gap-2 flex-1",children:[(0,c.jsx)("div",{className:"h-4 bg-red-600/20 rounded",style:{width:`${a.volume/A*100}%`}}),(0,c.jsx)("span",{className:"text-sm font-mono",children:a.volume.toLocaleString()})]}),(0,c.jsxs)("span",{className:"text-sm font-mono text-red-600",children:["$",a.price.toFixed(2)]})]},`ask-${b}`))]})]}),s&&(0,c.jsx)("div",{className:"absolute bottom-4 left-1/2 -translate-x-1/2 bg-background border-2 border-primary px-4 py-2 rounded-lg shadow-lg",children:(0,c.jsxs)("div",{className:"text-center",children:[(0,c.jsx)("div",{className:"text-xs text-muted-foreground",children:"Mid Price"}),(0,c.jsxs)("div",{className:"text-lg font-bold font-mono",children:["$",s.toFixed(2)]}),(0,c.jsxs)("div",{className:"text-xs text-muted-foreground",children:["Spread: $",q.spread.toFixed(2)]})]})})]})]})]})}e.Chart.register(e.BarElement,e.CategoryScale,e.LinearScale,e.Tooltip,e.Legend),a.s(["OrderBook",()=>o],28858);var p=a.i(42584),q=a.i(80380),r=a.i(61219);function s({symbol:a,limit:b=n.WS_CONFIG.TRADE_FEED_LIMIT}){let{trades:e,subscribeSingle:f,unsubscribeSingle:g}=(0,m.useRealtimeStore)(),[h,i]=(0,d.useState)("all"),[j,k]=(0,d.useState)(!0),l=(0,d.useRef)(null),[o,s]=(0,d.useState)(new Set);(0,d.useEffect)(()=>(f(a,["trades"]),()=>{g(a,["trades"])}),[a,f,g]);let t=(e[a]||[]).slice(0,b);(0,d.useEffect)(()=>{let a=setTimeout(()=>{s(new Set)},500);return()=>clearTimeout(a)},[t]),(0,d.useEffect)(()=>{j&&l.current&&t.length>0&&(l.current.scrollTop=0)},[t,j]);let u=t.filter(a=>"all"===h||("buys"===h?a.isBuy:"sells"!==h||!a.isBuy));return 0===t.length?(0,c.jsxs)("div",{className:"flex flex-col h-96 border rounded-lg bg-background",children:[(0,c.jsx)("div",{className:"p-4 border-b",children:(0,c.jsxs)("h3",{className:"text-lg font-semibold",children:["Trade Feed - ",a]})}),(0,c.jsx)("div",{className:"flex-1 flex items-center justify-center",children:(0,c.jsx)("p",{className:"text-muted-foreground",children:"No trades available"})})]}):(0,c.jsxs)("div",{className:"flex flex-col h-96 border rounded-lg bg-background",children:[(0,c.jsxs)("div",{className:"flex items-center justify-between p-4 border-b",children:[(0,c.jsxs)("h3",{className:"text-lg font-semibold",children:["Trade Feed - ",a]}),(0,c.jsxs)("div",{className:"flex items-center gap-4",children:[(0,c.jsxs)("div",{className:"flex items-center gap-2",children:[(0,c.jsx)("span",{className:"text-sm text-muted-foreground",children:"Filter:"}),(0,c.jsx)("div",{className:"flex",children:[{value:"all",label:"All"},{value:"buys",label:"Buys"},{value:"sells",label:"Sells"}].map(a=>(0,c.jsx)(r.Button,{size:"sm",variant:h===a.value?"default":"outline",onClick:()=>i(a.value),className:"rounded-none rounded-l-none first:rounded-l-l first:rounded-r-none last:rounded-r-l last:rounded-r-none",children:a.label},a.value))})]}),(0,c.jsx)(r.Button,{size:"sm",variant:"outline",onClick:()=>k(!j),className:"text-xs",children:j?"Auto-scroll: On":"Auto-scroll: Off"})]})]}),(0,c.jsx)("div",{className:"flex-1 overflow-auto",ref:l,children:(0,c.jsxs)("table",{className:"w-full",children:[(0,c.jsx)("thead",{className:"sticky top-0 bg-background",children:(0,c.jsxs)("tr",{className:"text-xs text-muted-foreground",children:[(0,c.jsx)("th",{className:"p-3 text-left",children:"Time"}),(0,c.jsx)("th",{className:"p-3 text-right",children:"Price"}),(0,c.jsx)("th",{className:"p-3 text-right",children:"Size"}),(0,c.jsx)("th",{className:"p-3 text-left",children:"Type"}),(0,c.jsx)("th",{className:"p-3 text-left",children:"Exchange"})]})}),(0,c.jsx)("tbody",{children:u.map((a,b)=>{let d;return(0,c.jsxs)("tr",{className:`
                  border-b hover:bg-muted/50 transition-colors
                  ${o.has(parseInt(a.tradeId))?"bg-muted/30":""}
                `,children:[(0,c.jsx)("td",{className:"p-3 text-sm font-mono text-muted-foreground",children:new Date(a.timestamp).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1})}),(0,c.jsx)("td",{className:"p-3 text-sm font-mono text-right",children:(d=a.price,`$${d.toFixed(2)}`)}),(0,c.jsx)("td",{className:"p-3 text-sm font-mono text-right",children:(0,c.jsxs)("div",{className:"flex items-center justify-end gap-2",children:[(0,c.jsx)("div",{className:"h-1 bg-foreground/30 rounded",style:{width:`${a.quantity/Math.max(...t.map(a=>a.quantity))*100}px`}}),(0,c.jsx)("span",{children:a.quantity.toLocaleString()})]})}),(0,c.jsx)("td",{className:"p-3",children:(0,c.jsxs)("div",{className:`
                    inline-flex items-center gap-1 px-2 py-1 rounded text-xs font-semibold
                    ${a.isBuy?"bg-green-500/10 text-green-600":"bg-red-500/10 text-red-600"}
                  `,children:[a.isBuy?(0,c.jsx)(p.ArrowUp,{className:"h-3 w-3"}):(0,c.jsx)(q.ArrowDown,{className:"h-3 w-3"}),(0,c.jsx)("span",{children:a.tradeType})]})}),(0,c.jsx)("td",{className:"p-3 text-sm text-muted-foreground",children:a.exchange})]},a.tradeId)})})]})}),(0,c.jsx)("div",{className:"p-2 border-t bg-muted/20",children:(0,c.jsxs)("p",{className:"text-xs text-muted-foreground text-center",children:["Showing ",u.length," of ",t.length," trades","all"!==h&&` (${h})`]})})]})}a.s(["TradeFeed",()=>s],85100)}];

//# sourceMappingURL=apps_frontend_src_components_realtime_OrderBook_tsx_685b2b52._.js.map
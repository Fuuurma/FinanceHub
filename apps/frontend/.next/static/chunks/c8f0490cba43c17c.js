(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,35206,e=>{"use strict";var t=e.i(28624);e.s(["X",()=>t.default])},11752,e=>{"use strict";var t=e.i(94650);e.s(["alertsApi",0,{list:e=>t.apiClient.get("/alerts/",{params:{limit:50,offset:0,...e}}),get:e=>t.apiClient.get(`/alerts/${e}`),create:e=>t.apiClient.post("/alerts/",e),update:(e,s)=>t.apiClient.put(`/alerts/${e}`,s),delete:e=>t.apiClient.delete(`/alerts/${e}`),enable:e=>t.apiClient.post(`/alerts/${e}/enable`,{}),disable:e=>t.apiClient.post(`/alerts/${e}/disable`,{}),getHistory:(e,s=20)=>t.apiClient.get(`/alerts/${e}/history`,{params:{limit:s}}),getStats:()=>t.apiClient.get("/alerts/stats"),test:e=>t.apiClient.post(`/alerts/${e}/test`,{})}])},71285,e=>{"use strict";var t=e.i(29845),s=e.i(59199),a=e.i(11752),l=e.i(74741),r=e.i(61088),i=e.i(5198),n=e.i(46045),c=e.i(74601),d=e.i(60983),o=e.i(95421),x=e.i(39197),m=e.i(86800),h=e.i(36526),u=e.i(62146),j=e.i(35206),g=e.i(94688),p=e.i(8562),v=e.i(34709);let y=(0,e.i(19952).default)("pause",[["rect",{x:"14",y:"3",width:"5",height:"18",rx:"1",key:"kaeet6"}],["rect",{x:"5",y:"3",width:"5",height:"18",rx:"1",key:"1wsw3u"}]]);var C=e.i(39043);function N(){let[e,N]=(0,s.useState)([]),[b,f]=(0,s.useState)(null),[w,_]=(0,s.useState)(!1),[S,A]=(0,s.useState)(""),[T,D]=(0,s.useState)("list"),[B,I]=(0,s.useState)("all"),[L,k]=(0,s.useState)(""),[F,V]=(0,s.useState)(!1),[$,E]=(0,s.useState)(null),[H,P]=(0,s.useState)(null),[z,O]=(0,s.useState)([]);(0,s.useEffect)(()=>{R()},[]);let R=async()=>{_(!0),A("");try{let[e,t]=await Promise.all([a.alertsApi.list({status:B}),a.alertsApi.getStats()]);N(e),f(t)}catch(e){A(e instanceof Error?e.message:"Failed to fetch alerts")}finally{_(!1)}},M=async e=>{e.preventDefault();let t=new FormData(e.target),s={name:t.get("name"),alert_type:t.get("alert_type"),symbol:t.get("symbol"),condition_value:Number(t.get("condition_value")),condition_operator:t.get("condition_operator")||">=",delivery_channels:t.get("delivery_channel")?[t.get("delivery_channel")]:void 0,priority:Number(t.get("priority"))||5,cooldown_seconds:Number(t.get("cooldown_seconds"))||300};try{await a.alertsApi.create(s),V(!1),R()}catch(e){A(e instanceof Error?e.message:"Failed to create alert")}},q=async e=>{try{await a.alertsApi.delete(e),R()}catch(e){A(e instanceof Error?e.message:"Failed to delete alert")}},K=async e=>{try{"active"===e.status?await a.alertsApi.disable(e.id):await a.alertsApi.enable(e.id),R()}catch(e){A(e instanceof Error?e.message:"Failed to toggle alert")}},U=async e=>{try{let t=await a.alertsApi.test(e);t.success?window.alert(`Alert test successful! Trigger value: ${t.trigger_value}`):window.alert(`Alert test failed: ${t.message}`)}catch(e){A(e instanceof Error?e.message:"Failed to test alert")}},X=async e=>{P(e);try{let t=await a.alertsApi.getHistory(e);O(t)}catch(e){A(e instanceof Error?e.message:"Failed to fetch history")}},Y=e.filter(e=>{let t=e.name.toLowerCase().includes(L.toLowerCase())||e.symbol.toLowerCase().includes(L.toLowerCase()),s="all"===B||e.status===B;return t&&s});return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-3xl font-bold",children:"Alerts"}),(0,t.jsx)("p",{className:"text-muted-foreground",children:"Manage and monitor price alerts"})]}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsxs)(m.Dialog,{open:F,onOpenChange:V,children:[(0,t.jsx)(m.DialogTrigger,{asChild:!0,children:(0,t.jsxs)(r.Button,{children:[(0,t.jsx)(g.Plus,{className:"w-4 h-4 mr-2"}),"Create Alert"]})}),(0,t.jsxs)(m.DialogContent,{children:[(0,t.jsxs)(m.DialogHeader,{children:[(0,t.jsx)(m.DialogTitle,{children:"Create New Alert"}),(0,t.jsx)(m.DialogDescription,{children:"Set up a new price alert for any asset"})]}),(0,t.jsxs)("form",{onSubmit:M,className:"space-y-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(n.Label,{htmlFor:"name",children:"Alert Name"}),(0,t.jsx)(i.Input,{id:"name",name:"name",placeholder:"My Alert",required:!0})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(n.Label,{htmlFor:"symbol",children:"Symbol"}),(0,t.jsx)(i.Input,{id:"symbol",name:"symbol",placeholder:"AAPL",required:!0,className:"uppercase"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(n.Label,{htmlFor:"alert_type",children:"Alert Type"}),(0,t.jsxs)(c.Select,{name:"alert_type",defaultValue:"price_above",children:[(0,t.jsx)(c.SelectTrigger,{children:(0,t.jsx)(c.SelectValue,{})}),(0,t.jsxs)(c.SelectContent,{children:[(0,t.jsx)(c.SelectItem,{value:"price_above",children:"Price Above"}),(0,t.jsx)(c.SelectItem,{value:"price_below",children:"Price Below"}),(0,t.jsx)(c.SelectItem,{value:"percent_change",children:"Percent Change"}),(0,t.jsx)(c.SelectItem,{value:"volume_spike",children:"Volume Spike"})]})]})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(n.Label,{htmlFor:"condition_value",children:"Trigger Value"}),(0,t.jsx)(i.Input,{id:"condition_value",name:"condition_value",type:"number",step:"0.01",required:!0})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(n.Label,{htmlFor:"condition_operator",children:"Operator"}),(0,t.jsxs)(c.Select,{name:"condition_operator",defaultValue:">=",children:[(0,t.jsx)(c.SelectTrigger,{children:(0,t.jsx)(c.SelectValue,{})}),(0,t.jsxs)(c.SelectContent,{children:[(0,t.jsx)(c.SelectItem,{value:">=",children:">="}),(0,t.jsx)(c.SelectItem,{value:"<=",children:"<="}),(0,t.jsx)(c.SelectItem,{value:"==",children:"=="})]})]})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(n.Label,{htmlFor:"priority",children:"Priority"}),(0,t.jsx)(i.Input,{id:"priority",name:"priority",type:"number",min:"1",max:"10",defaultValue:"5"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(n.Label,{htmlFor:"cooldown_seconds",children:"Cooldown (seconds)"}),(0,t.jsx)(i.Input,{id:"cooldown_seconds",name:"cooldown_seconds",type:"number",min:"0",defaultValue:"300"})]})]}),(0,t.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,t.jsx)(r.Button,{type:"button",variant:"outline",onClick:()=>V(!1),children:"Cancel"}),(0,t.jsx)(r.Button,{type:"submit",children:"Create Alert"})]})]})]})]}),(0,t.jsxs)(r.Button,{variant:"outline",onClick:R,disabled:w,children:[(0,t.jsx)(p.RefreshCw,{className:`w-4 h-4 mr-2 ${w?"animate-spin":""}`}),"Refresh"]})]})]}),b&&(0,t.jsxs)("div",{className:"grid gap-4 md:grid-cols-4",children:[(0,t.jsxs)(l.Card,{children:[(0,t.jsx)(l.CardHeader,{children:(0,t.jsx)(l.CardDescription,{children:"Total Alerts"})}),(0,t.jsx)(l.CardContent,{children:(0,t.jsx)("p",{className:"text-3xl font-bold",children:b.total_alerts})})]}),(0,t.jsxs)(l.Card,{children:[(0,t.jsx)(l.CardHeader,{children:(0,t.jsx)(l.CardDescription,{children:"Active Alerts"})}),(0,t.jsx)(l.CardContent,{children:(0,t.jsx)("p",{className:"text-3xl font-bold text-green-600",children:b.active_alerts})})]}),(0,t.jsxs)(l.Card,{children:[(0,t.jsx)(l.CardHeader,{children:(0,t.jsx)(l.CardDescription,{children:"Triggered Today"})}),(0,t.jsx)(l.CardContent,{children:(0,t.jsx)("p",{className:"text-3xl font-bold text-blue-600",children:b.triggered_today})})]}),(0,t.jsxs)(l.Card,{children:[(0,t.jsx)(l.CardHeader,{children:(0,t.jsx)(l.CardDescription,{children:"Success Rate"})}),(0,t.jsx)(l.CardContent,{children:(0,t.jsx)("p",{className:"text-3xl font-bold",children:b.active_alerts>0?`${((b.total_alerts-b.active_alerts)/(b.total_alerts-b.active_alerts+b.triggered_today)*100).toFixed(0)}%`:"0%"})})]})]}),(0,t.jsxs)(d.Tabs,{value:T,onValueChange:D,children:[(0,t.jsxs)(d.TabsList,{children:[(0,t.jsx)(d.TabsTrigger,{value:"list",children:"Alert List"}),(0,t.jsx)(d.TabsTrigger,{value:"create",children:"Create New"})]}),(0,t.jsxs)(d.TabsContent,{value:"list",className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex gap-4 mb-4",children:[(0,t.jsx)(i.Input,{placeholder:"Search alerts by name or symbol...",value:L,onChange:e=>k(e.target.value),className:"flex-1"}),(0,t.jsxs)(c.Select,{value:B,onValueChange:I,children:[(0,t.jsx)(c.SelectTrigger,{className:"w-40",children:(0,t.jsx)(c.SelectValue,{})}),(0,t.jsxs)(c.SelectContent,{children:[(0,t.jsx)(c.SelectItem,{value:"all",children:"All"}),(0,t.jsx)(c.SelectItem,{value:"active",children:"Active"}),(0,t.jsx)(c.SelectItem,{value:"disabled",children:"Disabled"}),(0,t.jsx)(c.SelectItem,{value:"triggered",children:"Triggered"}),(0,t.jsx)(c.SelectItem,{value:"expired",children:"Expired"})]})]})]}),S&&(0,t.jsx)("div",{className:"bg-destructive/10 text-destructive p-4 rounded-lg",children:(0,t.jsx)("p",{children:S})}),w?(0,t.jsx)("div",{className:"space-y-3",children:[1,2,3,4,5].map(e=>(0,t.jsx)(l.Card,{children:(0,t.jsx)(l.CardContent,{className:"pt-6",children:(0,t.jsx)(o.Skeleton,{className:"h-20 w-full"})})},e))}):0===Y.length?(0,t.jsx)(l.Card,{children:(0,t.jsxs)(l.CardContent,{className:"py-12 text-center",children:[(0,t.jsx)(h.AlertCircle,{className:"w-12 h-12 mx-auto text-muted-foreground mb-4"}),(0,t.jsx)("p",{className:"text-muted-foreground",children:"No alerts found"}),(0,t.jsx)(r.Button,{onClick:()=>V(!0),children:"Create Your First Alert"})]})}):(0,t.jsx)("div",{className:"space-y-3",children:Y.map(e=>(0,t.jsx)(l.Card,{children:(0,t.jsxs)(l.CardContent,{className:"p-6",children:[(0,t.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"font-semibold text-lg",children:e.name}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:e.symbol})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(e=>{switch(e){case"active":return(0,t.jsx)(x.Badge,{className:"bg-green-100 text-green-800",children:"Active"});case"disabled":return(0,t.jsx)(x.Badge,{variant:"secondary",children:"Disabled"});case"triggered":return(0,t.jsx)(x.Badge,{className:"bg-blue-100 text-blue-800",children:"Triggered"});case"expired":return(0,t.jsx)(x.Badge,{className:"bg-red-100 text-red-800",children:"Expired"});default:return(0,t.jsx)(x.Badge,{variant:"outline",children:e})}})(e.status),(0,t.jsx)(x.Badge,{variant:"outline",children:e.priority})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"Type"}),(0,t.jsx)("p",{className:"font-medium",children:e.alert_type})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"Trigger Condition"}),(0,t.jsxs)("p",{className:"font-medium",children:[e.condition_operator," ",e.condition_value]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"Triggered"}),(0,t.jsxs)("p",{className:"font-medium",children:[e.triggered_count," times"]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"Created"}),(0,t.jsx)("p",{className:"font-medium",children:new Date(e.created_at).toLocaleDateString()})]})]}),e.last_triggered_at&&(0,t.jsxs)("div",{className:"mb-4",children:[(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"Last Triggered"}),(0,t.jsx)("p",{className:"font-medium",children:new Date(e.last_triggered_at).toLocaleString()})]}),(0,t.jsxs)("div",{className:"flex gap-2",children:["active"===e.status&&(0,t.jsxs)(r.Button,{size:"sm",variant:"outline",onClick:()=>K(e),children:[(0,t.jsx)(y,{className:"w-4 h-4 mr-2"}),"Disable"]}),"disabled"===e.status&&(0,t.jsxs)(r.Button,{size:"sm",variant:"outline",onClick:()=>K(e),children:[(0,t.jsx)(v.Play,{className:"w-4 h-4 mr-2"}),"Enable"]}),(0,t.jsx)(r.Button,{size:"sm",variant:"outline",onClick:()=>X(e.id),children:"View History"}),(0,t.jsx)(r.Button,{size:"sm",variant:"outline",onClick:()=>U(e.id),children:"Test"}),(0,t.jsxs)(r.Button,{size:"sm",variant:"destructive",onClick:()=>q(e.id),children:[(0,t.jsx)(C.Trash2,{className:"w-4 h-4 mr-2"}),"Delete"]})]})]})},e.id))})]}),(0,t.jsx)(d.TabsContent,{value:"create",children:(0,t.jsx)(l.Card,{children:(0,t.jsx)(l.CardContent,{className:"pt-6",children:(0,t.jsxs)("div",{className:"text-center py-8",children:[(0,t.jsx)(h.AlertCircle,{className:"w-16 h-16 mx-auto text-muted-foreground mb-4"}),(0,t.jsx)("p",{className:"text-muted-foreground mb-6",children:"Create alert from the list tab or use the button above"})]})})})})]}),H&&(0,t.jsx)(m.Dialog,{open:!!H,onOpenChange:()=>P(null),children:(0,t.jsxs)(m.DialogContent,{className:"max-w-2xl",children:[(0,t.jsxs)(m.DialogHeader,{children:[(0,t.jsx)(m.DialogTitle,{children:"Alert History"}),(0,t.jsx)(m.DialogDescription,{children:"Trigger history for this alert"})]}),(0,t.jsx)("div",{className:"max-h-96 overflow-y-auto",children:0===z.length?(0,t.jsx)("p",{className:"center text-muted-foreground py-8",children:"No trigger history"}):(0,t.jsx)("div",{className:"space-y-2",children:z.map(e=>(0,t.jsxs)("div",{className:"flex items-center justify-between border-b py-2",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("p",{className:"font-medium",children:["Trigger Value: ",e.trigger_value]}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:new Date(e.triggered_at).toLocaleString()})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[e.condition_met?(0,t.jsx)(x.Badge,{className:"bg-green-100 text-green-800",children:"Condition Met"}):(0,t.jsx)(x.Badge,{variant:"secondary",children:"Not Met"}),e.notification_sent?(0,t.jsx)(u.Check,{className:"w-4 h-4 text-green-600"}):(0,t.jsx)(j.X,{className:"w-4 h-4 text-red-600"})]})]},e.id))})}),(0,t.jsx)("div",{className:"flex justify-end pt-4",children:(0,t.jsx)(r.Button,{variant:"outline",onClick:()=>P(null),children:"Close"})})]})})]})}e.s(["default",()=>N],71285)}]);
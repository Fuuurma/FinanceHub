(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,22784,t=>{"use strict";function e(t){var e=t.width,i=t.height;if(e<0)throw Error("Negative width is not allowed for Size");if(i<0)throw Error("Negative height is not allowed for Size");return{width:e,height:i}}function i(t,e){return t.width===e.width&&t.height===e.height}var s,h,n,r,l,a,o,u,c,d,f,g,p,m,b,v,x,_,y,w,M=function(){function t(t){var e=this;this._resolutionListener=function(){return e._onResolutionChanged()},this._resolutionMediaQueryList=null,this._observers=[],this._window=t,this._installResolutionListener()}return t.prototype.dispose=function(){this._uninstallResolutionListener(),this._window=null},Object.defineProperty(t.prototype,"value",{get:function(){return this._window.devicePixelRatio},enumerable:!1,configurable:!0}),t.prototype.subscribe=function(t){var e=this,i={next:t};return this._observers.push(i),{unsubscribe:function(){e._observers=e._observers.filter(function(t){return t!==i})}}},t.prototype._installResolutionListener=function(){if(null!==this._resolutionMediaQueryList)throw Error("Resolution listener is already installed");var t=this._window.devicePixelRatio;this._resolutionMediaQueryList=this._window.matchMedia("all and (resolution: ".concat(t,"dppx)")),this._resolutionMediaQueryList.addListener(this._resolutionListener)},t.prototype._uninstallResolutionListener=function(){null!==this._resolutionMediaQueryList&&(this._resolutionMediaQueryList.removeListener(this._resolutionListener),this._resolutionMediaQueryList=null)},t.prototype._reinstallResolutionListener=function(){this._uninstallResolutionListener(),this._installResolutionListener()},t.prototype._onResolutionChanged=function(){var t=this;this._observers.forEach(function(e){return e.next(t._window.devicePixelRatio)}),this._reinstallResolutionListener()},t}(),S=function(){function t(t,i,s){var h;this._canvasElement=null,this._bitmapSizeChangedListeners=[],this._suggestedBitmapSize=null,this._suggestedBitmapSizeChangedListeners=[],this._devicePixelRatioObservable=null,this._canvasElementResizeObserver=null,this._canvasElement=t,this._canvasElementClientSize=e({width:this._canvasElement.clientWidth,height:this._canvasElement.clientHeight}),this._transformBitmapSize=null!=i?i:function(t){return t},this._allowResizeObserver=null==(h=null==s?void 0:s.allowResizeObserver)||h,this._chooseAndInitObserver()}return t.prototype.dispose=function(){var t,e;if(null===this._canvasElement)throw Error("Object is disposed");null==(t=this._canvasElementResizeObserver)||t.disconnect(),this._canvasElementResizeObserver=null,null==(e=this._devicePixelRatioObservable)||e.dispose(),this._devicePixelRatioObservable=null,this._suggestedBitmapSizeChangedListeners.length=0,this._bitmapSizeChangedListeners.length=0,this._canvasElement=null},Object.defineProperty(t.prototype,"canvasElement",{get:function(){if(null===this._canvasElement)throw Error("Object is disposed");return this._canvasElement},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"canvasElementClientSize",{get:function(){return this._canvasElementClientSize},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bitmapSize",{get:function(){return e({width:this.canvasElement.width,height:this.canvasElement.height})},enumerable:!1,configurable:!0}),t.prototype.resizeCanvasElement=function(t){this._canvasElementClientSize=e(t),this.canvasElement.style.width="".concat(this._canvasElementClientSize.width,"px"),this.canvasElement.style.height="".concat(this._canvasElementClientSize.height,"px"),this._invalidateBitmapSize()},t.prototype.subscribeBitmapSizeChanged=function(t){this._bitmapSizeChangedListeners.push(t)},t.prototype.unsubscribeBitmapSizeChanged=function(t){this._bitmapSizeChangedListeners=this._bitmapSizeChangedListeners.filter(function(e){return e!==t})},Object.defineProperty(t.prototype,"suggestedBitmapSize",{get:function(){return this._suggestedBitmapSize},enumerable:!1,configurable:!0}),t.prototype.subscribeSuggestedBitmapSizeChanged=function(t){this._suggestedBitmapSizeChangedListeners.push(t)},t.prototype.unsubscribeSuggestedBitmapSizeChanged=function(t){this._suggestedBitmapSizeChangedListeners=this._suggestedBitmapSizeChangedListeners.filter(function(e){return e!==t})},t.prototype.applySuggestedBitmapSize=function(){if(null!==this._suggestedBitmapSize){var t=this._suggestedBitmapSize;this._suggestedBitmapSize=null,this._resizeBitmap(t),this._emitSuggestedBitmapSizeChanged(t,this._suggestedBitmapSize)}},t.prototype._resizeBitmap=function(t){var e=this.bitmapSize;i(e,t)||(this.canvasElement.width=t.width,this.canvasElement.height=t.height,this._emitBitmapSizeChanged(e,t))},t.prototype._emitBitmapSizeChanged=function(t,e){var i=this;this._bitmapSizeChangedListeners.forEach(function(s){return s.call(i,t,e)})},t.prototype._suggestNewBitmapSize=function(t){var s=this._suggestedBitmapSize,h=e(this._transformBitmapSize(t,this._canvasElementClientSize)),n=i(this.bitmapSize,h)?null:h;null===s&&null===n||null!==s&&null!==n&&i(s,n)||(this._suggestedBitmapSize=n,this._emitSuggestedBitmapSizeChanged(s,n))},t.prototype._emitSuggestedBitmapSizeChanged=function(t,e){var i=this;this._suggestedBitmapSizeChangedListeners.forEach(function(s){return s.call(i,t,e)})},t.prototype._chooseAndInitObserver=function(){var t=this;this._allowResizeObserver?new Promise(function(t){var e=new ResizeObserver(function(i){t(i.every(function(t){return"devicePixelContentBoxSize"in t})),e.disconnect()});e.observe(document.body,{box:"device-pixel-content-box"})}).catch(function(){return!1}).then(function(e){return e?t._initResizeObserver():t._initDevicePixelRatioObservable()}):this._initDevicePixelRatioObservable()},t.prototype._initDevicePixelRatioObservable=function(){var t=this;if(null!==this._canvasElement){var e=k(this._canvasElement);if(null===e)throw Error("No window is associated with the canvas");this._devicePixelRatioObservable=new M(e),this._devicePixelRatioObservable.subscribe(function(){return t._invalidateBitmapSize()}),this._invalidateBitmapSize()}},t.prototype._invalidateBitmapSize=function(){if(null!==this._canvasElement){var t,i,s=k(this._canvasElement);if(null!==s){var h,n,r=null!=(i=null==(t=this._devicePixelRatioObservable)?void 0:t.value)?i:s.devicePixelRatio,l=this._canvasElement.getClientRects(),a=void 0!==l[0]?(h=l[0],n=r,e({width:Math.round(h.left*n+h.width*n)-Math.round(h.left*n),height:Math.round(h.top*n+h.height*n)-Math.round(h.top*n)})):e({width:this._canvasElementClientSize.width*r,height:this._canvasElementClientSize.height*r});this._suggestNewBitmapSize(a)}}},t.prototype._initResizeObserver=function(){var t=this;null!==this._canvasElement&&(this._canvasElementResizeObserver=new ResizeObserver(function(i){var s=i.find(function(e){return e.target===t._canvasElement});if(s&&s.devicePixelContentBoxSize&&s.devicePixelContentBoxSize[0]){var h=s.devicePixelContentBoxSize[0],n=e({width:h.inlineSize,height:h.blockSize});t._suggestNewBitmapSize(n)}}),this._canvasElementResizeObserver.observe(this._canvasElement,{box:"device-pixel-content-box"}))},t}();function k(t){return t.ownerDocument.defaultView}var C=function(){function t(t,e,i){if(0===e.width||0===e.height)throw TypeError("Rendering target could only be created on a media with positive width and height");if(this._mediaSize=e,0===i.width||0===i.height)throw TypeError("Rendering target could only be created using a bitmap with positive integer width and height");this._bitmapSize=i,this._context=t}return t.prototype.useMediaCoordinateSpace=function(t){try{return this._context.save(),this._context.setTransform(1,0,0,1,0,0),this._context.scale(this._horizontalPixelRatio,this._verticalPixelRatio),t({context:this._context,mediaSize:this._mediaSize})}finally{this._context.restore()}},t.prototype.useBitmapCoordinateSpace=function(t){try{return this._context.save(),this._context.setTransform(1,0,0,1,0,0),t({context:this._context,mediaSize:this._mediaSize,bitmapSize:this._bitmapSize,horizontalPixelRatio:this._horizontalPixelRatio,verticalPixelRatio:this._verticalPixelRatio})}finally{this._context.restore()}},Object.defineProperty(t.prototype,"_horizontalPixelRatio",{get:function(){return this._bitmapSize.width/this._mediaSize.width},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_verticalPixelRatio",{get:function(){return this._bitmapSize.height/this._mediaSize.height},enumerable:!1,configurable:!0}),t}();function P(t,e){var i=t.canvasElementClientSize;if(0===i.width||0===i.height)return null;var s=t.bitmapSize;if(0===s.width||0===s.height)return null;var h=t.canvasElement.getContext("2d",e);return null===h?null:new C(h,i,s)}let E={title:"",visible:!0,lastValueVisible:!0,priceLineVisible:!0,priceLineSource:0,priceLineWidth:1,priceLineColor:"",priceLineStyle:2,baseLineVisible:!0,baseLineWidth:1,baseLineColor:"#B2B5BE",baseLineStyle:0,priceFormat:{type:"price",precision:2,minMove:.01}};function L(t,e){let i={0:[],1:[t.lineWidth,t.lineWidth],2:[2*t.lineWidth,2*t.lineWidth],3:[6*t.lineWidth,6*t.lineWidth],4:[t.lineWidth,4*t.lineWidth]}[e];t.setLineDash(i)}function D(t,e,i,s){t.beginPath();let h=t.lineWidth%2?.5:0;t.moveTo(i,e+h),t.lineTo(s,e+h),t.stroke()}function T(t,e){if(!t)throw Error("Assertion failed"+(e?": "+e:""))}function z(t){if(void 0===t)throw Error("Value is undefined");return t}function O(t){if(null===t)throw Error("Value is null");return t}function R(t){return O(z(t))}(s=f||(f={}))[s.Simple=0]="Simple",s[s.WithSteps=1]="WithSteps",s[s.Curved=2]="Curved",(h=g||(g={}))[h.Solid=0]="Solid",h[h.Dotted=1]="Dotted",h[h.Dashed=2]="Dashed",h[h.LargeDashed=3]="LargeDashed",h[h.SparseDotted=4]="SparseDotted";class A{constructor(){this.t=[]}i(t,e,i){this.t.push({h:t,l:e,o:!0===i})}_(t){let e=this.t.findIndex(e=>t===e.h);e>-1&&this.t.splice(e,1)}u(t){this.t=this.t.filter(e=>e.l!==t)}p(t,e,i){let s=[...this.t];this.t=this.t.filter(t=>!t.o),s.forEach(s=>s.h(t,e,i))}v(){return this.t.length>0}m(){this.t=[]}}function F(t,...e){for(let i of e)for(let e in i)void 0!==i[e]&&Object.prototype.hasOwnProperty.call(i,e)&&!["__proto__","constructor","prototype"].includes(e)&&("object"!=typeof i[e]||void 0===t[e]||Array.isArray(i[e])?t[e]=i[e]:F(t[e],i[e]));return t}function N(t){return"number"==typeof t&&isFinite(t)}function B(t){return"number"==typeof t&&t%1==0}function j(t){return"string"==typeof t}function I(t){return"boolean"==typeof t}function W(t){let e,i,s;if(!t||"object"!=typeof t)return t;for(i in e=Array.isArray(t)?[]:{},t)t.hasOwnProperty(i)&&(s=t[i],e[i]=s&&"object"==typeof s?W(s):s);return e}function V(t){return null!==t}function H(t){return null===t?void 0:t}let $="-apple-system, BlinkMacSystemFont, 'Trebuchet MS', Roboto, Ubuntu, sans-serif";function U(t,e,i){return void 0===e&&(e=$),`${i=void 0!==i?`${i} `:""}${t}px ${e}`}class Y{constructor(t){this.M={S:1,C:5,k:NaN,P:"",T:"",R:"",D:"",I:0,V:0,B:0,A:0,L:0},this.O=t}N(){let t=this.M,e=this.F(),i=this.W();return t.k===e&&t.T===i||(t.k=e,t.T=i,t.P=U(e,i),t.A=2.5/12*e,t.I=t.A,t.V=e/12*t.C,t.B=e/12*t.C,t.L=0),t.R=this.H(),t.D=this.U(),this.M}H(){return this.O.N().layout.textColor}U(){return this.O.$()}F(){return this.O.N().layout.fontSize}W(){return this.O.N().layout.fontFamily}}function K(t){return t<0?0:t>255?255:Math.round(t)||0}function J(t){return .199*t[0]+.687*t[1]+.114*t[2]}class X{constructor(t,e){this.q=new Map,this.j=t,e&&(this.q=e)}Y(t,e){if("transparent"===t)return t;let i=this.K(t),s=i[3];return`rgba(${i[0]}, ${i[1]}, ${i[2]}, ${e*s})`}Z(t){let e=this.K(t);return{G:`rgb(${e[0]}, ${e[1]}, ${e[2]})`,X:J(e)>160?"black":"white"}}J(t){return J(this.K(t))}tt(t,e,i){var s;let[h,n,r,l]=this.K(t),[a,o,u,c]=this.K(e),d=[K(h+i*(a-h)),K(n+i*(o-n)),K(r+i*(u-r)),(s=l+i*(c-l))<=0||s>1?Math.min(Math.max(s,0),1):Math.round(1e4*s)/1e4];return`rgba(${d[0]}, ${d[1]}, ${d[2]}, ${d[3]})`}K(t){let e,i,s=this.q.get(t);if(s)return s;let h=((e=document.createElement("div")).style.display="none",document.body.appendChild(e),e.style.color=t,i=window.getComputedStyle(e).color,document.body.removeChild(e),i).match(/^rgba?\s*\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d*\.?\d+))?\)$/);if(!h){if(this.j.length)for(let e of this.j){let i=e(t);if(i)return this.q.set(t,i),i}throw Error(`Failed to parse color: ${t}`)}let n=[parseInt(h[1],10),parseInt(h[2],10),parseInt(h[3],10),h[4]?parseFloat(h[4]):1];return this.q.set(t,n),n}}class Q{constructor(){this.it=[]}st(t){this.it=t}nt(t,e,i){this.it.forEach(s=>{s.nt(t,e,i)})}}class G{nt(t,e,i){t.useBitmapCoordinateSpace(t=>this.et(t,e,i))}}class q extends G{constructor(){super(...arguments),this.rt=null}ht(t){this.rt=t}et({context:t,horizontalPixelRatio:e,verticalPixelRatio:i}){if(null===this.rt||null===this.rt.lt)return;let s=this.rt.lt,h=this.rt,n=Math.max(1,Math.floor(e))%2/2,r=r=>{t.beginPath();for(let l=s.to-1;l>=s.from;--l){let s=h.ot[l],a=Math.round(s._t*e)+n,o=s.ut*i,u=r*i+n;t.moveTo(a,o),t.arc(a,o,u,0,2*Math.PI)}t.fill()};h.ct>0&&(t.fillStyle=h.dt,r(h.ft+h.ct)),t.fillStyle=h.vt,r(h.ft)}}function Z(){return{ot:[{_t:0,ut:0,wt:0,gt:0}],vt:"",dt:"",ft:0,ct:0,lt:null}}let tt={from:0,to:1};class te{constructor(t,e,i){this.Mt=new Q,this.bt=[],this.St=[],this.xt=!0,this.O=t,this.Ct=e,this.yt=i,this.Mt.st(this.bt)}kt(t){this.Pt(),this.xt=!0}Tt(){return this.xt&&(this.Rt(),this.xt=!1),this.Mt}Pt(){let t=this.yt.Dt();t.length!==this.bt.length&&(this.St=t.map(Z),this.bt=this.St.map(t=>{let e=new q;return e.ht(t),e}),this.Mt.st(this.bt))}Rt(){let t=2===this.Ct.N().mode||!this.Ct.It(),e=this.yt.Vt(),i=this.Ct.Bt(),s=this.O.Et();this.Pt(),e.forEach((e,h)=>{let n=this.St[h],r=e.At(i),l=e.Lt();!t&&null!==r&&e.It()&&null!==l?(n.vt=r.zt,n.ft=r.ft,n.ct=r.Ot,n.ot[0].gt=r.gt,n.ot[0].ut=e.Ft().Nt(r.gt,l.Wt),n.dt=r.Ht??this.O.Ut(n.ot[0].ut/e.Ft().$t()),n.ot[0].wt=i,n.ot[0]._t=s.qt(i),n.lt=tt):n.lt=null})}}class ti extends G{constructor(t){super(),this.jt=t}et({context:t,bitmapSize:e,horizontalPixelRatio:i,verticalPixelRatio:s}){var h;let n;if(null===this.jt)return;let r=this.jt.Yt.It,l=this.jt.Kt.It;if(!r&&!l)return;let a=Math.round(this.jt._t*i),o=Math.round(this.jt.ut*s);t.lineCap="butt",r&&a>=0&&(t.lineWidth=Math.floor(this.jt.Yt.ct*i),t.strokeStyle=this.jt.Yt.R,t.fillStyle=this.jt.Yt.R,L(t,this.jt.Yt.Zt),h=e.height,t.beginPath(),n=t.lineWidth%2?.5:0,t.moveTo(a+n,0),t.lineTo(a+n,h),t.stroke()),l&&o>=0&&(t.lineWidth=Math.floor(this.jt.Kt.ct*s),t.strokeStyle=this.jt.Kt.R,t.fillStyle=this.jt.Kt.R,L(t,this.jt.Kt.Zt),D(t,o,0,e.width))}}class ts{constructor(t,e){this.xt=!0,this.Gt={Yt:{ct:1,Zt:0,R:"",It:!1},Kt:{ct:1,Zt:0,R:"",It:!1},_t:0,ut:0},this.Xt=new ti(this.Gt),this.Jt=t,this.yt=e}kt(){this.xt=!0}Tt(t){return this.xt&&(this.Rt(),this.xt=!1),this.Xt}Rt(){let t=this.Jt.It(),e=this.yt.Qt().N().crosshair,i=this.Gt;2===e.mode?(i.Kt.It=!1,i.Yt.It=!1):(i.Kt.It=t&&this.Jt.ti(this.yt),i.Yt.It=t&&this.Jt.ii(),i.Kt.ct=e.horzLine.width,i.Kt.Zt=e.horzLine.style,i.Kt.R=e.horzLine.color,i.Yt.ct=e.vertLine.width,i.Yt.Zt=e.vertLine.style,i.Yt.R=e.vertLine.color,i._t=this.Jt.si(),i.ut=this.Jt.ni())}}function th(t,e,i,s,h,n){t.save(),t.globalCompositeOperation="copy",t.fillStyle=n,t.fillRect(e,i,s,h),t.restore()}function tn(t,e,i,s,h,n){t.beginPath(),t.roundRect?t.roundRect(e,i,s,h,n):(t.lineTo(e+s-n[1],i),0!==n[1]&&t.arcTo(e+s,i,e+s,i+n[1],n[1]),t.lineTo(e+s,i+h-n[2]),0!==n[2]&&t.arcTo(e+s,i+h,e+s-n[2],i+h,n[2]),t.lineTo(e+n[3],i+h),0!==n[3]&&t.arcTo(e,i+h,e,i+h-n[3],n[3]),t.lineTo(e,i+n[0]),0!==n[0]&&t.arcTo(e,i,e+n[0],i,n[0]))}function tr(t,e,i,s,h,n,r=0,l=[0,0,0,0],a=""){var o;if(t.save(),!r||!a||a===n)return tn(t,e,i,s,h,l),t.fillStyle=n,t.fill(),void t.restore();let u=r/2;tn(t,e+u,i+u,s-r,h-r,(o=-u,l.map(t=>0===t?t:t+o))),"transparent"!==n&&(t.fillStyle=n,t.fill()),"transparent"!==a&&(t.lineWidth=r,t.strokeStyle=a,t.closePath(),t.stroke()),t.restore()}function tl(t,e,i,s,h,n,r){t.save(),t.globalCompositeOperation="copy";let l=t.createLinearGradient(0,0,0,h);l.addColorStop(0,n),l.addColorStop(1,r),t.fillStyle=l,t.fillRect(e,i,s,h),t.restore()}class ta{constructor(t,e){this.ht(t,e)}ht(t,e){this.jt=t,this.ei=e}$t(t,e){return this.jt.It?t.k+t.A+t.I:0}nt(t,e,i,s){if(!this.jt.It||0===this.jt.ri.length)return;let h=this.jt.R,n=this.ei.G,r=t.useBitmapCoordinateSpace(t=>{let r=t.context;r.font=e.P;let l=this.hi(t,e,i,s),a=l.ai;return l.li?tr(r,a.oi,a._i,a.ui,a.ci,n,a.di,[a.ft,0,0,a.ft],n):tr(r,a.fi,a._i,a.ui,a.ci,n,a.di,[0,a.ft,a.ft,0],n),this.jt.pi&&(r.fillStyle=h,r.fillRect(a.fi,a.mi,a.wi-a.fi,a.gi)),this.jt.Mi&&(r.fillStyle=e.D,r.fillRect(l.li?a.bi-a.di:0,a._i,a.di,a.Si-a._i)),l});t.useMediaCoordinateSpace(({context:t})=>{let i=r.xi;t.font=e.P,t.textAlign=r.li?"right":"left",t.textBaseline="middle",t.fillStyle=h,t.fillText(this.jt.ri,i.Ci,(i._i+i.Si)/2+i.yi)})}hi(t,e,i,s){let h,n,r,{context:l,bitmapSize:a,mediaSize:o,horizontalPixelRatio:u,verticalPixelRatio:c}=t,d=this.jt.pi||!this.jt.ki?e.C:0,f=this.jt.Pi?e.S:0,g=e.A+this.ei.Ti,p=e.I+this.ei.Ri,m=e.V,b=e.B,v=this.jt.ri,x=e.k,_=i.Di(l,v),y=Math.ceil(i.Ii(l,v)),w=e.S+m+b+y+d,M=Math.max(1,Math.floor(c)),S=Math.round((x+g+p)*c);S%2!=M%2&&(S+=1);let k=f>0?Math.max(1,Math.floor(f*u)):0,C=Math.round(w*u),P=Math.round(d*u),E=Math.round((this.ei.Vi??this.ei.Bi??this.ei.Ei)*c)-Math.floor(.5*c),L=Math.floor(E+M/2-S/2),D=L+S,T="right"===s,z=T?o.width-f:f,O=T?a.width-k:k;return T?(h=O-C,n=O-P,r=z-d-m-f):(h=O+C,n=O+P,r=z+d+m),{li:T,ai:{_i:L,mi:E,Si:D,ui:C,ci:S,ft:2*u,di:k,oi:h,fi:O,wi:n,gi:M,bi:a.width},xi:{_i:L/c,Si:D/c,Ci:r,yi:_}}}}class to{constructor(t){this.Ai={Ei:0,G:"#000",Ri:0,Ti:0},this.Li={ri:"",It:!1,pi:!0,ki:!1,Ht:"",R:"#FFF",Mi:!1,Pi:!1},this.zi={ri:"",It:!1,pi:!1,ki:!0,Ht:"",R:"#FFF",Mi:!0,Pi:!0},this.xt=!0,this.Oi=new(t||ta)(this.Li,this.Ai),this.Ni=new(t||ta)(this.zi,this.Ai)}ri(){return this.Fi(),this.Li.ri}Ei(){return this.Fi(),this.Ai.Ei}kt(){this.xt=!0}$t(t,e=!1){return Math.max(this.Oi.$t(t,e),this.Ni.$t(t,e))}Wi(){return this.Ai.Vi??null}Hi(){return this.Ai.Vi??this.Ai.Bi??this.Ei()}Ui(t){this.Ai.Bi=t??void 0}$i(){return this.Fi(),this.Li.It||this.zi.It}qi(){return this.Fi(),this.Li.It}Tt(t){return this.Fi(),this.Li.pi=this.Li.pi&&t.N().ticksVisible,this.zi.pi=this.zi.pi&&t.N().ticksVisible,this.Oi.ht(this.Li,this.Ai),this.Ni.ht(this.zi,this.Ai),this.Oi}ji(){return this.Fi(),this.Oi.ht(this.Li,this.Ai),this.Ni.ht(this.zi,this.Ai),this.Ni}Fi(){this.xt&&(this.Li.pi=!0,this.zi.pi=!1,this.Yi(this.Li,this.zi,this.Ai))}}class tu extends to{constructor(t,e,i){super(),this.Jt=t,this.Ki=e,this.Zi=i}Yi(t,e,i){if(t.It=!1,2===this.Jt.N().mode)return;let s=this.Jt.N().horzLine;if(!s.labelVisible)return;let h=this.Ki.Lt();if(!this.Jt.It()||this.Ki.Gi()||null===h)return;let n=this.Ki.Xi().Z(s.labelBackgroundColor);i.G=n.G,t.R=n.X;let r=2/12*this.Ki.k();i.Ti=r,i.Ri=r;let l=this.Zi(this.Ki);i.Ei=l.Ei,t.ri=this.Ki.Ji(l.gt,h),t.It=!0}}let tc=/[1-9]/g;class td{constructor(){this.jt=null}ht(t){this.jt=t}nt(t,e){if(null===this.jt||!1===this.jt.It||0===this.jt.ri.length)return;let i=t.useMediaCoordinateSpace(({context:t})=>(t.font=e.P,Math.round(e.Qi.Ii(t,O(this.jt).ri,tc))));if(i<=0)return;let s=e.ts,h=i+2*s,n=h/2,r=this.jt.ss,l=this.jt.Ei,a=Math.floor(l-n)+.5;a<0?(l+=Math.abs(0-a),a=Math.floor(l-n)+.5):a+h>r&&(l-=Math.abs(r-(a+h)),a=Math.floor(l-n)+.5);let o=a+h,u=Math.ceil(0+e.S+e.C+e.A+e.k+e.I);t.useBitmapCoordinateSpace(({context:t,horizontalPixelRatio:i,verticalPixelRatio:s})=>{let h=O(this.jt);t.fillStyle=h.G;let n=Math.round(a*i),r=Math.round(0*s),l=Math.round(o*i),c=Math.round(u*s),d=Math.round(2*i);if(t.beginPath(),t.moveTo(n,r),t.lineTo(n,c-d),t.arcTo(n,c,n+d,c,d),t.lineTo(l-d,c),t.arcTo(l,c,l,c-d,d),t.lineTo(l,r),t.fill(),h.pi){let n=Math.round(h.Ei*i),l=Math.round((r+e.C)*s);t.fillStyle=h.R;let a=Math.max(1,Math.floor(i)),o=Math.floor(.5*i);t.fillRect(n-o,r,a,l-r)}}),t.useMediaCoordinateSpace(({context:t})=>{let i=O(this.jt),h=0+e.S+e.C+e.A+e.k/2;t.font=e.P,t.textAlign="left",t.textBaseline="middle",t.fillStyle=i.R;let n=e.Qi.Di(t,"Apr0");t.translate(a+s,h+n),t.fillText(i.ri,0,0)})}}class tf{constructor(t,e,i){this.xt=!0,this.Xt=new td,this.Gt={It:!1,G:"#4c525e",R:"white",ri:"",ss:0,Ei:NaN,pi:!0},this.Ct=t,this.ns=e,this.Zi=i}kt(){this.xt=!0}Tt(){return this.xt&&(this.Rt(),this.xt=!1),this.Xt.ht(this.Gt),this.Xt}Rt(){let t=this.Gt;if(t.It=!1,2===this.Ct.N().mode)return;let e=this.Ct.N().vertLine;if(!e.labelVisible)return;let i=this.ns.Et();if(i.Gi())return;t.ss=i.ss();let s=this.Zi();if(null===s)return;t.Ei=s.Ei;let h=i.es(this.Ct.Bt());t.ri=i.rs(O(h)),t.It=!0;let n=this.ns.Xi().Z(e.labelBackgroundColor);t.G=n.G,t.R=n.X,t.pi=i.N().ticksVisible}}class tg{constructor(){this.hs=null,this.ls=0}_s(){return this.ls}us(t){this.ls=t}Ft(){return this.hs}cs(t){this.hs=t}ds(t){return[]}fs(){return[]}It(){return!0}}(n=p||(p={}))[n.Normal=0]="Normal",n[n.Magnet=1]="Magnet",n[n.Hidden=2]="Hidden",n[n.MagnetOHLC=3]="MagnetOHLC";class tp extends tg{constructor(t,e){let i,s,h,n;super(),this.yt=null,this.ps=NaN,this.vs=0,this.ws=!1,this.gs=new Map,this.Ms=!1,this.bs=new WeakMap,this.Ss=new WeakMap,this.xs=NaN,this.Cs=NaN,this.ys=NaN,this.ks=NaN,this.ns=t,this.Ps=e,this.Ts=(i=()=>this.ps,s=()=>this.Cs,t=>{let e=s(),h=i();if(t===O(this.yt).Rs())return{gt:h,Ei:e};{let i=O(t.Lt());return{gt:t.Ds(e,i),Ei:e}}});const r=(h=()=>this.vs,n=()=>this.si(),()=>{let t=this.ns.Et().Is(h()),e=n();return t&&Number.isFinite(e)?{wt:t,Ei:e}:null});this.Vs=new tf(this,t,r)}N(){return this.Ps}Bs(t,e){this.ys=t,this.ks=e}Es(){this.ys=NaN,this.ks=NaN}As(){return this.ys}Ls(){return this.ks}zs(t,e,i){this.Ms||(this.Ms=!0),this.ws=!0,this.Os(t,e,i)}Bt(){return this.vs}si(){return this.xs}ni(){return this.Cs}It(){return this.ws}Ns(){this.ws=!1,this.Fs(),this.ps=NaN,this.xs=NaN,this.Cs=NaN,this.yt=null,this.Es(),this.Ws()}Hs(t){if(!this.Ps.doNotSnapToHiddenSeriesIndices)return t;let e=this.ns,i=e.Et(),s=null,h=null;for(let i of e.Us()){let e=i.qs().$s(t,-1);if(e){if(e.js===t)return t;(null===s||e.js>s)&&(s=e.js)}let n=i.qs().$s(t,1);if(n){if(n.js===t)return t;(null===h||n.js<h)&&(h=n.js)}}let n=[s,h].filter(V);if(0===n.length)return t;let r=i.qt(t),l=n.map(t=>Math.abs(r-i.qt(t)));return n[l.indexOf(Math.min(...l))]}Ys(t){let e=this.bs.get(t);e||(e=new ts(this,t),this.bs.set(t,e));let i=this.Ss.get(t);return i||(i=new te(this.ns,this,t),this.Ss.set(t,i)),[e,i]}ti(t){return t===this.yt&&this.Ps.horzLine.visible}ii(){return this.Ps.vertLine.visible}Ks(t,e){this.ws&&this.yt===t||this.gs.clear();let i=[];return this.yt===t&&i.push(this.Zs(this.gs,e,this.Ts)),i}fs(){return this.ws?[this.Vs]:[]}Gs(){return this.yt}Ws(){this.ns.Xs().forEach(t=>{this.bs.get(t)?.kt(),this.Ss.get(t)?.kt()}),this.gs.forEach(t=>t.kt()),this.Vs.kt()}Js(t){return t&&!t.Rs().Gi()?t.Rs():null}Os(t,e,i){this.Qs(t,e,i)&&this.Ws()}Qs(t,e,i){let s=this.xs,h=this.Cs,n=this.ps,r=this.vs,l=this.yt,a=this.Js(i);this.vs=t,this.xs=isNaN(t)?NaN:this.ns.Et().qt(t),this.yt=i;let o=null!==a?a.Lt():null;return null!==a&&null!==o?(this.ps=e,this.Cs=a.Nt(e,o)):(this.ps=NaN,this.Cs=NaN),s!==this.xs||h!==this.Cs||r!==this.vs||n!==this.ps||l!==this.yt}Fs(){let t=this.ns.tn().map(t=>t.qs().sn()).filter(V),e=0===t.length?null:Math.max(...t);this.vs=null!==e?e:NaN}Zs(t,e,i){let s=t.get(e);return void 0===s&&(s=new tu(this,e,i),t.set(e,s)),s}}function tm(t){return"left"===t||"right"===t}class tb{constructor(t){this.nn=new Map,this.en=[],this.rn=t}hn(t,e){var i;let s=(i=this.nn.get(t),void 0===i?e:{an:Math.max(i.an,e.an),ln:i.ln||e.ln});this.nn.set(t,s)}_n(){return this.rn}un(t){let e=this.nn.get(t);return void 0===e?{an:this.rn}:{an:Math.max(this.rn,e.an),ln:e.ln}}cn(){this.dn(),this.en=[{fn:0}]}pn(t){this.dn(),this.en=[{fn:1,Wt:t}]}vn(t){this.mn(),this.en.push({fn:5,Wt:t})}dn(){this.mn(),this.en.push({fn:6})}wn(){this.dn(),this.en=[{fn:4}]}gn(t){this.dn(),this.en.push({fn:2,Wt:t})}Mn(t){this.dn(),this.en.push({fn:3,Wt:t})}bn(){return this.en}Sn(t){for(let e of t.en)this.xn(e);this.rn=Math.max(this.rn,t.rn),t.nn.forEach((t,e)=>{this.hn(e,t)})}static Cn(){return new tb(2)}static yn(){return new tb(3)}xn(t){switch(t.fn){case 0:this.cn();break;case 1:this.pn(t.Wt);break;case 2:this.gn(t.Wt);break;case 3:this.Mn(t.Wt);break;case 4:this.wn();break;case 5:this.vn(t.Wt);break;case 6:this.mn()}}mn(){let t=this.en.findIndex(t=>5===t.fn);-1!==t&&this.en.splice(t,1)}}class tv{formatTickmarks(t){return t.map(t=>this.format(t))}}function tx(t,e){if(!N(t))return"n/a";if(!B(e)||e<0||e>16)throw TypeError("invalid length");return 0===e?t.toString():("0000000000000000"+t.toString()).slice(-e)}class t_ extends tv{constructor(t,e){if(super(),e||(e=1),N(t)&&B(t)||(t=100),t<0)throw TypeError("invalid base");this.Ki=t,this.kn=e,this.Pn()}format(t){let e=t<0?"âˆ’":"";return t=Math.abs(t),e+this.Tn(t)}Pn(){if(this.Rn=0,this.Ki>0&&this.kn>0){let t=this.Ki;for(;t>1;)t/=10,this.Rn++}}Tn(t){let e=this.Ki/this.kn,i=Math.floor(t),s="",h=void 0!==this.Rn?this.Rn:NaN;if(e>1){let n=+(Math.round(t*e)-i*e).toFixed(this.Rn);n>=e&&(n-=e,i+=1),s="."+tx(n.toFixed(this.Rn)*this.kn,h)}else i=Math.round(i*e)/e,h>0&&(s="."+tx(0,h));return i.toFixed(0)+s}}class ty extends t_{constructor(t=100){super(t)}format(t){return`${super.format(t)}%`}}class tw extends tv{constructor(t){super(),this.Dn=t}format(t){let e="";return t<0&&(e="-",t=-t),t<995?e+this.In(t):t<999995?e+this.In(t/1e3)+"K":t<0x3b9ac9fb?(t=1e3*Math.round(t/1e3),e+this.In(t/1e6)+"M"):(t=1e6*Math.round(t/1e6),e+this.In(t/1e9)+"B")}In(t){let e=Math.pow(10,this.Dn);return((t=Math.round(t*e)/e)>=1e-15&&t<1?t.toFixed(this.Dn).replace(/\.?0+$/,""):String(t)).replace(/(\.[1-9]*)0+$/,(t,e)=>e)}}let tM=/[2-9]/g;class tS{constructor(t=50){this.Vn=0,this.Bn=1,this.En=1,this.An={},this.Ln=new Map,this.zn=t}On(){this.Vn=0,this.Ln.clear(),this.Bn=1,this.En=1,this.An={}}Ii(t,e,i){return this.Nn(t,e,i).width}Di(t,e,i){let s=this.Nn(t,e,i);return((s.actualBoundingBoxAscent||0)-(s.actualBoundingBoxDescent||0))/2}Nn(t,e,i){let s=String(e).replace(i||tM,"0");if(this.Ln.has(s))return z(this.Ln.get(s)).Fn;if(this.Vn===this.zn){let t=this.An[this.En];delete this.An[this.En],this.Ln.delete(t),this.En++,this.Vn--}t.save(),t.textBaseline="middle";let h=t.measureText(s);return t.restore(),0===h.width&&e.length||(this.Ln.set(s,{Fn:h,Wn:this.Bn}),this.An[this.Bn]=s,this.Vn++,this.Bn++),h}}class tk{constructor(t){this.Hn=null,this.M=null,this.Un="right",this.$n=t}qn(t,e,i){this.Hn=t,this.M=e,this.Un=i}nt(t){null!==this.M&&null!==this.Hn&&this.Hn.nt(t,this.M,this.$n,this.Un)}}class tC{constructor(t,e,i){this.jn=t,this.$n=new tS(50),this.Yn=e,this.O=i,this.F=-1,this.Xt=new tk(this.$n)}Tt(){let t=this.O.Kn(this.Yn);if(null===t)return null;let e=t.Zn(this.Yn)?t.Gn():this.Yn.Ft();if(null===e)return null;let i=t.Xn(e);if("overlay"===i)return null;let s=this.O.Jn();return s.k!==this.F&&(this.F=s.k,this.$n.On()),this.Xt.qn(this.jn.ji(),s,i),this.Xt}}class tP extends G{constructor(){super(...arguments),this.jt=null}ht(t){this.jt=t}Qn(t,e){if(!this.jt?.It)return null;let{ut:i,ct:s,te:h}=this.jt;return e>=i-s-7&&e<=i+s+7?{ie:this.jt,te:h}:null}et({context:t,bitmapSize:e,horizontalPixelRatio:i,verticalPixelRatio:s}){if(null===this.jt||!1===this.jt.It)return;let h=Math.round(this.jt.ut*s);h<0||h>e.height||(t.lineCap="butt",t.strokeStyle=this.jt.R,t.lineWidth=Math.floor(this.jt.ct*i),L(t,this.jt.Zt),D(t,h,0,e.width))}}class tE{constructor(t){this.se={ut:0,R:"rgba(0, 0, 0, 0)",ct:1,Zt:0,It:!1},this.ne=new tP,this.xt=!0,this.ee=t,this.re=t.Qt(),this.ne.ht(this.se)}kt(){this.xt=!0}Tt(){return this.ee.It()?(this.xt&&(this.he(),this.xt=!1),this.ne):null}}class tL extends tE{constructor(t){super(t)}he(){this.se.It=!1;let t=this.ee.Ft(),e=t.ae().ae;if(2!==e&&3!==e)return;let i=this.ee.N();if(!i.baseLineVisible||!this.ee.It())return;let s=this.ee.Lt();null!==s&&(this.se.It=!0,this.se.ut=t.Nt(s.Wt,s.Wt),this.se.R=i.baseLineColor,this.se.ct=i.baseLineWidth,this.se.Zt=i.baseLineStyle)}}class tD extends G{constructor(){super(...arguments),this.jt=null}ht(t){this.jt=t}le(){return this.jt}et({context:t,horizontalPixelRatio:e,verticalPixelRatio:i}){let s=this.jt;if(null===s)return;let h=Math.max(1,Math.floor(e)),n=h%2/2,r=Math.round(s.oe.x*e)+n,l=s.oe.y*i;t.fillStyle=s._e,t.beginPath();let a=Math.max(2,1.5*s.ue)*e;t.arc(r,l,a,0,2*Math.PI,!1),t.fill(),t.fillStyle=s.ce,t.beginPath(),t.arc(r,l,s.ft*e,0,2*Math.PI,!1),t.fill(),t.lineWidth=h,t.strokeStyle=s.de,t.beginPath(),t.arc(r,l,s.ft*e+h/2,0,2*Math.PI,!1),t.stroke()}}let tT=[{fe:0,pe:.25,ve:4,me:10,we:.25,ge:0,Me:.4,be:.8},{fe:.25,pe:.525,ve:10,me:14,we:0,ge:0,Me:.8,be:0},{fe:.525,pe:1,ve:14,me:14,we:0,ge:0,Me:0,be:0}];class tz{constructor(t){this.Xt=new tD,this.xt=!0,this.Se=!0,this.xe=performance.now(),this.Ce=this.xe-1,this.ye=t}ke(){this.Ce=this.xe-1,this.kt()}Pe(){if(this.kt(),2===this.ye.N().lastPriceAnimation){let t=performance.now(),e=this.Ce-t;if(e>0)return void(e<650&&(this.Ce+=2600));this.xe=t,this.Ce=t+2600}}kt(){this.xt=!0}Te(){this.Se=!0}It(){return 0!==this.ye.N().lastPriceAnimation}Re(){switch(this.ye.N().lastPriceAnimation){case 0:return!1;case 1:return!0;case 2:return performance.now()<=this.Ce}}Tt(){return this.xt?(this.Rt(),this.xt=!1,this.Se=!1):this.Se&&(this.De(),this.Se=!1),this.Xt}Rt(){this.Xt.ht(null);let t=this.ye.Qt().Et(),e=t.Ie(),i=this.ye.Lt();if(null===e||null===i)return;let s=this.ye.Ve(!0);if(s.Be||!e.Ee(s.js))return;let h={x:t.qt(s.js),y:this.ye.Ft().Nt(s.gt,i.Wt)},n=s.R,r=this.ye.N().lineWidth,l=this.Ae(this.Le(),n);this.Xt.ht({_e:n,ue:r,ce:l.ce,de:l.de,ft:l.ft,oe:h})}De(){let t=this.Xt.le();if(null!==t){let e=this.Ae(this.Le(),t._e);t.ce=e.ce,t.de=e.de,t.ft=e.ft}}Le(){return this.Re()?performance.now()-this.xe:2599}ze(t,e,i,s){return this.ye.Qt().Xi().Y(t,i+(s-i)*e)}Ae(t,e){var i;let s,h=t%2600/2600;for(let t of tT)if(h>=t.fe&&h<=t.pe){s=t;break}T(void 0!==s,"Last price animation internal logic error");let n=(h-s.fe)/(s.pe-s.fe);return{ce:this.ze(e,n,s.we,s.ge),de:this.ze(e,n,s.Me,s.be),ft:(i=s.ve)+(s.me-i)*n}}}class tO extends tE{constructor(t){super(t)}he(){let t=this.se;t.It=!1;let e=this.ee.N();if(!e.priceLineVisible||!this.ee.It())return;let i=this.ee.Ve(0===e.priceLineSource);i.Be||(t.It=!0,t.ut=i.Ei,t.R=this.ee.Oe(i.R),t.ct=e.priceLineWidth,t.Zt=e.priceLineStyle)}}class tR extends to{constructor(t){super(),this.Jt=t}Yi(t,e,i){t.It=!1,e.It=!1;let s=this.Jt;if(!s.It())return;let h=s.N(),n=h.lastValueVisible,r=""!==s.Ne(),l=0===h.seriesLastValueMode,a=s.Ve(!1);if(a.Be)return;n&&(t.ri=this.Fe(a,n,l),t.It=0!==t.ri.length),(r||l)&&(e.ri=this.We(a,n,r,l),e.It=e.ri.length>0);let o=s.Oe(a.R),u=this.Jt.Qt().Xi().Z(o);i.G=u.G,i.Ei=a.Ei,e.Ht=s.Qt().Ut(a.Ei/s.Ft().$t()),t.Ht=o,t.R=u.X,e.R=u.X}We(t,e,i,s){let h="",n=this.Jt.Ne();return i&&0!==n.length&&(h+=`${n} `),e&&s&&(h+=this.Jt.Ft().He()?t.Ue:t.$e),h.trim()}Fe(t,e,i){return e?i?this.Jt.Ft().He()?t.$e:t.Ue:t.ri:""}}function tA(t,e,i,s){let h=Number.isFinite(e),n=Number.isFinite(i);return h&&n?t(e,i):h||n?h?e:i:s}class tF{constructor(t,e){this.qe=t,this.je=e}Ye(t){return null!==t&&this.qe===t.qe&&this.je===t.je}Ke(){return new tF(this.qe,this.je)}Ze(){return this.qe}Ge(){return this.je}Xe(){return this.je-this.qe}Gi(){return this.je===this.qe||Number.isNaN(this.je)||Number.isNaN(this.qe)}Sn(t){return null===t?this:new tF(tA(Math.min,this.Ze(),t.Ze(),-1/0),tA(Math.max,this.Ge(),t.Ge(),1/0))}Je(t){if(!N(t)||0==this.je-this.qe)return;let e=.5*(this.je+this.qe),i=this.je-e,s=this.qe-e;i*=t,s*=t,this.je=e+i,this.qe=e+s}Qe(t){N(t)&&(this.je+=t,this.qe+=t)}tr(){return{minValue:this.qe,maxValue:this.je}}static ir(t){return null===t?null:new tF(t.minValue,t.maxValue)}}class tN{constructor(t,e){this.sr=t,this.nr=e||null}er(){return this.sr}rr(){return this.nr}tr(){return{priceRange:null===this.sr?null:this.sr.tr(),margins:this.nr||void 0}}static ir(t){return null===t?null:new tN(tF.ir(t.priceRange),t.margins)}}let tB=[2,4,8,16,32,64,128,256,512];class tj extends tE{constructor(t,e){super(t),this.hr=e}he(){let t=this.se;t.It=!1;let e=this.hr.N();if(!this.ee.It()||!e.lineVisible)return;let i=this.hr.ar();null!==i&&(t.It=!0,t.ut=i,t.R=e.color,t.ct=e.lineWidth,t.Zt=e.lineStyle,t.te=this.hr.N().id)}}class tI extends to{constructor(t,e){super(),this.ye=t,this.hr=e}Yi(t,e,i){t.It=!1,e.It=!1;let s=this.hr.N(),h=s.axisLabelVisible,n=""!==s.title,r=this.ye;if(!h||!r.It())return;let l=this.hr.ar();if(null===l)return;n&&(e.ri=s.title,e.It=!0),e.Ht=r.Qt().Ut(l/r.Ft().$t()),t.ri=this.lr(s.price),t.It=!0;let a=this.ye.Qt().Xi().Z(s.axisLabelColor||s.color);i.G=a.G;let o=s.axisLabelTextColor||a.X;t.R=o,e.R=o,i.Ei=l}lr(t){let e=this.ye.Lt();return null===e?"":this.ye.Ft().Ji(t,e.Wt)}}class tW{constructor(t,e){this.ye=t,this.Ps=e,this._r=new tj(t,this),this.jn=new tI(t,this),this.ur=new tC(this.jn,t,t.Qt())}cr(t){F(this.Ps,t),this.kt(),this.ye.Qt().dr()}N(){return this.Ps}pr(){return this._r}vr(){return this.ur}mr(){return this.jn}kt(){this._r.kt(),this.jn.kt()}ar(){let t=this.ye,e=t.Ft();if(t.Qt().Et().Gi()||e.Gi())return null;let i=t.Lt();return null===i?null:e.Nt(this.Ps.price,i.Wt)}}class tV{constructor(){this.wr=new WeakMap}gr(t,e,i){let s=1/e*i;return t>=s?1:Math.min(Math.pow(2,Math.floor(Math.log2(s/t))),512)}Mr(t,e,i,s=!1,h){if(0===t.length||e<=1)return t;let n=this.br(e);if(n<=1)return t;let r=this.Sr(t),l=r.Cr.get(n);return void 0!==l||(l=this.yr(t,n,i,s,h,r.Cr),r.Cr.set(n,l)),l}kr(t,e,i,s,h=!1,n){if(i<1||0===t.length)return t;let r=this.Sr(t),l=r.Cr.get(i);if(!l)return this.Mr(t,i,s,h,n);let a=this.Pr(t,e,i,l,h,s,n);return r.Cr.set(i,a),a}br(t){if(t<=2)return 2;for(let e of tB)if(t<=e)return e;return 512}Tr(t){if(0===t.length)return 0;let e=t[0],i=t[t.length-1];return 31*t.length+17*e.js+13*i.js}yr(t,e,i,s=!1,h,n=new Map){if(2===e)return this.Rr(t,2,i,s,h);let r=e/2,l=n.get(r);return l||(l=this.yr(t,r,i,s,h,n),n.set(r,l)),this.Dr(l,i,s,h)}Rr(t,e,i,s=!1,h){let n=this.Ir(t,e,i,s,h);return this.Vr(n,s)}Dr(t,e,i=!1,s){let h=this.Ir(t,2,e,i,s);return this.Vr(h,i)}Ir(t,e,i,s=!1,h){let n=[];for(let r=0;r<t.length;r+=e)if(t.length-r>=e){let e=this.Br(t[r],t[r+1],i,s,h);e.Er=!1,n.push(e)}else if(0===n.length)n.push(this.Ar(t[r],!0));else{let e=n[n.length-1];n[n.length-1]=this.Lr(e,t[r],i,s,h)}return n}zr(t,e){return(t??1)+(e??1)}Br(t,e,i,s=!1,h){if(!s||!i||!h){let i=t.Wt[1]>e.Wt[1]?t.Wt[1]:e.Wt[1],s=t.Wt[2]<e.Wt[2]?t.Wt[2]:e.Wt[2];return{Or:t.js,Nr:e.js,Fr:t.wt,Wr:e.wt,Hr:t.Wt[0],Ur:i,$r:s,qr:e.Wt[3],jr:this.zr(t.jr,e.jr),Yr:void 0,Er:!1}}let n=i(this.Kr(t,h),this.Kr(e,h)),r=h(n),l=r.length?r[r.length-1]:0;return{Or:t.js,Nr:e.js,Fr:t.wt,Wr:e.wt,Hr:t.Wt[0],Ur:Math.max(t.Wt[1],l),$r:Math.min(t.Wt[2],l),qr:l,jr:this.zr(t.jr,e.jr),Yr:n,Er:!1}}Lr(t,e,i,s=!1,h){if(!s||!i||!h)return{Or:t.Or,Nr:e.js,Fr:t.Fr,Wr:e.wt,Hr:t.Hr,Ur:t.Ur>e.Wt[1]?t.Ur:e.Wt[1],$r:t.$r<e.Wt[2]?t.$r:e.Wt[2],qr:e.Wt[3],jr:t.jr+(e.jr??1),Yr:t.Yr,Er:!1};let n=t.Yr,r=this.Kr(e,h),l=n?{data:n,index:t.Or,originalTime:t.Fr,time:t.Fr,priceValues:h(n)}:null,a=l?i(l,r):r.data,o=l?h(a):r.priceValues,u=o.length?o[o.length-1]:0;return{Or:t.Or,Nr:e.js,Fr:t.Fr,Wr:e.wt,Hr:t.Hr,Ur:Math.max(t.Ur,u),$r:Math.min(t.$r,u),qr:u,jr:t.jr+(e.jr??1),Yr:a,Er:!1}}Zr(t,e,i,s,h,n,r=!1,l){let a=e===s?h:t[e];if(i-e==1)return this.Ar(a,!0);let o=e+1===s?h:t[e+1],u=this.Br(a,o,n,r,l);for(let a=e+2;a<i;a++){let e=a===s?h:t[a];u=this.Lr(u,e,n,r,l)}return u}Kr(t,e){let i=t.le??{};return{data:t.le,index:t.js,originalTime:t.Gr,time:t.wt,priceValues:e(i)}}Xr(t,e=!1){let i=!0===e,s=!!t.Yr;return{...{js:t.Or,wt:t.Fr,Gr:t.Fr,Wt:[i?t.qr:t.Hr,t.Ur,t.$r,t.qr],jr:t.jr},le:i?s?t.Yr:{wt:t.Fr}:void 0}}Vr(t,e=!1){return t.map(t=>this.Xr(t,e))}Pr(t,e,i,s,h=!1,n,r){if(0===s.length)return s;let l=t.length-1,a=Math.floor(l/i)*i;if(Math.min(a+i,t.length)-a<i&&t.length>i){let s=t.slice();return s[s.length-1]=e,this.Mr(s,i,n,h,r)}if(Math.floor((l-1)/i)===Math.floor(l/i)||1===s.length){let o=Math.min(a+i,t.length),u=o-a;if(u<=0)return s;let c=1===u?this.Ar(a===l?e:t[a],!0):this.Zr(t,a,o,l,e,n,h,r);return s[s.length-1]=this.Xr(c,h),s}{let s=t.slice();return s[s.length-1]=e,this.Mr(s,i,n,h,r)}}Ar(t,e=!1){return{Or:t.js,Nr:t.js,Fr:t.wt,Wr:t.wt,Hr:t.Wt[0],Ur:t.Wt[1],$r:t.Wt[2],qr:t.Wt[3],jr:t.jr??1,Yr:t.le,Er:e}}Sr(t){let e=this.Jr(t),i=this.Tr(t);return e.Qr!==i&&(e.Cr.clear(),e.Qr=i),e}Jr(t){let e=this.wr.get(t);return void 0===e&&(e={Qr:this.Tr(t),Cr:new Map},this.wr.set(t,e)),e}}class tH extends tg{constructor(t){super(),this.ns=t}Qt(){return this.ns}}let t$={Bar:(t,e,i,s)=>{let h=e.upColor,n=e.downColor,r=O(t(i,s)),l=R(r.Wt[0])<=R(r.Wt[3]);return{th:r.R??(l?h:n)}},Candlestick:(t,e,i,s)=>{let h=e.upColor,n=e.downColor,r=e.borderUpColor,l=e.borderDownColor,a=e.wickUpColor,o=e.wickDownColor,u=O(t(i,s)),c=R(u.Wt[0])<=R(u.Wt[3]);return{th:u.R??(c?h:n),ih:u.Ht??(c?r:l),sh:u.nh??(c?a:o)}},Custom:(t,e,i,s)=>({th:O(t(i,s)).R??e.color}),Area:(t,e,i,s)=>{let h=O(t(i,s));return{th:h.vt??e.lineColor,vt:h.vt??e.lineColor,eh:h.eh??e.topColor,rh:h.rh??e.bottomColor}},Baseline:(t,e,i,s)=>{let h=O(t(i,s));return{th:h.Wt[3]>=e.baseValue.price?e.topLineColor:e.bottomLineColor,hh:h.hh??e.topLineColor,ah:h.ah??e.bottomLineColor,oh:h.oh??e.topFillColor1,_h:h._h??e.topFillColor2,uh:h.uh??e.bottomFillColor1,dh:h.dh??e.bottomFillColor2}},Line:(t,e,i,s)=>{let h=O(t(i,s));return{th:h.R??e.color,vt:h.R??e.color}},Histogram:(t,e,i,s)=>({th:O(t(i,s)).R??e.color})};class tU{constructor(t){this.fh=(t,e)=>void 0!==e?e.Wt:this.ye.qs().ph(t),this.ye=t,this.mh=t$[t.wh()]}gh(t,e){return this.mh(this.fh,this.ye.N(),t,e)}}function tY(t,e,i,s,h=0,n=e.length){let r=n-h;for(;0<r;){let n=r>>1,l=h+n;s(e[l],i)===t?(h=l+1,r-=n+1):r=n}return h}let tK=tY.bind(null,!0),tJ=tY.bind(null,!1);(r=m||(m={}))[r.NearestLeft=-1]="NearestLeft",r[r.None=0]="None",r[r.NearestRight=1]="NearestRight";class tX{constructor(){this.Mh=[],this.bh=new Map,this.Sh=new Map,this.xh=[]}Ch(){return this.yh()>0?this.Mh[this.Mh.length-1]:null}kh(){return this.yh()>0?this.Ph(0):null}sn(){return this.yh()>0?this.Ph(this.Mh.length-1):null}yh(){return this.Mh.length}Gi(){return 0===this.yh()}Ee(t){return null!==this.Th(t,0)}ph(t){return this.$s(t)}$s(t,e=0){let i=this.Th(t,e);return null===i?null:{...this.Rh(i),js:this.Ph(i)}}Dh(){return this.Mh}Ih(t,e,i){if(this.Gi())return null;let s=null;for(let h of i)s=tQ(s,this.Vh(t,e,h));return s}ht(t){this.Sh.clear(),this.bh.clear(),this.Mh=t,this.xh=t.map(t=>t.js)}Bh(){return this.xh}Ph(t){return this.Mh[t].js}Rh(t){return this.Mh[t]}Th(t,e){let i=this.Eh(t);if(null===i&&0!==e)switch(e){case -1:return this.Ah(t);case 1:return this.Lh(t);default:throw TypeError("Unknown search mode")}return i}Ah(t){let e=this.zh(t);return e>0&&(e-=1),e!==this.Mh.length&&this.Ph(e)<t?e:null}Lh(t){let e=this.Oh(t);return e!==this.Mh.length&&t<this.Ph(e)?e:null}Eh(t){let e=this.zh(t);return e===this.Mh.length||t<this.Mh[e].js?null:e}zh(t){return tK(this.Mh,t,(t,e)=>t.js<e)}Oh(t){return tJ(this.Mh,t,(t,e)=>t.js>e)}Nh(t,e,i){let s=null;for(let h=t;h<e;h++){let t=this.Mh[h].Wt[i];Number.isNaN(t)||(null===s?s={Fh:t,Wh:t}:(t<s.Fh&&(s.Fh=t),t>s.Wh&&(s.Wh=t)))}return s}Vh(t,e,i){if(this.Gi())return null;let s=null,h=O(this.kh()),n=O(this.sn()),r=Math.max(t,h),l=Math.min(e,n),a=30*Math.ceil(r/30),o=Math.max(a,30*Math.floor(l/30));{let t=this.zh(r),h=this.Oh(Math.min(l,a,e));s=tQ(s,this.Nh(t,h,i))}let u=this.bh.get(i);void 0===u&&(u=new Map,this.bh.set(i,u));for(let t=Math.max(a+1,r);t<o;t+=30){let e=Math.floor(t/30),h=u.get(e);if(void 0===h){let t=this.zh(30*e),s=this.Oh((e+1)*30-1);h=this.Nh(t,s,i),u.set(e,h)}s=tQ(s,h)}{let t=this.zh(o),e=this.Oh(l);s=tQ(s,this.Nh(t,e,i))}return s}}function tQ(t,e){return null===t?e:null===e?t:{Fh:Math.min(t.Fh,e.Fh),Wh:Math.max(t.Wh,e.Wh)}}let tG={setLineStyle:L};class tq{constructor(t){this.Hh=t}nt(t,e,i){this.Hh.draw(t,tG)}Uh(t,e,i){this.Hh.drawBackground?.(t,tG)}}class tZ{constructor(t){this.Ln=null,this.$h=t}Tt(){let t=this.$h.renderer();if(null===t)return null;if(this.Ln?.qh===t)return this.Ln.jh;let e=new tq(t);return this.Ln={qh:t,jh:e},e}Yh(){return this.$h.zOrder?.()??"normal"}}class t0{constructor(t){this.Kh=null,this.Zh=t}Gh(){return this.Zh}Ws(){this.Zh.updateAllViews?.()}Ys(){let t=this.Zh.paneViews?.()??[];if(this.Kh?.qh===t)return this.Kh.jh;let e=t.map(t=>new tZ(t));return this.Kh={qh:t,jh:e},e}Qn(t,e){return this.Zh.hitTest?.(t,e)??null}}let t1=class extends t0{ds(){return[]}};class t2{constructor(t){this.Hh=t}nt(t,e,i){this.Hh.draw(t,tG)}Uh(t,e,i){this.Hh.drawBackground?.(t,tG)}}class t5{constructor(t){this.Ln=null,this.$h=t}Tt(){let t=this.$h.renderer();if(null===t)return null;if(this.Ln?.qh===t)return this.Ln.jh;let e=new t2(t);return this.Ln={qh:t,jh:e},e}Yh(){return this.$h.zOrder?.()??"normal"}}function t3(t){return{ri:t.text(),Ei:t.coordinate(),Vi:t.fixedCoordinate?.(),R:t.textColor(),G:t.backColor(),It:t.visible?.()??!0,pi:t.tickVisible?.()??!0}}class t6{constructor(t,e){this.Xt=new td,this.Xh=t,this.Jh=e}Tt(){return this.Xt.ht({ss:this.Jh.ss(),...t3(this.Xh)}),this.Xt}}class t4 extends to{constructor(t,e){super(),this.Xh=t,this.Ki=e}Yi(t,e,i){let s=t3(this.Xh);i.G=s.G,t.R=s.R;let h=2/12*this.Ki.k();i.Ti=h,i.Ri=h,i.Ei=s.Ei,i.Vi=s.Vi,t.ri=s.ri,t.It=s.It,t.pi=s.pi}}class t8 extends t0{constructor(t,e){super(t),this.Qh=null,this.ta=null,this.ia=null,this.sa=null,this.ye=e}fs(){let t=this.Zh.timeAxisViews?.()??[];if(this.Qh?.qh===t)return this.Qh.jh;let e=this.ye.Qt().Et(),i=t.map(t=>new t6(t,e));return this.Qh={qh:t,jh:i},i}Ks(){let t=this.Zh.priceAxisViews?.()??[];if(this.ta?.qh===t)return this.ta.jh;let e=this.ye.Ft(),i=t.map(t=>new t4(t,e));return this.ta={qh:t,jh:i},i}na(){let t=this.Zh.priceAxisPaneViews?.()??[];if(this.ia?.qh===t)return this.ia.jh;let e=t.map(t=>new t5(t));return this.ia={qh:t,jh:e},e}ea(){let t=this.Zh.timeAxisPaneViews?.()??[];if(this.sa?.qh===t)return this.sa.jh;let e=t.map(t=>new t5(t));return this.sa={qh:t,jh:e},e}ra(t,e){return this.Zh.autoscaleInfo?.(t,e)??null}}function t9(t,e,i,s){t.forEach(t=>{e(t).forEach(t=>{t.Yh()===i&&s.push(t)})})}function t7(t){return t.Ys()}function et(t){return t.na()}function ee(t){return t.ea()}let ei=["Area","Line","Baseline"];class es extends tH{constructor(t,e,i,s,h){super(t),this.jt=new tX,this._r=new tO(this),this.ha=[],this.aa=new tL(this),this.la=null,this.oa=null,this._a=null,this.ua=[],this.ca=new tV,this.da=new Map,this.fa=null,this.Ps=i,this.pa=e;const n=new tR(this);if(this.gs=[n],this.ur=new tC(n,this,t),ei.includes(this.pa)&&(this.la=new tz(this)),this.va(),this.$h=s(this,this.Qt(),h),"Custom"===this.pa){const t=this.$h;t.ma&&this.wa(t.ma)}}m(){null!==this._a&&clearTimeout(this._a)}Oe(t){return this.Ps.priceLineColor||t}Ve(t){let e,i,s={Be:!0},h=this.Ft();if(this.Qt().Et().Gi()||h.Gi()||this.jt.Gi())return s;let n=this.Qt().Et().Ie(),r=this.Lt();if(null===n||null===r)return s;if(t){let t=this.jt.Ch();if(null===t)return s;e=t,i=t.js}else{let t=this.jt.$s(n.bi(),-1);if(null===t||null===(e=this.jt.ph(t.js)))return s;i=t.js}let l=e.Wt[3],a=this.ga().gh(i,{Wt:e}),o=h.Nt(l,r.Wt);return{Be:!1,gt:l,ri:h.Ji(l,r.Wt),Ue:h.Ma(l),$e:h.ba(l,r.Wt),R:a.th,Ei:o,js:i}}ga(){return null!==this.oa||(this.oa=new tU(this)),this.oa}N(){return this.Ps}cr(t){let e=this.Qt(),{priceScaleId:i,visible:s,priceFormat:h}=t;void 0!==i&&i!==this.Ps.priceScaleId&&e.Sa(this,i),void 0!==s&&s!==this.Ps.visible&&e.xa();let n=void 0!==t.conflationThresholdFactor;F(this.Ps,t),n&&(this.da.clear(),this.Qt().dr()),void 0!==h&&(this.va(),e.Ca()),e.ya(this),e.ka(),this.$h.kt("options")}ht(t,e){this.jt.ht(t),this.da.clear();let i=this.Qt().Et().N();i.enableConflation&&i.precomputeConflationOnInit&&this.Pa(i.precomputeConflationPriority),this.$h.kt("data"),null!==this.la&&(e&&e.Ta?this.la.Pe():0===t.length&&this.la.ke());let s=this.Qt().Kn(this);this.Qt().Ra(s),this.Qt().ya(this),this.Qt().ka(),this.Qt().dr()}Da(t){let e=new tW(this,t);return this.ha.push(e),this.Qt().ya(this),e}Ia(t){let e=this.ha.indexOf(t);-1!==e&&this.ha.splice(e,1),this.Qt().ya(this)}Va(){return this.ha}wh(){return this.pa}Lt(){let t=this.Ba();return null===t?null:{Wt:t.Wt[3],Ea:t.wt}}Ba(){let t=this.Qt().Et().Ie();if(null===t)return null;let e=t.Aa();return this.jt.$s(e,1)}qs(){return this.jt}wa(t){this.fa=t,this.da.clear()}La(){return!!this.Qt().Et().N().enableConflation&&this.za()>1}kr(t){if(!this.La())return;let e=this.za();if(!this.da.has(e))return;let i="Custom"===this.pa,s=i&&this.fa||void 0,h=i&&this.$h.Oa?t=>{let e=this.$h.Oa(t);return Array.isArray(e)?e:["number"==typeof e?e:0]}:void 0,n=this.ca.kr(this.jt.Dh(),t,e,s,i,h),r=new tX;r.ht(n),this.da.set(e,r)}Na(){let t=this.Qt().Et().N().enableConflation;if("Custom"===this.pa&&null===this.fa||!t)return this.jt;let e=this.za(),i=this.da.get(e);return i||(this.Fa(e),this.da.get(e)??this.jt)}Wa(t){let e=this.jt.ph(t);return null===e?null:"Bar"===this.pa||"Candlestick"===this.pa||"Custom"===this.pa?{Hr:e.Wt[0],Ur:e.Wt[1],$r:e.Wt[2],qr:e.Wt[3]}:e.Wt[3]}Ha(t){let e=[];t9(this.ua,t7,"top",e);let i=this.la;return null!==i&&i.It()&&(null===this._a&&i.Re()&&(this._a=setTimeout(()=>{this._a=null,this.Qt().Ua()},0)),i.Te(),e.unshift(i)),e}Ys(){let t=[];this.$a()||t.push(this.aa),t.push(this.$h,this._r);let e=this.ha.map(t=>t.pr());return t.push(...e),t9(this.ua,t7,"normal",t),t}qa(){return this.ja(t7,"bottom")}Ya(t){return this.ja(et,t)}Ka(t){return this.ja(ee,t)}Za(t,e){return this.ua.map(i=>i.Qn(t,e)).filter(t=>null!==t)}ds(){return[this.ur,...this.ha.map(t=>t.vr())]}Ks(t,e){if(e!==this.hs&&!this.$a())return[];let i=[...this.gs];for(let t of this.ha)i.push(t.mr());return this.ua.forEach(t=>{i.push(...t.Ks())}),i}fs(){let t=[];return this.ua.forEach(e=>{t.push(...e.fs())}),t}ra(t,e){if(void 0!==this.Ps.autoscaleInfoProvider){let i=this.Ps.autoscaleInfoProvider(()=>{let i=this.Ga(t,e);return null===i?null:i.tr()});return tN.ir(i)}return this.Ga(t,e)}qh(){let t=this.Ps.priceFormat;return t.base??1/t.minMove}Xa(){return this.Ja}Ws(){for(let t of(this.$h.kt(),this.gs))t.kt();for(let t of this.ha)t.kt();this._r.kt(),this.aa.kt(),this.la?.kt(),this.ua.forEach(t=>t.Ws())}Ft(){return O(super.Ft())}At(t){if(!(("Line"===this.pa||"Area"===this.pa||"Baseline"===this.pa)&&this.Ps.crosshairMarkerVisible))return null;let e=this.jt.ph(t);return null===e?null:{gt:e.Wt[3],ft:this.Qa(),Ht:this.tl(),Ot:this.il(),zt:this.sl(t)}}Ne(){return this.Ps.title}It(){return this.Ps.visible}nl(t){this.ua.push(new t8(t,this))}el(t){this.ua=this.ua.filter(e=>e.Gh()!==t)}rl(){if("Custom"===this.pa)return t=>this.$h.Oa(t)}hl(){if("Custom"===this.pa)return t=>this.$h.al(t)}ll(){return this.jt.Bh()}$a(){return!tm(this.Ft().ol())}Ga(t,e){if(!B(t)||!B(e)||this.jt.Gi())return null;let i="Line"===this.pa||"Area"===this.pa||"Baseline"===this.pa||"Histogram"===this.pa?[3]:[2,1],s=this.jt.Ih(t,e,i),h=null!==s?new tF(s.Fh,s.Wh):null,n=null;if("Histogram"===this.wh()){let t=this.Ps.base,e=new tF(t,t);h=null!==h?h.Sn(e):e}return this.ua.forEach(i=>{let s=i.ra(t,e);if(s?.priceRange){let t=new tF(s.priceRange.minValue,s.priceRange.maxValue);h=null!==h?h.Sn(t):t}s?.margins&&(n=s.margins)}),new tN(h,n)}Qa(){switch(this.pa){case"Line":case"Area":case"Baseline":return this.Ps.crosshairMarkerRadius}return 0}tl(){switch(this.pa){case"Line":case"Area":case"Baseline":{let t=this.Ps.crosshairMarkerBorderColor;if(0!==t.length)return t}}return null}il(){switch(this.pa){case"Line":case"Area":case"Baseline":return this.Ps.crosshairMarkerBorderWidth}return 0}sl(t){switch(this.pa){case"Line":case"Area":case"Baseline":{let t=this.Ps.crosshairMarkerBackgroundColor;if(0!==t.length)return t}}return this.ga().gh(t).th}va(){switch(this.Ps.priceFormat.type){case"custom":{let t=this.Ps.priceFormat.formatter;this.Ja={format:t,formatTickmarks:this.Ps.priceFormat.tickmarksFormatter??(e=>e.map(t))};break}case"volume":this.Ja=new tw(this.Ps.priceFormat.precision);break;case"percent":this.Ja=new ty(this.Ps.priceFormat.precision);break;default:{let t=Math.pow(10,this.Ps.priceFormat.precision);this.Ja=new t_(t,this.Ps.priceFormat.minMove*t)}}null!==this.hs&&this.hs._l()}ja(t,e){let i=[];return t9(this.ua,t,e,i),i}za(){let{ul:t,cl:e,dl:i}=this.fl();return this.ca.gr(t,e,i)}fl(){let t=this.Qt().Et(),e=t.ul(),i=window.devicePixelRatio||1,s=t.N().conflationThresholdFactor;return{ul:e,cl:i,dl:this.Ps.conflationThresholdFactor??s??1}}pl(t){let e,i=this.jt.Dh();if("Custom"===this.pa&&null!==this.fa){let s=this.rl();if(!s)throw Error("Custom series with conflation reducer must have a priceValueBuilder method");e=this.ca.Mr(i,t,this.fa,!0,t=>s(t))}else e=this.ca.Mr(i,t);let s=new tX;return s.ht(e),s}Fa(t){let e=this.pl(t);this.da.set(t,e)}Pa(t){if("Custom"!==this.pa||null!==this.fa&&this.rl())for(let e of(this.da.clear(),this.Qt().Et().vl())){let i=()=>{this.ml(e)},s="object"==typeof window&&window||"object"==typeof self&&self;s?.gl?.wl?s.gl.wl(()=>{i()},{Ml:t}):Promise.resolve().then(()=>i())}}ml(t){if(this.da.has(t)||0===this.jt.Dh().length)return;let e=this.pl(t);this.da.set(t,e)}}let eh=[3],en=[0,1,2,3];class er{constructor(t){this.Ps=t}bl(t,e,i){if(0===this.Ps.mode)return t;let s=i.Rs(),h=s.Lt();if(null===h)return t;let n=s.Nt(t,h),r=i.Sl().filter(t=>t instanceof es).reduce((t,s)=>{if(i.Zn(s)||!s.It())return t;let h=s.Ft(),n=s.qs();if(h.Gi()||!n.Ee(e))return t;let r=n.ph(e);if(null===r)return t;let l=R(s.Lt()),a=3===this.Ps.mode?en:eh;return t.concat(a.map(t=>h.Nt(r.Wt[t],l.Wt)))},[]);if(0===r.length)return t;r.sort((t,e)=>Math.abs(t-n)-Math.abs(e-n));let l=r[0];return s.Ds(l,h)}}function el(t,e,i){return Math.min(Math.max(t,e),i)}class ea extends G{constructor(){super(...arguments),this.jt=null}ht(t){this.jt=t}et({context:t,bitmapSize:e,horizontalPixelRatio:i,verticalPixelRatio:s}){var h;if(null===this.jt)return;let n=Math.max(1,Math.floor(i));t.lineWidth=n,h=()=>{let h=O(this.jt);if(h.xl){for(let s of(t.strokeStyle=h.Cl,L(t,h.yl),t.beginPath(),h.kl)){let h=Math.round(s.Pl*i);t.moveTo(h,-n),t.lineTo(h,e.height+n)}t.stroke()}if(h.Tl){for(let i of(t.strokeStyle=h.Rl,L(t,h.Dl),t.beginPath(),h.Il)){let h=Math.round(i.Pl*s);t.moveTo(-n,h),t.lineTo(e.width+n,h)}t.stroke()}},t.save(),t.lineWidth%2&&t.translate(.5,.5),h(),t.restore()}}class eo{constructor(t){this.Xt=new ea,this.xt=!0,this.yt=t}kt(){this.xt=!0}Tt(){if(this.xt){let t=this.yt.Qt().N().grid,e={Tl:t.horzLines.visible,xl:t.vertLines.visible,Rl:t.horzLines.color,Cl:t.vertLines.color,Dl:t.horzLines.style,yl:t.vertLines.style,Il:this.yt.Rs().Vl(),kl:(this.yt.Qt().Et().Vl()||[]).map(t=>({Pl:t.coord}))};this.Xt.ht(e),this.xt=!1}return this.Xt}}class eu{constructor(t){this.$h=new eo(t)}pr(){return this.$h}}let ec={Bl:4,El:1e-4};function ed(t,e){let i=100*(t-e)/e;return e<0?-i:i}function ef(t,e){let i=100*(t-e)/e+100;return e<0?-i:i}function eg(t,e){let i=Math.abs(t);if(i<1e-15)return 0;let s=Math.log10(i+e.El)+e.Bl;return t<0?-s:s}function ep(t,e){let i=Math.abs(t);if(i<1e-15)return 0;let s=Math.pow(10,i-e.Bl)-e.El;return t<0?-s:s}function em(t,e){return null===t?null:new tF(eg(t.Ze(),e),eg(t.Ge(),e))}function eb(t,e){return null===t?null:new tF(ep(t.Ze(),e),ep(t.Ge(),e))}function ev(t){if(null===t)return ec;let e=Math.abs(t.Ge()-t.Ze());if(e>=1||e<1e-15)return ec;let i=Math.ceil(Math.abs(Math.log10(e))),s=ec.Bl+i;return{Bl:s,El:1/Math.pow(10,s)}}class ex{constructor(t,e){if(this.Al=t,this.Ll=e,function(t){if(t<0)return!1;if(t>1e18)return!0;for(let e=t;e>1;e/=10)if(e%10!=0)return!1;return!0}(this.Al))this.zl=[2,2.5,2];else{this.zl=[];for(let t=this.Al;1!==t;){if(t%2==0)this.zl.push(2),t/=2;else{if(t%5!=0)throw Error("unexpected base");this.zl.push(2,2.5),t/=5}if(this.zl.length>100)throw Error("something wrong with base")}}}Ol(t,e,i){let s=0===this.Al?0:1/this.Al,h=Math.pow(10,Math.max(0,Math.ceil(Math.log10(t-e)))),n=0,r=this.Ll[0];for(;;){let t=s-h<=1e-14&&h>s+1e-14,e=i*r-h<=1e-14,l=1-h<=1e-14;if(!(t&&e&&l))break;h/=r,r=this.Ll[++n%this.Ll.length]}if(h<=s+1e-14&&(h=s),h=Math.max(1,h),this.zl.length>0&&1e-14>Math.abs(h-1))for(n=0,r=this.zl[0];i*r-h<=1e-14&&h>s+1e-14;)h/=r,r=this.zl[++n%this.zl.length];return h}}class e_{constructor(t,e,i,s){this.Nl=[],this.Ki=t,this.Al=e,this.Fl=i,this.Wl=s}Ol(t,e){if(t<e)throw Error("high < low");let i=this.Ki.$t(),s=(t-e)*this.Hl()/i,h=new ex(this.Al,[2,2.5,2]),n=new ex(this.Al,[2,2,2.5]),r=new ex(this.Al,[2.5,2,2]),l=[];return l.push(h.Ol(t,e,s),n.Ol(t,e,s),r.Ol(t,e,s)),function(t){if(t.length<1)throw Error("array is empty");let e=t[0];for(let i=1;i<t.length;++i)t[i]<e&&(e=t[i]);return e}(l)}Ul(){let t=this.Ki,e=t.Lt();if(null===e)return void(this.Nl=[]);let i=t.$t(),s=this.Fl(i-1,e),h=this.Fl(0,e),n=this.Ki.N().entireTextOnly?this.$l()/2:0,r=i-1-n,l=Math.max(s,h),a=Math.min(s,h);if(l===a)return void(this.Nl=[]);let o=this.Ol(l,a);if(this.ql(e,o,l,a,n,r),t.jl()&&this.Yl(o,a,l)){let t=this.Ki.Kl();this.Zl(e,o,n,r,t,2*t)}let u=this.Nl.map(t=>t.Gl),c=this.Ki.Xl(u);for(let t=0;t<this.Nl.length;t++)this.Nl[t].Jl=c[t]}Vl(){return this.Nl}$l(){return this.Ki.k()}Hl(){return Math.ceil(2.5*this.$l())}ql(t,e,i,s,h,n){let r=this.Nl,l=this.Ki,a=i%e;a+=a<0?e:0;let o=i>=s?1:-1,u=null,c=0;for(let d=i-a;d>s;d-=e){let i=this.Wl(d,t,!0);null!==u&&Math.abs(i-u)<this.Hl()||i<h||i>n||(c<r.length?(r[c].Pl=i,r[c].Jl=l.Ql(d),r[c].Gl=d):r.push({Pl:i,Jl:l.Ql(d),Gl:d}),c++,u=i,l.io()&&(e=this.Ol(d*o,s)))}r.length=c}Zl(t,e,i,s,h,n){let r=this.Nl,l=this.so(t,i,h,n),a=this.so(t,s,-n,-h),o=this.Wl(0,t,!0)-this.Wl(e,t,!0);r.length>0&&r[0].Pl-l.Pl<o/2&&r.shift(),r.length>0&&a.Pl-r[r.length-1].Pl<o/2&&r.pop(),r.unshift(l),r.push(a)}so(t,e,i,s){let h=this.Fl(e+i,t),n=this.Fl(e+s,t),r=Math.min(h,n),l=Math.max(h,n),a=Math.max(.1,this.Ol(l,r)),o=this.Fl(e+(i+s)/2,t),u=o-o%a,c=this.Wl(u,t,!0);return{Jl:this.Ki.Ql(u),Pl:c,Gl:u}}Yl(t,e,i){let s=R(this.Ki.er());return this.Ki.io()&&(s=eb(s,this.Ki.no())),s.Ze()-e<t&&i-s.Ge()<t}}function ey(t){return t.slice().sort((t,e)=>O(t._s())-O(e._s()))}(l=b||(b={}))[l.Normal=0]="Normal",l[l.Logarithmic=1]="Logarithmic",l[l.Percentage=2]="Percentage",l[l.IndexedTo100=3]="IndexedTo100";let ew=new ty,eM=new t_(100,1);class eS{constructor(t,e,i,s,h){this.eo=0,this.ro=null,this.sr=null,this.ho=null,this.ao={lo:!1,oo:null},this._o=!1,this.uo=0,this.co=0,this.do=new A,this.fo=new A,this.po=[],this.vo=null,this.mo=null,this.wo=null,this.Mo=null,this.bo=null,this.Ja=eM,this.So=ev(null),this.xo=t,this.Ps=e,this.Co=i,this.yo=s,this.ko=h,this.Po=new e_(this,100,this.To.bind(this),this.Ro.bind(this))}ol(){return this.xo}N(){return this.Ps}cr(t){if(F(this.Ps,t),this._l(),void 0!==t.mode&&this.Do({ae:t.mode}),void 0!==t.scaleMargins){let e=z(t.scaleMargins.top),i=z(t.scaleMargins.bottom);if(e<0||e>1)throw Error(`Invalid top margin - expect value between 0 and 1, given=${e}`);if(i<0||i>1)throw Error(`Invalid bottom margin - expect value between 0 and 1, given=${i}`);if(e+i>1)throw Error(`Invalid margins - sum of margins must be less than 1, given=${e+i}`);this.Io(),this.wo=null}}Vo(){return this.Ps.autoScale}Bo(){return this._o}io(){return 1===this.Ps.mode}He(){return 2===this.Ps.mode}Eo(){return 3===this.Ps.mode}no(){return this.So}ae(){return{ln:this.Ps.autoScale,Ao:this.Ps.invertScale,ae:this.Ps.mode}}Do(t){let e=this.ae(),i=null;void 0!==t.ln&&(this.Ps.autoScale=t.ln),void 0!==t.ae&&(this.Ps.mode=t.ae,2!==t.ae&&3!==t.ae||(this.Ps.autoScale=!0),this.ao.lo=!1),1===e.ae&&t.ae!==e.ae&&(function(t,e){if(null===t)return!1;let i=ep(t.Ze(),e),s=ep(t.Ge(),e);return isFinite(i)&&isFinite(s)}(this.sr,this.So)?null!==(i=eb(this.sr,this.So))&&this.Lo(i):this.Ps.autoScale=!0),1===t.ae&&t.ae!==e.ae&&null!==(i=em(this.sr,this.So))&&this.Lo(i);let s=e.ae!==this.Ps.mode;s&&(2===e.ae||this.He())&&this._l(),s&&(3===e.ae||this.Eo())&&this._l(),void 0!==t.Ao&&e.Ao!==t.Ao&&(this.Ps.invertScale=t.Ao,this.zo()),this.fo.p(e,this.ae())}Oo(){return this.fo}k(){return this.Co.fontSize}$t(){return this.eo}No(t){this.eo!==t&&(this.eo=t,this.Io(),this.wo=null)}Fo(){if(this.ro)return this.ro;let t=this.$t()-this.Wo()-this.Ho();return this.ro=t,t}er(){return this.Uo(),this.sr}Lo(t,e){let i=this.sr;(e||null===i&&null!==t||null!==i&&!i.Ye(t))&&(this.wo=null,this.sr=t)}$o(t){this.Lo(t),this.qo(null!==t)}Gi(){return this.Uo(),0===this.eo||!this.sr||this.sr.Gi()}jo(t){return this.Ao()?t:this.$t()-1-t}Nt(t,e){return this.He()?t=ed(t,e):this.Eo()&&(t=ef(t,e)),this.Ro(t,e)}Yo(t,e,i){this.Uo();let s=this.Ho(),h=O(this.er()),n=h.Ze(),r=h.Ge(),l=this.Fo()-1,a=this.Ao(),o=l/(r-n),u=void 0===i?0:i.from,c=void 0===i?t.length:i.to,d=this.Ko();for(let i=u;i<c;i++){let h=t[i],r=h.gt;if(isNaN(r))continue;let l=r;null!==d&&(l=d(h.gt,e));let u=s+o*(l-n);h.ut=a?u:this.eo-1-u}}Zo(t,e,i){this.Uo();let s=this.Ho(),h=O(this.er()),n=h.Ze(),r=h.Ge(),l=this.Fo()-1,a=this.Ao(),o=l/(r-n),u=void 0===i?0:i.from,c=void 0===i?t.length:i.to,d=this.Ko();for(let i=u;i<c;i++){let h=t[i],r=h.Hr,l=h.Ur,u=h.$r,c=h.qr;null!==d&&(r=d(h.Hr,e),l=d(h.Ur,e),u=d(h.$r,e),c=d(h.qr,e));let f=s+o*(r-n),g=a?f:this.eo-1-f;h.Go=g,f=s+o*(l-n),h.Xo=g=a?f:this.eo-1-f,f=s+o*(u-n),h.Jo=g=a?f:this.eo-1-f,f=s+o*(c-n),h.Qo=g=a?f:this.eo-1-f}}Ds(t,e){let i=this.To(t,e);return this.t_(i,e)}t_(t,e){var i,s;let h=t;return this.He()?(i=h,e<0&&(i=-i),h=i/100*e+e):this.Eo()&&(s=h-100,e<0&&(s=-s),h=s/100*e+e),h}Sl(){return this.po}Dt(){return this.mo||(this.mo=ey(this.po)),this.mo}i_(t){-1===this.po.indexOf(t)&&(this.po.push(t),this._l(),this.s_())}n_(t){let e=this.po.indexOf(t);if(-1===e)throw Error("source is not attached to scale");this.po.splice(e,1),0===this.po.length&&(this.Do({ln:!0}),this.Lo(null)),this._l(),this.s_()}Lt(){let t=null;for(let e of this.po){let i=e.Lt();null!==i&&(null===t||i.Ea<t.Ea)&&(t=i)}return null===t?null:t.Wt}Ao(){return this.Ps.invertScale}Vl(){let t=null===this.Lt();if(null!==this.wo&&(t||this.wo.e_===t))return this.wo.Vl;this.Po.Ul();let e=this.Po.Vl();return this.wo={Vl:e,e_:t},this.do.p(),e}r_(){return this.do}h_(t){this.He()||this.Eo()||null===this.Mo&&null===this.ho&&(this.Gi()||(this.Mo=this.eo-t,this.ho=O(this.er()).Ke()))}a_(t){if(this.He()||this.Eo()||null===this.Mo)return;this.Do({ln:!1}),(t=this.eo-t)<0&&(t=0);let e=(this.Mo+.2*(this.eo-1))/(t+.2*(this.eo-1)),i=O(this.ho).Ke();e=Math.max(e,.1),i.Je(e),this.Lo(i)}l_(){this.He()||this.Eo()||(this.Mo=null,this.ho=null)}o_(t){this.Vo()||null===this.bo&&null===this.ho&&(this.Gi()||(this.bo=t,this.ho=O(this.er()).Ke()))}__(t){if(this.Vo()||null===this.bo)return;let e=O(this.er()).Xe()/(this.Fo()-1),i=t-this.bo;this.Ao()&&(i*=-1);let s=i*e,h=O(this.ho).Ke();h.Qe(s),this.Lo(h,!0),this.wo=null}u_(){this.Vo()||null!==this.bo&&(this.bo=null,this.ho=null)}Xa(){return this.Ja||this._l(),this.Ja}Ji(t,e){switch(this.Ps.mode){case 2:return this.c_(ed(t,e));case 3:return this.Xa().format(ef(t,e));default:return this.lr(t)}}Ql(t){switch(this.Ps.mode){case 2:return this.c_(t);case 3:return this.Xa().format(t);default:return this.lr(t)}}Xl(t){switch(this.Ps.mode){case 2:return this.d_(t);case 3:return this.Xa().formatTickmarks(t);default:return this.f_(t)}}Ma(t){return this.lr(t,O(this.vo).Xa())}ba(t,e){return t=ed(t,e),this.c_(t,ew)}p_(){return this.po}v_(t){this.ao={oo:t,lo:!1}}Ws(){this.po.forEach(t=>t.Ws())}jl(){return this.Ps.ensureEdgeTickMarksVisible&&this.Vo()}Kl(){return this.k()/2}_l(){this.wo=null;let t=1/0;for(let e of(this.vo=null,this.po))e._s()<t&&(t=e._s(),this.vo=e);let e=100;null!==this.vo&&(e=Math.round(this.vo.qh())),this.Ja=eM,this.He()?(this.Ja=ew,e=100):this.Eo()?(this.Ja=new t_(100,1),e=100):null!==this.vo&&(this.Ja=this.vo.Xa()),this.Po=new e_(this,e,this.To.bind(this),this.Ro.bind(this)),this.Po.Ul()}s_(){this.mo=null}m_(){return null===this.vo||this.He()||this.Eo()?1:1/this.vo.qh()}Xi(){return this.ko}qo(t){this._o=t}Wo(){return this.Ao()?this.Ps.scaleMargins.bottom*this.$t()+this.co:this.Ps.scaleMargins.top*this.$t()+this.uo}Ho(){return this.Ao()?this.Ps.scaleMargins.top*this.$t()+this.uo:this.Ps.scaleMargins.bottom*this.$t()+this.co}Uo(){this.ao.lo||(this.ao.lo=!0,this.w_())}Io(){this.ro=null}Ro(t,e){if(this.Uo(),this.Gi())return 0;t=this.io()&&t?eg(t,this.So):t;let i=O(this.er()),s=this.Ho()+(this.Fo()-1)*(t-i.Ze())/i.Xe();return this.jo(s)}To(t,e){if(this.Uo(),this.Gi())return 0;let i=this.jo(t),s=O(this.er()),h=s.Ze()+s.Xe()*((i-this.Ho())/(this.Fo()-1));return this.io()?ep(h,this.So):h}zo(){this.wo=null,this.Po.Ul()}w_(){var t,e,i,s,h;if(this.Bo()&&!this.Vo())return;let n=this.ao.oo;if(null===n)return;let r=null,l=this.p_(),a=0,o=0;for(let t of l){if(!t.It())continue;let l=t.Lt();if(null===l)continue;let u=t.ra(n.Aa(),n.bi()),c=u&&u.er();if(null!==c){switch(this.Ps.mode){case 1:c=em(c,this.So);break;case 2:e=c,i=l.Wt,c=new tF(ed(e.Ze(),i),ed(e.Ge(),i));break;case 3:s=c,h=l.Wt,c=new tF(ef(s.Ze(),h),ef(s.Ge(),h))}if(r=null===r?c:r.Sn(O(c)),null!==u){let t=u.rr();null!==t&&(a=Math.max(a,t.above),o=Math.max(o,t.below))}}}if(this.jl()&&(a=Math.max(a,this.Kl()),o=Math.max(o,this.Kl())),a===this.uo&&o===this.co||(this.uo=a,this.co=o,this.wo=null,this.Io()),null!==r){if(r.Ze()===r.Ge()){let t=5*this.m_();this.io()&&(r=eb(r,this.So)),r=new tF(r.Ze()-t,r.Ge()+t),this.io()&&(r=em(r,this.So))}if(this.io()){let e=eb(r,this.So),i=ev(e);if(t=this.So,i.Bl!==t.Bl||i.El!==t.El){let t=null!==this.ho?eb(this.ho,this.So):null;this.So=i,r=em(e,i),null!==t&&(this.ho=em(t,i))}}this.Lo(r)}else null===this.sr&&(this.Lo(new tF(-.5,.5)),this.So=ev(null))}Ko(){return this.He()?ed:this.Eo()?ef:this.io()?t=>eg(t,this.So):null}g_(t,e,i){return void 0===e?(void 0===i&&(i=this.Xa()),i.format(t)):e(t)}M_(t,e,i){return void 0===e?(void 0===i&&(i=this.Xa()),i.formatTickmarks(t)):e(t)}lr(t,e){return this.g_(t,this.yo.priceFormatter,e)}f_(t,e){let i=this.yo.priceFormatter;return this.M_(t,this.yo.tickmarksPriceFormatter??(i?t=>t.map(i):void 0),e)}c_(t,e){return this.g_(t,this.yo.percentageFormatter,e)}d_(t,e){let i=this.yo.percentageFormatter;return this.M_(t,this.yo.tickmarksPercentageFormatter??(i?t=>t.map(i):void 0),e)}}function ek(t){return t instanceof es}class eC{constructor(t,e){this.po=[],this.b_=new Map,this.eo=0,this.S_=0,this.x_=1,this.mo=null,this.C_=!1,this.y_=new A,this.ua=[],this.Jh=t,this.ns=e,this.k_=new eu(this);const i=e.N();this.P_=this.T_("left",i.leftPriceScale),this.R_=this.T_("right",i.rightPriceScale),this.P_.Oo().i(this.D_.bind(this,this.P_),this),this.R_.Oo().i(this.D_.bind(this,this.R_),this),this.I_(i)}I_(t){if(t.leftPriceScale&&this.P_.cr(t.leftPriceScale),t.rightPriceScale&&this.R_.cr(t.rightPriceScale),t.localization&&(this.P_._l(),this.R_._l()),t.overlayPriceScales)for(let e of Array.from(this.b_.values())){let i=O(e[0].Ft());i.cr(t.overlayPriceScales),t.localization&&i._l()}}V_(t){switch(t){case"left":return this.P_;case"right":return this.R_}return this.b_.has(t)?z(this.b_.get(t))[0].Ft():null}m(){this.Qt().B_().u(this),this.P_.Oo().u(this),this.R_.Oo().u(this),this.po.forEach(t=>{t.m&&t.m()}),this.ua=this.ua.filter(t=>{let e=t.Gh();return e.detached&&e.detached(),!1}),this.y_.p()}E_(){return this.x_}A_(t){this.x_=t}Qt(){return this.ns}ss(){return this.S_}$t(){return this.eo}L_(t){this.S_=t,this.z_()}No(t){this.eo=t,this.P_.No(t),this.R_.No(t),this.po.forEach(e=>{if(this.Zn(e)){let i=e.Ft();null!==i&&i.No(t)}}),this.z_()}O_(t){this.C_=t}N_(){return this.C_}F_(){return this.po.filter(ek)}Sl(){return this.po}Zn(t){let e=t.Ft();return null===e||this.P_!==e&&this.R_!==e}i_(t,e,i){this.W_(t,e,i?t._s():this.po.length)}n_(t,e){let i=this.po.indexOf(t);T(-1!==i,"removeDataSource: invalid data source"),this.po.splice(i,1),e||this.po.forEach((t,e)=>t.us(e));let s=O(t.Ft()).ol();if(this.b_.has(s)){let e=z(this.b_.get(s)),i=e.indexOf(t);-1!==i&&(e.splice(i,1),0===e.length&&this.b_.delete(s))}let h=t.Ft();h&&h.Sl().indexOf(t)>=0&&(h.n_(t),this.H_(h)),this.mo=null}Xn(t){return t===this.P_?"left":t===this.R_?"right":"overlay"}U_(){return this.P_}q_(){return this.R_}j_(t,e){t.h_(e)}Y_(t,e){t.a_(e),this.z_()}K_(t){t.l_()}Z_(t,e){t.o_(e)}G_(t,e){t.__(e),this.z_()}X_(t){t.u_()}z_(){this.po.forEach(t=>{t.Ws()})}Rs(){let t=null;return this.ns.N().rightPriceScale.visible&&0!==this.R_.Sl().length?t=this.R_:this.ns.N().leftPriceScale.visible&&0!==this.P_.Sl().length?t=this.P_:0!==this.po.length&&(t=this.po[0].Ft()),null===t&&(t=this.R_),t}Gn(){let t=null;return this.ns.N().rightPriceScale.visible?t=this.R_:this.ns.N().leftPriceScale.visible&&(t=this.P_),t}H_(t){null!==t&&t.Vo()&&this.J_(t)}Q_(t){let e=this.Jh.Ie();t.Do({ln:!0}),null!==e&&t.v_(e),this.z_()}tu(){this.J_(this.P_),this.J_(this.R_)}iu(){this.H_(this.P_),this.H_(this.R_),this.po.forEach(t=>{this.Zn(t)&&this.H_(t.Ft())}),this.z_(),this.ns.dr()}Dt(){return null===this.mo&&(this.mo=ey(this.po)),this.mo}su(t,e){e=el(e,0,this.po.length-1);let i=this.po.indexOf(t);for(let s of(T(-1!==i,"setSeriesOrder: invalid data source"),this.po.splice(i,1),this.po.splice(e,0,t),this.po.forEach((t,e)=>t.us(e)),this.mo=null,[this.P_,this.R_]))s.s_(),s._l();this.ns.dr()}Vt(){return this.Dt().filter(ek)}nu(){return this.y_}eu(){return this.k_}nl(t){this.ua.push(new t1(t))}el(t){this.ua=this.ua.filter(e=>e.Gh()!==t),t.detached&&t.detached(),this.ns.dr()}ru(){return this.ua}Za(t,e){return this.ua.map(i=>i.Qn(t,e)).filter(t=>null!==t)}J_(t){let e=t.p_();if(e&&e.length>0&&!this.Jh.Gi()){let e=this.Jh.Ie();null!==e&&t.v_(e)}t.Ws()}W_(t,e,i){let s=this.V_(e);if(null===s&&(s=this.T_(e,this.ns.N().overlayPriceScales)),this.po.splice(i,0,t),!tm(e)){let i=this.b_.get(e)||[];i.push(t),this.b_.set(e,i)}t.us(i),s.i_(t),t.cs(s),this.H_(s),this.mo=null}D_(t,e,i){e.ae!==i.ae&&this.J_(t)}T_(t,e){let i=new eS(t,{visible:!0,autoScale:!0,...W(e)},this.ns.N().layout,this.ns.N().localization,this.ns.Xi());return i.No(this.$t()),i}}function eP(t){return{hu:t.hu,au:{te:t.lu.externalId},ou:t.lu.cursorStyle}}function eE(t,e,i){let s=[t,...t.Dt()],h=function(t,e,i){var s,h;let n,r;for(let l of t)for(let t of l.Za?.(e,i)??[])s=t.zOrder,(h=n?.zOrder)&&("top"!==s||"top"===h)&&("normal"!==s||"bottom"!==h)||(n=t,r=l);return n&&r?{lu:n,hu:r}:null}(s,e,i);if("top"===h?.lu.zOrder)return eP(h);for(let n of s){if(h&&h.hu===n&&"bottom"!==h.lu.zOrder&&!h.lu.isBackground)return eP(h);if(void 0!==n.Ys){let s=function(t,e,i,s){for(let h of t){let t=h.Tt(s);if(null!==t&&t.Qn){let s=t.Qn(e,i);if(null!==s)return{_u:h,au:s}}}return null}(n.Ys(t),e,i,t);if(null!==s)return{hu:n,_u:s._u,au:s.au}}if(h&&h.hu===n&&"bottom"!==h.lu.zOrder&&h.lu.isBackground)return eP(h)}return h?.lu?eP(h):null}class eL{constructor(t,e,i=50){this.Vn=0,this.Bn=1,this.En=1,this.Ln=new Map,this.An=new Map,this.uu=t,this.cu=e,this.zn=i}du(t){let e=t.time,i=this.cu.cacheKey(e),s=this.Ln.get(i);if(void 0!==s)return s.fu;if(this.Vn===this.zn){let t=this.An.get(this.En);this.An.delete(this.En),this.Ln.delete(z(t)),this.En++,this.Vn--}let h=this.uu(t);return this.Ln.set(i,{fu:h,Wn:this.Bn}),this.An.set(this.Bn,i),this.Vn++,this.Bn++,h}}class eD{constructor(t,e){T(t<=e,"right should be >= left"),this.pu=t,this.vu=e}Aa(){return this.pu}bi(){return this.vu}mu(){return this.vu-this.pu+1}Ee(t){return this.pu<=t&&t<=this.vu}Ye(t){return this.pu===t.Aa()&&this.vu===t.bi()}}function eT(t,e){return null===t||null===e?t===e:t.Ye(e)}class ez{constructor(){this.wu=new Map,this.Ln=null,this.gu=!1}Mu(t){this.gu=t,this.Ln=null}bu(t,e){this.Su(e),this.Ln=null;for(let i=e;i<t.length;++i){let e=t[i],s=this.wu.get(e.timeWeight);void 0===s&&(s=[],this.wu.set(e.timeWeight,s)),s.push({index:i,time:e.time,weight:e.timeWeight,originalTime:e.originalTime})}}xu(t,e,i,s,h){let n=Math.ceil(e/t);return null!==this.Ln&&this.Ln.Cu===n&&h===this.Ln.yu&&i===this.Ln.ku||(this.Ln={yu:h,ku:i,Vl:this.Pu(n,i,s),Cu:n}),this.Ln.Vl}Su(t){if(0===t)return void this.wu.clear();let e=[];for(let i of(this.wu.forEach((i,s)=>{t<=i[0].index?e.push(s):i.splice(tK(i,t,e=>e.index<t),1/0)}),e))this.wu.delete(i)}Pu(t,e,i){let s=[],h=t=>!e||i.has(t.index);for(let e of Array.from(this.wu.keys()).sort((t,e)=>e-t)){if(!this.wu.get(e))continue;let i=s;s=[];let n=i.length,r=0,l=z(this.wu.get(e)),a=l.length,o=1/0,u=-1/0;for(let e=0;e<a;e++){let a=l[e],c=a.index;for(;r<n;){let t=i[r],e=t.index;if(!(e<c&&h(t))){o=e;break}r++,s.push(t),u=e,o=1/0}if(o-c>=t&&c-u>=t&&h(a))s.push(a),u=c;else if(this.gu)return i}for(;r<n;r++)h(i[r])&&s.push(i[r])}return s}}class eO{constructor(t){this.Tu=t}Ru(){return null===this.Tu?null:new eD(Math.floor(this.Tu.Aa()),Math.ceil(this.Tu.bi()))}Du(){return this.Tu}static Iu(){return new eO(null)}}function eR(t,e){return t.weight>e.weight?t:e}class eA{constructor(t,e,i,s){this.S_=0,this.Vu=null,this.Bu=[],this.bo=null,this.Mo=null,this.Eu=new ez,this.Au=new Map,this.Lu=eO.Iu(),this.zu=!0,this.Ou=new A,this.Nu=new A,this.Fu=new A,this.Wu=null,this.Hu=null,this.Uu=new Map,this.$u=-1,this.qu=[],this.ju=1,this.Ps=e,this.yo=i,this.Yu=e.rightOffset,this.Ku=e.barSpacing,this.ns=t,this.Zu(e),this.cu=s,this.Gu(),this.Eu.Mu(e.uniformDistribution),this.Xu(),this.Ju()}N(){return this.Ps}Qu(t){F(this.yo,t),this.tc(),this.Gu()}cr(t,e){F(this.Ps,t),this.Ps.fixLeftEdge&&this.sc(),this.Ps.fixRightEdge&&this.nc(),void 0!==t.barSpacing&&this.ns.gn(t.barSpacing),void 0!==t.rightOffset&&this.ns.Mn(t.rightOffset),this.Zu(t),void 0===t.minBarSpacing&&void 0===t.maxBarSpacing||this.ns.gn(t.barSpacing??this.Ku),void 0!==t.ignoreWhitespaceIndices&&t.ignoreWhitespaceIndices!==this.Ps.ignoreWhitespaceIndices&&this.Ju(),this.tc(),this.Gu(),void 0===t.enableConflation&&void 0===t.conflationThresholdFactor||this.Xu(),this.Fu.p()}Is(t){return this.Bu[t]?.time??null}es(t){return this.Bu[t]??null}ec(t,e){if(this.Bu.length<1)return null;if(this.cu.key(t)>this.cu.key(this.Bu[this.Bu.length-1].time))return e?this.Bu.length-1:null;let i=tK(this.Bu,this.cu.key(t),(t,e)=>this.cu.key(t.time)<e);return this.cu.key(t)<this.cu.key(this.Bu[i].time)?e?i:null:i}Gi(){return 0===this.S_||0===this.Bu.length||null===this.Vu}rc(){return this.Bu.length>0}Ie(){return this.hc(),this.Lu.Ru()}ac(){return this.hc(),this.Lu.Du()}lc(){let t=this.Ie();if(null===t)return null;let e={from:t.Aa(),to:t.bi()};return this.oc(e)}oc(t){let e=Math.round(t.from),i=Math.round(t.to),s=O(this._c()),h=O(this.uc());return{from:O(this.es(Math.max(s,e))),to:O(this.es(Math.min(h,i)))}}cc(t){return{from:O(this.ec(t.from,!0)),to:O(this.ec(t.to,!0))}}ss(){return this.S_}L_(t){if(!isFinite(t)||t<=0||this.S_===t)return;let e=this.ac(),i=this.S_;if(this.S_=t,this.zu=!0,this.Ps.lockVisibleTimeRangeOnResize&&0!==i){let e=this.Ku*t/i;this.Ku=e}this.Ps.fixLeftEdge&&null!==e&&0>=e.Aa()&&(this.Yu-=Math.round((i-t)/this.Ku)+1,this.zu=!0),this.dc(),this.fc()}qt(t){if(this.Gi()||!B(t))return 0;let e=this.vc()+this.Yu-t;return this.S_-(e+.5)*this.Ku-1}mc(t,e){let i=this.vc(),s=void 0===e?0:e.from,h=void 0===e?t.length:e.to;for(let e=s;e<h;e++){let s=t[e].wt,h=i+this.Yu-s,n=this.S_-(h+.5)*this.Ku-1;t[e]._t=n}}wc(t,e){let i=Math.ceil(this.gc(t));return e&&this.Ps.ignoreWhitespaceIndices&&!this.Mc(i)?this.bc(i):i}Mn(t){this.zu=!0,this.Yu=t,this.fc(),this.ns.Sc(),this.ns.dr()}ul(){return this.Ku}gn(t){let e=this.Ku;if(this.xc(t),void 0!==this.Ps.rightOffsetPixels&&0!==e){let t=this.Yu*e/this.Ku;this.Yu=t}this.fc(),this.ns.Sc(),this.ns.dr()}Cc(){return this.Yu}Vl(){if(this.Gi())return null;if(null!==this.Hu)return this.Hu;let t=this.Ku,e=5*(this.ns.N().layout.fontSize+4)/8*(this.Ps.tickMarkMaxCharacterLength||8),i=Math.round(e/t),s=O(this.Ie()),h=Math.max(s.Aa(),s.Aa()-i),n=Math.max(s.bi(),s.bi()-i),r=this.Eu.xu(t,e,this.Ps.ignoreWhitespaceIndices,this.Uu,this.$u),l=this._c()+i,a=this.uc()-i,o=this.yc(),u=this.Ps.fixLeftEdge||o,c=this.Ps.fixRightEdge||o,d=0;for(let t of r){let i;h<=t.index&&t.index<=n&&(d<this.qu.length?((i=this.qu[d]).coord=this.qt(t.index),i.label=this.kc(t),i.weight=t.weight):(i={needAlignCoordinate:!1,coord:this.qt(t.index),label:this.kc(t),weight:t.weight},this.qu.push(i)),this.Ku>e/2&&!o?i.needAlignCoordinate=!1:i.needAlignCoordinate=u&&t.index<=l||c&&t.index>=a,d++)}return this.qu.length=d,this.Hu=this.qu,this.qu}Pc(){let t;this.zu=!0,this.gn(this.Ps.barSpacing),t=void 0!==this.Ps.rightOffsetPixels?this.Ps.rightOffsetPixels/this.ul():this.Ps.rightOffset,this.Mn(t)}Tc(t){this.zu=!0,this.Vu=t,this.fc(),this.sc()}Rc(t,e){let i=this.gc(t),s=this.ul();this.gn(s+s/10*e),this.Ps.rightBarStaysOnScroll||this.Mn(this.Cc()+(i-this.gc(t)))}h_(t){this.bo&&this.u_(),null===this.Mo&&null===this.Wu&&(this.Gi()||(this.Mo=t,this.Dc()))}a_(t){if(null===this.Wu)return;let e=el(this.S_-t,0,this.S_),i=el(this.S_-O(this.Mo),0,this.S_);0!==e&&0!==i&&this.gn(this.Wu.ul*e/i)}l_(){null!==this.Mo&&(this.Mo=null,this.Ic())}o_(t){null===this.bo&&null===this.Wu&&(this.Gi()||(this.bo=t,this.Dc()))}__(t){if(null===this.bo)return;let e=(this.bo-t)/this.ul();this.Yu=O(this.Wu).Cc+e,this.zu=!0,this.fc()}u_(){null!==this.bo&&(this.bo=null,this.Ic())}Vc(){this.Bc(this.Ps.rightOffset)}Bc(t,e=400){if(!isFinite(t))throw RangeError("offset is required and must be finite number");if(!isFinite(e)||e<=0)throw RangeError("animationDuration (optional) must be finite positive number");let i=this.Yu,s=performance.now();this.ns.vn({Ec:t=>(t-s)/e>=1,Ac:h=>{let n=(h-s)/e;return n>=1?t:i+(t-i)*n}})}kt(t,e){this.zu=!0,this.Bu=t,this.Eu.bu(t,e),this.fc()}Lc(){return this.Ou}zc(){return this.Nu}Oc(){return this.Fu}vc(){return this.Vu||0}Nc(t,e){let i=t.mu(),s=e&&this.Ps.rightOffsetPixels||0;this.xc((this.S_-s)/i),this.Yu=t.bi()-this.vc(),e&&(this.Yu=s?s/this.ul():this.Ps.rightOffset),this.fc(),this.zu=!0,this.ns.Sc(),this.ns.dr()}Fc(){let t=this._c(),e=this.uc();if(null===t||null===e)return;let i=!this.Ps.rightOffsetPixels&&this.Ps.rightOffset||0;this.Nc(new eD(t,e+i),!0)}Wc(t){let e=new eD(t.from,t.to);this.Nc(e)}rs(t){return void 0!==this.yo.timeFormatter?this.yo.timeFormatter(t.originalTime):this.cu.formatHorzItem(t.time)}Ju(){if(this.Ps.ignoreWhitespaceIndices){for(let t of(this.Uu.clear(),this.ns.tn()))for(let e of t.ll())this.Uu.set(e,!0);this.$u++}}Hc(){return this.ju}vl(){let t=1/(window.devicePixelRatio||1),e=this.Ps.minBarSpacing;if(e>=t)return[1];let i=[1],s=2;for(;s<=512;)e<t/s&&i.push(s),s*=2;return i}yc(){let t=this.ns.N().handleScroll,e=this.ns.N().handleScale;return!(t.horzTouchDrag||t.mouseWheel||t.pressedMouseMove||t.vertTouchDrag||e.axisDoubleClickReset.time||e.axisPressedMouseMove.time||e.mouseWheel||e.pinch)}_c(){return 0===this.Bu.length?null:0}uc(){return 0===this.Bu.length?null:this.Bu.length-1}Uc(t){return(this.S_-1-t)/this.Ku}gc(t){let e=this.Uc(t);return Math.round(1e6*(this.vc()+this.Yu-e))/1e6}xc(t){let e=this.Ku;this.Ku=t,this.dc(),e!==this.Ku&&(this.zu=!0,this.$c(),this.Xu())}hc(){if(!this.zu)return;if(this.zu=!1,this.Gi())return void this.qc(eO.Iu());let t=this.vc(),e=this.S_/this.Ku,i=this.Yu+t,s=new eD(i-e+1,i);this.qc(new eO(s))}dc(){let t=el(this.Ku,this.jc(),this.Yc());this.Ku!==t&&(this.Ku=t,this.zu=!0)}Yc(){return this.Ps.maxBarSpacing>0?this.Ps.maxBarSpacing:.5*this.S_}jc(){return this.Ps.fixLeftEdge&&this.Ps.fixRightEdge&&0!==this.Bu.length?this.S_/this.Bu.length:this.Ps.minBarSpacing}Xu(){if(!this.Ps.enableConflation)return void(this.ju=1);let t=1/(window.devicePixelRatio||1)*(this.Ps.conflationThresholdFactor??1);if(this.Ku>=t)return void(this.ju=1);let e=Math.pow(2,Math.floor(Math.log2(t/this.Ku)));this.ju=Math.min(e,512)}fc(){let t=this.Kc();null!==t&&this.Yu<t&&(this.Yu=t,this.zu=!0);let e=this.Zc();this.Yu>e&&(this.Yu=e,this.zu=!0)}Kc(){let t=this._c(),e=this.Vu;return null===t||null===e?null:t-e-1+(this.Ps.fixLeftEdge?this.S_/this.Ku:Math.min(2,this.Bu.length))}Zc(){return this.Ps.fixRightEdge?0:this.S_/this.Ku-Math.min(2,this.Bu.length)}Dc(){this.Wu={ul:this.ul(),Cc:this.Cc()}}Ic(){this.Wu=null}kc(t){let e=this.Au.get(t.weight);return void 0===e&&(e=new eL(t=>this.Gc(t),this.cu),this.Au.set(t.weight,e)),e.du(t)}Gc(t){return this.cu.formatTickmark(t,this.yo)}qc(t){let e=this.Lu;this.Lu=t,eT(e.Ru(),this.Lu.Ru())||this.Ou.p(),eT(e.Du(),this.Lu.Du())||this.Nu.p(),this.$c()}$c(){this.Hu=null}tc(){this.$c(),this.Au.clear()}Gu(){this.cu.updateFormatter(this.yo)}sc(){if(!this.Ps.fixLeftEdge)return;let t=this._c();if(null===t)return;let e=this.Ie();if(null===e)return;let i=e.Aa()-t;if(i<0){let t=this.Yu-i-1;this.Mn(t)}this.dc()}nc(){this.fc(),this.dc()}Mc(t){return!this.Ps.ignoreWhitespaceIndices||this.Uu.get(t)||!1}bc(t){let e=function*(t){let e=Math.round(t),i=e<t,s=1;for(;;)i?(yield e+s,yield e-s):(yield e-s,yield e+s),s++}(t),i=this.uc();for(;i;){let t=e.next().value;if(this.Uu.get(t))return t;if(t<0||t>i)break}return t}Zu(t){if(void 0!==t.rightOffsetPixels){let e=t.rightOffsetPixels/(t.barSpacing||this.Ku);this.ns.Mn(e)}}}(a=v||(v={}))[a.OnTouchEnd=0]="OnTouchEnd",a[a.OnNextTap=1]="OnNextTap";class eF{constructor(t,e,i){this.Xc=[],this.Jc=[],this.Qc=null,this.S_=0,this.td=null,this.sd=new A,this.nd=new A,this.ed=null,this.rd=t,this.Ps=e,this.cu=i,this.ko=new X(this.Ps.layout.colorParsers),this.hd=new Y(this),this.Jh=new eA(this,e.timeScale,this.Ps.localization,i),this.Ct=new tp(this,e.crosshair),this.ad=new er(e.crosshair),e.addDefaultPane&&(this.ld(0),this.Xc[0].A_(2)),this.od=this._d(0),this.ud=this._d(1)}Ca(){this.dd(tb.yn())}dr(){this.dd(tb.Cn())}Ua(){this.dd(new tb(1))}ya(t){let e=this.fd(t);this.dd(e)}pd(){return this.td}vd(t){if(this.td?.hu===t?.hu&&this.td?.au?.te===t?.au?.te)return;let e=this.td;this.td=t,null!==e&&this.ya(e.hu),null!==t&&t.hu!==e?.hu&&this.ya(t.hu)}N(){return this.Ps}cr(t){F(this.Ps,t),this.Xc.forEach(e=>e.I_(t)),void 0!==t.timeScale&&this.Jh.cr(t.timeScale),void 0!==t.localization&&this.Jh.Qu(t.localization),(t.leftPriceScale||t.rightPriceScale)&&this.sd.p(),this.od=this._d(0),this.ud=this._d(1),this.Ca()}md(t,e,i=0){let s=this.Xc[i];if(void 0===s)return;if("left"===t)return F(this.Ps,{leftPriceScale:e}),s.I_({leftPriceScale:e}),this.sd.p(),void this.Ca();if("right"===t)return F(this.Ps,{rightPriceScale:e}),s.I_({rightPriceScale:e}),this.sd.p(),void this.Ca();let h=this.wd(t,i);null!==h&&(h.Ft.cr(e),this.sd.p())}wd(t,e){let i=this.Xc[e];if(void 0===i)return null;let s=i.V_(t);return null!==s?{Gs:i,Ft:s}:null}Et(){return this.Jh}Xs(){return this.Xc}gd(){return this.Ct}Md(){return this.nd}bd(t,e){t.No(e),this.Sc()}L_(t){this.S_=t,this.Jh.L_(this.S_),this.Xc.forEach(e=>e.L_(t)),this.Sc()}Sd(t){1!==this.Xc.length&&(T(t>=0&&t<this.Xc.length,"Invalid pane index"),this.Xc.splice(t,1),this.Ca())}xd(t,e){if(this.Xc.length<2)return;T(t>=0&&t<this.Xc.length,"Invalid pane index");let i=this.Xc[t],s=this.Xc.reduce((t,e)=>t+e.E_(),0),h=this.Xc.reduce((t,e)=>t+e.$t(),0),n=h-30*(this.Xc.length-1);e=Math.min(n,Math.max(30,e));let r=s/h,l=i.$t();i.A_(e*r);let a=e-l,o=this.Xc.length-1;for(let t of this.Xc)if(t!==i){let e=Math.min(n,Math.max(30,t.$t()-a/o));a-=t.$t()-e,o-=1;let i=e*r;t.A_(i)}this.Ca()}Cd(t,e){T(t>=0&&t<this.Xc.length&&e>=0&&e<this.Xc.length,"Invalid pane index");let i=this.Xc[t],s=this.Xc[e];this.Xc[t]=s,this.Xc[e]=i,this.Ca()}yd(t,e){if(T(t>=0&&t<this.Xc.length&&e>=0&&e<this.Xc.length,"Invalid pane index"),t===e)return;let[i]=this.Xc.splice(t,1);this.Xc.splice(e,0,i),this.Ca()}j_(t,e,i){t.j_(e,i)}Y_(t,e,i){t.Y_(e,i),this.ka(),this.dd(this.kd(t,2))}K_(t,e){t.K_(e),this.dd(this.kd(t,2))}Z_(t,e,i){e.Vo()||t.Z_(e,i)}G_(t,e,i){e.Vo()||(t.G_(e,i),this.ka(),this.dd(this.kd(t,2)))}X_(t,e){e.Vo()||(t.X_(e),this.dd(this.kd(t,2)))}Q_(t,e){t.Q_(e),this.dd(this.kd(t,2))}Pd(t){this.Jh.h_(t)}Td(t,e){let i=this.Et();if(i.Gi()||0===e)return;let s=i.ss();t=Math.max(1,Math.min(t,s)),i.Rc(t,e),this.Sc()}Rd(t){this.Dd(0),this.Id(t),this.Vd()}Bd(t){this.Jh.a_(t),this.Sc()}Ed(){this.Jh.l_(),this.dr()}Dd(t){this.Jh.o_(t)}Id(t){this.Jh.__(t),this.Sc()}Vd(){this.Jh.u_(),this.dr()}tn(){return this.Jc}Us(){return null===this.Qc&&(this.Qc=this.Jc.filter(t=>t.It())),this.Qc}xa(){this.Qc=null}Ad(t,e,i,s,h){this.Ct.Bs(t,e);let n=NaN,r=this.Jh.wc(t,!0),l=this.Jh.Ie();null!==l&&(r=Math.min(Math.max(l.Aa(),r),l.bi())),r=this.Ct.Hs(r);let a=s.Rs(),o=a.Lt();if(null!==o&&(n=a.Ds(e,o)),n=this.ad.bl(n,r,s),this.Ct.zs(r,n,s),this.Ua(),!h){let h=eE(s,t,e);this.vd(h&&{hu:h.hu,au:h.au,ou:h.ou||null}),this.nd.p(this.Ct.Bt(),{x:t,y:e},i)}}Ld(t,e,i){let s=i.Rs(),h=s.Lt(),n=s.Nt(t,O(h)),r=this.Jh.ec(e,!0),l=this.Jh.qt(O(r));this.Ad(l,n,null,i,!0)}zd(t){this.gd().Ns(),this.Ua(),t||this.nd.p(null,null,null)}ka(){let t=this.Ct.Gs();if(null!==t){let e=this.Ct.As(),i=this.Ct.Ls();this.Ad(e,i,null,t)}this.Ct.Ws()}Od(t,e,i){let s=this.Jh.Is(0);void 0!==e&&void 0!==i&&this.Jh.kt(e,i);let h=this.Jh.Is(0),n=this.Jh.vc(),r=this.Jh.Ie();if(null!==r&&null!==s&&null!==h){let e=r.Ee(n),l=this.cu.key(s)>this.cu.key(h),a=null!==t&&t>n&&!l,o=this.Jh.N().allowShiftVisibleRangeOnWhitespaceReplacement,u=e&&(void 0!==i||o)&&this.Jh.N().shiftVisibleRangeOnNewBar;if(a&&!u){let e=t-n;this.Jh.Mn(this.Jh.Cc()-e)}}this.Jh.Tc(t)}Ra(t){null!==t&&t.iu()}Kn(t){if(t instanceof eC)return t;let e=this.Xc.find(e=>e.Dt().includes(t));return void 0===e?null:e}Sc(){this.Xc.forEach(t=>t.iu()),this.ka()}m(){this.Xc.forEach(t=>t.m()),this.Xc.length=0,this.Ps.localization.priceFormatter=void 0,this.Ps.localization.percentageFormatter=void 0,this.Ps.localization.timeFormatter=void 0}Nd(){return this.hd}Jn(){return this.hd.N()}B_(){return this.sd}Fd(t,e){let i=this.ld(e);this.Wd(t,i),this.Jc.push(t),this.xa(),1===this.Jc.length?this.Ca():this.dr()}Hd(t){let e=this.Kn(t),i=this.Jc.indexOf(t);T(-1!==i,"Series not found");let s=O(e);this.Jc.splice(i,1),s.n_(t),t.m&&t.m(),this.xa(),this.Jh.Ju(),this.Ud(s)}Sa(t,e){let i=O(this.Kn(t));i.n_(t,!0),i.i_(t,e,!0)}Fc(){let t=tb.Cn();t.cn(),this.dd(t)}$d(t){let e=tb.Cn();e.pn(t),this.dd(e)}wn(){let t=tb.Cn();t.wn(),this.dd(t)}gn(t){let e=tb.Cn();e.gn(t),this.dd(e)}Mn(t){let e=tb.Cn();e.Mn(t),this.dd(e)}vn(t){let e=tb.Cn();e.vn(t),this.dd(e)}dn(){let t=tb.Cn();t.dn(),this.dd(t)}qd(){return this.Ps.rightPriceScale.visible?"right":"left"}jd(t,e){if(T(e>=0,"Index should be greater or equal to 0"),e===this.Yd(t))return;let i=O(this.Kn(t));i.n_(t);let s=this.ld(e);this.Wd(t,s),0===i.Sl().length&&this.Ud(i),this.Ca()}Kd(){return this.ud}$(){return this.od}Ut(t){let e=this.ud,i=this.od;if(e===i)return e;if(t=Math.max(0,Math.min(100,Math.round(100*t))),null===this.ed||this.ed.eh!==i||this.ed.rh!==e)this.ed={eh:i,rh:e,Zd:new Map};else{let e=this.ed.Zd.get(t);if(void 0!==e)return e}let s=this.ko.tt(i,e,t/100);return this.ed.Zd.set(t,s),s}Gd(t){return this.Xc.indexOf(t)}Xi(){return this.ko}Xd(){return this.Jd()}Jd(t){let e=new eC(this.Jh,this);this.Xc.push(e);let i=t??this.Xc.length-1,s=tb.yn();return s.hn(i,{an:0,ln:!0}),this.dd(s),e}ld(t){return T(t>=0,"Index should be greater or equal to 0"),(t=Math.min(this.Xc.length,t))<this.Xc.length?this.Xc[t]:this.Jd(t)}Yd(t){return this.Xc.findIndex(e=>e.F_().includes(t))}kd(t,e){let i=new tb(e);if(null!==t){let s=this.Xc.indexOf(t);i.hn(s,{an:e})}return i}fd(t,e){return void 0===e&&(e=2),this.kd(this.Kn(t),e)}dd(t){this.rd&&this.rd(t),this.Xc.forEach(t=>t.eu().pr().kt())}Wd(t,e){let i=t.N().priceScaleId,s=void 0!==i?i:this.qd();e.i_(t,s),tm(s)||t.cr(t.N())}_d(t){let e=this.Ps.layout;return"gradient"===e.background.type?0===t?e.background.topColor:e.background.bottomColor:e.background.color}Ud(t){!t.N_()&&0===t.Sl().length&&this.Xc.length>1&&this.Xc.splice(this.Gd(t),1)}}function eN(t){if(t>=1)return 0;let e=0;for(;e<8&&!(1e-8>Math.abs(Math.round(t)-t));e++)t*=10;return e}function eB(t){return!N(t)&&!j(t)}(o=x||(x={}))[o.Disabled=0]="Disabled",o[o.Continuous=1]="Continuous",o[o.OnDataUpdate=2]="OnDataUpdate",(u=_||(_={}))[u.LastBar=0]="LastBar",u[u.LastVisible=1]="LastVisible",(c=y||(y={})).Solid="solid",c.VerticalGradient="gradient",(d=w||(w={}))[d.Year=0]="Year",d[d.Month=1]="Month",d[d.DayOfMonth=2]="DayOfMonth",d[d.Time=3]="Time",d[d.TimeWithSeconds=4]="TimeWithSeconds";class ej{constructor(t="yyyy-MM-dd",e="default"){this.Qd=t,this.tf=e}du(t){return function(t,e,i){return e.replace(/yyyy/g,tx(t.getUTCFullYear(),4)).replace(/yy/g,tx(t.getUTCFullYear()%100,2)).replace(/MMMM/g,new Date(t.getUTCFullYear(),t.getUTCMonth(),1).toLocaleString(i,{month:"long"})).replace(/MMM/g,new Date(t.getUTCFullYear(),t.getUTCMonth(),1).toLocaleString(i,{month:"short"})).replace(/MM/g,tx(t.getUTCMonth()+1,2)).replace(/dd/g,tx(t.getUTCDate(),2))}(t,this.Qd,this.tf)}}class eI{constructor(t){this.if=t||"%h:%m:%s"}du(t){return this.if.replace("%h",tx(t.getUTCHours(),2)).replace("%m",tx(t.getUTCMinutes(),2)).replace("%s",tx(t.getUTCSeconds(),2))}}let eW={sf:"yyyy-MM-dd",nf:"%h:%m:%s",ef:" ",rf:"default"};class eV{constructor(t={}){const e={...eW,...t};this.hf=new ej(e.sf,e.rf),this.af=new eI(e.nf),this.lf=e.ef}du(t){return`${this.hf.du(t)}${this.lf}${this.af.du(t)}`}}function eH(t){return 60*t*6e4}function e$(t){return 60*t*1e3}let eU=[{_f:1e3,uf:10},{_f:e$(1),uf:20},{_f:e$(5),uf:21},{_f:e$(30),uf:22},{_f:eH(1),uf:30},{_f:eH(3),uf:31},{_f:eH(6),uf:32},{_f:eH(12),uf:33}];function eY(t,e){if(t.getUTCFullYear()!==e.getUTCFullYear())return 70;if(t.getUTCMonth()!==e.getUTCMonth())return 60;if(t.getUTCDate()!==e.getUTCDate())return 50;for(let i=eU.length-1;i>=0;--i)if(Math.floor(e.getTime()/eU[i]._f)!==Math.floor(t.getTime()/eU[i]._f))return eU[i].uf;return 0}function eK(t){let e=t;if(j(t)&&(e=eX(t)),!eB(e))throw Error("time must be of type BusinessDay");return{cf:Math.round(new Date(Date.UTC(e.year,e.month-1,e.day,0,0,0,0)).getTime()/1e3),df:e}}function eJ(t){if(!N(t))throw Error("time must be of type isUTCTimestamp");return{cf:t}}function eX(t){let e=new Date(t);if(isNaN(e.getTime()))throw Error(`Invalid date string=${t}, expected format=yyyy-mm-dd`);return{day:e.getUTCDate(),month:e.getUTCMonth()+1,year:e.getUTCFullYear()}}function eQ(t){j(t.time)&&(t.time=eX(t.time))}class eG{options(){return this.Ps}setOptions(t){this.Ps=t,this.updateFormatter(t.localization)}preprocessData(t){Array.isArray(t)?t.forEach(eQ):eQ(t)}createConverterToInternalObj(t){return O(0===t.length?null:eB(t[0].time)||j(t[0].time)?eK:eJ)}key(t){return"object"==typeof t&&"cf"in t?t.cf:this.key(this.convertHorzItemToInternal(t))}cacheKey(t){return void 0===t.df?new Date(1e3*t.cf).getTime():new Date(Date.UTC(t.df.year,t.df.month-1,t.df.day)).getTime()}convertHorzItemToInternal(t){return N(t)?eJ(t):eB(t)?eK(t):eK(eX(t))}updateFormatter(t){if(!this.Ps)return;let e=t.dateFormat;this.Ps.timeScale.timeVisible?this.ff=new eV({sf:e,nf:this.Ps.timeScale.secondsVisible?"%h:%m:%s":"%h:%m",ef:"   ",rf:t.locale}):this.ff=new ej(e,t.locale)}formatHorzItem(t){return this.ff.du(new Date(1e3*t.cf))}formatTickmark(t,e){let i=function(t,e,i){switch(t){case 0:case 10:return e?i?4:3:2;case 20:case 21:case 22:case 30:case 31:case 32:case 33:return e?3:2;case 50:return 2;case 60:return 1;case 70:return 0}}(t.weight,this.Ps.timeScale.timeVisible,this.Ps.timeScale.secondsVisible),s=this.Ps.timeScale;if(void 0!==s.tickMarkFormatter){let h=s.tickMarkFormatter(t.originalTime,i,e.locale);if(null!==h)return h}return function(t,e,i){let s={};switch(e){case 0:s.year="numeric";break;case 1:s.month="short";break;case 2:s.day="numeric";break;case 3:s.hour12=!1,s.hour="2-digit",s.minute="2-digit";break;case 4:s.hour12=!1,s.hour="2-digit",s.minute="2-digit",s.second="2-digit"}let h=new Date(void 0===t.df?1e3*t.cf:Date.UTC(t.df.year,t.df.month-1,t.df.day));return new Date(h.getUTCFullYear(),h.getUTCMonth(),h.getUTCDate(),h.getUTCHours(),h.getUTCMinutes(),h.getUTCSeconds(),h.getUTCMilliseconds()).toLocaleString(i,s)}(t.time,i,e.locale)}maxTickMarkWeight(t){let e=t.reduce(eR,t[0]).weight;return e>30&&e<50&&(e=30),e}fillWeightsForPoints(t,e){!function(t,e=0){if(0===t.length)return;let i=0===e?null:t[e-1].time.cf,s=null!==i?new Date(1e3*i):null,h=0;for(let n=e;n<t.length;++n){let e=t[n],r=new Date(1e3*e.time.cf);null!==s&&(e.timeWeight=eY(r,s)),h+=e.time.cf-(i||e.time.cf),i=e.time.cf,s=r}if(0===e&&t.length>1){let e=Math.ceil(h/(t.length-1)),i=new Date(1e3*(t[0].time.cf-e));t[0].timeWeight=eY(new Date(1e3*t[0].time.cf),i)}}(t,e)}static pf(t){return F({localization:{dateFormat:"dd MMM 'yy"}},t??{})}}let eq="u">typeof window;function eZ(){return!!eq&&window.navigator.userAgent.toLowerCase().indexOf("firefox")>-1}function e0(){return!!eq&&/iPhone|iPad|iPod/.test(window.navigator.platform)}class e1{constructor(t,e,i){this.vf=0,this.mf=null,this.wf={_t:-1/0,ut:1/0},this.gf=0,this.Mf=null,this.bf={_t:-1/0,ut:1/0},this.Sf=null,this.xf=!1,this.Cf=null,this.yf=null,this.kf=!1,this.Pf=!1,this.Tf=!1,this.Rf=null,this.Df=null,this.If=null,this.Vf=null,this.Bf=null,this.Ef=null,this.Af=null,this.Lf=0,this.zf=!1,this.Of=!1,this.Nf=!1,this.Ff=0,this.Wf=null,this.Hf=!e0(),this.Uf=t=>{this.$f(t)},this.qf=t=>{if(this.jf(t)){let e=this.Yf(t);if(++this.gf,this.Mf&&this.gf>1){let{Kf:i}=this.Zf(e3(t),this.bf);i<30&&!this.Tf&&this.Gf(e,this.Jf.Xf),this.Qf()}}else{let e=this.Yf(t);if(++this.vf,this.mf&&this.vf>1){let{Kf:i}=this.Zf(e3(t),this.wf);i<5&&!this.Pf&&this.tp(e,this.Jf.ip),this.sp()}}},this.np=t,this.Jf=e,this.Ps=i,this.ep()}m(){null!==this.Rf&&(this.Rf(),this.Rf=null),null!==this.Df&&(this.Df(),this.Df=null),null!==this.Vf&&(this.Vf(),this.Vf=null),null!==this.Bf&&(this.Bf(),this.Bf=null),null!==this.Ef&&(this.Ef(),this.Ef=null),null!==this.If&&(this.If(),this.If=null),this.rp(),this.sp()}hp(t){this.Vf&&this.Vf();let e=this.ap.bind(this);if(this.Vf=()=>{this.np.removeEventListener("mousemove",e)},this.np.addEventListener("mousemove",e),this.jf(t))return;let i=this.Yf(t);this.tp(i,this.Jf.lp),this.Hf=!0}sp(){null!==this.mf&&clearTimeout(this.mf),this.vf=0,this.mf=null,this.wf={_t:-1/0,ut:1/0}}Qf(){null!==this.Mf&&clearTimeout(this.Mf),this.gf=0,this.Mf=null,this.bf={_t:-1/0,ut:1/0}}ap(t){if(this.Nf||null!==this.yf||this.jf(t))return;let e=this.Yf(t);this.tp(e,this.Jf.op),this.Hf=!0}_p(t){let e=e4(t.changedTouches,O(this.Wf));if(null===e||(this.Ff=e6(t),null!==this.Af)||this.Of)return;this.zf=!0;let{up:i,cp:s,Kf:h}=this.Zf(e3(e),O(this.yf));if(this.kf||!(h<5)){if(!this.kf){let t=.5*i,e=s>=t&&!this.Ps.dp(),h=t>s&&!this.Ps.fp();e||h||(this.Of=!0),this.kf=!0,this.Tf=!0,this.rp(),this.Qf()}if(!this.Of){let i=this.Yf(t,e);this.Gf(i,this.Jf.pp),e5(t)}}}vp(t){if(0!==t.button)return;let{Kf:e}=this.Zf(e3(t),O(this.Cf));if(e>=5&&(this.Pf=!0,this.sp()),this.Pf){let e=this.Yf(t);this.tp(e,this.Jf.mp)}}Zf(t,e){let i=Math.abs(e._t-t._t),s=Math.abs(e.ut-t.ut);return{up:i,cp:s,Kf:i+s}}wp(t){let e=e4(t.changedTouches,O(this.Wf));if(null===e&&0===t.touches.length&&(e=t.changedTouches[0]),null===e)return;this.Wf=null,this.Ff=e6(t),this.rp(),this.yf=null,this.Ef&&(this.Ef(),this.Ef=null);let i=this.Yf(t,e);if(this.Gf(i,this.Jf.gp),++this.gf,this.Mf&&this.gf>1){let{Kf:t}=this.Zf(e3(e),this.bf);t<30&&!this.Tf&&this.Gf(i,this.Jf.Xf),this.Qf()}else this.Tf||(this.Gf(i,this.Jf.Mp),this.Jf.Mp&&e5(t));0===this.gf&&e5(t),0===t.touches.length&&this.xf&&(this.xf=!1,e5(t))}$f(t){if(0!==t.button)return;let e=this.Yf(t);if(this.Cf=null,this.Nf=!1,this.Bf&&(this.Bf(),this.Bf=null),eZ()&&this.np.ownerDocument.documentElement.removeEventListener("mouseleave",this.Uf),!this.jf(t))if(this.tp(e,this.Jf.bp),++this.vf,this.mf&&this.vf>1){let{Kf:i}=this.Zf(e3(t),this.wf);i<5&&!this.Pf&&this.tp(e,this.Jf.ip),this.sp()}else this.Pf||this.tp(e,this.Jf.Sp)}rp(){null!==this.Sf&&(clearTimeout(this.Sf),this.Sf=null)}xp(t){if(null!==this.Wf)return;let e=t.changedTouches[0];this.Wf=e.identifier,this.Ff=e6(t);let i=this.np.ownerDocument.documentElement;this.Tf=!1,this.kf=!1,this.Of=!1,this.yf=e3(e),this.Ef&&(this.Ef(),this.Ef=null);{let e=this._p.bind(this),s=this.wp.bind(this);this.Ef=()=>{i.removeEventListener("touchmove",e),i.removeEventListener("touchend",s)},i.addEventListener("touchmove",e,{passive:!1}),i.addEventListener("touchend",s,{passive:!1}),this.rp(),this.Sf=setTimeout(this.Cp.bind(this,t),240)}let s=this.Yf(t,e);this.Gf(s,this.Jf.yp),this.Mf||(this.gf=0,this.Mf=setTimeout(this.Qf.bind(this),500),this.bf=e3(e))}kp(t){if(0!==t.button)return;let e=this.np.ownerDocument.documentElement;eZ()&&e.addEventListener("mouseleave",this.Uf),this.Pf=!1,this.Cf=e3(t),this.Bf&&(this.Bf(),this.Bf=null);{let t=this.vp.bind(this),i=this.$f.bind(this);this.Bf=()=>{e.removeEventListener("mousemove",t),e.removeEventListener("mouseup",i)},e.addEventListener("mousemove",t),e.addEventListener("mouseup",i)}if(this.Nf=!0,this.jf(t))return;let i=this.Yf(t);this.tp(i,this.Jf.Pp),this.mf||(this.vf=0,this.mf=setTimeout(this.sp.bind(this),500),this.wf=e3(t))}ep(){var t;this.np.addEventListener("mouseenter",this.hp.bind(this)),this.np.addEventListener("touchcancel",this.rp.bind(this));{let t=this.np.ownerDocument,e=t=>{this.Jf.Tp&&(t.composed&&this.np.contains(t.composedPath()[0])||t.target&&this.np.contains(t.target)||this.Jf.Tp())};this.Df=()=>{t.removeEventListener("touchstart",e)},this.Rf=()=>{t.removeEventListener("mousedown",e)},t.addEventListener("mousedown",e),t.addEventListener("touchstart",e,{passive:!0})}e0()&&(this.If=()=>{this.np.removeEventListener("dblclick",this.qf)},this.np.addEventListener("dblclick",this.qf)),this.np.addEventListener("mouseleave",this.Rp.bind(this)),this.np.addEventListener("touchstart",this.xp.bind(this),{passive:!0}),t=this.np,eq&&void 0!==window.chrome&&t.addEventListener("mousedown",t=>{if(1===t.button)return t.preventDefault(),!1}),this.np.addEventListener("mousedown",this.kp.bind(this)),this.Dp(),this.np.addEventListener("touchmove",()=>{},{passive:!1})}Dp(){void 0===this.Jf.Ip&&void 0===this.Jf.Vp&&void 0===this.Jf.Bp||(this.np.addEventListener("touchstart",t=>this.Ep(t.touches),{passive:!0}),this.np.addEventListener("touchmove",t=>{if(2===t.touches.length&&null!==this.Af&&void 0!==this.Jf.Vp){let e=e2(t.touches[0],t.touches[1])/this.Lf;this.Jf.Vp(this.Af,e),e5(t)}},{passive:!1}),this.np.addEventListener("touchend",t=>{this.Ep(t.touches)}))}Ep(t){1===t.length&&(this.zf=!1),2!==t.length||this.zf||this.xf?this.Ap():this.Lp(t)}Lp(t){let e=this.np.getBoundingClientRect()||{left:0,top:0};this.Af={_t:(t[0].clientX-e.left+(t[1].clientX-e.left))/2,ut:(t[0].clientY-e.top+(t[1].clientY-e.top))/2},this.Lf=e2(t[0],t[1]),void 0!==this.Jf.Ip&&this.Jf.Ip(),this.rp()}Ap(){null!==this.Af&&(this.Af=null,void 0!==this.Jf.Bp&&this.Jf.Bp())}Rp(t){if(this.Vf&&this.Vf(),this.jf(t)||!this.Hf)return;let e=this.Yf(t);this.tp(e,this.Jf.zp),this.Hf=!e0()}Cp(t){let e=e4(t.touches,O(this.Wf));if(null===e)return;let i=this.Yf(t,e);this.Gf(i,this.Jf.Op),this.Tf=!0,this.xf=!0}jf(t){return t.sourceCapabilities&&void 0!==t.sourceCapabilities.firesTouchEvents?t.sourceCapabilities.firesTouchEvents:e6(t)<this.Ff+500}Gf(t,e){e&&e.call(this.Jf,t)}tp(t,e){e&&e.call(this.Jf,t)}Yf(t,e){let i=e||t,s=this.np.getBoundingClientRect()||{left:0,top:0};return{clientX:i.clientX,clientY:i.clientY,pageX:i.pageX,pageY:i.pageY,screenX:i.screenX,screenY:i.screenY,localX:i.clientX-s.left,localY:i.clientY-s.top,ctrlKey:t.ctrlKey,altKey:t.altKey,shiftKey:t.shiftKey,metaKey:t.metaKey,Np:!t.type.startsWith("mouse")&&"contextmenu"!==t.type&&"click"!==t.type,Fp:t.type,Wp:i.target,_u:t.view,Hp:()=>{"touchstart"!==t.type&&e5(t)}}}}function e2(t,e){let i=t.clientX-e.clientX,s=t.clientY-e.clientY;return Math.sqrt(i*i+s*s)}function e5(t){t.cancelable&&t.preventDefault()}function e3(t){return{_t:t.pageX,ut:t.pageY}}function e6(t){return t.timeStamp||performance.now()}function e4(t,e){for(let i=0;i<t.length;++i)if(t[i].identifier===e)return t[i];return null}class e8{constructor(t,e,i){this.Up=null,this.$p=null,this.qp=!0,this.jp=null,this.Yp=t,this.Kp=t.Zp()[e],this.Gp=t.Zp()[i],this.Xp=document.createElement("tr"),this.Xp.style.height="1px",this.Jp=document.createElement("td"),this.Jp.style.position="relative",this.Jp.style.padding="0",this.Jp.style.margin="0",this.Jp.setAttribute("colspan","3"),this.Qp(),this.Xp.appendChild(this.Jp),this.qp=this.Yp.N().layout.panes.enableResize,this.qp?this.tv():(this.Up=null,this.$p=null)}m(){null!==this.$p&&this.$p.m()}iv(){return this.Xp}sv(){return e({width:this.Kp.sv().width,height:1})}nv(){return e({width:this.Kp.nv().width,height:+window.devicePixelRatio})}ev(t,e,i){let s=this.nv();t.fillStyle=this.Yp.N().layout.panes.separatorColor,t.fillRect(e,i,s.width,s.height)}kt(){this.Qp(),this.Yp.N().layout.panes.enableResize!==this.qp&&(this.qp=this.Yp.N().layout.panes.enableResize,this.qp?this.tv():(null!==this.Up&&(this.Jp.removeChild(this.Up.rv),this.Jp.removeChild(this.Up.hv),this.Up=null),null!==this.$p&&(this.$p.m(),this.$p=null)))}tv(){let t=document.createElement("div"),e=t.style;e.position="fixed",e.display="none",e.zIndex="49",e.top="0",e.left="0",e.width="100%",e.height="100%",e.cursor="row-resize",this.Jp.appendChild(t);let i=document.createElement("div"),s=i.style;s.position="absolute",s.zIndex="50",s.top="-4px",s.height="9px",s.width="100%",s.backgroundColor="",s.cursor="row-resize",this.Jp.appendChild(i);let h={lp:this.av.bind(this),zp:this.lv.bind(this),Pp:this.ov.bind(this),yp:this.ov.bind(this),mp:this._v.bind(this),pp:this._v.bind(this),bp:this.uv.bind(this),gp:this.uv.bind(this)};this.$p=new e1(i,h,{dp:()=>!1,fp:()=>!0}),this.Up={hv:i,rv:t}}Qp(){this.Jp.style.background=this.Yp.N().layout.panes.separatorColor}av(t){null!==this.Up&&(this.Up.hv.style.backgroundColor=this.Yp.N().layout.panes.separatorHoverColor)}lv(t){null!==this.Up&&null===this.jp&&(this.Up.hv.style.backgroundColor="")}ov(t){if(null===this.Up)return;let e=this.Kp.cv().E_()+this.Gp.cv().E_(),i=e/(this.Kp.sv().height+this.Gp.sv().height),s=30*i;e<=2*s||(this.jp={dv:t.pageY,fv:this.Kp.cv().E_(),pv:e-s,vv:e,mv:i,wv:s},this.Up.rv.style.display="block")}_v(t){let e=this.jp;if(null===e)return;let i=(t.pageY-e.dv)*e.mv,s=el(e.fv+i,e.wv,e.pv);this.Kp.cv().A_(s),this.Gp.cv().A_(e.vv-s),this.Yp.Qt().Ca()}uv(t){null!==this.jp&&null!==this.Up&&(this.jp=null,this.Up.rv.style.display="none")}}function e9(t,e,i){let s=(t.gv-e.gv)/(t.wt-e.wt);return Math.sign(s)*Math.min(Math.abs(s),i)}class e7{constructor(t,e,i,s){this.Mv=null,this.bv=null,this.Sv=null,this.xv=null,this.Cv=null,this.yv=0,this.kv=0,this.Pv=t,this.Tv=e,this.Rv=i,this.kn=s}Dv(t,e){if(null!==this.Mv){if(this.Mv.wt===e)return void(this.Mv.gv=t);if(Math.abs(this.Mv.gv-t)<this.kn)return}this.xv=this.Sv,this.Sv=this.bv,this.bv=this.Mv,this.Mv={wt:e,gv:t}}fe(t,e){var i,s,h,n,r,l,a;let o;if(null===this.Mv||null===this.bv||e-this.Mv.wt>50)return;let u=0,c=e9(this.Mv,this.bv,this.Tv),d=(i=this.Mv,s=this.bv,i.gv-s.gv),f=[c],g=[d];if(u+=d,null!==this.Sv){let t=e9(this.bv,this.Sv,this.Tv);if(Math.sign(t)===Math.sign(c)){let e=(h=this.bv,n=this.Sv,h.gv-n.gv);if(f.push(t),g.push(e),u+=e,null!==this.xv){let t=e9(this.Sv,this.xv,this.Tv);if(Math.sign(t)===Math.sign(c)){let e=(r=this.Sv,l=this.xv,r.gv-l.gv);f.push(t),g.push(e),u+=e}}}}let p=0;for(let t=0;t<f.length;++t)p+=g[t]/u*f[t];Math.abs(p)<this.Pv||(this.Cv={gv:t,wt:e},this.kv=p,this.yv=(a=Math.abs(p),Math.log(-((o=Math.log(this.Rv))/a))/o))}Ac(t){let e=O(this.Cv),i=t-e.wt;return e.gv+this.kv*(Math.pow(this.Rv,i)-1)/Math.log(this.Rv)}Ec(t){return null===this.Cv||this.Iv(t)===this.yv}Iv(t){return Math.min(t-O(this.Cv).wt,this.yv)}}class it{constructor(t,e){this.Vv=void 0,this.Bv=void 0,this.Ev=void 0,this.ws=!1,this.Av=t,this.Lv=e,this.zv()}kt(){this.zv()}Ov(){this.Vv&&this.Av.removeChild(this.Vv),this.Bv&&this.Av.removeChild(this.Bv),this.Vv=void 0,this.Bv=void 0}Nv(){return this.ws!==this.Fv()||this.Ev!==this.Wv()}Wv(){return this.Lv.Qt().Xi().J(this.Lv.N().layout.textColor)>160?"dark":"light"}Fv(){return this.Lv.N().layout.attributionLogo}Hv(){let t=new URL(location.href);return t.hostname?"&utm_source="+t.hostname+t.pathname:""}zv(){this.Nv()&&(this.Ov(),this.ws=this.Fv(),this.ws&&(this.Ev=this.Wv(),this.Bv=document.createElement("style"),this.Bv.innerText="a#tv-attr-logo{--fill:#131722;--stroke:#fff;position:absolute;left:10px;bottom:10px;height:19px;width:35px;margin:0;padding:0;border:0;z-index:3;}a#tv-attr-logo[data-dark]{--fill:#D1D4DC;--stroke:#131722;}",this.Vv=document.createElement("a"),this.Vv.href=`https://www.tradingview.com/?utm_medium=lwc-link&utm_campaign=lwc-chart${this.Hv()}`,this.Vv.title="Charting by TradingView",this.Vv.id="tv-attr-logo",this.Vv.target="_blank",this.Vv.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" width="35" height="19" fill="none"><g fill-rule="evenodd" clip-path="url(#a)" clip-rule="evenodd"><path fill="var(--stroke)" d="M2 0H0v10h6v9h21.4l.5-1.3 6-15 1-2.7H23.7l-.5 1.3-.2.6a5 5 0 0 0-7-.9V0H2Zm20 17h4l5.2-13 .8-2h-7l-1 2.5-.2.5-1.5 3.8-.3.7V17Zm-.8-10a3 3 0 0 0 .7-2.7A3 3 0 1 0 16.8 7h4.4ZM14 7V2H2v6h6v9h4V7h2Z"/><path fill="var(--fill)" d="M14 2H2v6h6v9h6V2Zm12 15h-7l6-15h7l-6 15Zm-7-9a3 3 0 1 0 0-6 3 3 0 0 0 0 6Z"/></g><defs><clipPath id="a"><path fill="var(--stroke)" d="M0 0h35v19H0z"/></clipPath></defs></svg>',this.Vv.toggleAttribute("data-dark","dark"===this.Ev),this.Av.appendChild(this.Bv),this.Av.appendChild(this.Vv)))}}function ie(t,e){let i=O(t.ownerDocument).createElement("canvas");t.appendChild(i);let s=function(t,e){if("device-pixel-content-box"===e.type)return new S(t,e.transform,e.options);throw Error("Unsupported binding target")}(i,{type:"device-pixel-content-box",options:{allowResizeObserver:!0},transform:(t,e)=>({width:Math.max(t.width,e.width),height:Math.max(t.height,e.height)})});return s.resizeCanvasElement(e),s}function ii(t){t.width=1,t.height=1,t.getContext("2d")?.clearRect(0,0,1,1)}function is(t,e,i,s){t.Uh&&t.Uh(e,i,s)}function ih(t,e,i,s){t.nt(e,i,s)}function ir(t,e,i,s){for(let h of t(i,s)){let t=h.Tt(s);null!==t&&e(t)}}function il(t,e){return i=>void 0===i.Ft||(i.Ft()?.ol()??"")!==e?[]:i.Ya?.(t)??[]}function ia(t,e,i,s){if(!t.length)return;let h=0,n=t[0].$t(s,!0),r=1===e?i/2-(t[0].Hi()-n/2):t[0].Hi()-n/2-i/2;r=Math.max(0,r);for(let n=1;n<t.length;n++){let l=t[n],a=t[n-1],o=a.$t(s,!1),u=l.Hi(),c=a.Hi();if(1===e?u>c-o:u<c+o){let s=c-o*e;l.Ui(s);let n=s-e*o/2;if((1===e?n<0:n>i)&&r>0){let s=Math.min(1===e?-1-n:n-i,r);for(let i=h;i<t.length;i++)t[i].Ui(t[i].Hi()+e*s);r-=s}}else h=n,r=1===e?c-o-u:u-(c+o)}}class io{constructor(t,i,s,h){this.Ki=null,this.Uv=null,this.$v=!1,this.qv=new tS(200),this.jv=null,this.Yv=0,this.Kv=!1,this.Zv=()=>{this.Kv||this.yt.Gv().Qt().dr()},this.Xv=()=>{this.Kv||this.yt.Gv().Qt().dr()},this.yt=t,this.Ps=i,this.Co=i.layout,this.hd=s,this.Jv="left"===h,this.Qv=il("normal",h),this.tm=il("top",h),this.im=il("bottom",h),this.Jp=document.createElement("div"),this.Jp.style.height="100%",this.Jp.style.overflow="hidden",this.Jp.style.width="25px",this.Jp.style.left="0",this.Jp.style.position="relative",this.sm=ie(this.Jp,e({width:16,height:16})),this.sm.subscribeSuggestedBitmapSizeChanged(this.Zv);const n=this.sm.canvasElement;n.style.position="absolute",n.style.zIndex="1",n.style.left="0",n.style.top="0",this.nm=ie(this.Jp,e({width:16,height:16})),this.nm.subscribeSuggestedBitmapSizeChanged(this.Xv);const r=this.nm.canvasElement;r.style.position="absolute",r.style.zIndex="2",r.style.left="0",r.style.top="0";const l={Pp:this.ov.bind(this),yp:this.ov.bind(this),mp:this._v.bind(this),pp:this._v.bind(this),Tp:this.rm.bind(this),bp:this.uv.bind(this),gp:this.uv.bind(this),ip:this.hm.bind(this),Xf:this.hm.bind(this),lp:this.am.bind(this),zp:this.lv.bind(this)};this.$p=new e1(this.nm.canvasElement,l,{dp:()=>!this.Ps.handleScroll.vertTouchDrag,fp:()=>!0})}m(){this.$p.m(),this.nm.unsubscribeSuggestedBitmapSizeChanged(this.Xv),ii(this.nm.canvasElement),this.nm.dispose(),this.sm.unsubscribeSuggestedBitmapSizeChanged(this.Zv),ii(this.sm.canvasElement),this.sm.dispose(),null!==this.Ki&&this.Ki.r_().u(this),this.Ki=null}iv(){return this.Jp}k(){return this.Co.fontSize}lm(){let t=this.hd.N();return this.jv!==t.P&&(this.qv.On(),this.jv=t.P),t}om(){var t,e;if(null===this.Ki)return 0;let i=0,s=this.lm(),h=O(this.sm.canvasElement.getContext("2d",{colorSpace:this.yt.Gv().N().layout.colorSpace}));h.save();let n=this.Ki.Vl();h.font=this._m(),n.length>0&&(i=Math.max(this.qv.Ii(h,n[0].Jl),this.qv.Ii(h,n[n.length-1].Jl)));let r=this.um();for(let t=r.length;t--;){let e=this.qv.Ii(h,r[t].ri());e>i&&(i=e)}let l=this.Ki.Lt();if(null!==l&&null!==this.Uv&&2!==(t=this.Ps.crosshair).mode&&t.horzLine.visible&&t.horzLine.labelVisible){let t=this.Ki.Ds(1,l),e=this.Ki.Ds(this.Uv.height-2,l);i=Math.max(i,this.qv.Ii(h,this.Ki.Ji(Math.floor(Math.min(t,e))+.11111111111111,l)),this.qv.Ii(h,this.Ki.Ji(Math.ceil(Math.max(t,e))-.11111111111111,l)))}h.restore();let a=i||34;return(e=Math.ceil(s.S+s.C+s.V+s.B+5+a))+e%2}dm(t){null!==this.Uv&&i(this.Uv,t)||(this.Uv=t,this.Kv=!0,this.sm.resizeCanvasElement(t),this.nm.resizeCanvasElement(t),this.Kv=!1,this.Jp.style.width=`${t.width}px`,this.Jp.style.height=`${t.height}px`)}fm(){return O(this.Uv).width}cs(t){this.Ki!==t&&(null!==this.Ki&&this.Ki.r_().u(this),this.Ki=t,t.r_().i(this.do.bind(this),this))}Ft(){return this.Ki}On(){let t=this.yt.cv();this.yt.Gv().Qt().Q_(t,O(this.Ft()))}pm(t){if(null===this.Uv)return;let e={colorSpace:this.yt.Gv().N().layout.colorSpace};if(1!==t){this.vm(),this.sm.applySuggestedBitmapSize();let t=P(this.sm,e);null!==t&&(t.useBitmapCoordinateSpace(t=>{this.wm(t),this.gm(t)}),this.yt.Mm(t,this.im),this.bm(t),this.yt.Mm(t,this.Qv),this.Sm(t))}this.nm.applySuggestedBitmapSize();let i=P(this.nm,e);null!==i&&(i.useBitmapCoordinateSpace(({context:t,bitmapSize:e})=>{t.clearRect(0,0,e.width,e.height)}),this.xm(i),this.yt.Mm(i,this.tm))}nv(){return this.sm.bitmapSize}ev(t,e,i,s){let h=this.nv();if(h.width>0&&h.height>0&&(t.drawImage(this.sm.canvasElement,e,i),s)){let s=this.nm.canvasElement;t.drawImage(s,e,i)}}kt(){this.Ki?.Vl()}ov(t){if(null===this.Ki||this.Ki.Gi()||!this.Ps.handleScale.axisPressedMouseMove.price)return;let e=this.yt.Gv().Qt(),i=this.yt.cv();this.$v=!0,e.j_(i,this.Ki,t.localY)}_v(t){if(null===this.Ki||!this.Ps.handleScale.axisPressedMouseMove.price)return;let e=this.yt.Gv().Qt(),i=this.yt.cv(),s=this.Ki;e.Y_(i,s,t.localY)}rm(){if(null===this.Ki||!this.Ps.handleScale.axisPressedMouseMove.price)return;let t=this.yt.Gv().Qt(),e=this.yt.cv(),i=this.Ki;this.$v&&(this.$v=!1,t.K_(e,i))}uv(t){if(null===this.Ki||!this.Ps.handleScale.axisPressedMouseMove.price)return;let e=this.yt.Gv().Qt(),i=this.yt.cv();this.$v=!1,e.K_(i,this.Ki)}hm(t){this.Ps.handleScale.axisDoubleClickReset.price&&this.On()}am(t){null!==this.Ki&&(!this.yt.Gv().Qt().N().handleScale.axisPressedMouseMove.price||this.Ki.He()||this.Ki.Eo()||this.Cm(1))}lv(t){this.Cm(0)}um(){let t=[],e=null===this.Ki?void 0:this.Ki;return(i=>{for(let s=0;s<i.length;++s){let h=i[s].Ks(this.yt.cv(),e);for(let e=0;e<h.length;e++)t.push(h[e])}})(this.yt.cv().Dt()),t}wm({context:t,bitmapSize:e}){let{width:i,height:s}=e,h=this.yt.cv().Qt(),n=h.$(),r=h.Kd();n===r?th(t,0,0,i,s,n):tl(t,0,0,i,s,n,r)}gm({context:t,bitmapSize:e,horizontalPixelRatio:i}){let s;if(null===this.Uv||null===this.Ki||!this.Ki.N().borderVisible)return;t.fillStyle=this.Ki.N().borderColor;let h=Math.max(1,Math.floor(this.lm().S*i));s=this.Jv?e.width-h:0,t.fillRect(s,0,h,e.height)}bm(t){if(null===this.Uv||null===this.Ki)return;let e=this.Ki.Vl(),i=this.Ki.N(),s=this.lm(),h=this.Jv?this.Uv.width-s.C:0;i.borderVisible&&i.ticksVisible&&t.useBitmapCoordinateSpace(({context:t,horizontalPixelRatio:n,verticalPixelRatio:r})=>{t.fillStyle=i.borderColor;let l=Math.max(1,Math.floor(r)),a=Math.floor(.5*r),o=Math.round(s.C*n);for(let i of(t.beginPath(),e))t.rect(Math.floor(h*n),Math.round(i.Pl*r)-a,o,l);t.fill()}),t.useMediaCoordinateSpace(({context:t})=>{t.font=this._m(),t.fillStyle=i.textColor??this.Co.textColor,t.textAlign=this.Jv?"right":"left",t.textBaseline="middle";let n=this.Jv?Math.round(h-s.V):Math.round(h+s.C+s.V),r=e.map(e=>this.qv.Di(t,e.Jl));for(let i=e.length;i--;){let s=e[i];t.fillText(s.Jl,n,s.Pl+r[i])}})}vm(){if(null===this.Uv||null===this.Ki)return;let t=this.Uv.height/2,e=[],i=this.Ki.Dt().slice(),s=this.yt.cv(),h=this.lm();this.Ki===s.Gn()&&this.yt.cv().Dt().forEach(t=>{s.Zn(t)&&i.push(t)});let n=this.Ki.Sl()[0],r=this.Ki;i.forEach(i=>{let h=i.Ks(s,r);h.forEach(t=>{t.$i()&&null===t.Wi()&&(t.Ui(null),e.push(t))}),n===i&&h.length>0&&(t=h[0].Ei())}),this.Ki.N().alignLabels&&this.ym(e,h,t)}ym(t,e,i){if(null===this.Uv)return;let s=t.filter(t=>t.Ei()<=i),h=t.filter(t=>t.Ei()>i);for(let i of(s.sort((t,e)=>e.Ei()-t.Ei()),s.length&&h.length&&h.push(s[0]),h.sort((t,e)=>t.Ei()-e.Ei()),t)){let t=Math.floor(i.$t(e)/2),s=i.Ei();s>-t&&s<t&&i.Ui(t),s>this.Uv.height-t&&s<this.Uv.height+t&&i.Ui(this.Uv.height-t)}ia(s,1,this.Uv.height,e),ia(h,-1,this.Uv.height,e)}Sm(t){if(null===this.Uv)return;let e=this.um(),i=this.lm(),s=this.Jv?"right":"left";e.forEach(e=>{e.qi()&&e.Tt(O(this.Ki)).nt(t,i,this.qv,s)})}xm(t){if(null===this.Uv||null===this.Ki)return;let e=this.yt.Gv().Qt(),i=[],s=this.yt.cv(),h=e.gd().Ks(s,this.Ki);h.length&&i.push(h);let n=this.lm(),r=this.Jv?"right":"left";i.forEach(e=>{e.forEach(e=>{e.Tt(O(this.Ki)).nt(t,n,this.qv,r)})})}Cm(t){this.Jp.style.cursor=1===t?"ns-resize":"default"}do(){let t=this.om();this.Yv<t&&this.yt.Gv().Qt().Ca(),this.Yv=t}_m(){return U(this.Co.fontSize,this.Co.fontFamily)}}function iu(t,e){return t.qa?.(e)??[]}function ic(t,e){return t.Ys?.(e)??[]}function id(t,e){return t.ds?.(e)??[]}function ig(t,e){return t.Ha?.(e)??[]}class ip{constructor(t,i){this.Uv=e({width:0,height:0}),this.km=null,this.Pm=null,this.Tm=null,this.Rm=null,this.Dm=!1,this.Im=new A,this.Vm=new A,this.Bm=0,this.Em=!1,this.Am=null,this.Lm=!1,this.zm=null,this.Om=null,this.Kv=!1,this.Zv=()=>{this.Kv||null===this.Nm||this.ns().dr()},this.Xv=()=>{this.Kv||null===this.Nm||this.ns().dr()},this.Lv=t,this.Nm=i,this.Nm.nu().i(this.Fm.bind(this),this,!0),this.Wm=document.createElement("td"),this.Wm.style.padding="0",this.Wm.style.position="relative";const s=document.createElement("div");s.style.width="100%",s.style.height="100%",s.style.position="relative",s.style.overflow="hidden",this.Hm=document.createElement("td"),this.Hm.style.padding="0",this.Um=document.createElement("td"),this.Um.style.padding="0",this.Wm.appendChild(s),this.sm=ie(s,e({width:16,height:16})),this.sm.subscribeSuggestedBitmapSizeChanged(this.Zv);const h=this.sm.canvasElement;h.style.position="absolute",h.style.zIndex="1",h.style.left="0",h.style.top="0",this.nm=ie(s,e({width:16,height:16})),this.nm.subscribeSuggestedBitmapSizeChanged(this.Xv);const n=this.nm.canvasElement;n.style.position="absolute",n.style.zIndex="2",n.style.left="0",n.style.top="0",this.Xp=document.createElement("tr"),this.Xp.appendChild(this.Hm),this.Xp.appendChild(this.Wm),this.Xp.appendChild(this.Um),this.$m(),this.$p=new e1(this.nm.canvasElement,this,{dp:()=>null===this.Am&&!this.Lv.N().handleScroll.vertTouchDrag,fp:()=>null===this.Am&&!this.Lv.N().handleScroll.horzTouchDrag})}m(){null!==this.km&&this.km.m(),null!==this.Pm&&this.Pm.m(),this.Tm=null,this.nm.unsubscribeSuggestedBitmapSizeChanged(this.Xv),ii(this.nm.canvasElement),this.nm.dispose(),this.sm.unsubscribeSuggestedBitmapSizeChanged(this.Zv),ii(this.sm.canvasElement),this.sm.dispose(),null!==this.Nm&&(this.Nm.nu().u(this),this.Nm.m()),this.$p.m()}cv(){return O(this.Nm)}qm(t){null!==this.Nm&&this.Nm.nu().u(this),this.Nm=t,null!==this.Nm&&this.Nm.nu().i(ip.prototype.Fm.bind(this),this,!0),this.$m(),this.Lv.Zp().indexOf(this)===this.Lv.Zp().length-1?(this.Tm=this.Tm??new it(this.Wm,this.Lv),this.Tm.kt()):(this.Tm?.Ov(),this.Tm=null)}Gv(){return this.Lv}iv(){return this.Xp}$m(){if(null!==this.Nm&&(this.jm(),0!==this.ns().tn().length)){if(null!==this.km){let t=this.Nm.U_();this.km.cs(O(t))}if(null!==this.Pm){let t=this.Nm.q_();this.Pm.cs(O(t))}}}Ym(){null!==this.km&&this.km.kt(),null!==this.Pm&&this.Pm.kt()}E_(){return null!==this.Nm?this.Nm.E_():0}A_(t){this.Nm&&this.Nm.A_(t)}lp(t){if(!this.Nm)return;this.Km();let e=t.localX,i=t.localY;this.Zm(e,i,t)}Pp(t){this.Km(),this.Gm(),this.Zm(t.localX,t.localY,t)}op(t){if(!this.Nm)return;this.Km();let e=t.localX,i=t.localY;this.Zm(e,i,t)}Sp(t){null!==this.Nm&&(this.Km(),this.Xm(t))}ip(t){null!==this.Nm&&this.Jm(this.Vm,t)}Xf(t){this.ip(t)}mp(t){this.Km(),this.Qm(t),this.Zm(t.localX,t.localY,t)}bp(t){null!==this.Nm&&(this.Km(),this.Em=!1,this.tw(t))}Mp(t){null!==this.Nm&&this.Xm(t)}Op(t){if(this.Em=!0,null===this.Am){let e={x:t.localX,y:t.localY};this.iw(e,e,t)}}zp(t){null!==this.Nm&&(this.Km(),this.Nm.Qt().vd(null),this.sw())}nw(){return this.Im}ew(){return this.Vm}Ip(){this.Bm=1,this.ns().dn()}Vp(t,e){if(!this.Lv.N().handleScale.pinch)return;let i=5*(e-this.Bm);this.Bm=e,this.ns().Td(t._t,i)}yp(t){this.Em=!1,this.Lm=null!==this.Am,this.Gm();let e=this.ns().gd();null!==this.Am&&e.It()&&(this.zm={x:e.si(),y:e.ni()},this.Am={x:t.localX,y:t.localY})}pp(t){if(null===this.Nm)return;let e=t.localX,i=t.localY;if(null===this.Am)this.Qm(t);else{this.Lm=!1;let s=O(this.zm),h=s.x+(e-this.Am.x),n=s.y+(i-this.Am.y);this.Zm(h,n,t)}}gp(t){0===this.Gv().N().trackingMode.exitMode&&(this.Lm=!0),this.rw(),this.tw(t)}Qn(t,e){let i=this.Nm;return null===i?null:eE(i,t,e)}hw(t,i){O("left"===i?this.km:this.Pm).dm(e({width:t,height:this.Uv.height}))}sv(){return this.Uv}dm(t){i(this.Uv,t)||(this.Uv=t,this.Kv=!0,this.sm.resizeCanvasElement(t),this.nm.resizeCanvasElement(t),this.Kv=!1,this.Wm.style.width=t.width+"px",this.Wm.style.height=t.height+"px")}aw(){let t=O(this.Nm);for(let e of(t.H_(t.U_()),t.H_(t.q_()),t.Sl()))if(t.Zn(e)){let i=e.Ft();null!==i&&t.H_(i),e.Ws()}for(let e of t.ru())e.Ws()}nv(){return this.sm.bitmapSize}ev(t,e,i,s){let h=this.nv();if(h.width>0&&h.height>0&&(t.drawImage(this.sm.canvasElement,e,i),s)){let s=this.nm.canvasElement;null!==t&&t.drawImage(s,e,i)}}pm(t){if(0===t||null===this.Nm)return;t>1&&this.aw(),null!==this.km&&this.km.pm(t),null!==this.Pm&&this.Pm.pm(t);let e={colorSpace:this.Lv.N().layout.colorSpace};if(1!==t){this.sm.applySuggestedBitmapSize();let t=P(this.sm,e);null!==t&&(t.useBitmapCoordinateSpace(t=>{this.wm(t)}),this.Nm&&(this.lw(t,iu),this.ow(t),this.lw(t,ic),this.lw(t,id)))}this.nm.applySuggestedBitmapSize();let i=P(this.nm,e);null!==i&&(i.useBitmapCoordinateSpace(({context:t,bitmapSize:e})=>{t.clearRect(0,0,e.width,e.height)}),this._w(i),this.lw(i,ig),this.lw(i,id))}uw(){return this.km}cw(){return this.Pm}Mm(t,e){this.lw(t,e)}Fm(){null!==this.Nm&&this.Nm.nu().u(this),this.Nm=null}Xm(t){this.Jm(this.Im,t)}Jm(t,e){let i=e.localX,s=e.localY;t.v()&&t.p(this.ns().Et().wc(i),{x:i,y:s},e)}wm({context:t,bitmapSize:e}){let{width:i,height:s}=e,h=this.ns(),n=h.$(),r=h.Kd();n===r?th(t,0,0,i,s,r):tl(t,0,0,i,s,n,r)}ow(t){let e=O(this.Nm),i=e.eu().pr().Tt(e);null!==i&&i.nt(t,!1)}_w(t){this.dw(t,ic,ih,this.ns().gd())}lw(t,e){let i=O(this.Nm),s=i.Dt(),h=i.ru();for(let i of h)this.dw(t,e,is,i);for(let i of s)this.dw(t,e,is,i);for(let i of h)this.dw(t,e,ih,i);for(let i of s)this.dw(t,e,ih,i)}dw(t,e,i,s){let h=O(this.Nm),n=h.Qt().pd(),r=null!==n&&n.hu===s,l=null!==n&&r&&void 0!==n.au?n.au.ie:void 0;ir(e,e=>i(e,t,r,l),s,h)}jm(){if(null===this.Nm)return;let t=this.Lv,e=this.Nm.U_().N().visible,i=this.Nm.q_().N().visible;e||null===this.km||(this.Hm.removeChild(this.km.iv()),this.km.m(),this.km=null),i||null===this.Pm||(this.Um.removeChild(this.Pm.iv()),this.Pm.m(),this.Pm=null);let s=t.Qt().Nd();e&&null===this.km&&(this.km=new io(this,t.N(),s,"left"),this.Hm.appendChild(this.km.iv())),i&&null===this.Pm&&(this.Pm=new io(this,t.N(),s,"right"),this.Um.appendChild(this.Pm.iv()))}fw(t){return t.Np&&this.Em||null!==this.Am}Zm(t,e,i){t=Math.max(0,Math.min(t,this.Uv.width-1)),e=Math.max(0,Math.min(e,this.Uv.height-1)),this.ns().Ad(t,e,i,O(this.Nm))}sw(){this.ns().zd()}rw(){this.Lm&&(this.Am=null,this.sw())}iw(t,e,i){this.Am=t,this.Lm=!1,this.Zm(e.x,e.y,i);let s=this.ns().gd();this.zm={x:s.si(),y:s.ni()}}ns(){return this.Lv.Qt()}tw(t){if(!this.Dm)return;let e=this.ns(),i=this.cv();if(e.X_(i,i.Rs()),this.Rm=null,this.Dm=!1,e.Vd(),null!==this.Om){let t=performance.now(),i=e.Et();this.Om.fe(i.Cc(),t),this.Om.Ec(t)||e.vn(this.Om)}}Km(){this.Am=null}Gm(){if(this.Nm){if(this.ns().dn(),document.activeElement!==document.body&&document.activeElement!==document.documentElement)O(document.activeElement).blur();else{let t=document.getSelection();null!==t&&t.removeAllRanges()}this.Nm.Rs().Gi()||this.ns().Et().Gi()}}Qm(t){if(null===this.Nm)return;let e=this.ns(),i=e.Et();if(i.Gi())return;let s=this.Lv.N(),h=s.handleScroll,n=s.kineticScroll;if((!h.pressedMouseMove||t.Np)&&(!h.horzTouchDrag&&!h.vertTouchDrag||!t.Np))return;let r=this.Nm.Rs(),l=performance.now();if(null!==this.Rm||this.fw(t)||(this.Rm={x:t.clientX,y:t.clientY,cf:l,pw:t.localX,mw:t.localY}),null!==this.Rm&&!this.Dm&&(this.Rm.x!==t.clientX||this.Rm.y!==t.clientY)){if(t.Np&&n.touch||!t.Np&&n.mouse){let t=i.ul();this.Om=new e7(.2/t,7/t,.997,15/t),this.Om.Dv(i.Cc(),this.Rm.cf)}else this.Om=null;r.Gi()||e.Z_(this.Nm,r,t.localY),e.Dd(t.localX),this.Dm=!0}this.Dm&&(r.Gi()||e.G_(this.Nm,r,t.localY),e.Id(t.localX),null!==this.Om&&this.Om.Dv(i.Cc(),l))}}class im{constructor(t,i,s,h,n){this.xt=!0,this.Uv=e({width:0,height:0}),this.Zv=()=>this.pm(3),this.Jv="left"===t,this.hd=s.Nd,this.Ps=i,this.ww=h,this.gw=n,this.Jp=document.createElement("div"),this.Jp.style.width="25px",this.Jp.style.height="100%",this.Jp.style.overflow="hidden",this.sm=ie(this.Jp,e({width:16,height:16})),this.sm.subscribeSuggestedBitmapSizeChanged(this.Zv)}m(){this.sm.unsubscribeSuggestedBitmapSizeChanged(this.Zv),ii(this.sm.canvasElement),this.sm.dispose()}iv(){return this.Jp}sv(){return this.Uv}dm(t){i(this.Uv,t)||(this.Uv=t,this.sm.resizeCanvasElement(t),this.Jp.style.width=`${t.width}px`,this.Jp.style.height=`${t.height}px`,this.xt=!0)}pm(t){if(t<3&&!this.xt||0===this.Uv.width||0===this.Uv.height)return;this.xt=!1,this.sm.applySuggestedBitmapSize();let e=P(this.sm,{colorSpace:this.Ps.layout.colorSpace});null!==e&&e.useBitmapCoordinateSpace(t=>{this.wm(t),this.gm(t)})}nv(){return this.sm.bitmapSize}ev(t,e,i){let s=this.nv();s.width>0&&s.height>0&&t.drawImage(this.sm.canvasElement,e,i)}gm({context:t,bitmapSize:e,horizontalPixelRatio:i,verticalPixelRatio:s}){if(!this.ww())return;t.fillStyle=this.Ps.timeScale.borderColor;let h=Math.floor(this.hd.N().S*i),n=Math.floor(this.hd.N().S*s),r=this.Jv?e.width-h:0;t.fillRect(r,0,h,n)}wm({context:t,bitmapSize:e}){th(t,0,0,e.width,e.height,this.gw())}}function ib(t){return e=>e.Ka?.(t)??[]}let iv=ib("normal"),ix=ib("top"),i_=ib("bottom");class iy{constructor(t,i){this.Mw=null,this.bw=null,this.M=null,this.Sw=!1,this.Uv=e({width:0,height:0}),this.xw=new A,this.qv=new tS(5),this.Kv=!1,this.Zv=()=>{this.Kv||this.Lv.Qt().dr()},this.Xv=()=>{this.Kv||this.Lv.Qt().dr()},this.Lv=t,this.cu=i,this.Ps=t.N().layout,this.Vv=document.createElement("tr"),this.Cw=document.createElement("td"),this.Cw.style.padding="0",this.yw=document.createElement("td"),this.yw.style.padding="0",this.Jp=document.createElement("td"),this.Jp.style.height="25px",this.Jp.style.padding="0",this.kw=document.createElement("div"),this.kw.style.width="100%",this.kw.style.height="100%",this.kw.style.position="relative",this.kw.style.overflow="hidden",this.Jp.appendChild(this.kw),this.sm=ie(this.kw,e({width:16,height:16})),this.sm.subscribeSuggestedBitmapSizeChanged(this.Zv);const s=this.sm.canvasElement;s.style.position="absolute",s.style.zIndex="1",s.style.left="0",s.style.top="0",this.nm=ie(this.kw,e({width:16,height:16})),this.nm.subscribeSuggestedBitmapSizeChanged(this.Xv);const h=this.nm.canvasElement;h.style.position="absolute",h.style.zIndex="2",h.style.left="0",h.style.top="0",this.Vv.appendChild(this.Cw),this.Vv.appendChild(this.Jp),this.Vv.appendChild(this.yw),this.Pw(),this.Lv.Qt().B_().i(this.Pw.bind(this),this),this.$p=new e1(this.nm.canvasElement,this,{dp:()=>!0,fp:()=>!this.Lv.N().handleScroll.horzTouchDrag})}m(){this.$p.m(),null!==this.Mw&&this.Mw.m(),null!==this.bw&&this.bw.m(),this.nm.unsubscribeSuggestedBitmapSizeChanged(this.Xv),ii(this.nm.canvasElement),this.nm.dispose(),this.sm.unsubscribeSuggestedBitmapSizeChanged(this.Zv),ii(this.sm.canvasElement),this.sm.dispose()}iv(){return this.Vv}Tw(){return this.Mw}Rw(){return this.bw}Pp(t){if(this.Sw)return;this.Sw=!0;let e=this.Lv.Qt();!e.Et().Gi()&&this.Lv.N().handleScale.axisPressedMouseMove.time&&e.Pd(t.localX)}yp(t){this.Pp(t)}Tp(){let t=this.Lv.Qt();!t.Et().Gi()&&this.Sw&&(this.Sw=!1,this.Lv.N().handleScale.axisPressedMouseMove.time&&t.Ed())}mp(t){let e=this.Lv.Qt();!e.Et().Gi()&&this.Lv.N().handleScale.axisPressedMouseMove.time&&e.Bd(t.localX)}pp(t){this.mp(t)}bp(){this.Sw=!1;let t=this.Lv.Qt();t.Et().Gi()&&!this.Lv.N().handleScale.axisPressedMouseMove.time||t.Ed()}gp(){this.bp()}ip(){this.Lv.N().handleScale.axisDoubleClickReset.time&&this.Lv.Qt().wn()}Xf(){this.ip()}lp(){this.Lv.Qt().N().handleScale.axisPressedMouseMove.time&&this.Cm(1)}zp(){this.Cm(0)}sv(){return this.Uv}Dw(){return this.xw}Iw(t,s,h){i(this.Uv,t)||(this.Uv=t,this.Kv=!0,this.sm.resizeCanvasElement(t),this.nm.resizeCanvasElement(t),this.Kv=!1,this.Jp.style.width=`${t.width}px`,this.Jp.style.height=`${t.height}px`,this.xw.p(t)),null!==this.Mw&&this.Mw.dm(e({width:s,height:t.height})),null!==this.bw&&this.bw.dm(e({width:h,height:t.height}))}Vw(){let t=this.Bw();return Math.ceil(t.S+t.C+t.k+t.A+t.I+t.Ew)}kt(){this.Lv.Qt().Et().Vl()}nv(){return this.sm.bitmapSize}ev(t,e,i,s){let h=this.nv();if(h.width>0&&h.height>0&&(t.drawImage(this.sm.canvasElement,e,i),s)){let s=this.nm.canvasElement;t.drawImage(s,e,i)}}pm(t){if(0===t)return;let e={colorSpace:this.Ps.colorSpace};if(1!==t){this.sm.applySuggestedBitmapSize();let i=P(this.sm,e);null!==i&&(i.useBitmapCoordinateSpace(t=>{this.wm(t),this.gm(t),this.Aw(i,i_)}),this.bm(i),this.Aw(i,iv)),null!==this.Mw&&this.Mw.pm(t),null!==this.bw&&this.bw.pm(t)}this.nm.applySuggestedBitmapSize();let i=P(this.nm,e);null!==i&&(i.useBitmapCoordinateSpace(({context:t,bitmapSize:e})=>{t.clearRect(0,0,e.width,e.height)}),this.Lw([...this.Lv.Qt().tn(),this.Lv.Qt().gd()],i),this.Aw(i,ix))}Aw(t,e){let i=this.Lv.Qt().tn();for(let s of i)ir(e,e=>is(e,t,!1,void 0),s,void 0);for(let s of i)ir(e,e=>ih(e,t,!1,void 0),s,void 0)}wm({context:t,bitmapSize:e}){th(t,0,0,e.width,e.height,this.Lv.Qt().Kd())}gm({context:t,bitmapSize:e,verticalPixelRatio:i}){if(this.Lv.N().timeScale.borderVisible){t.fillStyle=this.zw();let s=Math.max(1,Math.floor(this.Bw().S*i));t.fillRect(0,0,e.width,s)}}bm(t){let e=this.Lv.Qt().Et(),i=e.Vl();if(!i||0===i.length)return;let s=this.cu.maxTickMarkWeight(i),h=this.Bw(),n=e.N();n.borderVisible&&n.ticksVisible&&t.useBitmapCoordinateSpace(({context:t,horizontalPixelRatio:e,verticalPixelRatio:s})=>{t.strokeStyle=this.zw(),t.fillStyle=this.zw();let n=Math.max(1,Math.floor(e)),r=Math.floor(.5*e);t.beginPath();let l=Math.round(h.C*s);for(let s=i.length;s--;){let h=Math.round(i[s].coord*e);t.rect(h-r,0,n,l)}t.fill()}),t.useMediaCoordinateSpace(({context:t})=>{let e=h.S+h.C+h.A+h.k/2;for(let h of(t.textAlign="center",t.textBaseline="middle",t.fillStyle=this.H(),t.font=this._m(),i))if(h.weight<s){let i=h.needAlignCoordinate?this.Ow(t,h.coord,h.label):h.coord;t.fillText(h.label,i,e)}for(let h of(this.Lv.N().timeScale.allowBoldLabels&&(t.font=this.Nw()),i))if(h.weight>=s){let i=h.needAlignCoordinate?this.Ow(t,h.coord,h.label):h.coord;t.fillText(h.label,i,e)}})}Ow(t,e,i){let s=this.qv.Ii(t,i),h=Math.floor(e-s/2)+.5;return h<0?e+=Math.abs(0-h):h+s>this.Uv.width&&(e-=Math.abs(this.Uv.width-(h+s))),e}Lw(t,e){let i=this.Bw();for(let s of t)for(let t of s.fs())t.Tt().nt(e,i)}zw(){return this.Lv.N().timeScale.borderColor}H(){return this.Ps.textColor}F(){return this.Ps.fontSize}_m(){return U(this.F(),this.Ps.fontFamily)}Nw(){return U(this.F(),this.Ps.fontFamily,"bold")}Bw(){null===this.M&&(this.M={S:1,L:NaN,A:NaN,I:NaN,ts:NaN,C:5,k:NaN,P:"",Qi:new tS,Ew:0});let t=this.M,e=this._m();if(t.P!==e){let i=this.F();t.k=i,t.P=e,t.A=3*i/12,t.I=3*i/12,t.ts=9*i/12,t.L=0,t.Ew=4*i/12,t.Qi.On()}return this.M}Cm(t){this.Jp.style.cursor=1===t?"ew-resize":"default"}Pw(){let t=this.Lv.Qt(),e=t.N();e.leftPriceScale.visible||null===this.Mw||(this.Cw.removeChild(this.Mw.iv()),this.Mw.m(),this.Mw=null),e.rightPriceScale.visible||null===this.bw||(this.yw.removeChild(this.bw.iv()),this.bw.m(),this.bw=null);let i={Nd:this.Lv.Qt().Nd()},s=()=>e.leftPriceScale.borderVisible&&t.Et().N().borderVisible,h=()=>t.Kd();e.leftPriceScale.visible&&null===this.Mw&&(this.Mw=new im("left",e,i,s,h),this.Cw.appendChild(this.Mw.iv())),e.rightPriceScale.visible&&null===this.bw&&(this.bw=new im("right",e,i,s,h),this.yw.appendChild(this.bw.iv()))}}let iw=!!eq&&!!navigator.userAgentData&&navigator.userAgentData.brands.some(t=>t.brand.includes("Chromium"))&&!!eq&&(navigator?.userAgentData?.platform?"Windows"===navigator.userAgentData.platform:navigator.userAgent.toLowerCase().indexOf("win")>=0);class iM{constructor(t,e,i){var s;this.Fw=[],this.Ww=[],this.Hw=0,this.eo=0,this.S_=0,this.Uw=0,this.$w=0,this.qw=null,this.jw=!1,this.Im=new A,this.Vm=new A,this.nd=new A,this.Yw=null,this.Kw=null,this.Av=t,this.Ps=e,this.cu=i,this.Vv=document.createElement("div"),this.Vv.classList.add("tv-lightweight-charts"),this.Vv.style.overflow="hidden",this.Vv.style.direction="ltr",this.Vv.style.width="100%",this.Vv.style.height="100%",(s=this.Vv).style.userSelect="none",s.style.webkitUserSelect="none",s.style.msUserSelect="none",s.style.MozUserSelect="none",s.style.webkitTapHighlightColor="transparent",this.Zw=document.createElement("table"),this.Zw.setAttribute("cellspacing","0"),this.Vv.appendChild(this.Zw),this.Gw=this.Xw.bind(this),iS(this.Ps)&&this.Jw(!0),this.ns=new eF(this.rd.bind(this),this.Ps,i),this.Qt().Md().i(this.Qw.bind(this),this),this.tg=new iy(this,this.cu),this.Zw.appendChild(this.tg.iv());const h=e.autoSize&&this.ig();let n=this.Ps.width,r=this.Ps.height;if(h||0===n||0===r){const e=t.getBoundingClientRect();n=n||e.width,r=r||e.height}this.sg(n,r),this.ng(),t.appendChild(this.Vv),this.eg(),this.ns.Et().Oc().i(this.ns.Ca.bind(this.ns),this),this.ns.B_().i(this.ns.Ca.bind(this.ns),this)}Qt(){return this.ns}N(){return this.Ps}Zp(){return this.Fw}rg(){return this.tg}m(){for(let t of(this.Jw(!1),0!==this.Hw&&window.cancelAnimationFrame(this.Hw),this.ns.Md().u(this),this.ns.Et().Oc().u(this),this.ns.B_().u(this),this.ns.m(),this.Fw))this.Zw.removeChild(t.iv()),t.nw().u(this),t.ew().u(this),t.m();for(let t of(this.Fw=[],this.Ww))this.hg(t);this.Ww=[],O(this.tg).m(),null!==this.Vv.parentElement&&this.Vv.parentElement.removeChild(this.Vv),this.nd.m(),this.Im.m(),this.Vm.m(),this.ag()}sg(t,i,s=!1){var h;let n,r;if(this.eo===i&&this.S_===t)return;let l=(n=Math.floor((h=e({width:t,height:i})).width),e({width:n-n%2,height:(r=Math.floor(h.height))-r%2}));this.eo=l.height,this.S_=l.width;let a=this.eo+"px",o=this.S_+"px";O(this.Vv).style.height=a,O(this.Vv).style.width=o,this.Zw.style.height=a,this.Zw.style.width=o,s?this.lg(tb.yn(),performance.now()):this.ns.Ca()}pm(t){void 0===t&&(t=tb.yn());for(let e=0;e<this.Fw.length;e++)this.Fw[e].pm(t.un(e).an);this.Ps.timeScale.visible&&this.tg.pm(t._n())}cr(t){let e=iS(this.Ps);this.ns.cr(t);let i=iS(this.Ps);i!==e&&this.Jw(i),t.layout?.panes&&this.og(),this.eg(),this._g(t)}nw(){return this.Im}ew(){return this.Vm}Md(){return this.nd}ug(t=!1){null!==this.qw&&(this.lg(this.qw,performance.now()),this.qw=null);let e=this.cg(null),i=document.createElement("canvas");i.width=e.width,i.height=e.height;let s=O(i.getContext("2d"));return this.cg(s,t),i}dg(t){return("left"!==t||this.fg())&&("right"!==t||this.pg())&&0!==this.Fw.length?O("left"===t?this.Fw[0].uw():this.Fw[0].cw()).fm():0}vg(){return this.Ps.autoSize&&null!==this.Yw}hv(){return this.Vv}mg(t){this.Kw=t,this.Kw?this.hv().style.setProperty("cursor",t):this.hv().style.removeProperty("cursor")}wg(){return this.Kw}gg(t){return z(this.Fw[t]).sv()}og(){this.Ww.forEach(t=>{t.kt()})}_g(t){(void 0!==t.autoSize||!this.Yw||void 0===t.width&&void 0===t.height)&&(t.autoSize&&!this.Yw&&this.ig(),!1===t.autoSize&&null!==this.Yw&&this.ag(),t.autoSize||void 0===t.width&&void 0===t.height||this.sg(t.width||this.S_,t.height||this.eo))}cg(t,i){let s=0,h=0,n=this.Fw[0],r=(e,s)=>{let h=0;for(let n=0;n<this.Fw.length;n++){let r=this.Fw[n],l=O("left"===e?r.uw():r.cw()),a=l.nv();if(null!==t&&l.ev(t,s,h,i),h+=a.height,n<this.Fw.length-1){let e=this.Ww[n],i=e.nv();null!==t&&e.ev(t,s,h),h+=i.height}}};this.fg()&&(r("left",0),s+=O(n.uw()).nv().width);for(let e=0;e<this.Fw.length;e++){let n=this.Fw[e],r=n.nv();if(null!==t&&n.ev(t,s,h,i),h+=r.height,e<this.Fw.length-1){let i=this.Ww[e],n=i.nv();null!==t&&i.ev(t,s,h),h+=n.height}}s+=n.nv().width,this.pg()&&(r("right",s),s+=O(n.cw()).nv().width);let l=(e,i,s)=>{O("left"===e?this.tg.Tw():this.tg.Rw()).ev(O(t),i,s)};if(this.Ps.timeScale.visible){let e=this.tg.nv();if(null!==t){let s=0;this.fg()&&(l("left",s,h),s=O(n.uw()).nv().width),this.tg.ev(t,s,h,i),s+=e.width,this.pg()&&l("right",s,h)}h+=e.height}return e({width:s,height:h})}Mg(){var t,i,s;let h=0,n=0,r=0;for(let t of this.Fw)this.fg()&&(n=Math.max(n,O(t.uw()).om(),this.Ps.leftPriceScale.minimumWidth)),this.pg()&&(r=Math.max(r,O(t.cw()).om(),this.Ps.rightPriceScale.minimumWidth)),h+=t.E_();n=(i=n)+i%2,r=(s=r)+s%2;let l=this.S_,a=this.eo,o=Math.max(l-n-r,0),u=+this.Ww.length,c=this.Ps.timeScale.visible,d=c?Math.max(this.tg.Vw(),this.Ps.timeScale.minimumHeight):0,f=u+(d=(t=d)+t%2),g=a<f?0:a-f,p=g/h,m=0,b=window.devicePixelRatio||1;for(let t=0;t<this.Fw.length;++t){let i=this.Fw[t];i.qm(this.ns.Xs()[t]);let s=0;s=Math.max(t===this.Fw.length-1?Math.ceil((g-m)*b)/b:Math.round(i.E_()*p*b)/b,2),m+=s,i.dm(e({width:o,height:s})),this.fg()&&i.hw(n,"left"),this.pg()&&i.hw(r,"right"),i.cv()&&this.ns.bd(i.cv(),s)}this.tg.Iw(e({width:c?o:0,height:d}),c?n:0,c?r:0),this.ns.L_(o),this.Uw!==n&&(this.Uw=n),this.$w!==r&&(this.$w=r)}Jw(t){t?this.Vv.addEventListener("wheel",this.Gw,{passive:!1}):this.Vv.removeEventListener("wheel",this.Gw)}bg(t){switch(t.deltaMode){case t.DOM_DELTA_PAGE:return 120;case t.DOM_DELTA_LINE:return 32}return iw?1/window.devicePixelRatio:1}Xw(t){if(!(0!==t.deltaX&&this.Ps.handleScroll.mouseWheel||0!==t.deltaY&&this.Ps.handleScale.mouseWheel))return;let e=this.bg(t),i=e*t.deltaX/100,s=-e*t.deltaY/100;if(t.cancelable&&t.preventDefault(),0!==s&&this.Ps.handleScale.mouseWheel){let e=Math.sign(s)*Math.min(1,Math.abs(s)),i=t.clientX-this.Vv.getBoundingClientRect().left;this.Qt().Td(i,e)}0!==i&&this.Ps.handleScroll.mouseWheel&&this.Qt().Rd(-80*i)}lg(t,e){let i=t._n();3===i&&this.Sg(),3!==i&&2!==i||(this.xg(t),this.Cg(t,e),this.tg.kt(),this.Fw.forEach(t=>{t.Ym()}),3===this.qw?._n()&&(this.qw.Sn(t),this.Sg(),this.xg(this.qw),this.Cg(this.qw,e),t=this.qw,this.qw=null)),this.pm(t)}Cg(t,e){for(let i of t.bn())this.xn(i,e)}xg(t){let e=this.ns.Xs();for(let i=0;i<e.length;i++)t.un(i).ln&&e[i].tu()}xn(t,e){let i=this.ns.Et();switch(t.fn){case 0:i.Fc();break;case 1:i.Wc(t.Wt);break;case 2:i.gn(t.Wt);break;case 3:i.Mn(t.Wt);break;case 4:i.Pc();break;case 5:t.Wt.Ec(e)||i.Mn(t.Wt.Ac(e))}}rd(t){null!==this.qw?this.qw.Sn(t):this.qw=t,this.jw||(this.jw=!0,this.Hw=window.requestAnimationFrame(t=>{if(this.jw=!1,this.Hw=0,null!==this.qw){let e=this.qw;for(let i of(this.qw=null,this.lg(e,t),e.bn()))if(5===i.fn&&!i.Wt.Ec(t)){this.Qt().vn(i.Wt);break}}}))}Sg(){this.ng()}hg(t){this.Zw.removeChild(t.iv()),t.m()}ng(){let t=this.ns.Xs(),e=t.length,i=this.Fw.length;for(let t=e;t<i;t++){let t=z(this.Fw.pop());this.Zw.removeChild(t.iv()),t.nw().u(this),t.ew().u(this),t.m();let e=this.Ww.pop();void 0!==e&&this.hg(e)}for(let s=i;s<e;s++){let e=new ip(this,t[s]);if(e.nw().i(this.yg.bind(this,e),this),e.ew().i(this.kg.bind(this,e),this),this.Fw.push(e),s>0){let t=new e8(this,s-1,s);this.Ww.push(t),this.Zw.insertBefore(t.iv(),this.tg.iv())}this.Zw.insertBefore(e.iv(),this.tg.iv())}for(let i=0;i<e;i++){let e=t[i],s=this.Fw[i];s.cv()!==e?s.qm(e):s.$m()}this.eg(),this.Mg()}Pg(t,e,i,s){let h,n=new Map;if(null!==t&&this.ns.tn().forEach(e=>{let i=e.qs().$s(t);null!==i&&n.set(e,i)}),null!==t){let e=this.ns.Et().es(t)?.originalTime;void 0!==e&&(h=e)}let r=this.Qt().pd(),l=null!==r&&r.hu instanceof es?r.hu:void 0,a=null!==r&&void 0!==r.au?r.au.te:void 0,o=this.Tg(s);return{Gr:h,js:t??void 0,Rg:e??void 0,Dg:-1!==o?o:void 0,Ig:l,Vg:n,Bg:a,Eg:i??void 0}}Tg(t){let e=-1;if(t)e=this.Fw.indexOf(t);else{let t=this.Qt().gd().Gs();null!==t&&(e=this.Qt().Xs().indexOf(t))}return e}yg(t,e,i,s){this.Im.p(()=>this.Pg(e,i,s,t))}kg(t,e,i,s){this.Vm.p(()=>this.Pg(e,i,s,t))}Qw(t,e,i){this.mg(this.Qt().pd()?.ou??null),this.nd.p(()=>this.Pg(t,e,i))}eg(){let t=this.Ps.timeScale.visible?"":"none";this.tg.iv().style.display=t}fg(){return this.Fw[0].cv().U_().N().visible}pg(){return this.Fw[0].cv().q_().N().visible}ig(){return"ResizeObserver"in window&&(this.Yw=new ResizeObserver(t=>{let e=t[t.length-1];e&&this.sg(e.contentRect.width,e.contentRect.height)}),this.Yw.observe(this.Av,{box:"border-box"}),!0)}ag(){null!==this.Yw&&this.Yw.disconnect(),this.Yw=null}}function iS(t){return!!(t.handleScroll.mouseWheel||t.handleScale.mouseWheel)}function ik(t,e,i,s){let h=i.value,n={js:e,wt:t,Wt:[h,h,h,h],Gr:s};return void 0!==i.color&&(n.R=i.color),n}function iC(t,e,i,s){let h=i.value,n={js:e,wt:t,Wt:[h,h,h,h],Gr:s};return void 0!==i.lineColor&&(n.vt=i.lineColor),void 0!==i.topColor&&(n.eh=i.topColor),void 0!==i.bottomColor&&(n.rh=i.bottomColor),n}function iP(t,e,i,s){let h=i.value,n={js:e,wt:t,Wt:[h,h,h,h],Gr:s};return void 0!==i.topLineColor&&(n.hh=i.topLineColor),void 0!==i.bottomLineColor&&(n.ah=i.bottomLineColor),void 0!==i.topFillColor1&&(n.oh=i.topFillColor1),void 0!==i.topFillColor2&&(n._h=i.topFillColor2),void 0!==i.bottomFillColor1&&(n.uh=i.bottomFillColor1),void 0!==i.bottomFillColor2&&(n.dh=i.bottomFillColor2),n}function iE(t,e,i,s){let h={js:e,wt:t,Wt:[i.open,i.high,i.low,i.close],Gr:s};return void 0!==i.color&&(h.R=i.color),h}function iL(t,e,i,s){let h={js:e,wt:t,Wt:[i.open,i.high,i.low,i.close],Gr:s};return void 0!==i.color&&(h.R=i.color),void 0!==i.borderColor&&(h.Ht=i.borderColor),void 0!==i.wickColor&&(h.nh=i.wickColor),h}function iD(t,e,i,s,h){let n=z(h)(i),r=Math.max(...n),l=Math.min(...n),a=n[n.length-1],{time:o,color:u,...c}=i;return{js:e,wt:t,Wt:[a,r,l,a],Gr:s,le:c,R:u}}function iT(t){return void 0!==t.Wt}function iz(t,e){return void 0!==e.customValues&&(t.Ag=e.customValues),t}function iO(t){return(e,i,s,h,n,r)=>(r?r(s):void 0===s.open&&void 0===s.value)?iz({wt:e,js:i,Gr:h},s):iz(t(e,i,s,h,n),s)}function iR(t){return({Candlestick:iO(iL),Bar:iO(iE),Area:iO(iC),Baseline:iO(iP),Histogram:iO(ik),Line:iO(ik),Custom:iO(iD)})[t]}function iA(t){return{js:0,Lg:new Map,Ea:t}}function iF(t,e){if(void 0!==t&&0!==t.length)return{zg:e.key(t[0].wt),Og:e.key(t[t.length-1].wt)}}function iN(t){let e;return t.forEach(t=>{void 0===e&&(e=t.Gr)}),z(e)}class iB{constructor(t){this.Ng=new Map,this.Fg=new Map,this.Wg=new Map,this.Hg=[],this.cu=t}m(){this.Ng.clear(),this.Fg.clear(),this.Wg.clear(),this.Hg=[]}Ug(t,e){let i=0!==this.Ng.size,s=!1,h=this.Fg.get(t);if(void 0!==h)if(1===this.Fg.size)i=!1,s=!0,this.Ng.clear();else for(let e of this.Hg)e.pointData.Lg.delete(t)&&(s=!0);let n=[];if(0!==e.length){let i=e.map(t=>t.time),h=this.cu.createConverterToInternalObj(e),r=iR(t.wh()),l=t.rl(),a=t.hl();n=e.map((e,n)=>{let o=h(e.time),u=this.cu.key(o),c=this.Ng.get(u);void 0===c&&(c=iA(o),this.Ng.set(u,c),s=!0);let d=r(o,c.js,e,i[n],l,a);return c.Lg.set(t,d),d})}i&&this.$g(),this.qg(t,n);let r=-1;if(s){let t=[];this.Ng.forEach(e=>{t.push({timeWeight:0,time:e.Ea,pointData:e,originalTime:iN(e.Lg)})}),t.sort((t,e)=>this.cu.key(t.time)-this.cu.key(e.time)),r=this.jg(t)}return this.Yg(t,r,function(t,e,i){let s=iF(t,i),h=iF(e,i);if(void 0!==s&&void 0!==h)return{Kg:!1,Ta:s.Og>=h.Og&&s.zg>=h.zg}}(this.Fg.get(t),h,this.cu))}Hd(t){return this.Ug(t,[])}Zg(t,e,i){if(i&&t.La())throw Error("Historical updates are not supported when conflation is enabled. Conflation requires data to be processed in order.");void 0===e.Gr&&(e.Gr=e.time),this.cu.preprocessData(e);let s=this.cu.createConverterToInternalObj([e])(e.time),h=this.Wg.get(t);if(!i&&void 0!==h&&this.cu.key(s)<this.cu.key(h))throw Error(`Cannot update oldest data, last time=${h}, new time=${s}`);let n=this.Ng.get(this.cu.key(s));if(i&&void 0===n)throw Error("Cannot update non-existing data point when historicalUpdate is true");let r=void 0===n;void 0===n&&(n=iA(s),this.Ng.set(this.cu.key(s),n));let l=iR(t.wh()),a=t.rl(),o=t.hl(),u=l(s,n.js,e,e.Gr,a,o),c=!i&&!r&&void 0!==h&&this.cu.key(s)===this.cu.key(h);n.Lg.set(t,u),i?this.Gg(t,u,n.js):(c&&t.La()&&iT(u)&&t.kr(u),this.Xg(t,u));let d={Ta:iT(u),Kg:i};if(!r)return this.Yg(t,-1,d);let f={timeWeight:0,time:n.Ea,pointData:n,originalTime:iN(n.Lg)},g=tK(this.Hg,this.cu.key(f.time),(t,e)=>this.cu.key(t.time)<e);this.Hg.splice(g,0,f);for(let t=g;t<this.Hg.length;++t)ij(this.Hg[t].pointData,t);return this.cu.fillWeightsForPoints(this.Hg,g),this.Yg(t,g,d)}Jg(t,e){let i=this.Fg.get(t);if(void 0===i||e<=0)return[[],this.Qg()];e=Math.min(e,i.length);let s=i.splice(-e).reverse();for(let e of(0===i.length?this.Wg.delete(t):this.Wg.set(t,i[i.length-1].wt),s)){let i=this.Ng.get(this.cu.key(e.wt));if(i&&(i.Lg.delete(t),0===i.Lg.size)){this.Ng.delete(this.cu.key(i.Ea)),this.Hg.splice(i.js,1);for(let t=i.js;t<this.Hg.length;++t)ij(this.Hg[t].pointData,t)}}return[s,this.Yg(t,this.Hg.length-1,{Kg:!1,Ta:!1})]}Xg(t,e){let i=this.Fg.get(t);void 0===i&&(i=[],this.Fg.set(t,i));let s=0!==i.length?i[i.length-1]:null;null===s||this.cu.key(e.wt)>this.cu.key(s.wt)?iT(e)&&i.push(e):iT(e)?i[i.length-1]=e:i.splice(-1,1),this.Wg.set(t,e.wt)}Gg(t,e,i){let s=this.Fg.get(t);if(void 0===s)return;let h=tK(s,i,(t,e)=>t.js<e);iT(e)?s[h]=e:s.splice(h,1)}qg(t,e){0!==e.length?(this.Fg.set(t,e.filter(iT)),this.Wg.set(t,e[e.length-1].wt)):(this.Fg.delete(t),this.Wg.delete(t))}$g(){for(let t of this.Hg)0===t.pointData.Lg.size&&this.Ng.delete(this.cu.key(t.time))}jg(t){let e=-1;for(let i=0;i<this.Hg.length&&i<t.length;++i){let s=this.Hg[i],h=t[i];if(this.cu.key(s.time)!==this.cu.key(h.time)){e=i;break}h.timeWeight=s.timeWeight,ij(h.pointData,i)}if(-1===e&&this.Hg.length!==t.length&&(e=Math.min(this.Hg.length,t.length)),-1===e)return -1;for(let i=e;i<t.length;++i)ij(t[i].pointData,i);return this.cu.fillWeightsForPoints(t,e),this.Hg=t,e}tM(){if(0===this.Fg.size)return null;let t=0;return this.Fg.forEach(e=>{0!==e.length&&(t=Math.max(t,e[e.length-1].js))}),t}Yg(t,e,i){let s=this.Qg();if(-1!==e)this.Fg.forEach((e,h)=>{s.F_.set(h,{le:e,iM:h===t?i:void 0})}),this.Fg.has(t)||s.F_.set(t,{le:[],iM:i}),s.Et.sM=this.Hg,s.Et.nM=e;else{let e=this.Fg.get(t);s.F_.set(t,{le:e||[],iM:i})}return s}Qg(){return{F_:new Map,Et:{vc:this.tM()}}}}function ij(t,e){t.js=e,t.Lg.forEach(t=>{t.js=e})}function iI(t,e){return t.wt<e}function iW(t,e){return e<t.wt}class iV{constructor(t,e,i){this.eM=!0,this.rM=!0,this.hM=!0,this.aM=[],this.lM=null,this.oM=-1,this.ee=t,this.re=e,this._M=i}kt(t){this.eM=!0,"data"===t&&(this.rM=!0),"options"===t&&(this.hM=!0)}Tt(){return this.ee.It()?(this.uM(),null===this.lM?null:this.cM):null}dM(){this.aM=this.aM.map(t=>({...t,...this.ee.ga().gh(t.wt)}))}fM(){this.lM=null}uM(){let t=this.re.Et(),e=t.N().enableConflation?t.Hc():0;e!==this.oM&&(this.rM=!0,this.oM=e),this.rM&&(this.pM(),this.rM=!1),this.hM&&(this.dM(),this.hM=!1),this.eM&&(this.vM(),this.eM=!1)}vM(){let t=this.ee.Ft(),e=this.re.Et();if(this.fM(),e.Gi()||t.Gi())return;let i=e.Ie();if(null===i||0===this.ee.qs().yh())return;let s=this.ee.Lt();null!==s&&(this.lM=function(t,e,i){let s=e.Aa(),h=e.bi(),n=tK(t,s,iI),r=tJ(t,h,iW);if(!i)return{from:n,to:r};let l=n,a=r;return n>0&&n<t.length&&t[n].wt>=s&&(l=n-1),r>0&&r<t.length&&t[r-1].wt<=h&&(a=r+1),{from:l,to:a}}(this.aM,i,this._M),this.mM(t,e,s.Wt),this.wM())}}class iH{constructor(t,e){this.gM=t,this.Ki=e}nt(t,e,i){this.gM.draw(t,this.Ki,e,i)}}class i$ extends iV{constructor(t,e,i){super(t,e,!1),this.$h=i,this.cM=new iH(this.$h.renderer(),e=>{let i=t.Lt();return null===i?null:t.Ft().Nt(e,i.Wt)})}get ma(){return this.$h.conflationReducer}Oa(t){return this.$h.priceValueBuilder(t)}al(t){return this.$h.isWhitespace(t)}pM(){let t=this.ee.ga();this.aM=this.ee.Na().Dh().map(e=>({wt:e.js,_t:NaN,...t.gh(e.js),MM:e.le}))}mM(t,e){e.mc(this.aM,H(this.lM))}wM(){this.$h.update({bars:this.aM.map(iU),barSpacing:this.re.Et().ul(),visibleRange:this.lM,conflationFactor:this.re.Et().Hc()},this.ee.N())}}function iU(t){return{x:t._t,time:t.wt,originalData:t.MM,barColor:t.th}}let iY={color:"#2196f3"},iK=(t,e,i)=>new i$(t,e,R(i));function iJ(t){let e={value:t.Wt[3],time:t.Gr};return void 0!==t.Ag&&(e.customValues=t.Ag),e}function iX(t){let e=iJ(t);return void 0!==t.R&&(e.color=t.R),e}function iQ(t){let e=iJ(t);return void 0!==t.vt&&(e.lineColor=t.vt),void 0!==t.eh&&(e.topColor=t.eh),void 0!==t.rh&&(e.bottomColor=t.rh),e}function iG(t){let e=iJ(t);return void 0!==t.hh&&(e.topLineColor=t.hh),void 0!==t.ah&&(e.bottomLineColor=t.ah),void 0!==t.oh&&(e.topFillColor1=t.oh),void 0!==t._h&&(e.topFillColor2=t._h),void 0!==t.uh&&(e.bottomFillColor1=t.uh),void 0!==t.dh&&(e.bottomFillColor2=t.dh),e}function iq(t){let e={open:t.Wt[0],high:t.Wt[1],low:t.Wt[2],close:t.Wt[3],time:t.Gr};return void 0!==t.Ag&&(e.customValues=t.Ag),e}function iZ(t){let e=iq(t);return void 0!==t.R&&(e.color=t.R),e}function i0(t){let e=iq(t),{R:i,Ht:s,nh:h}=t;return void 0!==i&&(e.color=i),void 0!==s&&(e.borderColor=s),void 0!==h&&(e.wickColor=h),e}function i1(t){return({Area:iQ,Line:iX,Baseline:iG,Histogram:iX,Bar:iZ,Candlestick:i0,Custom:i2})[t]}function i2(t){let e=t.Gr;return{...t.le,time:e}}let i5={vertLine:{color:"#9598A1",width:1,style:3,visible:!0,labelVisible:!0,labelBackgroundColor:"#131722"},horzLine:{color:"#9598A1",width:1,style:3,visible:!0,labelVisible:!0,labelBackgroundColor:"#131722"},mode:1,doNotSnapToHiddenSeriesIndices:!1},i3={vertLines:{color:"#D6DCDE",style:0,visible:!0},horzLines:{color:"#D6DCDE",style:0,visible:!0}},i6={background:{type:"solid",color:"#FFFFFF"},textColor:"#191919",fontSize:12,fontFamily:$,panes:{enableResize:!0,separatorColor:"#E0E3EB",separatorHoverColor:"rgba(178, 181, 189, 0.2)"},attributionLogo:!0,colorSpace:"srgb",colorParsers:[]},i4={autoScale:!0,mode:0,invertScale:!1,alignLabels:!0,borderVisible:!0,borderColor:"#2B2B43",entireTextOnly:!1,visible:!1,ticksVisible:!1,scaleMargins:{bottom:.1,top:.2},minimumWidth:0,ensureEdgeTickMarksVisible:!1},i8={rightOffset:0,barSpacing:6,minBarSpacing:.5,maxBarSpacing:0,fixLeftEdge:!1,fixRightEdge:!1,lockVisibleTimeRangeOnResize:!1,rightBarStaysOnScroll:!1,borderVisible:!0,borderColor:"#2B2B43",visible:!0,timeVisible:!1,secondsVisible:!0,shiftVisibleRangeOnNewBar:!0,allowShiftVisibleRangeOnWhitespaceReplacement:!1,ticksVisible:!1,uniformDistribution:!1,minimumHeight:0,allowBoldLabels:!0,ignoreWhitespaceIndices:!1,enableConflation:!1,conflationThresholdFactor:1,precomputeConflationOnInit:!1,precomputeConflationPriority:"background"};function i9(){return{addDefaultPane:!0,width:0,height:0,autoSize:!1,layout:i6,crosshair:i5,grid:i3,overlayPriceScales:{...i4},leftPriceScale:{...i4,visible:!1},rightPriceScale:{...i4,visible:!0},timeScale:i8,localization:{locale:eq?navigator.language:"",dateFormat:"dd MMM 'yy"},handleScroll:{mouseWheel:!0,pressedMouseMove:!0,horzTouchDrag:!0,vertTouchDrag:!0},handleScale:{axisPressedMouseMove:{time:!0,price:!0},axisDoubleClickReset:{time:!0,price:!0},mouseWheel:!0,pinch:!0},kineticScroll:{mouse:!1,touch:!0},trackingMode:{exitMode:1}}}class i7{constructor(t,e,i){this.Yp=t,this.bM=e,this.SM=i??0}applyOptions(t){this.Yp.Qt().md(this.bM,t,this.SM)}options(){return this.Ki().N()}width(){return tm(this.bM)?this.Yp.dg(this.bM):0}setVisibleRange(t){this.setAutoScale(!1),this.Ki().$o(new tF(t.from,t.to))}getVisibleRange(){let t,e,i=this.Ki().er();if(null===i)return null;if(this.Ki().io()){let s=this.Ki().m_(),h=eN(s);t=Number((Math.round((i=eb(i,this.Ki().no())).Ze()/s)*s).toFixed(h)),e=Number((Math.round(i.Ge()/s)*s).toFixed(h))}else t=i.Ze(),e=i.Ge();return{from:t,to:e}}setAutoScale(t){this.applyOptions({autoScale:t})}Ki(){return O(this.Yp.Qt().wd(this.bM,this.SM)).Ft}}class st{constructor(t,e,i,s){this.Yp=t,this.yt=i,this.xM=e,this.CM=s}getHeight(){return this.yt.$t()}setHeight(t){let e=this.Yp.Qt(),i=e.Gd(this.yt);e.xd(i,t)}getStretchFactor(){return this.yt.E_()}setStretchFactor(t){this.yt.A_(t),this.Yp.Qt().Ca()}paneIndex(){return this.Yp.Qt().Gd(this.yt)}moveTo(t){let e=this.paneIndex();e!==t&&(T(t>=0&&t<this.Yp.Zp().length,"Invalid pane index"),this.Yp.Qt().yd(e,t))}getSeries(){return this.yt.F_().map(t=>this.xM(t))??[]}getHTMLElement(){let t=this.Yp.Zp();return t&&0!==t.length&&t[this.paneIndex()]?t[this.paneIndex()].iv():null}attachPrimitive(t){this.yt.nl(t),t.attached&&t.attached({chart:this.CM,requestUpdate:()=>this.yt.Qt().Ca()})}detachPrimitive(t){this.yt.el(t)}priceScale(t){if(null===this.yt.V_(t))throw Error(`Cannot find price scale with id: ${t}`);return new i7(this.Yp,t,this.paneIndex())}setPreserveEmptyPane(t){this.yt.O_(t)}preserveEmptyPane(){return this.yt.N_()}addCustomSeries(t,e={},i=0){return this.CM.addCustomSeries(t,e,i)}addSeries(t,e={}){return this.CM.addSeries(t,e,this.paneIndex())}}let se={color:"#FF0000",price:0,lineStyle:2,lineWidth:1,lineVisible:!0,axisLabelVisible:!0,title:"",axisLabelColor:"",axisLabelTextColor:""};class si{constructor(t){this.hr=t}applyOptions(t){this.hr.cr(t)}options(){return this.hr.N()}yM(){return this.hr}}class ss{constructor(t,e,i,s,h,n){this.kM=new A,this.ee=t,this.PM=e,this.TM=i,this.cu=h,this.CM=s,this.RM=n}m(){this.kM.m()}priceFormatter(){return this.ee.Xa()}priceToCoordinate(t){let e=this.ee.Lt();return null===e?null:this.ee.Ft().Nt(t,e.Wt)}coordinateToPrice(t){let e=this.ee.Lt();return null===e?null:this.ee.Ft().Ds(t,e.Wt)}barsInLogicalRange(t){if(null===t)return null;let e=new eO(new eD(t.from,t.to)).Ru(),i=this.ee.qs();if(i.Gi())return null;let s=i.$s(e.Aa(),1),h=i.$s(e.bi(),-1),n=O(i.kh()),r=O(i.sn());if(null!==s&&null!==h&&s.js>h.js)return{barsBefore:t.from-n,barsAfter:r-t.to};let l={barsBefore:null===s||s.js===n?t.from-n:s.js-n,barsAfter:null===h||h.js===r?r-t.to:r-h.js};return null!==s&&null!==h&&(l.from=s.Gr,l.to=h.Gr),l}setData(t){this.cu,this.ee.wh(),this.PM.DM(this.ee,t),this.IM("full")}update(t,e=!1){this.ee.wh(),this.PM.VM(this.ee,t,e),this.IM("update")}pop(t=1){let e=this.PM.BM(this.ee,t);0!==e.length&&this.IM("update");let i=i1(this.seriesType());return e.map(t=>i(t))}dataByIndex(t,e){let i=this.ee.qs().$s(t,e);return null===i?null:i1(this.seriesType())(i)}data(){let t=i1(this.seriesType());return this.ee.qs().Dh().map(e=>t(e))}subscribeDataChanged(t){this.kM.i(t)}unsubscribeDataChanged(t){this.kM._(t)}applyOptions(t){this.ee.cr(t)}options(){return W(this.ee.N())}priceScale(){return this.TM.priceScale(this.ee.Ft().ol(),this.getPane().paneIndex())}createPriceLine(t){let e=F(W(se),t);return new si(this.ee.Da(e))}removePriceLine(t){this.ee.Ia(t.yM())}priceLines(){return this.ee.Va().map(t=>new si(t))}seriesType(){return this.ee.wh()}lastValueData(t){let e=this.ee.Ve(t);return e.Be?{noData:!0}:{noData:!1,price:e.gt,color:e.R}}attachPrimitive(t){this.ee.nl(t),t.attached&&t.attached({chart:this.CM,series:this,requestUpdate:()=>this.ee.Qt().Ca(),horzScaleBehavior:this.cu})}detachPrimitive(t){this.ee.el(t),t.detached&&t.detached(),this.ee.Qt().Ca()}getPane(){let t=this.ee,e=O(this.ee.Qt().Kn(t));return this.RM(e)}moveToPane(t){this.ee.Qt().jd(this.ee,t)}seriesOrder(){let t=this.ee.Qt().Kn(this.ee);return null===t?-1:t.F_().indexOf(this.ee)}setSeriesOrder(t){let e=this.ee.Qt().Kn(this.ee);null!==e&&e.su(this.ee,t)}IM(t){this.kM.v()&&this.kM.p(t)}}class sh{constructor(t,e,i){this.EM=new A,this.Nu=new A,this.xw=new A,this.ns=t,this.Jh=t.Et(),this.tg=e,this.Jh.Lc().i(this.AM.bind(this)),this.Jh.zc().i(this.LM.bind(this)),this.tg.Dw().i(this.zM.bind(this)),this.cu=i}m(){this.Jh.Lc().u(this),this.Jh.zc().u(this),this.tg.Dw().u(this),this.EM.m(),this.Nu.m(),this.xw.m()}scrollPosition(){return this.Jh.Cc()}scrollToPosition(t,e){e?this.Jh.Bc(t,1e3):this.ns.Mn(t)}scrollToRealTime(){this.Jh.Vc()}getVisibleRange(){let t=this.Jh.lc();return null===t?null:{from:t.from.originalTime,to:t.to.originalTime}}setVisibleRange(t){let e={from:this.cu.convertHorzItemToInternal(t.from),to:this.cu.convertHorzItemToInternal(t.to)},i=this.Jh.cc(e);this.ns.$d(i)}getVisibleLogicalRange(){let t=this.Jh.ac();return null===t?null:{from:t.Aa(),to:t.bi()}}setVisibleLogicalRange(t){T(t.from<=t.to,"The from index cannot be after the to index."),this.ns.$d(t)}resetTimeScale(){this.ns.wn()}fitContent(){this.ns.Fc()}logicalToCoordinate(t){let e=this.ns.Et();return e.Gi()?null:e.qt(t)}coordinateToLogical(t){return this.Jh.Gi()?null:this.Jh.wc(t)}timeToIndex(t,e){let i=this.cu.convertHorzItemToInternal(t);return this.Jh.ec(i,e)}timeToCoordinate(t){let e=this.timeToIndex(t,!1);return null===e?null:this.Jh.qt(e)}coordinateToTime(t){let e=this.ns.Et(),i=e.wc(t),s=e.es(i);return null===s?null:s.originalTime}width(){return this.tg.sv().width}height(){return this.tg.sv().height}subscribeVisibleTimeRangeChange(t){this.EM.i(t)}unsubscribeVisibleTimeRangeChange(t){this.EM._(t)}subscribeVisibleLogicalRangeChange(t){this.Nu.i(t)}unsubscribeVisibleLogicalRangeChange(t){this.Nu._(t)}subscribeSizeChange(t){this.xw.i(t)}unsubscribeSizeChange(t){this.xw._(t)}applyOptions(t){this.Jh.cr(t)}options(){return{...W(this.Jh.N()),barSpacing:this.Jh.ul()}}AM(){this.EM.v()&&this.EM.p(this.getVisibleRange())}LM(){this.Nu.v()&&this.Nu.p(this.getVisibleLogicalRange())}zM(t){this.xw.p(t.width,t.height)}}function sn(t){return function(t){if(I(t.handleScale)){let e=t.handleScale;t.handleScale={axisDoubleClickReset:{time:e,price:e},axisPressedMouseMove:{time:e,price:e},mouseWheel:e,pinch:e}}else if(void 0!==t.handleScale){let{axisPressedMouseMove:e,axisDoubleClickReset:i}=t.handleScale;I(e)&&(t.handleScale.axisPressedMouseMove={time:e,price:e}),I(i)&&(t.handleScale.axisDoubleClickReset={time:i,price:i})}let e=t.handleScroll;I(e)&&(t.handleScroll={horzTouchDrag:e,vertTouchDrag:e,mouseWheel:e,pressedMouseMove:e})}(t),t}class sr{constructor(t,e,i){this.OM=new Map,this.NM=new Map,this.FM=new A,this.WM=new A,this.HM=new A,this.Xc=new WeakMap,this.UM=new iB(e);const s=void 0===i?W(i9()):F(W(i9()),sn(i));this.$M=e,this.Yp=new iM(t,s,e),this.Yp.nw().i(t=>{this.FM.v()&&this.FM.p(this.qM(t()))},this),this.Yp.ew().i(t=>{this.WM.v()&&this.WM.p(this.qM(t()))},this),this.Yp.Md().i(t=>{this.HM.v()&&this.HM.p(this.qM(t()))},this);const h=this.Yp.Qt();this.jM=new sh(h,this.Yp.rg(),this.$M)}remove(){this.Yp.nw().u(this),this.Yp.ew().u(this),this.Yp.Md().u(this),this.jM.m(),this.Yp.m(),this.OM.clear(),this.NM.clear(),this.FM.m(),this.WM.m(),this.HM.m(),this.UM.m()}resize(t,e,i){this.autoSizeActive()||this.Yp.sg(t,e,i)}addCustomSeries(t,e={},i=0){let s,h=(s=R(t),{type:"Custom",isBuiltIn:!1,defaultOptions:{...iY,...s.defaultOptions()},YM:iK,KM:s});return this.ZM(h,e,i)}addSeries(t,e={},i=0){return this.ZM(t,e,i)}removeSeries(t){let e=z(this.OM.get(t)),i=this.UM.Hd(e);this.Yp.Qt().Hd(e),this.GM(i),this.OM.delete(t),this.NM.delete(e)}DM(t,e){this.GM(this.UM.Ug(t,e))}VM(t,e,i){this.GM(this.UM.Zg(t,e,i))}BM(t,e){let[i,s]=this.UM.Jg(t,e);return 0!==i.length&&this.GM(s),i}subscribeClick(t){this.FM.i(t)}unsubscribeClick(t){this.FM._(t)}subscribeCrosshairMove(t){this.HM.i(t)}unsubscribeCrosshairMove(t){this.HM._(t)}subscribeDblClick(t){this.WM.i(t)}unsubscribeDblClick(t){this.WM._(t)}priceScale(t,e=0){return new i7(this.Yp,t,e)}timeScale(){return this.jM}applyOptions(t){this.Yp.cr(sn(t))}options(){return this.Yp.N()}takeScreenshot(t=!1,e=!1){let i,s;try{e||(i=this.Yp.Qt().N().crosshair.mode,this.Yp.cr({crosshair:{mode:2}})),s=this.Yp.ug(t)}finally{e||void 0===i||this.Yp.Qt().cr({crosshair:{mode:i}})}return s}addPane(t=!1){let e=this.Yp.Qt().Xd();return e.O_(t),this.XM(e)}removePane(t){this.Yp.Qt().Sd(t)}swapPanes(t,e){this.Yp.Qt().Cd(t,e)}autoSizeActive(){return this.Yp.vg()}chartElement(){return this.Yp.hv()}panes(){return this.Yp.Qt().Xs().map(t=>this.XM(t))}paneSize(t=0){let e=this.Yp.gg(t);return{height:e.height,width:e.width}}setCrosshairPosition(t,e,i){let s=this.OM.get(i);if(void 0===s)return;let h=this.Yp.Qt().Kn(s);null!==h&&this.Yp.Qt().Ld(t,e,h)}clearCrosshairPosition(){this.Yp.Qt().zd(!0)}horzBehaviour(){return this.$M}ZM(t,e={},i=0){var s;T(void 0!==t.YM),void 0===(s=e.priceFormat)||"custom"===s.type||void 0!==s.minMove&&void 0===s.precision&&(s.precision=eN(s.minMove)),"Candlestick"===t.type&&(void 0!==e.borderColor&&(e.borderUpColor=e.borderColor,e.borderDownColor=e.borderColor),void 0!==e.wickColor&&(e.wickUpColor=e.wickColor,e.wickDownColor=e.wickColor));let h=F(W(E),W(t.defaultOptions),e),n=t.YM,r=new es(this.Yp.Qt(),t.type,h,n,t.KM);this.Yp.Qt().Fd(r,i);let l=new ss(r,this,this,this,this.$M,t=>this.XM(t));return this.OM.set(l,r),this.NM.set(r,l),l}GM(t){let e=this.Yp.Qt();e.Od(t.Et.vc,t.Et.sM,t.Et.nM),t.F_.forEach((t,e)=>e.ht(t.le,t.iM)),e.Et().Ju(),e.Sc()}JM(t){return z(this.NM.get(t))}qM(t){let e=new Map;t.Vg.forEach((t,i)=>{let s=i.wh(),h=i1(s)(t);if("Custom"!==s){var n;T(void 0!==(n=h).open||void 0!==n.value)}else{let t=i.hl();T(!t||!1===t(h))}e.set(this.JM(i),h)});let i=void 0!==t.Ig&&this.NM.has(t.Ig)?this.JM(t.Ig):void 0;return{time:t.Gr,logical:t.js,point:t.Rg,paneIndex:t.Dg,hoveredSeries:i,hoveredObjectId:t.Bg,seriesData:e,sourceEvent:t.Eg}}XM(t){let e=this.Xc.get(t);return e||(e=new st(this.Yp,t=>this.JM(t),t,this),this.Xc.set(t,e)),e}}function sl(t,e){var i,s;let h;return i=new eG,s=eG.pf(e),h=new sr(function(t){if(j(t)){let e=document.getElementById(t);return T(null!==e,`Cannot find element in DOM with id=${t}`),e}return t}(t),i,s),i.setOptions(h.options()),h}class sa extends iV{constructor(t,e){super(t,e,!0)}mM(t,e,i){e.mc(this.aM,H(this.lM)),t.Yo(this.aM,i,H(this.lM))}QM(t,e){return{wt:t,gt:e,_t:NaN,ut:NaN}}pM(){let t=this.ee.ga();this.aM=this.ee.Na().Dh().map(e=>{let i;if((e.jr??1)>1){let t=e.Wt[1],s=e.Wt[2],h=e.Wt[3];i=Math.abs(t-h)>Math.abs(s-h)?t:s}else i=e.Wt[3];return this.tb(e.js,i,t)})}}function so(t,e,i,s,h,n,r){if(0===e.length||s.from>=e.length||s.to<=0)return;let{context:l,horizontalPixelRatio:a,verticalPixelRatio:o}=t,u=e[s.from],c=n(t,u),d=u;if(s.to-s.from<2){let e=h/2;l.beginPath();let i={_t:u._t-e,ut:u.ut},s={_t:u._t+e,ut:u.ut};l.moveTo(i._t*a,i.ut*o),l.lineTo(s._t*a,s.ut*o),r(t,c,i,s)}else{let h=(e,i)=>{r(t,c,d,i),l.beginPath(),c=e,d=i},f=d;l.beginPath(),l.moveTo(u._t*a,u.ut*o);for(let r=s.from+1;r<s.to;++r){let s=n(t,f=e[r]);switch(i){case 0:l.lineTo(f._t*a,f.ut*o);break;case 1:l.lineTo(f._t*a,e[r-1].ut*o),s!==c&&(h(s,f),l.lineTo(f._t*a,e[r-1].ut*o)),l.lineTo(f._t*a,f.ut*o);break;case 2:{let[t,i]=function(t,e,i){var s,h;let n=Math.max(0,e-1),r=Math.min(t.length-1,i+1);return[(s=t[e],h=sc(su(t[i],t[n]),6),{_t:s._t+h._t,ut:s.ut+h.ut}),su(t[i],sc(su(t[r],t[e]),6))]}(e,r-1,r);l.bezierCurveTo(t._t*a,t.ut*o,i._t*a,i.ut*o,f._t*a,f.ut*o)}}1!==i&&s!==c&&(h(s,f),l.moveTo(f._t*a,f.ut*o))}(d!==f||d===f&&1===i)&&r(t,c,d,f)}}function su(t,e){return{_t:t._t-e._t,ut:t.ut-e.ut}}function sc(t,e){return{_t:t._t/e,ut:t.ut/e}}function sd(t,e){let i=t.context;i.strokeStyle=e,i.stroke()}class sf extends G{constructor(){super(...arguments),this.rt=null}ht(t){this.rt=t}et(t){if(null===this.rt)return;let{ot:e,lt:i,ib:s,sb:h,ct:n,Zt:r,nb:l}=this.rt;if(null===i)return;let a=t.context;a.lineCap="butt",a.lineWidth=n*t.verticalPixelRatio,L(a,r),a.lineJoin="round";let o=this.eb.bind(this);void 0!==h&&so(t,e,h,i,s,o,sd),l&&function(t,e,i,s,h){if(s.to-s.from<=0)return;let{horizontalPixelRatio:n,verticalPixelRatio:r,context:l}=t,a=null,o=Math.max(1,Math.floor(n))%2/2,u=i*r+o;for(let i=s.to-1;i>=s.from;--i){let s=e[i];if(s){let e=h(t,s);e!==a&&(l.beginPath(),null!==a&&l.fill(),l.fillStyle=e,a=e);let i=Math.round(s._t*n)+o,c=s.ut*r;l.moveTo(i,c),l.arc(i,c,u,0,2*Math.PI)}}l.fill()}(t,e,l,i,o)}}class sg extends sf{eb(t,e){return e.vt}}class sp extends sa{constructor(){super(...arguments),this.cM=new sg}tb(t,e,i){return{...this.QM(t,e),...i.gh(t)}}wM(){let t=this.ee.N(),e={ot:this.aM,Zt:t.lineStyle,sb:t.lineVisible?t.lineType:void 0,ct:t.lineWidth,nb:t.pointMarkersVisible?t.pointMarkersRadius||t.lineWidth/2+2:void 0,lt:this.lM,ib:this.re.Et().ul()};this.cM.ht(e)}}let sm={type:"Line",isBuiltIn:!0,defaultOptions:{color:"#2196f3",lineStyle:0,lineWidth:3,lineType:0,lineVisible:!0,crosshairMarkerVisible:!0,crosshairMarkerRadius:4,crosshairMarkerBorderColor:"",crosshairMarkerBorderWidth:2,crosshairMarkerBackgroundColor:"",lastPriceAnimation:0,pointMarkersVisible:!1},YM:(t,e)=>new sp(t,e)};class sb extends G{constructor(){super(...arguments),this.jt=null,this.Wb=[]}ht(t){this.jt=t,this.Wb=[]}et({context:t,horizontalPixelRatio:e,verticalPixelRatio:i}){if(null===this.jt||0===this.jt.ot.length||null===this.jt.lt)return;this.Wb.length||this.Hb(e);let s=Math.max(1,Math.floor(i)),h=Math.round(this.jt.Ub*i)-Math.floor(s/2),n=h+s;for(let e=this.jt.lt.from;e<this.jt.lt.to;e++){let r,l,a=this.jt.ot[e],o=this.Wb[e-this.jt.lt.from],u=Math.round(a.ut*i);t.fillStyle=a.th,u<=h?(r=u,l=n):(r=h,l=u-Math.floor(s/2)+s),t.fillRect(o.Aa,r,o.bi-o.Aa+1,l-r)}}Hb(t){if(null===this.jt||0===this.jt.ot.length||null===this.jt.lt)return void(this.Wb=[]);let e=1>=Math.ceil(this.jt.ul*t)?0:Math.max(1,Math.floor(t)),i=Math.round(this.jt.ul*t)-e;this.Wb=Array(this.jt.lt.to-this.jt.lt.from);for(let e=this.jt.lt.from;e<this.jt.lt.to;e++){let s,h,n=this.jt.ot[e],r=Math.round(n._t*t);if(i%2){let t=(i-1)/2;s=r-t,h=r+t}else{let t=i/2;s=r-t,h=r+t-1}this.Wb[e-this.jt.lt.from]={Aa:s,bi:h,$b:r,oe:n._t*t,wt:n.wt}}for(let t=this.jt.lt.from+1;t<this.jt.lt.to;t++){let i=this.Wb[t-this.jt.lt.from],s=this.Wb[t-this.jt.lt.from-1];i.wt===s.wt+1&&i.Aa-s.bi!==e+1&&(s.$b>s.oe?s.bi=i.Aa-e-1:i.Aa=s.bi+e+1)}let s=Math.ceil(this.jt.ul*t);for(let t=this.jt.lt.from;t<this.jt.lt.to;t++){let e=this.Wb[t-this.jt.lt.from];e.bi<e.Aa&&(e.bi=e.Aa),s=Math.min(e.bi-e.Aa+1,s)}if(e>0&&s<4)for(let t=this.jt.lt.from;t<this.jt.lt.to;t++){let e=this.Wb[t-this.jt.lt.from];e.bi-e.Aa+1>s&&(e.$b>e.oe?e.bi-=1:e.Aa+=1)}}}class sv extends sa{constructor(){super(...arguments),this.cM=new sb}tb(t,e,i){return{...this.QM(t,e),...i.gh(t)}}wM(){let t={ot:this.aM,ul:this.re.Et().ul(),lt:this.lM,Ub:this.ee.Ft().Nt(this.ee.N().base,O(this.ee.Lt()).Wt)};this.cM.ht(t)}}let sx={type:"Histogram",isBuiltIn:!0,defaultOptions:{color:"#26a69a",base:0},YM:(t,e)=>new sv(t,e)};t.s(["ColorType",()=>y,"CrosshairMode",()=>p,"HistogramSeries",()=>sx,"LineSeries",()=>sm,"createChart",()=>sl],22784)},64762,t=>{"use strict";var e=t.i(94650);t.s(["assetsApi",0,{list:(t,i=20,s=0)=>e.apiClient.get("/assets/",{params:{...t,limit:i,offset:s}}),get:t=>e.apiClient.get(`/assets/${t}`),getPrice:t=>e.apiClient.get(`/assets/${t}/price`),getHistorical(t,i,s,h="1d"){let n={interval:h};return i&&(n.from_date=i),s&&(n.to_date=s),e.apiClient.get(`/assets/${t}/historical`,{params:n})},getFundamentals:t=>e.apiClient.get(`/assets/${t}/fundamentals`),getNews:(t,i=10)=>e.apiClient.get(`/assets/${t}/news`,{params:{limit:i}})}])},55547,t=>{"use strict";let e=(0,t.i(19952).default)("chart-candlestick",[["path",{d:"M9 5v4",key:"14uxtq"}],["rect",{width:"4",height:"6",x:"7",y:"9",rx:"1",key:"f4fvz0"}],["path",{d:"M9 15v2",key:"r5rk32"}],["path",{d:"M17 3v2",key:"1l2re6"}],["rect",{width:"4",height:"8",x:"15",y:"5",rx:"1",key:"z38je5"}],["path",{d:"M17 13v3",key:"5l0wba"}],["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}]]);t.s(["CandlestickChart",()=>e],55547)},73396,42051,t=>{"use strict";let e,i;function s(t){return t+.5|0}let h=(t,e,i)=>Math.max(Math.min(t,i),e);function n(t){return h(s(2.55*t),0,255)}function r(t){return h(s(255*t),0,255)}function l(t){return h(s(t/2.55)/100,0,1)}function a(t){return h(s(100*t),0,100)}let o={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},u=[..."0123456789ABCDEF"],c=t=>u[15&t],d=t=>u[(240&t)>>4]+u[15&t],f=t=>(240&t)>>4==(15&t),g=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function p(t,e,i){let s=e*Math.min(i,1-i),h=(e,h=(e+t/30)%12)=>i-s*Math.max(Math.min(h-3,9-h,1),-1);return[h(0),h(8),h(4)]}function m(t,e,i){let s=(s,h=(s+t/60)%6)=>i-i*e*Math.max(Math.min(h,4-h,1),0);return[s(5),s(3),s(1)]}function b(t,e,i){let s,h=p(t,1,.5);for(e+i>1&&(s=1/(e+i),e*=s,i*=s),s=0;s<3;s++)h[s]*=1-e-i,h[s]+=e;return h}function v(t){let e,i,s,h=t.r/255,n=t.g/255,r=t.b/255,l=Math.max(h,n,r),a=Math.min(h,n,r),o=(l+a)/2;l!==a&&(s=l-a,i=o>.5?s/(2-l-a):s/(l+a),e=60*(e=h===l?(n-r)/s+6*(n<r):n===l?(r-h)/s+2:(h-n)/s+4)+.5);return[0|e,i||0,o]}function x(t,e,i,s){return(Array.isArray(e)?t(e[0],e[1],e[2]):t(e,i,s)).map(r)}function _(t){return(t%360+360)%360}let y={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},w={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"},M=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/,S=t=>t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055,k=t=>t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4);function C(t,e,i){if(t){let s=v(t);s[e]=Math.max(0,Math.min(s[e]+s[e]*i,0===e?360:1)),t.r=(s=x(p,s,void 0,void 0))[0],t.g=s[1],t.b=s[2]}}function P(t,e){return t?Object.assign(e||{},t):t}function E(t){var e={r:0,g:0,b:0,a:255};return Array.isArray(t)?t.length>=3&&(e={r:t[0],g:t[1],b:t[2],a:255},t.length>3&&(e.a=r(t[3]))):(e=P(t,{r:0,g:0,b:0,a:1})).a=r(e.a),e}class L{constructor(t){let i;if(t instanceof L)return t;const s=typeof t;"object"===s?i=E(t):"string"===s&&(i=function(t){var e,i=t.length;return"#"===t[0]&&(4===i||5===i?e={r:255&17*o[t[1]],g:255&17*o[t[2]],b:255&17*o[t[3]],a:5===i?17*o[t[4]]:255}:(7===i||9===i)&&(e={r:o[t[1]]<<4|o[t[2]],g:o[t[3]]<<4|o[t[4]],b:o[t[5]]<<4|o[t[6]],a:9===i?o[t[7]]<<4|o[t[8]]:255})),e}(t)||function(t){e||((e=function(){let t,e,i,s,h,n={},r=Object.keys(w),l=Object.keys(y);for(t=0;t<r.length;t++){for(e=0,s=h=r[t];e<l.length;e++)i=l[e],h=h.replace(i,y[i]);i=parseInt(w[s],16),n[h]=[i>>16&255,i>>8&255,255&i]}return n}()).transparent=[0,0,0,0]);let i=e[t.toLowerCase()];return i&&{r:i[0],g:i[1],b:i[2],a:4===i.length?i[3]:255}}(t)||function(t){return"r"===t.charAt(0)?function(t){let e,i,s,r=M.exec(t),l=255;if(r){if(r[7]!==e){let t=+r[7];l=r[8]?n(t):h(255*t,0,255)}return e=+r[1],i=+r[3],s=+r[5],e=255&(r[2]?n(e):h(e,0,255)),{r:e,g:i=255&(r[4]?n(i):h(i,0,255)),b:s=255&(r[6]?n(s):h(s,0,255)),a:l}}}(t):function(t){let e,i=g.exec(t),s=255;if(!i)return;i[5]!==e&&(s=i[6]?n(+i[5]):r(+i[5]));let h=_(+i[2]),l=i[3]/100,a=i[4]/100;return{r:(e="hwb"===i[1]?x(b,h,l,a):"hsv"===i[1]?x(m,h,l,a):x(p,h,l,a))[0],g:e[1],b:e[2],a:s}}(t)}(t)),this._rgb=i,this._valid=!!i}get valid(){return this._valid}get rgb(){var t=P(this._rgb);return t&&(t.a=l(t.a)),t}set rgb(t){this._rgb=E(t)}rgbString(){var t;return this._valid?(t=this._rgb)&&(t.a<255?`rgba(${t.r}, ${t.g}, ${t.b}, ${l(t.a)})`:`rgb(${t.r}, ${t.g}, ${t.b})`):void 0}hexString(){var t,e;let i,s;return this._valid?(e=f((i=t=this._rgb).r)&&f(i.g)&&f(i.b)&&f(i.a)?c:d,t?"#"+e(t.r)+e(t.g)+e(t.b)+(s=t.a,s<255?e(s):""):void 0):void 0}hslString(){return this._valid?function(t){if(!t)return;let e=v(t),i=e[0],s=a(e[1]),h=a(e[2]);return t.a<255?`hsla(${i}, ${s}%, ${h}%, ${l(t.a)})`:`hsl(${i}, ${s}%, ${h}%)`}(this._rgb):void 0}mix(t,e){if(t){let i,s=this.rgb,h=t.rgb,n=e===i?.5:e,r=2*n-1,l=s.a-h.a,a=((r*l==-1?r:(r+l)/(1+r*l))+1)/2;i=1-a,s.r=255&a*s.r+i*h.r+.5,s.g=255&a*s.g+i*h.g+.5,s.b=255&a*s.b+i*h.b+.5,s.a=n*s.a+(1-n)*h.a,this.rgb=s}return this}interpolate(t,e){var i,s;let h,n,a;return t&&(this._rgb=(i=this._rgb,s=t._rgb,h=k(l(i.r)),n=k(l(i.g)),a=k(l(i.b)),{r:r(S(h+e*(k(l(s.r))-h))),g:r(S(n+e*(k(l(s.g))-n))),b:r(S(a+e*(k(l(s.b))-a))),a:i.a+e*(s.a-i.a)})),this}clone(){return new L(this.rgb)}alpha(t){return this._rgb.a=r(t),this}clearer(t){let e=this._rgb;return e.a*=1-t,this}greyscale(){let t=this._rgb,e=s(.3*t.r+.59*t.g+.11*t.b);return t.r=t.g=t.b=e,this}opaquer(t){let e=this._rgb;return e.a*=1+t,this}negate(){let t=this._rgb;return t.r=255-t.r,t.g=255-t.g,t.b=255-t.b,this}lighten(t){return C(this._rgb,2,t),this}darken(t){return C(this._rgb,2,-t),this}saturate(t){return C(this._rgb,1,t),this}desaturate(t){return C(this._rgb,1,-t),this}rotate(t){var e,i;return e=this._rgb,(i=v(e))[0]=_(i[0]+t),e.r=(i=x(p,i,void 0,void 0))[0],e.g=i[1],e.b=i[2],this}}function D(){}let T=(i=0,()=>i++);function z(t){return null==t}function O(t){if(Array.isArray&&Array.isArray(t))return!0;let e=Object.prototype.toString.call(t);return"[object"===e.slice(0,7)&&"Array]"===e.slice(-6)}function R(t){return null!==t&&"[object Object]"===Object.prototype.toString.call(t)}function A(t){return("number"==typeof t||t instanceof Number)&&isFinite(+t)}function F(t,e){return A(t)?t:e}function N(t,e){return void 0===t?e:t}let B=(t,e)=>"string"==typeof t&&t.endsWith("%")?parseFloat(t)/100*e:+t;function j(t,e,i){if(t&&"function"==typeof t.call)return t.apply(i,e)}function I(t,e,i,s){let h,n,r;if(O(t))if(n=t.length,s)for(h=n-1;h>=0;h--)e.call(i,t[h],h);else for(h=0;h<n;h++)e.call(i,t[h],h);else if(R(t))for(h=0,n=(r=Object.keys(t)).length;h<n;h++)e.call(i,t[r[h]],r[h])}function W(t,e){let i,s,h,n;if(!t||!e||t.length!==e.length)return!1;for(i=0,s=t.length;i<s;++i)if(h=t[i],n=e[i],h.datasetIndex!==n.datasetIndex||h.index!==n.index)return!1;return!0}function V(t){if(O(t))return t.map(V);if(R(t)){let e=Object.create(null),i=Object.keys(t),s=i.length,h=0;for(;h<s;++h)e[i[h]]=V(t[i[h]]);return e}return t}function H(t){return -1===["__proto__","prototype","constructor"].indexOf(t)}function $(t,e,i,s){if(!H(t))return;let h=e[t],n=i[t];R(h)&&R(n)?U(h,n,s):e[t]=V(n)}function U(t,e,i){let s,h=O(e)?e:[e],n=h.length;if(!R(t))return t;let r=(i=i||{}).merger||$;for(let e=0;e<n;++e){if(!R(s=h[e]))continue;let n=Object.keys(s);for(let e=0,h=n.length;e<h;++e)r(n[e],t,s,i)}return t}function Y(t,e){return U(t,e,{merger:K})}function K(t,e,i){if(!H(t))return;let s=e[t],h=i[t];R(s)&&R(h)?Y(s,h):Object.prototype.hasOwnProperty.call(e,t)||(e[t]=V(h))}let J={"":t=>t,x:t=>t.x,y:t=>t.y};function X(t,e){let i;return(J[e]||(J[e]=(i=function(t){let e=t.split("."),i=[],s="";for(let t of e)(s+=t).endsWith("\\")?s=s.slice(0,-1)+".":(i.push(s),s="");return i}(e),t=>{for(let e of i){if(""===e)break;t=t&&t[e]}return t})))(t)}function Q(t){return t.charAt(0).toUpperCase()+t.slice(1)}let G=t=>void 0!==t,q=t=>"function"==typeof t,Z=(t,e)=>{if(t.size!==e.size)return!1;for(let i of t)if(!e.has(i))return!1;return!0},tt=Math.PI,te=2*tt,ti=te+tt,ts=1/0,th=tt/180,tn=tt/2,tr=tt/4,tl=2*tt/3,ta=Math.log10,to=Math.sign;function tu(t,e,i){return Math.abs(t-e)<i}function tc(t){let e=Math.round(t),i=Math.pow(10,Math.floor(ta(t=tu(t,e,t/1e3)?e:t))),s=t/i;return(s<=1?1:s<=2?2:s<=5?5:10)*i}function td(t){return"symbol"!=typeof t&&("object"!=typeof t||null===t||!!(Symbol.toPrimitive in t||"toString"in t||"valueOf"in t))&&!isNaN(parseFloat(t))&&isFinite(t)}function tf(t,e,i){let s,h,n;for(s=0,h=t.length;s<h;s++)isNaN(n=t[s][i])||(e.min=Math.min(e.min,n),e.max=Math.max(e.max,n))}function tg(t){return tt/180*t}function tp(t){if(!A(t))return;let e=1,i=0;for(;Math.round(t*e)/e!==t;)e*=10,i++;return i}function tm(t,e){let i=e.x-t.x,s=e.y-t.y,h=Math.sqrt(i*i+s*s),n=Math.atan2(s,i);return n<-.5*tt&&(n+=te),{angle:n,distance:h}}function tb(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function tv(t,e){return(t-e+ti)%te-tt}function tx(t){return(t%te+te)%te}function t_(t,e,i,s){let h=tx(t),n=tx(e),r=tx(i),l=tx(n-h),a=tx(r-h),o=tx(h-n),u=tx(h-r);return h===n||h===r||s&&n===r||l>a&&o<u}function ty(t,e,i){return Math.max(e,Math.min(i,t))}function tw(t,e,i,s=1e-6){return t>=Math.min(e,i)-s&&t<=Math.max(e,i)+s}function tM(t,e,i){let s;i=i||(i=>t[i]<e);let h=t.length-1,n=0;for(;h-n>1;)i(s=n+h>>1)?n=s:h=s;return{lo:n,hi:h}}let tS=(t,e,i,s)=>tM(t,i,s?s=>{let h=t[s][e];return h<i||h===i&&t[s+1][e]===i}:s=>t[s][e]<i),tk=(t,e,i)=>tM(t,i,s=>t[s][e]>=i),tC=["push","pop","shift","splice","unshift"];function tP(t,e){let i=t._chartjs;if(!i)return;let s=i.listeners,h=s.indexOf(e);-1!==h&&s.splice(h,1),s.length>0||(tC.forEach(e=>{delete t[e]}),delete t._chartjs)}function tE(t){let e=new Set(t);return e.size===t.length?t:Array.from(e)}let tL="u"<typeof window?function(t){return t()}:window.requestAnimationFrame;function tD(t,e){let i=[],s=!1;return function(...h){i=h,s||(s=!0,tL.call(window,()=>{s=!1,t.apply(e,i)}))}}let tT=t=>"start"===t?"left":"end"===t?"right":"center",tz=(t,e,i)=>"start"===t?e:"end"===t?i:(e+i)/2;function tO(t,e,i){let s=e.length,h=0,n=s;if(t._sorted){let{iScale:r,vScale:l,_parsed:a}=t,o=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null,u=r.axis,{min:c,max:d,minDefined:f,maxDefined:g}=r.getUserBounds();if(f){if(h=Math.min(tS(a,u,c).lo,i?s:tS(e,u,r.getPixelForValue(c)).lo),o){let t=a.slice(0,h+1).reverse().findIndex(t=>!z(t[l.axis]));h-=Math.max(0,t)}h=ty(h,0,s-1)}if(g){let t=Math.max(tS(a,r.axis,d,!0).hi+1,i?0:tS(e,u,r.getPixelForValue(d),!0).hi+1);if(o){let e=a.slice(t-1).findIndex(t=>!z(t[l.axis]));t+=Math.max(0,e)}n=ty(t,h,s)-h}else n=s-h}return{start:h,count:n}}function tR(t){let{xScale:e,yScale:i,_scaleRanges:s}=t,h={xmin:e.min,xmax:e.max,ymin:i.min,ymax:i.max};if(!s)return t._scaleRanges=h,!0;let n=s.xmin!==e.min||s.xmax!==e.max||s.ymin!==i.min||s.ymax!==i.max;return Object.assign(s,h),n}let tA=t=>0===t||1===t,tF=(t,e,i)=>-(Math.pow(2,10*(t-=1))*Math.sin((t-e)*te/i)),tN=(t,e,i)=>Math.pow(2,-10*t)*Math.sin((t-e)*te/i)+1,tB={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>-t*(t-2),easeInOutQuad:t=>(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1),easeInCubic:t=>t*t*t,easeOutCubic:t=>(t-=1)*t*t+1,easeInOutCubic:t=>(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2),easeInQuart:t=>t*t*t*t,easeOutQuart:t=>-((t-=1)*t*t*t-1),easeInOutQuart:t=>(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2),easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>(t-=1)*t*t*t*t+1,easeInOutQuint:t=>(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2),easeInSine:t=>-Math.cos(t*tn)+1,easeOutSine:t=>Math.sin(t*tn),easeInOutSine:t=>-.5*(Math.cos(tt*t)-1),easeInExpo:t=>0===t?0:Math.pow(2,10*(t-1)),easeOutExpo:t=>1===t?1:-Math.pow(2,-10*t)+1,easeInOutExpo:t=>tA(t)?t:t<.5?.5*Math.pow(2,10*(2*t-1)):.5*(-Math.pow(2,-10*(2*t-1))+2),easeInCirc:t=>t>=1?t:-(Math.sqrt(1-t*t)-1),easeOutCirc:t=>Math.sqrt(1-(t-=1)*t),easeInOutCirc:t=>(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1),easeInElastic:t=>tA(t)?t:tF(t,.075,.3),easeOutElastic:t=>tA(t)?t:tN(t,.075,.3),easeInOutElastic:t=>tA(t)?t:t<.5?.5*tF(2*t,.1125,.45):.5+.5*tN(2*t-1,.1125,.45),easeInBack:t=>t*t*(2.70158*t-1.70158),easeOutBack:t=>(t-=1)*t*(2.70158*t+1.70158)+1,easeInOutBack(t){let e=1.70158;return(t/=.5)<1?.5*(t*t*(((e*=1.525)+1)*t-e)):.5*((t-=2)*t*(((e*=1.525)+1)*t+e)+2)},easeInBounce:t=>1-tB.easeOutBounce(1-t),easeOutBounce:t=>t<.36363636363636365?7.5625*t*t:t<.7272727272727273?7.5625*(t-=.5454545454545454)*t+.75:t<.9090909090909091?7.5625*(t-=.8181818181818182)*t+.9375:7.5625*(t-=.9545454545454546)*t+.984375,easeInOutBounce:t=>t<.5?.5*tB.easeInBounce(2*t):.5*tB.easeOutBounce(2*t-1)+.5};function tj(t){if(t&&"object"==typeof t){let e=t.toString();return"[object CanvasPattern]"===e||"[object CanvasGradient]"===e}return!1}function tI(t){return tj(t)?t:new L(t)}function tW(t){return tj(t)?t:new L(t).saturate(.5).darken(.1).hexString()}let tV=["x","y","borderWidth","radius","tension"],tH=["color","borderColor","backgroundColor"],t$=new Map;function tU(t,e,i){var s;let h,n;return(h=e+JSON.stringify(s=(s=i)||{}),!(n=t$.get(h))&&(n=new Intl.NumberFormat(e,s),t$.set(h,n)),n).format(t)}let tY={values:t=>O(t)?t:""+t,numeric(t,e,i){let s;if(0===t)return"0";let h=this.chart.options.locale,n=t;if(i.length>1){var r,l;let e,h=Math.max(Math.abs(i[0].value),Math.abs(i[i.length-1].value));(h<1e-4||h>1e15)&&(s="scientific"),r=t,Math.abs(e=(l=i).length>3?l[2].value-l[1].value:l[1].value-l[0].value)>=1&&r!==Math.floor(r)&&(e=r-Math.floor(r)),n=e}let a=ta(Math.abs(n)),o=isNaN(a)?1:Math.max(Math.min(-1*Math.floor(a),20),0),u={notation:s,minimumFractionDigits:o,maximumFractionDigits:o};return Object.assign(u,this.options.ticks.format),tU(t,h,u)},logarithmic(t,e,i){return 0===t?"0":[1,2,3,5,10,15].includes(i[e].significand||t/Math.pow(10,Math.floor(ta(t))))||e>.8*i.length?tY.numeric.call(this,t,e,i):""}},tK=Object.create(null),tJ=Object.create(null);function tX(t,e){if(!e)return t;let i=e.split(".");for(let e=0,s=i.length;e<s;++e){let s=i[e];t=t[s]||(t[s]=Object.create(null))}return t}function tQ(t,e,i){return"string"==typeof e?U(tX(t,e),i):U(tX(t,""),e)}var tG=new class{constructor(t,e){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=t=>t.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(t,e)=>tW(e.backgroundColor),this.hoverBorderColor=(t,e)=>tW(e.borderColor),this.hoverColor=(t,e)=>tW(e.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(t),this.apply(e)}set(t,e){return tQ(this,t,e)}get(t){return tX(this,t)}describe(t,e){return tQ(tJ,t,e)}override(t,e){return tQ(tK,t,e)}route(t,e,i,s){let h=tX(this,t),n=tX(this,i),r="_"+e;Object.defineProperties(h,{[r]:{value:h[e],writable:!0},[e]:{enumerable:!0,get(){let t=this[r],e=n[s];return R(t)?Object.assign({},e,t):N(t,e)},set(t){this[r]=t}}})}apply(t){t.forEach(t=>t(this))}}({_scriptable:t=>!t.startsWith("on"),_indexable:t=>"events"!==t,hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[function(t){t.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),t.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:t=>"onProgress"!==t&&"onComplete"!==t&&"fn"!==t}),t.set("animations",{colors:{type:"color",properties:tH},numbers:{type:"number",properties:tV}}),t.describe("animations",{_fallback:"animation"}),t.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:t=>0|t}}}})},function(t){t.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})},function(t){t.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(t,e)=>e.lineWidth,tickColor:(t,e)=>e.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:tY.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),t.route("scale.ticks","color","","color"),t.route("scale.grid","color","","borderColor"),t.route("scale.border","color","","borderColor"),t.route("scale.title","color","","color"),t.describe("scale",{_fallback:!1,_scriptable:t=>!t.startsWith("before")&&!t.startsWith("after")&&"callback"!==t&&"parser"!==t,_indexable:t=>"borderDash"!==t&&"tickBorderDash"!==t&&"dash"!==t}),t.describe("scales",{_fallback:"scale"}),t.describe("scale.ticks",{_scriptable:t=>"backdropPadding"!==t&&"callback"!==t,_indexable:t=>"backdropPadding"!==t})}]);function tq(t,e,i,s,h){let n=e[h];return n||(n=e[h]=t.measureText(h).width,i.push(h)),n>s&&(s=n),s}function tZ(t,e,i){let s=t.currentDevicePixelRatio,h=0!==i?Math.max(i/2,.5):0;return Math.round((e-h)*s)/s+h}function t0(t,e){(e||t)&&((e=e||t.getContext("2d")).save(),e.resetTransform(),e.clearRect(0,0,t.width,t.height),e.restore())}function t1(t,e,i,s){t2(t,e,i,s,null)}function t2(t,e,i,s,h){let n,r,l,a,o,u,c,d,f=e.pointStyle,g=e.rotation,p=e.radius,m=(g||0)*th;if(f&&"object"==typeof f&&("[object HTMLImageElement]"===(n=f.toString())||"[object HTMLCanvasElement]"===n)){t.save(),t.translate(i,s),t.rotate(m),t.drawImage(f,-f.width/2,-f.height/2,f.width,f.height),t.restore();return}if(!isNaN(p)&&!(p<=0)){switch(t.beginPath(),f){default:h?t.ellipse(i,s,h/2,p,0,0,te):t.arc(i,s,p,0,te),t.closePath();break;case"triangle":u=h?h/2:p,t.moveTo(i+Math.sin(m)*u,s-Math.cos(m)*p),m+=tl,t.lineTo(i+Math.sin(m)*u,s-Math.cos(m)*p),m+=tl,t.lineTo(i+Math.sin(m)*u,s-Math.cos(m)*p),t.closePath();break;case"rectRounded":o=.516*p,r=Math.cos(m+tr)*(a=p-o),c=Math.cos(m+tr)*(h?h/2-o:a),l=Math.sin(m+tr)*a,d=Math.sin(m+tr)*(h?h/2-o:a),t.arc(i-c,s-l,o,m-tt,m-tn),t.arc(i+d,s-r,o,m-tn,m),t.arc(i+c,s+l,o,m,m+tn),t.arc(i-d,s+r,o,m+tn,m+tt),t.closePath();break;case"rect":if(!g){a=Math.SQRT1_2*p,u=h?h/2:a,t.rect(i-u,s-a,2*u,2*a);break}m+=tr;case"rectRot":c=Math.cos(m)*(h?h/2:p),r=Math.cos(m)*p,l=Math.sin(m)*p,d=Math.sin(m)*(h?h/2:p),t.moveTo(i-c,s-l),t.lineTo(i+d,s-r),t.lineTo(i+c,s+l),t.lineTo(i-d,s+r),t.closePath();break;case"crossRot":m+=tr;case"cross":c=Math.cos(m)*(h?h/2:p),r=Math.cos(m)*p,l=Math.sin(m)*p,d=Math.sin(m)*(h?h/2:p),t.moveTo(i-c,s-l),t.lineTo(i+c,s+l),t.moveTo(i+d,s-r),t.lineTo(i-d,s+r);break;case"star":c=Math.cos(m)*(h?h/2:p),r=Math.cos(m)*p,l=Math.sin(m)*p,d=Math.sin(m)*(h?h/2:p),t.moveTo(i-c,s-l),t.lineTo(i+c,s+l),t.moveTo(i+d,s-r),t.lineTo(i-d,s+r),m+=tr,c=Math.cos(m)*(h?h/2:p),r=Math.cos(m)*p,l=Math.sin(m)*p,d=Math.sin(m)*(h?h/2:p),t.moveTo(i-c,s-l),t.lineTo(i+c,s+l),t.moveTo(i+d,s-r),t.lineTo(i-d,s+r);break;case"line":r=h?h/2:Math.cos(m)*p,l=Math.sin(m)*p,t.moveTo(i-r,s-l),t.lineTo(i+r,s+l);break;case"dash":t.moveTo(i,s),t.lineTo(i+Math.cos(m)*(h?h/2:p),s+Math.sin(m)*p);break;case!1:t.closePath()}t.fill(),e.borderWidth>0&&t.stroke()}}function t5(t,e,i){return i=i||.5,!e||t&&t.x>e.left-i&&t.x<e.right+i&&t.y>e.top-i&&t.y<e.bottom+i}function t3(t,e){t.save(),t.beginPath(),t.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),t.clip()}function t6(t){t.restore()}function t4(t,e,i,s,h){if(!e)return t.lineTo(i.x,i.y);if("middle"===h){let s=(e.x+i.x)/2;t.lineTo(s,e.y),t.lineTo(s,i.y)}else"after"===h!=!!s?t.lineTo(e.x,i.y):t.lineTo(i.x,e.y);t.lineTo(i.x,i.y)}function t8(t,e,i,s){if(!e)return t.lineTo(i.x,i.y);t.bezierCurveTo(s?e.cp1x:e.cp2x,s?e.cp1y:e.cp2y,s?i.cp2x:i.cp1x,s?i.cp2y:i.cp1y,i.x,i.y)}function t9(t,e,i,s,h,n={}){let r,l,a=O(e)?e:[e],o=n.strokeWidth>0&&""!==n.strokeColor;for(t.save(),t.font=h.string,n.translation&&t.translate(n.translation[0],n.translation[1]),z(n.rotation)||t.rotate(n.rotation),n.color&&(t.fillStyle=n.color),n.textAlign&&(t.textAlign=n.textAlign),n.textBaseline&&(t.textBaseline=n.textBaseline),r=0;r<a.length;++r)l=a[r],n.backdrop&&function(t,e){let i=t.fillStyle;t.fillStyle=e.color,t.fillRect(e.left,e.top,e.width,e.height),t.fillStyle=i}(t,n.backdrop),o&&(n.strokeColor&&(t.strokeStyle=n.strokeColor),z(n.strokeWidth)||(t.lineWidth=n.strokeWidth),t.strokeText(l,i,s,n.maxWidth)),t.fillText(l,i,s,n.maxWidth),function(t,e,i,s,h){if(h.strikethrough||h.underline){let n=t.measureText(s),r=e-n.actualBoundingBoxLeft,l=e+n.actualBoundingBoxRight,a=i-n.actualBoundingBoxAscent,o=i+n.actualBoundingBoxDescent,u=h.strikethrough?(a+o)/2:o;t.strokeStyle=t.fillStyle,t.beginPath(),t.lineWidth=h.decorationWidth||2,t.moveTo(r,u),t.lineTo(l,u),t.stroke()}}(t,i,s,l,n),s+=Number(h.lineHeight);t.restore()}function t7(t,e){let{x:i,y:s,w:h,h:n,radius:r}=e;t.arc(i+r.topLeft,s+r.topLeft,r.topLeft,1.5*tt,tt,!0),t.lineTo(i,s+n-r.bottomLeft),t.arc(i+r.bottomLeft,s+n-r.bottomLeft,r.bottomLeft,tt,tn,!0),t.lineTo(i+h-r.bottomRight,s+n),t.arc(i+h-r.bottomRight,s+n-r.bottomRight,r.bottomRight,tn,0,!0),t.lineTo(i+h,s+r.topRight),t.arc(i+h-r.topRight,s+r.topRight,r.topRight,0,-tn,!0),t.lineTo(i+r.topLeft,s)}let et=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,ee=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/,ei=t=>+t||0;function es(t,e){let i={},s=R(e),h=s?Object.keys(e):e,n=R(t)?s?i=>N(t[i],t[e[i]]):e=>t[e]:()=>t;for(let t of h)i[t]=ei(n(t));return i}function eh(t){return es(t,{top:"y",right:"x",bottom:"y",left:"x"})}function en(t){return es(t,["topLeft","topRight","bottomLeft","bottomRight"])}function er(t){let e=eh(t);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function el(t,e){t=t||{},e=e||tG.font;let i=N(t.size,e.size);"string"==typeof i&&(i=parseInt(i,10));let s=N(t.style,e.style);s&&!(""+s).match(ee)&&(console.warn('Invalid font style specified: "'+s+'"'),s=void 0);let h={family:N(t.family,e.family),lineHeight:function(t,e){let i=(""+t).match(et);if(!i||"normal"===i[1])return 1.2*e;switch(t=+i[2],i[3]){case"px":return t;case"%":t/=100}return e*t}(N(t.lineHeight,e.lineHeight),i),size:i,style:s,weight:N(t.weight,e.weight),string:""};return h.string=!h||z(h.size)||z(h.family)?null:(h.style?h.style+" ":"")+(h.weight?h.weight+" ":"")+h.size+"px "+h.family,h}function ea(t,e,i,s){let h,n,r,l=!0;for(h=0,n=t.length;h<n;++h)if(void 0!==(r=t[h])&&(void 0!==e&&"function"==typeof r&&(r=r(e),l=!1),void 0!==i&&O(r)&&(r=r[i%r.length],l=!1),void 0!==r))return s&&!l&&(s.cacheable=!1),r}function eo(t,e){return Object.assign(Object.create(t),e)}function eu(t,e=[""],i,s,h=()=>t[0]){let n=i||t;return void 0===s&&(s=ex("_fallback",t)),new Proxy({[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:t,_rootScopes:n,_fallback:s,_getTarget:h,override:i=>eu([i,...t],e,n,s)},{deleteProperty:(e,i)=>(delete e[i],delete e._keys,delete t[0][i],!0),get:(i,s)=>ep(i,s,()=>(function(t,e,i,s){let h;for(let n of e)if(void 0!==(h=ex(ef(n,t),i)))return eg(t,h)?eb(i,s,t,h):h})(s,e,t,i)),getOwnPropertyDescriptor:(t,e)=>Reflect.getOwnPropertyDescriptor(t._scopes[0],e),getPrototypeOf:()=>Reflect.getPrototypeOf(t[0]),has:(t,e)=>e_(t).includes(e),ownKeys:t=>e_(t),set(t,e,i){let s=t._storage||(t._storage=h());return t[e]=s[e]=i,delete t._keys,!0}})}function ec(t,e,i,s){return new Proxy({_cacheable:!1,_proxy:t,_context:e,_subProxy:i,_stack:new Set,_descriptors:ed(t,s),setContext:e=>ec(t,e,i,s),override:h=>ec(t.override(h),e,i,s)},{deleteProperty:(e,i)=>(delete e[i],delete t[i],!0),get:(t,e,i)=>ep(t,e,()=>(function(t,e,i){let{_proxy:s,_context:h,_subProxy:n,_descriptors:r}=t,l=s[e];return q(l)&&r.isScriptable(e)&&(l=function(t,e,i,s){let{_proxy:h,_context:n,_subProxy:r,_stack:l}=i;if(l.has(t))throw Error("Recursion detected: "+Array.from(l).join("->")+"->"+t);l.add(t);let a=e(n,r||s);return l.delete(t),eg(t,a)&&(a=eb(h._scopes,h,t,a)),a}(e,l,t,i)),O(l)&&l.length&&(l=function(t,e,i,s){let{_proxy:h,_context:n,_subProxy:r,_descriptors:l}=i;if(void 0!==n.index&&s(t))return e[n.index%e.length];if(R(e[0])){let i=e,s=h._scopes.filter(t=>t!==i);for(let a of(e=[],i)){let i=eb(s,h,t,a);e.push(ec(i,n,r&&r[t],l))}}return e}(e,l,t,r.isIndexable)),eg(e,l)&&(l=ec(l,h,n&&n[e],r)),l})(t,e,i)),getOwnPropertyDescriptor:(e,i)=>e._descriptors.allKeys?Reflect.has(t,i)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(t,i),getPrototypeOf:()=>Reflect.getPrototypeOf(t),has:(e,i)=>Reflect.has(t,i),ownKeys:()=>Reflect.ownKeys(t),set:(e,i,s)=>(t[i]=s,delete e[i],!0)})}function ed(t,e={scriptable:!0,indexable:!0}){let{_scriptable:i=e.scriptable,_indexable:s=e.indexable,_allKeys:h=e.allKeys}=t;return{allKeys:h,scriptable:i,indexable:s,isScriptable:q(i)?i:()=>i,isIndexable:q(s)?s:()=>s}}let ef=(t,e)=>t?t+Q(e):e,eg=(t,e)=>R(e)&&"adapters"!==t&&(null===Object.getPrototypeOf(e)||e.constructor===Object);function ep(t,e,i){if(Object.prototype.hasOwnProperty.call(t,e)||"constructor"===e)return t[e];let s=i();return t[e]=s,s}let em=(t,e)=>!0===t?e:"string"==typeof t?X(e,t):void 0;function eb(t,e,i,s){var h;let n=e._rootScopes,r=(h=e._fallback,q(h)?h(i,s):h),l=[...t,...n],a=new Set;a.add(s);let o=ev(a,l,i,r||i,s);return null!==o&&(void 0===r||r===i||null!==(o=ev(a,l,r,o,s)))&&eu(Array.from(a),[""],n,r,()=>{var t,h,n;let r,l;return t=e,h=i,n=s,h in(r=t._getTarget())||(r[h]={}),O(l=r[h])&&R(n)?n:l||{}})}function ev(t,e,i,s,h){for(;i;)i=function(t,e,i,s,h){for(let r of e){let e=em(i,r);if(e){var n;t.add(e);let r=(n=e._fallback,q(n)?n(i,h):n);if(void 0!==r&&r!==i&&r!==s)return r}else if(!1===e&&void 0!==s&&i!==s)return null}return!1}(t,e,i,s,h);return i}function ex(t,e){for(let i of e){if(!i)continue;let e=i[t];if(void 0!==e)return e}}function e_(t){let e=t._keys;return e||(e=t._keys=function(t){let e=new Set;for(let i of t)for(let t of Object.keys(i).filter(t=>!t.startsWith("_")))e.add(t);return Array.from(e)}(t._scopes)),e}function ey(t,e,i,s){let h,n,r,{iScale:l}=t,{key:a="r"}=this._parsing,o=Array(s);for(h=0;h<s;++h)r=e[n=h+i],o[h]={r:l.parse(X(r,a),n)};return o}let ew=Number.EPSILON||1e-14,eM=(t,e)=>e<t.length&&!t[e].skip&&t[e],eS=t=>"x"===t?"y":"x";function ek(t,e,i){return Math.max(Math.min(t,i),e)}function eC(){return"u">typeof window&&"u">typeof document}function eP(t){let e=t.parentNode;return e&&"[object ShadowRoot]"===e.toString()&&(e=e.host),e}function eE(t,e,i){let s;return"string"==typeof t?(s=parseInt(t,10),-1!==t.indexOf("%")&&(s=s/100*e.parentNode[i])):s=t,s}let eL=t=>t.ownerDocument.defaultView.getComputedStyle(t,null),eD=["top","right","bottom","left"];function eT(t,e,i){let s={};i=i?"-"+i:"";for(let h=0;h<4;h++){let n=eD[h];s[n]=parseFloat(t[e+"-"+n+i])||0}return s.width=s.left+s.right,s.height=s.top+s.bottom,s}function ez(t,e){if("native"in t)return t;let{canvas:i,currentDevicePixelRatio:s}=e,h=eL(i),n="border-box"===h.boxSizing,r=eT(h,"padding"),l=eT(h,"border","width"),{x:a,y:o,box:u}=function(t,e){let i,s,h,n=t.touches,r=n&&n.length?n[0]:t,{offsetX:l,offsetY:a}=r,o=!1;if(h=t.target,(l>0||a>0)&&(!h||!h.shadowRoot))i=l,s=a;else{let t=e.getBoundingClientRect();i=r.clientX-t.left,s=r.clientY-t.top,o=!0}return{x:i,y:s,box:o}}(t,i),c=r.left+(u&&l.left),d=r.top+(u&&l.top),{width:f,height:g}=e;return n&&(f-=r.width+l.width,g-=r.height+l.height),{x:Math.round((a-c)/f*i.width/s),y:Math.round((o-d)/g*i.height/s)}}let eO=t=>Math.round(10*t)/10;function eR(t,e,i){let s=e||1,h=eO(t.height*s),n=eO(t.width*s);t.height=eO(t.height),t.width=eO(t.width);let r=t.canvas;return r.style&&(i||!r.style.height&&!r.style.width)&&(r.style.height=`${t.height}px`,r.style.width=`${t.width}px`),(t.currentDevicePixelRatio!==s||r.height!==h||r.width!==n)&&(t.currentDevicePixelRatio=s,r.height=h,r.width=n,t.ctx.setTransform(s,0,0,s,0,0),!0)}let eA=function(){let t=!1;try{let e={get passive(){return t=!0,!1}};eC()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch(t){}return t}();function eF(t,e){let i=eL(t).getPropertyValue(e),s=i&&i.match(/^(\d+)(\.\d+)?px$/);return s?+s[1]:void 0}function eN(t,e,i,s){return{x:t.x+i*(e.x-t.x),y:t.y+i*(e.y-t.y)}}function eB(t,e,i,s){return{x:t.x+i*(e.x-t.x),y:"middle"===s?i<.5?t.y:e.y:"after"===s?i<1?t.y:e.y:i>0?e.y:t.y}}function ej(t,e,i,s){let h={x:t.cp2x,y:t.cp2y},n={x:e.cp1x,y:e.cp1y},r=eN(t,h,i),l=eN(h,n,i),a=eN(n,e,i),o=eN(r,l,i),u=eN(l,a,i);return eN(o,u,i)}function eI(t,e,i){var s;return t?(s=i,{x:t=>e+e+s-t,setWidth(t){s=t},textAlign:t=>"center"===t?t:"right"===t?"left":"right",xPlus:(t,e)=>t-e,leftForLtr:(t,e)=>t-e}):{x:t=>t,setWidth(t){},textAlign:t=>t,xPlus:(t,e)=>t+e,leftForLtr:(t,e)=>t}}function eW(t,e){let i,s;("ltr"===e||"rtl"===e)&&(s=[(i=t.canvas.style).getPropertyValue("direction"),i.getPropertyPriority("direction")],i.setProperty("direction",e,"important"),t.prevTextDirection=s)}function eV(t,e){void 0!==e&&(delete t.prevTextDirection,t.canvas.style.setProperty("direction",e[0],e[1]))}function eH(t){return"angle"===t?{between:t_,compare:tv,normalize:tx}:{between:tw,compare:(t,e)=>t-e,normalize:t=>t}}function e$({start:t,end:e,count:i,loop:s,style:h}){return{start:t%i,end:e%i,loop:s&&(e-t+1)%i==0,style:h}}function eU(t,e,i){let s,h,n;if(!i)return[t];let{property:r,start:l,end:a}=i,o=e.length,{compare:u,between:c,normalize:d}=eH(r),{start:f,end:g,loop:p,style:m}=function(t,e,i){let s,{property:h,start:n,end:r}=i,{between:l,normalize:a}=eH(h),o=e.length,{start:u,end:c,loop:d}=t;if(d){for(u+=o,c+=o,s=0;s<o&&l(a(e[u%o][h]),n,r);++s)u--,c--;u%=o,c%=o}return c<u&&(c+=o),{start:u,end:c,loop:d,style:t.style}}(t,e,i),b=[],v=!1,x=null,_=()=>v||c(l,n,s)&&0!==u(l,n),y=()=>!v||0===u(a,s)||c(a,n,s);for(let t=f,i=f;t<=g;++t)(h=e[t%o]).skip||(s=d(h[r]))!==n&&(v=c(s,l,a),null===x&&_()&&(x=0===u(s,l)?t:i),null!==x&&y()&&(b.push(e$({start:x,end:t,loop:p,count:o,style:m})),x=null),i=t,n=s);return null!==x&&b.push(e$({start:x,end:g,loop:p,count:o,style:m})),b}function eY(t,e){let i=[],s=t.segments;for(let h=0;h<s.length;h++){let n=eU(s[h],t.points,e);n.length&&i.push(...n)}return i}function eK(t,e,i,s){return s&&s.setContext&&i?function(t,e,i,s){let h=t._chart.getContext(),n=eJ(t.options),{_datasetIndex:r,options:{spanGaps:l}}=t,a=i.length,o=[],u=n,c=e[0].start,d=c;function f(t,e,s,h){let n=l?-1:1;if(t!==e){for(t+=a;i[t%a].skip;)t-=n;for(;i[e%a].skip;)e+=n;t%a!=e%a&&(o.push({start:t%a,end:e%a,loop:s,style:h}),u=h,c=e%a)}}for(let t of e){let e,n=i[(c=l?c:t.start)%a];for(d=c+1;d<=t.end;d++){let l=i[d%a];(function(t,e){if(!e)return!1;let i=[],s=function(t,e){return tj(e)?(i.includes(e)||i.push(e),i.indexOf(e)):e};return JSON.stringify(t,s)!==JSON.stringify(e,s)})(e=eJ(s.setContext(eo(h,{type:"segment",p0:n,p1:l,p0DataIndex:(d-1)%a,p1DataIndex:d%a,datasetIndex:r}))),u)&&f(c,d-1,t.loop,u),n=l,u=e}c<d-1&&f(c,d-1,t.loop,u)}return o}(t,e,i,s):e}function eJ(t){return{backgroundColor:t.backgroundColor,borderCapStyle:t.borderCapStyle,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderJoinStyle:t.borderJoinStyle,borderWidth:t.borderWidth,borderColor:t.borderColor}}function eX(t,e,i){return t.options.clip?t[i]:e[i]}function eQ(t,e){let i=e._clip;if(i.disabled)return!1;let s=function(t,e){let{xScale:i,yScale:s}=t;return i&&s?{left:eX(i,e,"left"),right:eX(i,e,"right"),top:eX(s,e,"top"),bottom:eX(s,e,"bottom")}:e}(e,t.chartArea);return{left:!1===i.left?0:s.left-(!0===i.left?0:i.left),right:!1===i.right?t.width:s.right+(!0===i.right?0:i.right),top:!1===i.top?0:s.top-(!0===i.top?0:i.top),bottom:!1===i.bottom?t.height:s.bottom+(!0===i.bottom?0:i.bottom)}}var eG=new class{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(t,e,i,s){let h=e.listeners[s],n=e.duration;h.forEach(s=>s({chart:t,initial:e.initial,numSteps:n,currentStep:Math.min(i-e.start,n)}))}_refresh(){this._request||(this._running=!0,this._request=tL.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(t=Date.now()){let e=0;this._charts.forEach((i,s)=>{let h;if(!i.running||!i.items.length)return;let n=i.items,r=n.length-1,l=!1;for(;r>=0;--r)(h=n[r])._active?(h._total>i.duration&&(i.duration=h._total),h.tick(t),l=!0):(n[r]=n[n.length-1],n.pop());l&&(s.draw(),this._notify(s,i,t,"progress")),n.length||(i.running=!1,this._notify(s,i,t,"complete"),i.initial=!1),e+=n.length}),this._lastDate=t,0===e&&(this._running=!1)}_getAnims(t){let e=this._charts,i=e.get(t);return i||(i={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},e.set(t,i)),i}listen(t,e,i){this._getAnims(t).listeners[e].push(i)}add(t,e){e&&e.length&&this._getAnims(t).items.push(...e)}has(t){return this._getAnims(t).items.length>0}start(t){let e=this._charts.get(t);e&&(e.running=!0,e.start=Date.now(),e.duration=e.items.reduce((t,e)=>Math.max(t,e._duration),0),this._refresh())}running(t){if(!this._running)return!1;let e=this._charts.get(t);return!!e&&!!e.running&&!!e.items.length}stop(t){let e=this._charts.get(t);if(!e||!e.items.length)return;let i=e.items,s=i.length-1;for(;s>=0;--s)i[s].cancel();e.items=[],this._notify(t,e,Date.now(),"complete")}remove(t){return this._charts.delete(t)}};let eq="transparent",eZ={boolean:(t,e,i)=>i>.5?e:t,color(t,e,i){let s=tI(t||eq),h=s.valid&&tI(e||eq);return h&&h.valid?h.mix(s,i).hexString():e},number:(t,e,i)=>t+(e-t)*i};class e0{constructor(t,e,i,s){const h=e[i];s=ea([t.to,s,h,t.from]);const n=ea([t.from,h,s]);this._active=!0,this._fn=t.fn||eZ[t.type||typeof n],this._easing=tB[t.easing]||tB.linear,this._start=Math.floor(Date.now()+(t.delay||0)),this._duration=this._total=Math.floor(t.duration),this._loop=!!t.loop,this._target=e,this._prop=i,this._from=n,this._to=s,this._promises=void 0}active(){return this._active}update(t,e,i){if(this._active){this._notify(!1);let s=this._target[this._prop],h=i-this._start,n=this._duration-h;this._start=i,this._duration=Math.floor(Math.max(n,t.duration)),this._total+=h,this._loop=!!t.loop,this._to=ea([t.to,e,s,t.from]),this._from=ea([t.from,s,e])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(t){let e,i=t-this._start,s=this._duration,h=this._prop,n=this._from,r=this._loop,l=this._to;if(this._active=n!==l&&(r||i<s),!this._active){this._target[h]=l,this._notify(!0);return}if(i<0){this._target[h]=n;return}e=i/s%2,e=r&&e>1?2-e:e,e=this._easing(Math.min(1,Math.max(0,e))),this._target[h]=this._fn(n,l,e)}wait(){let t=this._promises||(this._promises=[]);return new Promise((e,i)=>{t.push({res:e,rej:i})})}_notify(t){let e=t?"res":"rej",i=this._promises||[];for(let t=0;t<i.length;t++)i[t][e]()}}class e1{constructor(t,e){this._chart=t,this._properties=new Map,this.configure(e)}configure(t){if(!R(t))return;let e=Object.keys(tG.animation),i=this._properties;Object.getOwnPropertyNames(t).forEach(s=>{let h=t[s];if(!R(h))return;let n={};for(let t of e)n[t]=h[t];(O(h.properties)&&h.properties||[s]).forEach(t=>{t!==s&&i.has(t)||i.set(t,n)})})}_animateOptions(t,e){let i=e.options,s=function(t,e){if(!e)return;let i=t.options;if(!i){t.options=e;return}return i.$shared&&(t.options=i=Object.assign({},i,{$shared:!1,$animations:{}})),i}(t,i);if(!s)return[];let h=this._createAnimations(s,i);return i.$shared&&(function(t,e){let i=[],s=Object.keys(e);for(let e=0;e<s.length;e++){let h=t[s[e]];h&&h.active()&&i.push(h.wait())}return Promise.all(i)})(t.options.$animations,i).then(()=>{t.options=i},()=>{}),h}_createAnimations(t,e){let i,s=this._properties,h=[],n=t.$animations||(t.$animations={}),r=Object.keys(e),l=Date.now();for(i=r.length-1;i>=0;--i){let a=r[i];if("$"===a.charAt(0))continue;if("options"===a){h.push(...this._animateOptions(t,e));continue}let o=e[a],u=n[a],c=s.get(a);if(u)if(c&&u.active()){u.update(c,o,l);continue}else u.cancel();if(!c||!c.duration){t[a]=o;continue}n[a]=u=new e0(c,t,a,o),h.push(u)}return h}update(t,e){if(0===this._properties.size)return void Object.assign(t,e);let i=this._createAnimations(t,e);if(i.length)return eG.add(this._chart,i),!0}}function e2(t,e){let i=t&&t.options||{},s=i.reverse,h=void 0===i.min?e:0,n=void 0===i.max?e:0;return{start:s?n:h,end:s?h:n}}function e5(t,e){let i,s,h=[],n=t._getSortedDatasetMetas(e);for(i=0,s=n.length;i<s;++i)h.push(n[i].index);return h}function e3(t,e,i,s={}){let h,n,r,l,a=t.keys,o="single"===s.mode;if(null===e)return;let u=!1;for(h=0,n=a.length;h<n;++h){if((r=+a[h])===i){if(u=!0,s.all)continue;break}A(l=t.values[r])&&(o||0===e||to(e)===to(l))&&(e+=l)}return u||s.all?e:0}function e6(t,e){let i=t&&t.options.stacked;return i||void 0===i&&void 0!==e.stack}function e4(t,e,i,s){for(let h of e.getMatchingVisibleMetas(s).reverse()){let e=t[h.index];if(i&&e>0||!i&&e<0)return h.index}return null}function e8(t,e){let i,{chart:s,_cachedMeta:h}=t,n=s._stacks||(s._stacks={}),{iScale:r,vScale:l,index:a}=h,o=r.axis,u=l.axis,c=`${r.id}.${l.id}.${h.stack||h.type}`,d=e.length;for(let t=0;t<d;++t){let s=e[t],{[o]:r,[u]:d}=s;(i=(s._stacks||(s._stacks={}))[u]=function(t,e,i){let s=t[e]||(t[e]={});return s[i]||(s[i]={})}(n,c,r))[a]=d,i._top=e4(i,l,!0,h.type),i._bottom=e4(i,l,!1,h.type),(i._visualValues||(i._visualValues={}))[a]=d}}function e9(t,e){let i=t.scales;return Object.keys(i).filter(t=>i[t].axis===e).shift()}function e7(t,e){let i=t.controller.index,s=t.vScale&&t.vScale.axis;if(s)for(let h of e=e||t._parsed){let t=h._stacks;if(!t||void 0===t[s]||void 0===t[s][i])return;delete t[s][i],void 0!==t[s]._visualValues&&void 0!==t[s]._visualValues[i]&&delete t[s]._visualValues[i]}}let it=t=>"reset"===t||"none"===t,ie=(t,e)=>e?t:Object.assign({},t);class ii{static defaults={};static datasetElementType=null;static dataElementType=null;constructor(t,e){this.chart=t,this._ctx=t.ctx,this.index=e,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){let t=this._cachedMeta;this.configure(),this.linkScales(),t._stacked=e6(t.vScale,t),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(t){this.index!==t&&e7(this._cachedMeta),this.index=t}linkScales(){let t=this.chart,e=this._cachedMeta,i=this.getDataset(),s=(t,e,i,s)=>"x"===t?e:"r"===t?s:i,h=e.xAxisID=N(i.xAxisID,e9(t,"x")),n=e.yAxisID=N(i.yAxisID,e9(t,"y")),r=e.rAxisID=N(i.rAxisID,e9(t,"r")),l=e.indexAxis,a=e.iAxisID=s(l,h,n,r),o=e.vAxisID=s(l,n,h,r);e.xScale=this.getScaleForId(h),e.yScale=this.getScaleForId(n),e.rScale=this.getScaleForId(r),e.iScale=this.getScaleForId(a),e.vScale=this.getScaleForId(o)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(t){return this.chart.scales[t]}_getOtherScale(t){let e=this._cachedMeta;return t===e.iScale?e.vScale:e.iScale}reset(){this._update("reset")}_destroy(){let t=this._cachedMeta;this._data&&tP(this._data,this),t._stacked&&e7(t)}_dataCheck(){let t=this.getDataset(),e=t.data||(t.data=[]),i=this._data;if(R(e)){let t=this._cachedMeta;this._data=function(t,e){let i,s,h,{iScale:n,vScale:r}=e,l="x"===n.axis?"x":"y",a="x"===r.axis?"x":"y",o=Object.keys(t),u=Array(o.length);for(i=0,s=o.length;i<s;++i)h=o[i],u[i]={[l]:h,[a]:t[h]};return u}(e,t)}else if(i!==e){if(i){tP(i,this);let t=this._cachedMeta;e7(t),t._parsed=[]}e&&Object.isExtensible(e)&&(e._chartjs?e._chartjs.listeners.push(this):(Object.defineProperty(e,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[this]}}),tC.forEach(t=>{let i="_onData"+Q(t),s=e[t];Object.defineProperty(e,t,{configurable:!0,enumerable:!1,value(...t){let h=s.apply(this,t);return e._chartjs.listeners.forEach(e=>{"function"==typeof e[i]&&e[i](...t)}),h}})}))),this._syncList=[],this._data=e}}addElements(){let t=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(t.dataset=new this.datasetElementType)}buildOrUpdateElements(t){let e=this._cachedMeta,i=this.getDataset(),s=!1;this._dataCheck();let h=e._stacked;e._stacked=e6(e.vScale,e),e.stack!==i.stack&&(s=!0,e7(e),e.stack=i.stack),this._resyncElements(t),(s||h!==e._stacked)&&(e8(this,e._parsed),e._stacked=e6(e.vScale,e))}configure(){let t=this.chart.config,e=t.datasetScopeKeys(this._type),i=t.getOptionScopes(this.getDataset(),e,!0);this.options=t.createResolver(i,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(t,e){let i,s,h,{_cachedMeta:n,_data:r}=this,{iScale:l,_stacked:a}=n,o=l.axis,u=0===t&&e===r.length||n._sorted,c=t>0&&n._parsed[t-1];if(!1===this._parsing)n._parsed=r,n._sorted=!0,h=r;else{h=O(r[t])?this.parseArrayData(n,r,t,e):R(r[t])?this.parseObjectData(n,r,t,e):this.parsePrimitiveData(n,r,t,e);let l=()=>null===s[o]||c&&s[o]<c[o];for(i=0;i<e;++i)n._parsed[i+t]=s=h[i],u&&(l()&&(u=!1),c=s);n._sorted=u}a&&e8(this,h)}parsePrimitiveData(t,e,i,s){let h,n,{iScale:r,vScale:l}=t,a=r.axis,o=l.axis,u=r.getLabels(),c=r===l,d=Array(s);for(h=0;h<s;++h)n=h+i,d[h]={[a]:c||r.parse(u[n],n),[o]:l.parse(e[n],n)};return d}parseArrayData(t,e,i,s){let h,n,r,{xScale:l,yScale:a}=t,o=Array(s);for(h=0;h<s;++h)r=e[n=h+i],o[h]={x:l.parse(r[0],n),y:a.parse(r[1],n)};return o}parseObjectData(t,e,i,s){let h,n,r,{xScale:l,yScale:a}=t,{xAxisKey:o="x",yAxisKey:u="y"}=this._parsing,c=Array(s);for(h=0;h<s;++h)r=e[n=h+i],c[h]={x:l.parse(X(r,o),n),y:a.parse(X(r,u),n)};return c}getParsed(t){return this._cachedMeta._parsed[t]}getDataElement(t){return this._cachedMeta.data[t]}applyStack(t,e,i){let s=this.chart,h=this._cachedMeta,n=e[t.axis];return e3({keys:e5(s,!0),values:e._stacks[t.axis]._visualValues},n,h.index,{mode:i})}updateRangeFromParsed(t,e,i,s){let h=i[e.axis],n=null===h?NaN:h,r=s&&i._stacks[e.axis];s&&r&&(s.values=r,n=e3(s,h,this._cachedMeta.index)),t.min=Math.min(t.min,n),t.max=Math.max(t.max,n)}getMinMax(t,e){let i,s,h,n=this._cachedMeta,r=n._parsed,l=n._sorted&&t===n.iScale,a=r.length,o=this._getOtherScale(t),u=(h=this.chart,e&&!n.hidden&&n._stacked&&{keys:e5(h,!0),values:null}),c={min:1/0,max:-1/0},{min:d,max:f}=function(t){let{min:e,max:i,minDefined:s,maxDefined:h}=t.getUserBounds();return{min:s?e:-1/0,max:h?i:1/0}}(o);function g(){let e=(s=r[i])[o.axis];return!A(s[t.axis])||d>e||f<e}for(i=0;i<a&&(g()||(this.updateRangeFromParsed(c,t,s,u),!l));++i);if(l){for(i=a-1;i>=0;--i)if(!g()){this.updateRangeFromParsed(c,t,s,u);break}}return c}getAllParsedValues(t){let e,i,s,h=this._cachedMeta._parsed,n=[];for(e=0,i=h.length;e<i;++e)A(s=h[e][t.axis])&&n.push(s);return n}getMaxOverflow(){return!1}getLabelAndValue(t){let e=this._cachedMeta,i=e.iScale,s=e.vScale,h=this.getParsed(t);return{label:i?""+i.getLabelForValue(h[i.axis]):"",value:s?""+s.getLabelForValue(h[s.axis]):""}}_update(t){var e;let i,s,h,n,r=this._cachedMeta;this.update(t||"default"),R(e=N(this.options.clip,function(t,e,i){if(!1===i)return!1;let s=e2(t,i),h=e2(e,i);return{top:h.end,right:s.end,bottom:h.start,left:s.start}}(r.xScale,r.yScale,this.getMaxOverflow())))?(i=e.top,s=e.right,h=e.bottom,n=e.left):i=s=h=n=e,r._clip={top:i,right:s,bottom:h,left:n,disabled:!1===e}}update(t){}draw(){let t,e=this._ctx,i=this.chart,s=this._cachedMeta,h=s.data||[],n=i.chartArea,r=[],l=this._drawStart||0,a=this._drawCount||h.length-l,o=this.options.drawActiveElementsOnTop;for(s.dataset&&s.dataset.draw(e,n,l,a),t=l;t<l+a;++t){let i=h[t];i.hidden||(i.active&&o?r.push(i):i.draw(e,n))}for(t=0;t<r.length;++t)r[t].draw(e,n)}getStyle(t,e){let i=e?"active":"default";return void 0===t&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(i):this.resolveDataElementOptions(t||0,i)}getContext(t,e,i){var s,h;let n,r=this.getDataset();if(t>=0&&t<this._cachedMeta.data.length){let e=this._cachedMeta.data[t];(n=e.$context||(s=this.getContext(),e.$context=eo(s,{active:!1,dataIndex:t,parsed:void 0,raw:void 0,element:e,index:t,mode:"default",type:"data"}))).parsed=this.getParsed(t),n.raw=r.data[t],n.index=n.dataIndex=t}else(n=this.$context||(this.$context=eo(this.chart.getContext(),{active:!1,dataset:void 0,datasetIndex:h=this.index,index:h,mode:"default",type:"dataset"}))).dataset=r,n.index=n.datasetIndex=this.index;return n.active=!!e,n.mode=i,n}resolveDatasetElementOptions(t){return this._resolveElementOptions(this.datasetElementType.id,t)}resolveDataElementOptions(t,e){return this._resolveElementOptions(this.dataElementType.id,e,t)}_resolveElementOptions(t,e="default",i){let s="active"===e,h=this._cachedDataOpts,n=t+"-"+e,r=h[n],l=this.enableOptionSharing&&G(i);if(r)return ie(r,l);let a=this.chart.config,o=a.datasetElementScopeKeys(this._type,t),u=s?[`${t}Hover`,"hover",t,""]:[t,""],c=a.getOptionScopes(this.getDataset(),o),d=Object.keys(tG.elements[t]),f=()=>this.getContext(i,s,e),g=a.resolveNamedOptions(c,d,f,u);return g.$shared&&(g.$shared=l,h[n]=Object.freeze(ie(g,l))),g}_resolveAnimations(t,e,i){let s,h=this.chart,n=this._cachedDataOpts,r=`animation-${e}`,l=n[r];if(l)return l;if(!1!==h.options.animation){let h=this.chart.config,n=h.datasetAnimationScopeKeys(this._type,e),r=h.getOptionScopes(this.getDataset(),n);s=h.createResolver(r,this.getContext(t,i,e))}let a=new e1(h,s&&s.animations);return s&&s._cacheable&&(n[r]=Object.freeze(a)),a}getSharedOptions(t){if(t.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},t))}includeOptions(t,e){return!e||it(t)||this.chart._animationsDisabled}_getSharedOptions(t,e){let i=this.resolveDataElementOptions(t,e),s=this._sharedOptions,h=this.getSharedOptions(i),n=this.includeOptions(e,h)||h!==s;return this.updateSharedOptions(h,e,i),{sharedOptions:h,includeOptions:n}}updateElement(t,e,i,s){it(s)?Object.assign(t,i):this._resolveAnimations(e,s).update(t,i)}updateSharedOptions(t,e,i){t&&!it(e)&&this._resolveAnimations(void 0,e).update(t,i)}_setStyle(t,e,i,s){t.active=s;let h=this.getStyle(e,s);this._resolveAnimations(e,i,s).update(t,{options:!s&&this.getSharedOptions(h)||h})}removeHoverStyle(t,e,i){this._setStyle(t,i,"active",!1)}setHoverStyle(t,e,i){this._setStyle(t,i,"active",!0)}_removeDatasetHoverStyle(){let t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!1)}_setDatasetHoverStyle(){let t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!0)}_resyncElements(t){let e=this._data,i=this._cachedMeta.data;for(let[t,e,i]of this._syncList)this[t](e,i);this._syncList=[];let s=i.length,h=e.length,n=Math.min(h,s);n&&this.parse(0,n),h>s?this._insertElements(s,h-s,t):h<s&&this._removeElements(h,s-h)}_insertElements(t,e,i=!0){let s,h=this._cachedMeta,n=h.data,r=t+e,l=t=>{for(t.length+=e,s=t.length-1;s>=r;s--)t[s]=t[s-e]};for(l(n),s=t;s<r;++s)n[s]=new this.dataElementType;this._parsing&&l(h._parsed),this.parse(t,e),i&&this.updateElements(n,t,e,"reset")}updateElements(t,e,i,s){}_removeElements(t,e){let i=this._cachedMeta;if(this._parsing){let s=i._parsed.splice(t,e);i._stacked&&e7(i,s)}i.data.splice(t,e)}_sync(t){if(this._parsing)this._syncList.push(t);else{let[e,i,s]=t;this[e](i,s)}this.chart._dataChanges.push([this.index,...t])}_onDataPush(){let t=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-t,t])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(t,e){e&&this._sync(["_removeElements",t,e]);let i=arguments.length-2;i&&this._sync(["_insertElements",t,i])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}function is(t,e,i,s){if(O(t)){let h,n,r,l,a,o;h=i.parse(t[0],s),r=Math.min(h,n=i.parse(t[1],s)),l=Math.max(h,n),a=r,o=l,Math.abs(r)>Math.abs(l)&&(a=l,o=r),e[i.axis]=o,e._custom={barStart:a,barEnd:o,start:h,end:n,min:r,max:l}}else e[i.axis]=i.parse(t,s);return e}function ih(t,e,i,s){let h,n,r,l,a=t.iScale,o=t.vScale,u=a.getLabels(),c=a===o,d=[];for(h=i,n=i+s;h<n;++h)l=e[h],(r={})[a.axis]=c||a.parse(u[h],h),d.push(is(l,r,o,h));return d}function ir(t){return t&&void 0!==t.barStart&&void 0!==t.barEnd}function il(t,e,i,s){var h,n,r;return s?ia((h=t,n=e,r=i,t=h===n?r:h===r?n:h),i,e):ia(t,e,i)}function ia(t,e,i){return"start"===t?e:"end"===t?i:t}class io extends ii{static id="bar";static defaults={datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}};static overrides={scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}};parsePrimitiveData(t,e,i,s){return ih(t,e,i,s)}parseArrayData(t,e,i,s){return ih(t,e,i,s)}parseObjectData(t,e,i,s){let h,n,r,l,{iScale:a,vScale:o}=t,{xAxisKey:u="x",yAxisKey:c="y"}=this._parsing,d="x"===a.axis?u:c,f="x"===o.axis?u:c,g=[];for(h=i,n=i+s;h<n;++h)l=e[h],(r={})[a.axis]=a.parse(X(l,d),h),g.push(is(X(l,f),r,o,h));return g}updateRangeFromParsed(t,e,i,s){super.updateRangeFromParsed(t,e,i,s);let h=i._custom;h&&e===this._cachedMeta.vScale&&(t.min=Math.min(t.min,h.min),t.max=Math.max(t.max,h.max))}getMaxOverflow(){return 0}getLabelAndValue(t){let{iScale:e,vScale:i}=this._cachedMeta,s=this.getParsed(t),h=s._custom,n=ir(h)?"["+h.start+", "+h.end+"]":""+i.getLabelForValue(s[i.axis]);return{label:""+e.getLabelForValue(s[e.axis]),value:n}}initialize(){this.enableOptionSharing=!0,super.initialize(),this._cachedMeta.stack=this.getDataset().stack}update(t){let e=this._cachedMeta;this.updateElements(e.data,0,e.data.length,t)}updateElements(t,e,i,s){let h="reset"===s,{index:n,_cachedMeta:{vScale:r}}=this,l=r.getBasePixel(),a=r.isHorizontal(),o=this._getRuler(),{sharedOptions:u,includeOptions:c}=this._getSharedOptions(e,s);for(let d=e;d<e+i;d++){let e=this.getParsed(d),i=h||z(e[r.axis])?{base:l,head:l}:this._calculateBarValuePixels(d),f=this._calculateBarIndexPixels(d,o),g=(e._stacks||{})[r.axis],p={horizontal:a,base:i.base,enableBorderRadius:!g||ir(e._custom)||n===g._top||n===g._bottom,x:a?i.head:f.center,y:a?f.center:i.head,height:a?f.size:Math.abs(i.size),width:a?Math.abs(i.size):f.size};c&&(p.options=u||this.resolveDataElementOptions(d,t[d].active?"active":s));let m=p.options||t[d].options;!function(t,e,i,s){let h,n,r,l,a,o=e.borderSkipped,u={};if(!o){t.borderSkipped=u;return}if(!0===o){t.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}let{start:c,end:d,reverse:f,top:g,bottom:p}=(t.horizontal?(h=t.base>t.x,n="left",r="right"):(h=t.base<t.y,n="bottom",r="top"),h?(l="end",a="start"):(l="start",a="end"),{start:n,end:r,reverse:h,top:l,bottom:a});"middle"===o&&i&&(t.enableBorderRadius=!0,(i._top||0)===s?o=g:(i._bottom||0)===s?o=p:(u[il(p,c,d,f)]=!0,o=g)),u[il(o,c,d,f)]=!0,t.borderSkipped=u}(p,m,g,n),function(t,{inflateAmount:e},i){t.inflateAmount="auto"===e?.33*(1===i):e}(p,m,o.ratio),this.updateElement(t[d],d,p,s)}}_getStacks(t,e){let{iScale:i}=this._cachedMeta,s=i.getMatchingVisibleMetas(this._type).filter(t=>t.controller.options.grouped),h=i.options.stacked,n=[],r=this._cachedMeta.controller.getParsed(e),l=r&&r[i.axis],a=t=>{let e=t._parsed.find(t=>t[i.axis]===l),s=e&&e[t.vScale.axis];if(z(s)||isNaN(s))return!0};for(let i of s)if(!(void 0!==e&&a(i))&&((!1===h||-1===n.indexOf(i.stack)||void 0===h&&void 0===i.stack)&&n.push(i.stack),i.index===t))break;return n.length||n.push(void 0),n}_getStackCount(t){return this._getStacks(void 0,t).length}_getAxisCount(){return this._getAxis().length}getFirstScaleIdForIndexAxis(){let t=this.chart.scales,e=this.chart.options.indexAxis;return Object.keys(t).filter(i=>t[i].axis===e).shift()}_getAxis(){let t={},e=this.getFirstScaleIdForIndexAxis();for(let i of this.chart.data.datasets)t[N("x"===this.chart.options.indexAxis?i.xAxisID:i.yAxisID,e)]=!0;return Object.keys(t)}_getStackIndex(t,e,i){let s=this._getStacks(t,i),h=void 0!==e?s.indexOf(e):-1;return -1===h?s.length-1:h}_getRuler(){let t,e,i=this.options,s=this._cachedMeta,h=s.iScale,n=[];for(t=0,e=s.data.length;t<e;++t)n.push(h.getPixelForValue(this.getParsed(t)[h.axis],t));let r=i.barThickness;return{min:r||function(t){let e,i,s,h,n=t.iScale,r=function(t,e){if(!t._cache.$bar){let i=t.getMatchingVisibleMetas(e),s=[];for(let e=0,h=i.length;e<h;e++)s=s.concat(i[e].controller.getAllParsedValues(t));t._cache.$bar=tE(s.sort((t,e)=>t-e))}return t._cache.$bar}(n,t.type),l=n._length,a=()=>{32767!==s&&-32768!==s&&(G(h)&&(l=Math.min(l,Math.abs(s-h)||l)),h=s)};for(e=0,i=r.length;e<i;++e)s=n.getPixelForValue(r[e]),a();for(e=0,h=void 0,i=n.ticks.length;e<i;++e)s=n.getPixelForTick(e),a();return l}(s),pixels:n,start:h._startPixel,end:h._endPixel,stackCount:this._getStackCount(),scale:h,grouped:i.grouped,ratio:r?1:i.categoryPercentage*i.barPercentage}}_calculateBarValuePixels(t){let e,i,{_cachedMeta:{vScale:s,_stacked:h,index:n},options:{base:r,minBarLength:l}}=this,a=r||0,o=this.getParsed(t),u=o._custom,c=ir(u),d=o[s.axis],f=0,g=h?this.applyStack(s,o,h):d;g!==d&&(f=g-d,g=d),c&&(d=u.barStart,g=u.barEnd-u.barStart,0!==d&&to(d)!==to(u.barEnd)&&(f=0),f+=d);let p=z(r)||c?f:r,m=s.getPixelForValue(p);if(Math.abs(i=(e=this.chart.getDataVisibility(t)?s.getPixelForValue(f+g):m)-m)<l){var b;i=(0!==(b=i)?to(b):(s.isHorizontal()?1:-1)*(s.min>=a?1:-1))*l,d===a&&(m-=i/2);let t=s.getPixelForDecimal(0),r=s.getPixelForDecimal(1),u=Math.min(t,r);e=(m=Math.max(Math.min(m,Math.max(t,r)),u))+i,h&&!c&&(o._stacks[s.axis]._visualValues[n]=s.getValueForPixel(e)-s.getValueForPixel(m))}if(m===s.getPixelForValue(a)){let t=to(i)*s.getLineWidthForValue(a)/2;m+=t,i-=t}return{size:i,base:m,head:e,center:e+i/2}}_calculateBarIndexPixels(t,e){let i,s,h=e.scale,n=this.options,r=n.skipNull,l=N(n.maxBarThickness,1/0),a=this._getAxisCount();if(e.grouped){var o,u;let h,c,d,f,g,p,m,b,v,x=r?this._getStackCount(t):e.stackCount,_="flex"===n.barThickness?(o=x*a,c=(h=e.pixels)[t],d=t>0?h[t-1]:null,f=t<h.length-1?h[t+1]:null,g=n.categoryPercentage,null===d&&(d=c-(null===f?e.end-e.start:f-c)),null===f&&(f=c+c-d),p=c-(c-Math.min(d,f))/2*g,{chunk:Math.abs(f-d)/2*g/o,ratio:n.barPercentage,start:p}):(u=x*a,z(v=n.barThickness)?(m=e.min*n.categoryPercentage,b=n.barPercentage):(m=v*u,b=1),{chunk:m/u,ratio:b,start:e.pixels[t]-m/2}),y="x"===this.chart.options.indexAxis?this.getDataset().xAxisID:this.getDataset().yAxisID,w=this._getAxis().indexOf(N(y,this.getFirstScaleIdForIndexAxis())),M=this._getStackIndex(this.index,this._cachedMeta.stack,r?t:void 0)+w;i=_.start+_.chunk*M+_.chunk/2,s=Math.min(l,_.chunk*_.ratio)}else i=h.getPixelForValue(this.getParsed(t)[h.axis],t),s=Math.min(l,e.min*e.ratio);return{base:i-s/2,head:i+s/2,center:i,size:s}}draw(){let t=this._cachedMeta,e=t.vScale,i=t.data,s=i.length,h=0;for(;h<s;++h)null===this.getParsed(h)[e.axis]||i[h].hidden||i[h].draw(this._ctx)}}class iu extends ii{static id="bubble";static defaults={datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}};static overrides={scales:{x:{type:"linear"},y:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(t,e,i,s){let h=super.parsePrimitiveData(t,e,i,s);for(let t=0;t<h.length;t++)h[t]._custom=this.resolveDataElementOptions(t+i).radius;return h}parseArrayData(t,e,i,s){let h=super.parseArrayData(t,e,i,s);for(let t=0;t<h.length;t++){let s=e[i+t];h[t]._custom=N(s[2],this.resolveDataElementOptions(t+i).radius)}return h}parseObjectData(t,e,i,s){let h=super.parseObjectData(t,e,i,s);for(let t=0;t<h.length;t++){let s=e[i+t];h[t]._custom=N(s&&s.r&&+s.r,this.resolveDataElementOptions(t+i).radius)}return h}getMaxOverflow(){let t=this._cachedMeta.data,e=0;for(let i=t.length-1;i>=0;--i)e=Math.max(e,t[i].size(this.resolveDataElementOptions(i))/2);return e>0&&e}getLabelAndValue(t){let e=this._cachedMeta,i=this.chart.data.labels||[],{xScale:s,yScale:h}=e,n=this.getParsed(t),r=s.getLabelForValue(n.x),l=h.getLabelForValue(n.y),a=n._custom;return{label:i[t]||"",value:"("+r+", "+l+(a?", "+a:"")+")"}}update(t){let e=this._cachedMeta.data;this.updateElements(e,0,e.length,t)}updateElements(t,e,i,s){let h="reset"===s,{iScale:n,vScale:r}=this._cachedMeta,{sharedOptions:l,includeOptions:a}=this._getSharedOptions(e,s),o=n.axis,u=r.axis;for(let c=e;c<e+i;c++){let e=t[c],i=!h&&this.getParsed(c),d={},f=d[o]=h?n.getPixelForDecimal(.5):n.getPixelForValue(i[o]),g=d[u]=h?r.getBasePixel():r.getPixelForValue(i[u]);d.skip=isNaN(f)||isNaN(g),a&&(d.options=l||this.resolveDataElementOptions(c,e.active?"active":s),h&&(d.options.radius=0)),this.updateElement(e,c,d,s)}}resolveDataElementOptions(t,e){let i=this.getParsed(t),s=super.resolveDataElementOptions(t,e);s.$shared&&(s=Object.assign({},s,{$shared:!1}));let h=s.radius;return"active"!==e&&(s.radius=0),s.radius+=N(i&&i._custom,h),s}}class ic extends ii{static id="doughnut";static defaults={datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"};static descriptors={_scriptable:t=>"spacing"!==t,_indexable:t=>"spacing"!==t&&!t.startsWith("borderDash")&&!t.startsWith("hoverBorderDash")};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){let e=t.data,{labels:{pointStyle:i,textAlign:s,color:h,useBorderRadius:n,borderRadius:r}}=t.legend.options;return e.labels.length&&e.datasets.length?e.labels.map((e,l)=>{let a=t.getDatasetMeta(0).controller.getStyle(l);return{text:e,fillStyle:a.backgroundColor,fontColor:h,hidden:!t.getDataVisibility(l),lineDash:a.borderDash,lineDashOffset:a.borderDashOffset,lineJoin:a.borderJoinStyle,lineWidth:a.borderWidth,strokeStyle:a.borderColor,textAlign:s,pointStyle:i,borderRadius:n&&(r||a.borderRadius),index:l}}):[]}},onClick(t,e,i){i.chart.toggleDataVisibility(e.index),i.chart.update()}}}};constructor(t,e){super(t,e),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(t,e){let i=this.getDataset().data,s=this._cachedMeta;if(!1===this._parsing)s._parsed=i;else{let h,n,r=t=>+i[t];if(R(i[t])){let{key:t="value"}=this._parsing;r=e=>+X(i[e],t)}for(h=t,n=t+e;h<n;++h)s._parsed[h]=r(h)}}_getRotation(){return tg(this.options.rotation-90)}_getCircumference(){return tg(this.options.circumference)}_getRotationExtents(){let t=te,e=-te;for(let i=0;i<this.chart.data.datasets.length;++i)if(this.chart.isDatasetVisible(i)&&this.chart.getDatasetMeta(i).type===this._type){let s=this.chart.getDatasetMeta(i).controller,h=s._getRotation(),n=s._getCircumference();t=Math.min(t,h),e=Math.max(e,h+n)}return{rotation:t,circumference:e-t}}update(t){let e,{chartArea:i}=this.chart,s=this._cachedMeta,h=s.data,n=this.getMaxBorderWidth()+this.getMaxOffset(h)+this.options.spacing,r=Math.max((Math.min(i.width,i.height)-n)/2,0),l=Math.min((e=this.options.cutout,"string"==typeof e&&e.endsWith("%")?parseFloat(e)/100:e/r),1),a=this._getRingWeight(this.index),{circumference:o,rotation:u}=this._getRotationExtents(),{ratioX:c,ratioY:d,offsetX:f,offsetY:g}=function(t,e,i){let s=1,h=1,n=0,r=0;if(e<te){let l=t+e,a=Math.cos(t),o=Math.sin(t),u=Math.cos(l),c=Math.sin(l),d=(e,s,h)=>t_(e,t,l,!0)?1:Math.max(s,s*i,h,h*i),f=(e,s,h)=>t_(e,t,l,!0)?-1:Math.min(s,s*i,h,h*i),g=d(0,a,u),p=d(tn,o,c),m=f(tt,a,u),b=f(tt+tn,o,c);s=(g-m)/2,h=(p-b)/2,n=-(g+m)/2,r=-(p+b)/2}return{ratioX:s,ratioY:h,offsetX:n,offsetY:r}}(u,o,l),p=Math.max(Math.min((i.width-n)/c,(i.height-n)/d)/2,0),m=B(this.options.radius,p),b=Math.max(m*l,0),v=(m-b)/this._getVisibleDatasetWeightTotal();this.offsetX=f*m,this.offsetY=g*m,s.total=this.calculateTotal(),this.outerRadius=m-v*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-v*a,0),this.updateElements(h,0,h.length,t)}_circumference(t,e){let i=this.options,s=this._cachedMeta,h=this._getCircumference();return e&&i.animation.animateRotate||!this.chart.getDataVisibility(t)||null===s._parsed[t]||s.data[t].hidden?0:this.calculateCircumference(s._parsed[t]*h/te)}updateElements(t,e,i,s){let h,n="reset"===s,r=this.chart,l=r.chartArea,a=r.options.animation,o=(l.left+l.right)/2,u=(l.top+l.bottom)/2,c=n&&a.animateScale,d=c?0:this.innerRadius,f=c?0:this.outerRadius,{sharedOptions:g,includeOptions:p}=this._getSharedOptions(e,s),m=this._getRotation();for(h=0;h<e;++h)m+=this._circumference(h,n);for(h=e;h<e+i;++h){let e=this._circumference(h,n),i=t[h],r={x:o+this.offsetX,y:u+this.offsetY,startAngle:m,endAngle:m+e,circumference:e,outerRadius:f,innerRadius:d};p&&(r.options=g||this.resolveDataElementOptions(h,i.active?"active":s)),m+=e,this.updateElement(i,h,r,s)}}calculateTotal(){let t,e=this._cachedMeta,i=e.data,s=0;for(t=0;t<i.length;t++){let h=e._parsed[t];null!==h&&!isNaN(h)&&this.chart.getDataVisibility(t)&&!i[t].hidden&&(s+=Math.abs(h))}return s}calculateCircumference(t){let e=this._cachedMeta.total;return e>0&&!isNaN(t)?Math.abs(t)/e*te:0}getLabelAndValue(t){let e=this._cachedMeta,i=this.chart,s=i.data.labels||[],h=tU(e._parsed[t],i.options.locale);return{label:s[t]||"",value:h}}getMaxBorderWidth(t){let e,i,s,h,n,r=0,l=this.chart;if(!t){for(e=0,i=l.data.datasets.length;e<i;++e)if(l.isDatasetVisible(e)){t=(s=l.getDatasetMeta(e)).data,h=s.controller;break}}if(!t)return 0;for(e=0,i=t.length;e<i;++e)"inner"!==(n=h.resolveDataElementOptions(e)).borderAlign&&(r=Math.max(r,n.borderWidth||0,n.hoverBorderWidth||0));return r}getMaxOffset(t){let e=0;for(let i=0,s=t.length;i<s;++i){let t=this.resolveDataElementOptions(i);e=Math.max(e,t.offset||0,t.hoverOffset||0)}return e}_getRingWeightOffset(t){let e=0;for(let i=0;i<t;++i)this.chart.isDatasetVisible(i)&&(e+=this._getRingWeight(i));return e}_getRingWeight(t){return Math.max(N(this.chart.data.datasets[t].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}class id extends ii{static id="line";static defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1};static overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(t){let e=this._cachedMeta,{dataset:i,data:s=[],_dataset:h}=e,n=this.chart._animationsDisabled,{start:r,count:l}=tO(e,s,n);this._drawStart=r,this._drawCount=l,tR(e)&&(r=0,l=s.length),i._chart=this.chart,i._datasetIndex=this.index,i._decimated=!!h._decimated,i.points=s;let a=this.resolveDatasetElementOptions(t);this.options.showLine||(a.borderWidth=0),a.segment=this.options.segment,this.updateElement(i,void 0,{animated:!n,options:a},t),this.updateElements(s,r,l,t)}updateElements(t,e,i,s){let h="reset"===s,{iScale:n,vScale:r,_stacked:l,_dataset:a}=this._cachedMeta,{sharedOptions:o,includeOptions:u}=this._getSharedOptions(e,s),c=n.axis,d=r.axis,{spanGaps:f,segment:g}=this.options,p=td(f)?f:1/0,m=this.chart._animationsDisabled||h||"none"===s,b=e+i,v=t.length,x=e>0&&this.getParsed(e-1);for(let i=0;i<v;++i){let f=t[i],v=m?f:{};if(i<e||i>=b){v.skip=!0;continue}let _=this.getParsed(i),y=z(_[d]),w=v[c]=n.getPixelForValue(_[c],i),M=v[d]=h||y?r.getBasePixel():r.getPixelForValue(l?this.applyStack(r,_,l):_[d],i);v.skip=isNaN(w)||isNaN(M)||y,v.stop=i>0&&Math.abs(_[c]-x[c])>p,g&&(v.parsed=_,v.raw=a.data[i]),u&&(v.options=o||this.resolveDataElementOptions(i,f.active?"active":s)),m||this.updateElement(f,i,v,s),x=_}}getMaxOverflow(){let t=this._cachedMeta,e=t.dataset,i=e.options&&e.options.borderWidth||0,s=t.data||[];return s.length?Math.max(i,s[0].size(this.resolveDataElementOptions(0)),s[s.length-1].size(this.resolveDataElementOptions(s.length-1)))/2:i}draw(){let t=this._cachedMeta;t.dataset.updateControlPoints(this.chart.chartArea,t.iScale.axis),super.draw()}}class ig extends ii{static id="polarArea";static defaults={dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){let e=t.data;if(e.labels.length&&e.datasets.length){let{labels:{pointStyle:i,color:s}}=t.legend.options;return e.labels.map((e,h)=>{let n=t.getDatasetMeta(0).controller.getStyle(h);return{text:e,fillStyle:n.backgroundColor,strokeStyle:n.borderColor,fontColor:s,lineWidth:n.borderWidth,pointStyle:i,hidden:!t.getDataVisibility(h),index:h}})}return[]}},onClick(t,e,i){i.chart.toggleDataVisibility(e.index),i.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}};constructor(t,e){super(t,e),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(t){let e=this._cachedMeta,i=this.chart,s=i.data.labels||[],h=tU(e._parsed[t].r,i.options.locale);return{label:s[t]||"",value:h}}parseObjectData(t,e,i,s){return ey.bind(this)(t,e,i,s)}update(t){let e=this._cachedMeta.data;this._updateRadius(),this.updateElements(e,0,e.length,t)}getMinMax(){let t=this._cachedMeta,e={min:1/0,max:-1/0};return t.data.forEach((t,i)=>{let s=this.getParsed(i).r;!isNaN(s)&&this.chart.getDataVisibility(i)&&(s<e.min&&(e.min=s),s>e.max&&(e.max=s))}),e}_updateRadius(){let t=this.chart,e=t.chartArea,i=t.options,s=Math.max(Math.min(e.right-e.left,e.bottom-e.top)/2,0),h=Math.max(i.cutoutPercentage?s/100*i.cutoutPercentage:1,0),n=(s-h)/t.getVisibleDatasetCount();this.outerRadius=s-n*this.index,this.innerRadius=this.outerRadius-n}updateElements(t,e,i,s){let h,n="reset"===s,r=this.chart,l=r.options.animation,a=this._cachedMeta.rScale,o=a.xCenter,u=a.yCenter,c=a.getIndexAngle(0)-.5*tt,d=c,f=360/this.countVisibleElements();for(h=0;h<e;++h)d+=this._computeAngle(h,s,f);for(h=e;h<e+i;h++){let e=t[h],i=d,g=d+this._computeAngle(h,s,f),p=r.getDataVisibility(h)?a.getDistanceFromCenterForValue(this.getParsed(h).r):0;d=g,n&&(l.animateScale&&(p=0),l.animateRotate&&(i=g=c));let m={x:o,y:u,innerRadius:0,outerRadius:p,startAngle:i,endAngle:g,options:this.resolveDataElementOptions(h,e.active?"active":s)};this.updateElement(e,h,m,s)}}countVisibleElements(){let t=this._cachedMeta,e=0;return t.data.forEach((t,i)=>{!isNaN(this.getParsed(i).r)&&this.chart.getDataVisibility(i)&&e++}),e}_computeAngle(t,e,i){return this.chart.getDataVisibility(t)?tg(this.resolveDataElementOptions(t,e).angle||i):0}}class ip extends ic{static id="pie";static defaults={cutout:0,rotation:0,circumference:360,radius:"100%"}}class im extends ii{static id="radar";static defaults={datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}};static overrides={aspectRatio:1,scales:{r:{type:"radialLinear"}}};getLabelAndValue(t){let e=this._cachedMeta.vScale,i=this.getParsed(t);return{label:e.getLabels()[t],value:""+e.getLabelForValue(i[e.axis])}}parseObjectData(t,e,i,s){return ey.bind(this)(t,e,i,s)}update(t){let e=this._cachedMeta,i=e.dataset,s=e.data||[],h=e.iScale.getLabels();if(i.points=s,"resize"!==t){let e=this.resolveDatasetElementOptions(t);this.options.showLine||(e.borderWidth=0);let n={_loop:!0,_fullLoop:h.length===s.length,options:e};this.updateElement(i,void 0,n,t)}this.updateElements(s,0,s.length,t)}updateElements(t,e,i,s){let h=this._cachedMeta.rScale,n="reset"===s;for(let r=e;r<e+i;r++){let e=t[r],i=this.resolveDataElementOptions(r,e.active?"active":s),l=h.getPointPositionForValue(r,this.getParsed(r).r),a=n?h.xCenter:l.x,o=n?h.yCenter:l.y,u={x:a,y:o,angle:l.angle,skip:isNaN(a)||isNaN(o),options:i};this.updateElement(e,r,u,s)}}}class ib extends ii{static id="scatter";static defaults={datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1};static overrides={interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}};getLabelAndValue(t){let e=this._cachedMeta,i=this.chart.data.labels||[],{xScale:s,yScale:h}=e,n=this.getParsed(t),r=s.getLabelForValue(n.x),l=h.getLabelForValue(n.y);return{label:i[t]||"",value:"("+r+", "+l+")"}}update(t){let e=this._cachedMeta,{data:i=[]}=e,s=this.chart._animationsDisabled,{start:h,count:n}=tO(e,i,s);if(this._drawStart=h,this._drawCount=n,tR(e)&&(h=0,n=i.length),this.options.showLine){this.datasetElementType||this.addElements();let{dataset:h,_dataset:n}=e;h._chart=this.chart,h._datasetIndex=this.index,h._decimated=!!n._decimated,h.points=i;let r=this.resolveDatasetElementOptions(t);r.segment=this.options.segment,this.updateElement(h,void 0,{animated:!s,options:r},t)}else this.datasetElementType&&(delete e.dataset,this.datasetElementType=!1);this.updateElements(i,h,n,t)}addElements(){let{showLine:t}=this.options;!this.datasetElementType&&t&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(t,e,i,s){let h="reset"===s,{iScale:n,vScale:r,_stacked:l,_dataset:a}=this._cachedMeta,o=this.resolveDataElementOptions(e,s),u=this.getSharedOptions(o),c=this.includeOptions(s,u),d=n.axis,f=r.axis,{spanGaps:g,segment:p}=this.options,m=td(g)?g:1/0,b=this.chart._animationsDisabled||h||"none"===s,v=e>0&&this.getParsed(e-1);for(let o=e;o<e+i;++o){let e=t[o],i=this.getParsed(o),g=b?e:{},x=z(i[f]),_=g[d]=n.getPixelForValue(i[d],o),y=g[f]=h||x?r.getBasePixel():r.getPixelForValue(l?this.applyStack(r,i,l):i[f],o);g.skip=isNaN(_)||isNaN(y)||x,g.stop=o>0&&Math.abs(i[d]-v[d])>m,p&&(g.parsed=i,g.raw=a.data[o]),c&&(g.options=u||this.resolveDataElementOptions(o,e.active?"active":s)),b||this.updateElement(e,o,g,s),v=i}this.updateSharedOptions(u,s,o)}getMaxOverflow(){let t=this._cachedMeta,e=t.data||[];if(!this.options.showLine){let t=0;for(let i=e.length-1;i>=0;--i)t=Math.max(t,e[i].size(this.resolveDataElementOptions(i))/2);return t>0&&t}let i=t.dataset,s=i.options&&i.options.borderWidth||0;return e.length?Math.max(s,e[0].size(this.resolveDataElementOptions(0)),e[e.length-1].size(this.resolveDataElementOptions(e.length-1)))/2:s}}var iv=Object.freeze({__proto__:null,BarController:io,BubbleController:iu,DoughnutController:ic,LineController:id,PieController:ip,PolarAreaController:ig,RadarController:im,ScatterController:ib});function ix(){throw Error("This method is not implemented: Check that a complete date adapter is provided.")}class i_{static override(t){Object.assign(i_.prototype,t)}options;constructor(t){this.options=t||{}}init(){}formats(){return ix()}parse(){return ix()}format(){return ix()}add(){return ix()}diff(){return ix()}startOf(){return ix()}endOf(){return ix()}}function iy(t,e,i,s,h){let n=t.getSortedVisibleDatasetMetas(),r=i[e];for(let t=0,i=n.length;t<i;++t){let{index:i,data:l}=n[t],{lo:a,hi:o}=function(t,e,i,s){let{controller:h,data:n,_sorted:r}=t,l=h._cachedMeta.iScale,a=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null;if(l&&e===l.axis&&"r"!==e&&r&&n.length){let r=l._reversePixels?tk:tS;if(s){if(h._sharedOptions){let t=n[0],s="function"==typeof t.getRange&&t.getRange(e);if(s){let t=r(n,e,i-s),h=r(n,e,i+s);return{lo:t.lo,hi:h.hi}}}}else{let s=r(n,e,i);if(a){let{vScale:e}=h._cachedMeta,{_parsed:i}=t,n=i.slice(0,s.lo+1).reverse().findIndex(t=>!z(t[e.axis]));s.lo-=Math.max(0,n);let r=i.slice(s.hi).findIndex(t=>!z(t[e.axis]));s.hi+=Math.max(0,r)}return s}}return{lo:0,hi:n.length-1}}(n[t],e,r,h);for(let t=a;t<=o;++t){let e=l[t];e.skip||s(e,i,t)}}}function iw(t,e,i,s,h){let n=[];return(h||t.isPointInArea(e))&&iy(t,i,e,function(i,r,l){(h||t5(i,t.chartArea,0))&&i.inRange(e.x,e.y,s)&&n.push({element:i,datasetIndex:r,index:l})},!0),n}function iM(t,e,i,s,h,n){let r,l,a,o,u,c;return n||t.isPointInArea(e)?"r"!==i||s?(r=[],l=-1!==i.indexOf("x"),a=-1!==i.indexOf("y"),o=function(t,e){return Math.sqrt(Math.pow(l?Math.abs(t.x-e.x):0,2)+Math.pow(a?Math.abs(t.y-e.y):0,2))},u=1/0,iy(t,i,e,function(i,l,a){let c=i.inRange(e.x,e.y,h);if(s&&!c)return;let d=i.getCenterPoint(h);if(!(n||t.isPointInArea(d))&&!c)return;let f=o(e,d);f<u?(r=[{element:i,datasetIndex:l,index:a}],u=f):f===u&&r.push({element:i,datasetIndex:l,index:a})}),r):(c=[],iy(t,i,e,function(t,i,s){let{startAngle:n,endAngle:r}=t.getProps(["startAngle","endAngle"],h),{angle:l}=tm(t,{x:e.x,y:e.y});t_(l,n,r)&&c.push({element:t,datasetIndex:i,index:s})}),c):[]}function iS(t,e,i,s,h){let n=[],r="x"===i?"inXRange":"inYRange",l=!1;return(iy(t,i,e,(t,s,a)=>{t[r]&&t[r](e[i],h)&&(n.push({element:t,datasetIndex:s,index:a}),l=l||t.inRange(e.x,e.y,h))}),s&&!l)?[]:n}var ik={modes:{index(t,e,i,s){let h=ez(e,t),n=i.axis||"x",r=i.includeInvisible||!1,l=i.intersect?iw(t,h,n,s,r):iM(t,h,n,!1,s,r),a=[];return l.length?(t.getSortedVisibleDatasetMetas().forEach(t=>{let e=l[0].index,i=t.data[e];i&&!i.skip&&a.push({element:i,datasetIndex:t.index,index:e})}),a):[]},dataset(t,e,i,s){let h=ez(e,t),n=i.axis||"xy",r=i.includeInvisible||!1,l=i.intersect?iw(t,h,n,s,r):iM(t,h,n,!1,s,r);if(l.length>0){let e=l[0].datasetIndex,i=t.getDatasetMeta(e).data;l=[];for(let t=0;t<i.length;++t)l.push({element:i[t],datasetIndex:e,index:t})}return l},point(t,e,i,s){let h=ez(e,t);return iw(t,h,i.axis||"xy",s,i.includeInvisible||!1)},nearest(t,e,i,s){let h=ez(e,t),n=i.axis||"xy",r=i.includeInvisible||!1;return iM(t,h,n,i.intersect,s,r)},x(t,e,i,s){let h=ez(e,t);return iS(t,h,"x",i.intersect,s)},y(t,e,i,s){let h=ez(e,t);return iS(t,h,"y",i.intersect,s)}}};let iC=["left","top","right","bottom"];function iP(t,e){return t.filter(t=>t.pos===e)}function iE(t,e){return t.filter(t=>-1===iC.indexOf(t.pos)&&t.box.axis===e)}function iL(t,e){return t.sort((t,i)=>{let s=e?i:t,h=e?t:i;return s.weight===h.weight?s.index-h.index:s.weight-h.weight})}function iD(t,e,i,s){return Math.max(t[i],e[i])+Math.max(t[s],e[s])}function iT(t,e){t.top=Math.max(t.top,e.top),t.left=Math.max(t.left,e.left),t.bottom=Math.max(t.bottom,e.bottom),t.right=Math.max(t.right,e.right)}function iz(t,e,i,s){let h,n,r,l,a,o,u=[];for(h=0,n=t.length,a=0;h<n;++h){(l=(r=t[h]).box).update(r.width||e.w,r.height||e.h,function(t,e){let i=e.maxPadding;return function(t){let s={left:0,top:0,right:0,bottom:0};return t.forEach(t=>{s[t]=Math.max(e[t],i[t])}),s}(t?["left","right"]:["top","bottom"])}(r.horizontal,e));let{same:n,other:c}=function(t,e,i,s){let{pos:h,box:n}=i,r=t.maxPadding;if(!R(h)){i.size&&(t[h]-=i.size);let e=s[i.stack]||{size:0,count:1};e.size=Math.max(e.size,i.horizontal?n.height:n.width),i.size=e.size/e.count,t[h]+=i.size}n.getPadding&&iT(r,n.getPadding());let l=Math.max(0,e.outerWidth-iD(r,t,"left","right")),a=Math.max(0,e.outerHeight-iD(r,t,"top","bottom")),o=l!==t.w,u=a!==t.h;return t.w=l,t.h=a,i.horizontal?{same:o,other:u}:{same:u,other:o}}(e,i,r,s);a|=n&&u.length,o=o||c,l.fullSize||u.push(r)}return a&&iz(u,e,i,s)||o}function iO(t,e,i,s,h){t.top=i,t.left=e,t.right=e+s,t.bottom=i+h,t.width=s,t.height=h}function iR(t,e,i,s){let h=i.padding,{x:n,y:r}=e;for(let l of t){let t=l.box,a=s[l.stack]||{count:1,placed:0,weight:1},o=l.stackWeight/a.weight||1;if(l.horizontal){let s=e.w*o,n=a.size||t.height;G(a.start)&&(r=a.start),t.fullSize?iO(t,h.left,r,i.outerWidth-h.right-h.left,n):iO(t,e.left+a.placed,r,s,n),a.start=r,a.placed+=s,r=t.bottom}else{let s=e.h*o,r=a.size||t.width;G(a.start)&&(n=a.start),t.fullSize?iO(t,n,h.top,r,i.outerHeight-h.bottom-h.top):iO(t,n,e.top+a.placed,r,s),a.start=n,a.placed+=s,n=t.right}}e.x=n,e.y=r}var iA={addBox(t,e){t.boxes||(t.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(t){e.draw(t)}}]},t.boxes.push(e)},removeBox(t,e){let i=t.boxes?t.boxes.indexOf(e):-1;-1!==i&&t.boxes.splice(i,1)},configure(t,e,i){e.fullSize=i.fullSize,e.position=i.position,e.weight=i.weight},update(t,e,i,s){let h,n,r,l,a,o,u,c;if(!t)return;let d=er(t.options.layout.padding),f=Math.max(e-d.width,0),g=Math.max(i-d.height,0),p=(n=iL((h=function(t){let e,i,s,h,n,r,l=[];for(e=0,i=(t||[]).length;e<i;++e)s=t[e],({position:h,options:{stack:n,stackWeight:r=1}}=s),l.push({index:e,box:s,pos:h,horizontal:s.isHorizontal(),weight:s.weight,stack:n&&h+n,stackWeight:r});return l}(t.boxes)).filter(t=>t.box.fullSize),!0),r=iL(iP(h,"left"),!0),l=iL(iP(h,"right")),a=iL(iP(h,"top"),!0),o=iL(iP(h,"bottom")),u=iE(h,"x"),c=iE(h,"y"),{fullSize:n,leftAndTop:r.concat(a),rightAndBottom:l.concat(c).concat(o).concat(u),chartArea:iP(h,"chartArea"),vertical:r.concat(l).concat(c),horizontal:a.concat(o).concat(u)}),m=p.vertical,b=p.horizontal;I(t.boxes,t=>{"function"==typeof t.beforeLayout&&t.beforeLayout()});let v=Object.freeze({outerWidth:e,outerHeight:i,padding:d,availableWidth:f,availableHeight:g,vBoxMaxWidth:f/2/(m.reduce((t,e)=>e.box.options&&!1===e.box.options.display?t:t+1,0)||1),hBoxMaxHeight:g/2}),x=Object.assign({},d);iT(x,er(s));let _=Object.assign({maxPadding:x,w:f,h:g,x:d.left,y:d.top},d),y=function(t,e){let i,s,h,n=function(t){let e={};for(let i of t){let{stack:t,pos:s,stackWeight:h}=i;if(!t||!iC.includes(s))continue;let n=e[t]||(e[t]={count:0,placed:0,weight:0,size:0});n.count++,n.weight+=h}return e}(t),{vBoxMaxWidth:r,hBoxMaxHeight:l}=e;for(i=0,s=t.length;i<s;++i){let{fullSize:s}=(h=t[i]).box,a=n[h.stack],o=a&&h.stackWeight/a.weight;h.horizontal?(h.width=o?o*r:s&&e.availableWidth,h.height=l):(h.width=r,h.height=o?o*l:s&&e.availableHeight)}return n}(m.concat(b),v);iz(p.fullSize,_,v,y),iz(m,_,v,y),iz(b,_,v,y)&&iz(m,_,v,y);let w=_.maxPadding;function M(t){let e=Math.max(w[t]-_[t],0);return _[t]+=e,e}_.y+=M("top"),_.x+=M("left"),M("right"),M("bottom"),iR(p.leftAndTop,_,v,y),_.x+=_.w,_.y+=_.h,iR(p.rightAndBottom,_,v,y),t.chartArea={left:_.left,top:_.top,right:_.left+_.w,bottom:_.top+_.h,height:_.h,width:_.w},I(p.chartArea,e=>{let i=e.box;Object.assign(i,t.chartArea),i.update(_.w,_.h,{left:0,top:0,right:0,bottom:0})})}};class iF{acquireContext(t,e){}releaseContext(t){return!1}addEventListener(t,e,i){}removeEventListener(t,e,i){}getDevicePixelRatio(){return 1}getMaximumSize(t,e,i,s){return e=Math.max(0,e||t.width),i=i||t.height,{width:e,height:Math.max(0,s?Math.floor(e/s):i)}}isAttached(t){return!0}updateConfig(t){}}class iN extends iF{acquireContext(t){return t&&t.getContext&&t.getContext("2d")||null}updateConfig(t){t.options.animation=!1}}let iB="$chartjs",ij={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},iI=t=>null===t||""===t,iW=!!eA&&{passive:!0};function iV(t,e){for(let i of t)if(i===e||i.contains(e))return!0}function iH(t,e,i){let s=t.canvas,h=new MutationObserver(t=>{let e=!1;for(let i of t)e=(e=e||iV(i.addedNodes,s))&&!iV(i.removedNodes,s);e&&i()});return h.observe(document,{childList:!0,subtree:!0}),h}function i$(t,e,i){let s=t.canvas,h=new MutationObserver(t=>{let e=!1;for(let i of t)e=(e=e||iV(i.removedNodes,s))&&!iV(i.addedNodes,s);e&&i()});return h.observe(document,{childList:!0,subtree:!0}),h}let iU=new Map,iY=0;function iK(){let t=window.devicePixelRatio;t!==iY&&(iY=t,iU.forEach((e,i)=>{i.currentDevicePixelRatio!==t&&e()}))}function iJ(t,e,i){let s=t.canvas,h=s&&eP(s);if(!h)return;let n=tD((t,e)=>{let s=h.clientWidth;i(t,e),s<h.clientWidth&&i()},window),r=new ResizeObserver(t=>{let e=t[0],i=e.contentRect.width,s=e.contentRect.height;(0!==i||0!==s)&&n(i,s)});return r.observe(h),iU.size||window.addEventListener("resize",iK),iU.set(t,n),r}function iX(t,e,i){i&&i.disconnect(),"resize"===e&&(iU.delete(t),iU.size||window.removeEventListener("resize",iK))}function iQ(t,e,i){let s=t.canvas,h=tD(e=>{null!==t.ctx&&i(function(t,e){let i=ij[t.type]||t.type,{x:s,y:h}=ez(t,e);return{type:i,chart:e,native:t,x:void 0!==s?s:null,y:void 0!==h?h:null}}(e,t))},t);return s&&s.addEventListener(e,h,iW),h}class iG extends iF{acquireContext(t,e){let i=t&&t.getContext&&t.getContext("2d");return i&&i.canvas===t?(!function(t,e){let i=t.style,s=t.getAttribute("height"),h=t.getAttribute("width");if(t[iB]={initial:{height:s,width:h,style:{display:i.display,height:i.height,width:i.width}}},i.display=i.display||"block",i.boxSizing=i.boxSizing||"border-box",iI(h)){let e=eF(t,"width");void 0!==e&&(t.width=e)}if(iI(s))if(""===t.style.height)t.height=t.width/(e||2);else{let e=eF(t,"height");void 0!==e&&(t.height=e)}}(t,e),i):null}releaseContext(t){let e=t.canvas;if(!e[iB])return!1;let i=e[iB].initial;["height","width"].forEach(t=>{let s=i[t];z(s)?e.removeAttribute(t):e.setAttribute(t,s)});let s=i.style||{};return Object.keys(s).forEach(t=>{e.style[t]=s[t]}),e.width=e.width,delete e[iB],!0}addEventListener(t,e,i){this.removeEventListener(t,e);let s=t.$proxies||(t.$proxies={}),h={attach:iH,detach:i$,resize:iJ}[e]||iQ;s[e]=h(t,e,i)}removeEventListener(t,e){let i=t.$proxies||(t.$proxies={}),s=i[e];s&&((({attach:iX,detach:iX,resize:iX})[e]||function(t,e,i){t&&t.canvas&&t.canvas.removeEventListener(e,i,iW)})(t,e,s),i[e]=void 0)}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(t,e,i,s){return function(t,e,i,s){let h=eL(t),n=eT(h,"margin"),r=eE(h.maxWidth,t,"clientWidth")||ts,l=eE(h.maxHeight,t,"clientHeight")||ts,a=function(t,e,i){let s,h;if(void 0===e||void 0===i){let n=t&&eP(t);if(n){let t=n.getBoundingClientRect(),r=eL(n),l=eT(r,"border","width"),a=eT(r,"padding");e=t.width-a.width-l.width,i=t.height-a.height-l.height,s=eE(r.maxWidth,n,"clientWidth"),h=eE(r.maxHeight,n,"clientHeight")}else e=t.clientWidth,i=t.clientHeight}return{width:e,height:i,maxWidth:s||ts,maxHeight:h||ts}}(t,e,i),{width:o,height:u}=a;if("content-box"===h.boxSizing){let t=eT(h,"border","width"),e=eT(h,"padding");o-=e.width+t.width,u-=e.height+t.height}return o=Math.max(0,o-n.width),u=Math.max(0,s?o/s:u-n.height),o=eO(Math.min(o,r,a.maxWidth)),u=eO(Math.min(u,l,a.maxHeight)),o&&!u&&(u=eO(o/2)),(void 0!==e||void 0!==i)&&s&&a.height&&u>a.height&&(o=eO(Math.floor((u=a.height)*s))),{width:o,height:u}}(t,e,i,s)}isAttached(t){let e=t&&eP(t);return!!(e&&e.isConnected)}}class iq{static defaults={};static defaultRoutes=void 0;x;y;active=!1;options;$animations;tooltipPosition(t){let{x:e,y:i}=this.getProps(["x","y"],t);return{x:e,y:i}}hasValue(){return td(this.x)&&td(this.y)}getProps(t,e){let i=this.$animations;if(!e||!i)return this;let s={};return t.forEach(t=>{s[t]=i[t]&&i[t].active()?i[t]._to:this[t]}),s}}function iZ(t,e,i,s,h){let n,r,l,a=N(s,0),o=Math.min(N(h,t.length),t.length),u=0;for(i=Math.ceil(i),h&&(i=(n=h-s)/Math.floor(n/i)),l=a;l<0;)l=Math.round(a+ ++u*i);for(r=Math.max(a,0);r<o;r++)r===l&&(e.push(t[r]),l=Math.round(a+ ++u*i))}let i0=(t,e,i)=>"top"===e||"left"===e?t[e]+i:t[e]-i,i1=(t,e)=>Math.min(e||t,t);function i2(t,e){let i=[],s=t.length/e,h=t.length,n=0;for(;n<h;n+=s)i.push(t[Math.floor(n)]);return i}function i5(t){return t.drawTicks?t.tickLength:0}function i3(t,e){if(!t.display)return 0;let i=el(t.font,e),s=er(t.padding);return(O(t.text)?t.text.length:1)*i.lineHeight+s.height}class i6 extends iq{constructor(t){super(),this.id=t.id,this.type=t.type,this.options=void 0,this.ctx=t.ctx,this.chart=t.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(t){this.options=t.setContext(this.getContext()),this.axis=t.axis,this._userMin=this.parse(t.min),this._userMax=this.parse(t.max),this._suggestedMin=this.parse(t.suggestedMin),this._suggestedMax=this.parse(t.suggestedMax)}parse(t,e){return t}getUserBounds(){let{_userMin:t,_userMax:e,_suggestedMin:i,_suggestedMax:s}=this;return t=F(t,1/0),e=F(e,-1/0),i=F(i,1/0),s=F(s,-1/0),{min:F(t,i),max:F(e,s),minDefined:A(t),maxDefined:A(e)}}getMinMax(t){let e,{min:i,max:s,minDefined:h,maxDefined:n}=this.getUserBounds();if(h&&n)return{min:i,max:s};let r=this.getMatchingVisibleMetas();for(let l=0,a=r.length;l<a;++l)e=r[l].controller.getMinMax(this,t),h||(i=Math.min(i,e.min)),n||(s=Math.max(s,e.max));return i=n&&i>s?s:i,s=h&&i>s?i:s,{min:F(i,F(s,i)),max:F(s,F(i,s))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){let t=this.chart.data;return this.options.labels||(this.isHorizontal()?t.xLabels:t.yLabels)||t.labels||[]}getLabelItems(t=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(t))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){j(this.options.beforeUpdate,[this])}update(t,e,i){let{beginAtZero:s,grace:h,ticks:n}=this.options,r=n.sampleSize;this.beforeUpdate(),this.maxWidth=t,this.maxHeight=e,this._margins=i=Object.assign({left:0,right:0,top:0,bottom:0},i),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+i.left+i.right:this.height+i.top+i.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=function(t,e,i){let{min:s,max:h}=t,n=B(e,(h-s)/2),r=(t,e)=>i&&0===t?0:t+e;return{min:r(s,-Math.abs(n)),max:r(h,n)}}(this,h,s),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();let l=r<this.ticks.length;this._convertTicksToLabels(l?i2(this.ticks,r):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),n.display&&(n.autoSkip||"auto"===n.source)&&(this.ticks=function(t,e){var i;let s,h,n=t.options.ticks,r=(s=(i=t).options.offset,h=i._tickSize(),Math.floor(Math.min(i._length/h+ +!s,i._maxLength/h))),l=Math.min(n.maxTicksLimit||r,r),a=n.major.enabled?function(t){let e,i,s=[];for(e=0,i=t.length;e<i;e++)t[e].major&&s.push(e);return s}(e):[],o=a.length,u=a[0],c=a[o-1],d=[];if(o>l)return function(t,e,i,s){let h,n=0,r=i[0];for(h=0,s=Math.ceil(s);h<t.length;h++)h===r&&(e.push(t[h]),r=i[++n*s])}(e,d,a,o/l),d;let f=function(t,e,i){let s=function(t){let e,i,s=t.length;if(s<2)return!1;for(i=t[0],e=1;e<s;++e)if(t[e]-t[e-1]!==i)return!1;return i}(t),h=e.length/i;if(!s)return Math.max(h,1);let n=function(t){let e,i=[],s=Math.sqrt(t);for(e=1;e<s;e++)t%e==0&&(i.push(e),i.push(t/e));return s===(0|s)&&i.push(s),i.sort((t,e)=>t-e).pop(),i}(s);for(let t=0,e=n.length-1;t<e;t++){let e=n[t];if(e>h)return e}return Math.max(h,1)}(a,e,l);if(o>0){let t,i,s=o>1?Math.round((c-u)/(o-1)):null;for(iZ(e,d,f,z(s)?0:u-s,u),t=0,i=o-1;t<i;t++)iZ(e,d,f,a[t],a[t+1]);return iZ(e,d,f,c,z(s)?e.length:c+s),d}return iZ(e,d,f),d}(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),l&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let t,e,i=this.options.reverse;this.isHorizontal()?(t=this.left,e=this.right):(t=this.top,e=this.bottom,i=!i),this._startPixel=t,this._endPixel=e,this._reversePixels=i,this._length=e-t,this._alignToPixels=this.options.alignToPixels}afterUpdate(){j(this.options.afterUpdate,[this])}beforeSetDimensions(){j(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){j(this.options.afterSetDimensions,[this])}_callHooks(t){this.chart.notifyPlugins(t,this.getContext()),j(this.options[t],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){j(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(t){let e,i,s,h=this.options.ticks;for(e=0,i=t.length;e<i;e++)(s=t[e]).label=j(h.callback,[s.value,e,t],this)}afterTickToLabelConversion(){j(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){j(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){let t,e,i,s=this.options,h=s.ticks,n=i1(this.ticks.length,s.ticks.maxTicksLimit),r=h.minRotation||0,l=h.maxRotation,a=r;if(!this._isVisible()||!h.display||r>=l||n<=1||!this.isHorizontal()){this.labelRotation=r;return}let o=this._getLabelSizes(),u=o.widest.width,c=o.highest.height,d=ty(this.chart.width-u,0,this.maxWidth);u+6>(t=s.offset?this.maxWidth/n:d/(n-1))&&(t=d/(n-(s.offset?.5:1)),e=this.maxHeight-i5(s.grid)-h.padding-i3(s.title,this.chart.options.font),i=Math.sqrt(u*u+c*c),a=Math.max(r,Math.min(l,a=180/tt*Math.min(Math.asin(ty((o.highest.height+6)/t,-1,1)),Math.asin(ty(e/i,-1,1))-Math.asin(ty(c/i,-1,1)))))),this.labelRotation=a}afterCalculateLabelRotation(){j(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){j(this.options.beforeFit,[this])}fit(){let t={width:0,height:0},{chart:e,options:{ticks:i,title:s,grid:h}}=this,n=this._isVisible(),r=this.isHorizontal();if(n){let n=i3(s,e.options.font);if(r?(t.width=this.maxWidth,t.height=i5(h)+n):(t.height=this.maxHeight,t.width=i5(h)+n),i.display&&this.ticks.length){let{first:e,last:s,widest:h,highest:n}=this._getLabelSizes(),l=2*i.padding,a=tg(this.labelRotation),o=Math.cos(a),u=Math.sin(a);if(r){let e=i.mirror?0:u*h.width+o*n.height;t.height=Math.min(this.maxHeight,t.height+e+l)}else{let e=i.mirror?0:o*h.width+u*n.height;t.width=Math.min(this.maxWidth,t.width+e+l)}this._calculatePadding(e,s,u,o)}}this._handleMargins(),r?(this.width=this._length=e.width-this._margins.left-this._margins.right,this.height=t.height):(this.width=t.width,this.height=this._length=e.height-this._margins.top-this._margins.bottom)}_calculatePadding(t,e,i,s){let{ticks:{align:h,padding:n},position:r}=this.options,l=0!==this.labelRotation,a="top"!==r&&"x"===this.axis;if(this.isHorizontal()){let r=this.getPixelForTick(0)-this.left,o=this.right-this.getPixelForTick(this.ticks.length-1),u=0,c=0;l?a?(u=s*t.width,c=i*e.height):(u=i*t.height,c=s*e.width):"start"===h?c=e.width:"end"===h?u=t.width:"inner"!==h&&(u=t.width/2,c=e.width/2),this.paddingLeft=Math.max((u-r+n)*this.width/(this.width-r),0),this.paddingRight=Math.max((c-o+n)*this.width/(this.width-o),0)}else{let i=e.height/2,s=t.height/2;"start"===h?(i=0,s=t.height):"end"===h&&(i=e.height,s=0),this.paddingTop=i+n,this.paddingBottom=s+n}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){j(this.options.afterFit,[this])}isHorizontal(){let{axis:t,position:e}=this.options;return"top"===e||"bottom"===e||"x"===t}isFullSize(){return this.options.fullSize}_convertTicksToLabels(t){let e,i;for(this.beforeTickToLabelConversion(),this.generateTickLabels(t),e=0,i=t.length;e<i;e++)z(t[e].label)&&(t.splice(e,1),i--,e--);this.afterTickToLabelConversion()}_getLabelSizes(){let t=this._labelSizes;if(!t){let e=this.options.ticks.sampleSize,i=this.ticks;e<i.length&&(i=i2(i,e)),this._labelSizes=t=this._computeLabelSizes(i,i.length,this.options.ticks.maxTicksLimit)}return t}_computeLabelSizes(t,e,i){let s,h,n,r,l,a,o,u,c,d,f,{ctx:g,_longestTextCache:p}=this,m=[],b=[],v=Math.floor(e/i1(e,i)),x=0,_=0;for(s=0;s<e;s+=v){if(r=t[s].label,g.font=a=(l=this._resolveTickFontOptions(s)).string,o=p[a]=p[a]||{data:{},gc:[]},u=l.lineHeight,c=d=0,z(r)||O(r)){if(O(r))for(h=0,n=r.length;h<n;++h)z(f=r[h])||O(f)||(c=tq(g,o.data,o.gc,c,f),d+=u)}else c=tq(g,o.data,o.gc,c,r),d=u;m.push(c),b.push(d),x=Math.max(c,x),_=Math.max(d,_)}I(p,t=>{let i,s=t.gc,h=s.length/2;if(h>e){for(i=0;i<h;++i)delete t.data[s[i]];s.splice(0,h)}});let y=m.indexOf(x),w=b.indexOf(_),M=t=>({width:m[t]||0,height:b[t]||0});return{first:M(0),last:M(e-1),widest:M(y),highest:M(w),widths:m,heights:b}}getLabelForValue(t){return t}getPixelForValue(t,e){return NaN}getValueForPixel(t){}getPixelForTick(t){let e=this.ticks;return t<0||t>e.length-1?null:this.getPixelForValue(e[t].value)}getPixelForDecimal(t){this._reversePixels&&(t=1-t);let e=this._startPixel+t*this._length;return ty(this._alignToPixels?tZ(this.chart,e,0):e,-32768,32767)}getDecimalForPixel(t){let e=(t-this._startPixel)/this._length;return this._reversePixels?1-e:e}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){let{min:t,max:e}=this;return t<0&&e<0?e:t>0&&e>0?t:0}getContext(t){var e,i;let s=this.ticks||[];if(t>=0&&t<s.length){let i=s[t];return i.$context||(e=this.getContext(),i.$context=eo(e,{tick:i,index:t,type:"tick"}))}return this.$context||(this.$context=(i=this.chart.getContext(),eo(i,{scale:this,type:"scale"})))}_tickSize(){let t=this.options.ticks,e=tg(this.labelRotation),i=Math.abs(Math.cos(e)),s=Math.abs(Math.sin(e)),h=this._getLabelSizes(),n=t.autoSkipPadding||0,r=h?h.widest.width+n:0,l=h?h.highest.height+n:0;return this.isHorizontal()?l*i>r*s?r/i:l/s:l*s<r*i?l/i:r/s}_isVisible(){let t=this.options.display;return"auto"!==t?!!t:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(t){let e,i,s,h,n,r,l,a,o,u,c,d,f=this.axis,g=this.chart,p=this.options,{grid:m,position:b,border:v}=p,x=m.offset,_=this.isHorizontal(),y=this.ticks.length+ +!!x,w=i5(m),M=[],S=v.setContext(this.getContext()),k=S.display?S.width:0,C=k/2,P=function(t){return tZ(g,t,k)};if("top"===b)e=P(this.bottom),r=this.bottom-w,a=e-C,u=P(t.top)+C,d=t.bottom;else if("bottom"===b)e=P(this.top),u=t.top,d=P(t.bottom)-C,r=e+C,a=this.top+w;else if("left"===b)e=P(this.right),n=this.right-w,l=e-C,o=P(t.left)+C,c=t.right;else if("right"===b)e=P(this.left),o=t.left,c=P(t.right)-C,n=e+C,l=this.left+w;else if("x"===f){if("center"===b)e=P((t.top+t.bottom)/2+.5);else if(R(b)){let t=Object.keys(b)[0],i=b[t];e=P(this.chart.scales[t].getPixelForValue(i))}u=t.top,d=t.bottom,a=(r=e+C)+w}else if("y"===f){if("center"===b)e=P((t.left+t.right)/2);else if(R(b)){let t=Object.keys(b)[0],i=b[t];e=P(this.chart.scales[t].getPixelForValue(i))}l=(n=e-C)-w,o=t.left,c=t.right}let E=N(p.ticks.maxTicksLimit,y),L=Math.max(1,Math.ceil(y/E));for(i=0;i<y;i+=L){let t=this.getContext(i),e=m.setContext(t),f=v.setContext(t),p=e.lineWidth,b=e.color,y=f.dash||[],w=f.dashOffset,S=e.tickWidth,k=e.tickColor,C=e.tickBorderDash||[],P=e.tickBorderDashOffset;void 0!==(s=function(t,e,i){let s,h=t.ticks.length,n=Math.min(e,h-1),r=t._startPixel,l=t._endPixel,a=t.getPixelForTick(n);if(!i||(s=1===h?Math.max(a-r,l-a):0===e?(t.getPixelForTick(1)-a)/2:(a-t.getPixelForTick(n-1))/2,!((a+=n<e?s:-s)<r-1e-6)&&!(a>l+1e-6)))return a}(this,i,x))&&(h=tZ(g,s,p),_?n=l=o=c=h:r=a=u=d=h,M.push({tx1:n,ty1:r,tx2:l,ty2:a,x1:o,y1:u,x2:c,y2:d,width:p,color:b,borderDash:y,borderDashOffset:w,tickWidth:S,tickColor:k,tickBorderDash:C,tickBorderDashOffset:P}))}return this._ticksLength=y,this._borderValue=e,M}_computeLabelItems(t){let e,i,s,h,n,r,l,a,o,u,c,d=this.axis,f=this.options,{position:g,ticks:p}=f,m=this.isHorizontal(),b=this.ticks,{align:v,crossAlign:x,padding:_,mirror:y}=p,w=i5(f.grid),M=w+_,S=y?-_:M,k=-tg(this.labelRotation),C=[],P="middle";if("top"===g)n=this.bottom-S,r=this._getXAxisLabelAlignment();else if("bottom"===g)n=this.top+S,r=this._getXAxisLabelAlignment();else if("left"===g){let t=this._getYAxisLabelAlignment(w);r=t.textAlign,h=t.x}else if("right"===g){let t=this._getYAxisLabelAlignment(w);r=t.textAlign,h=t.x}else if("x"===d){if("center"===g)n=(t.top+t.bottom)/2+M;else if(R(g)){let t=Object.keys(g)[0],e=g[t];n=this.chart.scales[t].getPixelForValue(e)+M}r=this._getXAxisLabelAlignment()}else if("y"===d){if("center"===g)h=(t.left+t.right)/2-M;else if(R(g)){let t=Object.keys(g)[0],e=g[t];h=this.chart.scales[t].getPixelForValue(e)}r=this._getYAxisLabelAlignment(w).textAlign}"y"===d&&("start"===v?P="top":"end"===v&&(P="bottom"));let E=this._getLabelSizes();for(e=0,i=b.length;e<i;++e){let t;s=b[e].label;let d=p.setContext(this.getContext(e));l=this.getPixelForTick(e)+p.labelOffset,o=(a=this._resolveTickFontOptions(e)).lineHeight;let f=(u=O(s)?s.length:1)/2,v=d.color,_=d.textStrokeColor,w=d.textStrokeWidth,M=r;if(m?(h=l,"inner"===r&&(M=e===i-1?this.options.reverse?"left":"right":0===e?this.options.reverse?"right":"left":"center"),c="top"===g?"near"===x||0!==k?-u*o+o/2:"center"===x?-E.highest.height/2-f*o+o:-E.highest.height+o/2:"near"===x||0!==k?o/2:"center"===x?E.highest.height/2-f*o:E.highest.height-u*o,y&&(c*=-1),0===k||d.showLabelBackdrop||(h+=o/2*Math.sin(k))):(n=l,c=(1-u)*o/2),d.showLabelBackdrop){let s=er(d.backdropPadding),h=E.heights[e],n=E.widths[e],l=c-s.top,a=0-s.left;switch(P){case"middle":l-=h/2;break;case"bottom":l-=h}switch(r){case"center":a-=n/2;break;case"right":a-=n;break;case"inner":e===i-1?a-=n:e>0&&(a-=n/2)}t={left:a,top:l,width:n+s.width,height:h+s.height,color:d.backdropColor}}C.push({label:s,font:a,textOffset:c,options:{rotation:k,color:v,strokeColor:_,strokeWidth:w,textAlign:M,textBaseline:P,translation:[h,n],backdrop:t}})}return C}_getXAxisLabelAlignment(){let{position:t,ticks:e}=this.options;if(-tg(this.labelRotation))return"top"===t?"left":"right";let i="center";return"start"===e.align?i="left":"end"===e.align?i="right":"inner"===e.align&&(i="inner"),i}_getYAxisLabelAlignment(t){let e,i,{position:s,ticks:{crossAlign:h,mirror:n,padding:r}}=this.options,l=this._getLabelSizes(),a=t+r,o=l.widest.width;return"left"===s?n?(i=this.right+r,"near"===h?e="left":"center"===h?(e="center",i+=o/2):(e="right",i+=o)):(i=this.right-a,"near"===h?e="right":"center"===h?(e="center",i-=o/2):(e="left",i=this.left)):"right"===s?n?(i=this.left+r,"near"===h?e="right":"center"===h?(e="center",i-=o/2):(e="left",i-=o)):(i=this.left+a,"near"===h?e="left":"center"===h?(e="center",i+=o/2):(e="right",i=this.right)):e="right",{textAlign:e,x:i}}_computeLabelArea(){if(this.options.ticks.mirror)return;let t=this.chart,e=this.options.position;return"left"===e||"right"===e?{top:0,left:this.left,bottom:t.height,right:this.right}:"top"===e||"bottom"===e?{top:this.top,left:0,bottom:this.bottom,right:t.width}:void 0}drawBackground(){let{ctx:t,options:{backgroundColor:e},left:i,top:s,width:h,height:n}=this;e&&(t.save(),t.fillStyle=e,t.fillRect(i,s,h,n),t.restore())}getLineWidthForValue(t){let e=this.options.grid;if(!this._isVisible()||!e.display)return 0;let i=this.ticks.findIndex(e=>e.value===t);return i>=0?e.setContext(this.getContext(i)).lineWidth:0}drawGrid(t){let e,i,s=this.options.grid,h=this.ctx,n=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(t)),r=(t,e,i)=>{i.width&&i.color&&(h.save(),h.lineWidth=i.width,h.strokeStyle=i.color,h.setLineDash(i.borderDash||[]),h.lineDashOffset=i.borderDashOffset,h.beginPath(),h.moveTo(t.x,t.y),h.lineTo(e.x,e.y),h.stroke(),h.restore())};if(s.display)for(e=0,i=n.length;e<i;++e){let t=n[e];s.drawOnChartArea&&r({x:t.x1,y:t.y1},{x:t.x2,y:t.y2},t),s.drawTicks&&r({x:t.tx1,y:t.ty1},{x:t.tx2,y:t.ty2},{color:t.tickColor,width:t.tickWidth,borderDash:t.tickBorderDash,borderDashOffset:t.tickBorderDashOffset})}}drawBorder(){let t,e,i,s,{chart:h,ctx:n,options:{border:r,grid:l}}=this,a=r.setContext(this.getContext()),o=r.display?a.width:0;if(!o)return;let u=l.setContext(this.getContext(0)).lineWidth,c=this._borderValue;this.isHorizontal()?(t=tZ(h,this.left,o)-o/2,e=tZ(h,this.right,u)+u/2,i=s=c):(i=tZ(h,this.top,o)-o/2,s=tZ(h,this.bottom,u)+u/2,t=e=c),n.save(),n.lineWidth=a.width,n.strokeStyle=a.color,n.beginPath(),n.moveTo(t,i),n.lineTo(e,s),n.stroke(),n.restore()}drawLabels(t){if(!this.options.ticks.display)return;let e=this.ctx,i=this._computeLabelArea();for(let s of(i&&t3(e,i),this.getLabelItems(t))){let t=s.options,i=s.font;t9(e,s.label,0,s.textOffset,i,t)}i&&t6(e)}drawTitle(){let t,e,{ctx:i,options:{position:s,title:h,reverse:n}}=this;if(!h.display)return;let r=el(h.font),l=er(h.padding),a=h.align,o=r.lineHeight/2;"bottom"===s||"center"===s||R(s)?(o+=l.bottom,O(h.text)&&(o+=r.lineHeight*(h.text.length-1))):o+=l.top;let{titleX:u,titleY:c,maxWidth:d,rotation:f}=function(t,e,i,s){let h,n,r,{top:l,left:a,bottom:o,right:u,chart:c}=t,{chartArea:d,scales:f}=c,g=0,p=o-l,m=u-a;if(t.isHorizontal()){if(n=tz(s,a,u),R(i)){let t=Object.keys(i)[0],s=i[t];r=f[t].getPixelForValue(s)+p-e}else r="center"===i?(d.bottom+d.top)/2+p-e:i0(t,i,e);h=u-a}else{if(R(i)){let t=Object.keys(i)[0],s=i[t];n=f[t].getPixelForValue(s)-m+e}else n="center"===i?(d.left+d.right)/2-m+e:i0(t,i,e);r=tz(s,o,l),g="left"===i?-tn:tn}return{titleX:n,titleY:r,maxWidth:h,rotation:g}}(this,o,s,a);t9(i,h.text,0,0,r,{color:h.color,maxWidth:d,rotation:f,textAlign:(t=tT(a),(n&&"right"!==s||!n&&"right"===s)&&(t="left"===(e=t)?"right":"right"===e?"left":e),t),textBaseline:"middle",translation:[u,c]})}draw(t){this._isVisible()&&(this.drawBackground(),this.drawGrid(t),this.drawBorder(),this.drawTitle(),this.drawLabels(t))}_layers(){let t=this.options,e=t.ticks&&t.ticks.z||0,i=N(t.grid&&t.grid.z,-1),s=N(t.border&&t.border.z,0);return this._isVisible()&&this.draw===i6.prototype.draw?[{z:i,draw:t=>{this.drawBackground(),this.drawGrid(t),this.drawTitle()}},{z:s,draw:()=>{this.drawBorder()}},{z:e,draw:t=>{this.drawLabels(t)}}]:[{z:e,draw:t=>{this.draw(t)}}]}getMatchingVisibleMetas(t){let e,i,s=this.chart.getSortedVisibleDatasetMetas(),h=this.axis+"AxisID",n=[];for(e=0,i=s.length;e<i;++e){let i=s[e];i[h]!==this.id||t&&i.type!==t||n.push(i)}return n}_resolveTickFontOptions(t){return el(this.options.ticks.setContext(this.getContext(t)).font)}_maxDigits(){let t=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/t}}class i4{constructor(t,e,i){this.type=t,this.scope=e,this.override=i,this.items=Object.create(null)}isForType(t){return Object.prototype.isPrototypeOf.call(this.type.prototype,t.prototype)}register(t){var e,i,s,h,n,r;let l,a,o=Object.getPrototypeOf(t);"id"in(e=o)&&"defaults"in e&&(a=this.register(o));let u=this.items,c=t.id,d=this.scope+"."+c;if(!c)throw Error("class does not have id: "+t);return c in u||(u[c]=t,i=t,s=d,h=a,l=U(Object.create(null),[h?tG.get(h):{},tG.get(s),i.defaults]),tG.set(s,l),i.defaultRoutes&&(n=s,Object.keys(r=i.defaultRoutes).forEach(t=>{let e=t.split("."),i=e.pop(),s=[n].concat(e).join("."),h=r[t].split("."),l=h.pop(),a=h.join(".");tG.route(s,i,a,l)})),i.descriptors&&tG.describe(s,i.descriptors),this.override&&tG.override(t.id,t.overrides)),d}get(t){return this.items[t]}unregister(t){let e=this.items,i=t.id,s=this.scope;i in e&&delete e[i],s&&i in tG[s]&&(delete tG[s][i],this.override&&delete tK[i])}}var i8=new class{constructor(){this.controllers=new i4(ii,"datasets",!0),this.elements=new i4(iq,"elements"),this.plugins=new i4(Object,"plugins"),this.scales=new i4(i6,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...t){this._each("register",t)}remove(...t){this._each("unregister",t)}addControllers(...t){this._each("register",t,this.controllers)}addElements(...t){this._each("register",t,this.elements)}addPlugins(...t){this._each("register",t,this.plugins)}addScales(...t){this._each("register",t,this.scales)}getController(t){return this._get(t,this.controllers,"controller")}getElement(t){return this._get(t,this.elements,"element")}getPlugin(t){return this._get(t,this.plugins,"plugin")}getScale(t){return this._get(t,this.scales,"scale")}removeControllers(...t){this._each("unregister",t,this.controllers)}removeElements(...t){this._each("unregister",t,this.elements)}removePlugins(...t){this._each("unregister",t,this.plugins)}removeScales(...t){this._each("unregister",t,this.scales)}_each(t,e,i){[...e].forEach(e=>{let s=i||this._getRegistryForType(e);i||s.isForType(e)||s===this.plugins&&e.id?this._exec(t,s,e):I(e,e=>{let s=i||this._getRegistryForType(e);this._exec(t,s,e)})})}_exec(t,e,i){let s=Q(t);j(i["before"+s],[],i),e[t](i),j(i["after"+s],[],i)}_getRegistryForType(t){for(let e=0;e<this._typedRegistries.length;e++){let i=this._typedRegistries[e];if(i.isForType(t))return i}return this.plugins}_get(t,e,i){let s=e.get(t);if(void 0===s)throw Error('"'+t+'" is not a registered '+i+".");return s}};class i9{constructor(){this._init=void 0}notify(t,e,i,s){if("beforeInit"===e&&(this._init=this._createDescriptors(t,!0),this._notify(this._init,t,"install")),void 0===this._init)return;let h=s?this._descriptors(t).filter(s):this._descriptors(t),n=this._notify(h,t,e,i);return"afterDestroy"===e&&(this._notify(h,t,"stop"),this._notify(this._init,t,"uninstall"),this._init=void 0),n}_notify(t,e,i,s){for(let h of(s=s||{},t)){let t=h.plugin;if(!1===j(t[i],[e,s,h.options],t)&&s.cancelable)return!1}return!0}invalidate(){z(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(t){if(this._cache)return this._cache;let e=this._cache=this._createDescriptors(t);return this._notifyStateChanges(t),e}_createDescriptors(t,e){let i=t&&t.config,s=N(i.options&&i.options.plugins,{}),h=function(t){let e={},i=[],s=Object.keys(i8.plugins.items);for(let t=0;t<s.length;t++)i.push(i8.getPlugin(s[t]));let h=t.plugins||[];for(let t=0;t<h.length;t++){let s=h[t];-1===i.indexOf(s)&&(i.push(s),e[s.id]=!0)}return{plugins:i,localIds:e}}(i);return!1!==s||e?function(t,{plugins:e,localIds:i},s,h){let n=[],r=t.getContext();for(let a of e){var l;let e=a.id,o=(l=s[e],h||!1!==l?!0===l?{}:l:null);null!==o&&n.push({plugin:a,options:function(t,{plugin:e,local:i},s,h){let n=t.pluginScopeKeys(e),r=t.getOptionScopes(s,n);return i&&e.defaults&&r.push(e.defaults),t.createResolver(r,h,[""],{scriptable:!1,indexable:!1,allKeys:!0})}(t.config,{plugin:a,local:i[e]},o,r)})}return n}(t,h,s,e):[]}_notifyStateChanges(t){let e=this._oldCache||[],i=this._cache,s=(t,e)=>t.filter(t=>!e.some(e=>t.plugin.id===e.plugin.id));this._notify(s(e,i),t,"stop"),this._notify(s(i,e),t,"start")}}function i7(t,e){let i=tG.datasets[t]||{};return((e.datasets||{})[t]||{}).indexAxis||e.indexAxis||i.indexAxis||"x"}function st(t){if("x"===t||"y"===t||"r"===t)return t}function se(t,...e){if(st(t))return t;for(let s of e){var i;let e=s.axis||("top"===(i=s.position)||"bottom"===i?"x":"left"===i||"right"===i?"y":void 0)||t.length>1&&st(t[0].toLowerCase());if(e)return e}throw Error(`Cannot determine type of '${t}' axis. Please provide 'axis' or 'position' option.`)}function si(t,e,i){if(i[e+"AxisID"]===t)return{axis:e}}function ss(t){let e,i,s,h,n=t.options||(t.options={});n.plugins=N(n.plugins,{}),e=tK[t.type]||{scales:{}},i=n.scales||{},s=i7(t.type,n),h=Object.create(null),Object.keys(i).forEach(n=>{let r=i[n];if(!R(r))return console.error(`Invalid scale configuration for scale: ${n}`);if(r._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${n}`);let l=se(n,r,function(t,e){if(e.data&&e.data.datasets){let i=e.data.datasets.filter(e=>e.xAxisID===t||e.yAxisID===t);if(i.length)return si(t,"x",i[0])||si(t,"y",i[0])}return{}}(n,t),tG.scales[r.type]),a=l===s?"_index_":"_value_",o=e.scales||{};h[n]=Y(Object.create(null),[{axis:l},r,o[l],o[a]])}),t.data.datasets.forEach(e=>{let s=e.type||t.type,r=e.indexAxis||i7(s,n),l=(tK[s]||{}).scales||{};Object.keys(l).forEach(t=>{let s,n=(s=t,"_index_"===t?s=r:"_value_"===t&&(s="x"===r?"y":"x"),s),a=e[n+"AxisID"]||n;h[a]=h[a]||Object.create(null),Y(h[a],[{axis:n},i[a],l[t]])})}),Object.keys(h).forEach(t=>{let e=h[t];Y(e,[tG.scales[e.type],tG.scale])}),n.scales=h}function sh(t){return(t=t||{}).datasets=t.datasets||[],t.labels=t.labels||[],t}let sn=new Map,sr=new Set;function sl(t,e){let i=sn.get(t);return i||(i=e(),sn.set(t,i),sr.add(i)),i}let sa=(t,e,i)=>{let s=X(e,i);void 0!==s&&t.add(s)};class so{constructor(t){this._config=function(t){return(t=t||{}).data=sh(t.data),ss(t),t}(t),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(t){this._config.type=t}get data(){return this._config.data}set data(t){this._config.data=sh(t)}get options(){return this._config.options}set options(t){this._config.options=t}get plugins(){return this._config.plugins}update(){let t=this._config;this.clearCache(),ss(t)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(t){return sl(t,()=>[[`datasets.${t}`,""]])}datasetAnimationScopeKeys(t,e){return sl(`${t}.transition.${e}`,()=>[[`datasets.${t}.transitions.${e}`,`transitions.${e}`],[`datasets.${t}`,""]])}datasetElementScopeKeys(t,e){return sl(`${t}-${e}`,()=>[[`datasets.${t}.elements.${e}`,`datasets.${t}`,`elements.${e}`,""]])}pluginScopeKeys(t){let e=t.id,i=this.type;return sl(`${i}-plugin-${e}`,()=>[[`plugins.${e}`,...t.additionalOptionScopes||[]]])}_cachedScopes(t,e){let i=this._scopeCache,s=i.get(t);return(!s||e)&&(s=new Map,i.set(t,s)),s}getOptionScopes(t,e,i){let{options:s,type:h}=this,n=this._cachedScopes(t,i),r=n.get(e);if(r)return r;let l=new Set;e.forEach(e=>{t&&(l.add(t),e.forEach(e=>sa(l,t,e))),e.forEach(t=>sa(l,s,t)),e.forEach(t=>sa(l,tK[h]||{},t)),e.forEach(t=>sa(l,tG,t)),e.forEach(t=>sa(l,tJ,t))});let a=Array.from(l);return 0===a.length&&a.push(Object.create(null)),sr.has(e)&&n.set(e,a),a}chartOptionScopes(){let{options:t,type:e}=this;return[t,tK[e]||{},tG.datasets[e]||{},{type:e},tG,tJ]}resolveNamedOptions(t,e,i,s=[""]){let h={$shared:!0},{resolver:n,subPrefixes:r}=su(this._resolverCache,t,s),l=n;if(function(t,e){let{isScriptable:i,isIndexable:s}=ed(t);for(let h of e){let e=i(h),n=s(h),r=(n||e)&&t[h];if(e&&(q(r)||sc(r))||n&&O(r))return!0}return!1}(n,e)){h.$shared=!1,i=q(i)?i():i;let e=this.createResolver(t,i,r);l=ec(n,i,e)}for(let t of e)h[t]=l[t];return h}createResolver(t,e,i=[""],s){let{resolver:h}=su(this._resolverCache,t,i);return R(e)?ec(h,e,void 0,s):h}}function su(t,e,i){let s=t.get(e);s||(s=new Map,t.set(e,s));let h=i.join(),n=s.get(h);return n||(n={resolver:eu(e,i),subPrefixes:i.filter(t=>!t.toLowerCase().includes("hover"))},s.set(h,n)),n}let sc=t=>R(t)&&Object.getOwnPropertyNames(t).some(e=>q(t[e])),sd=["top","bottom","left","right","chartArea"];function sf(t,e){return"top"===t||"bottom"===t||-1===sd.indexOf(t)&&"x"===e}function sg(t,e){return function(i,s){return i[t]===s[t]?i[e]-s[e]:i[t]-s[t]}}function sp(t){let e=t.chart,i=e.options.animation;e.notifyPlugins("afterRender"),j(i&&i.onComplete,[t],e)}function sm(t){let e=t.chart,i=e.options.animation;j(i&&i.onProgress,[t],e)}function sb(t){return eC()&&"string"==typeof t?t=document.getElementById(t):t&&t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas),t}let sv={},sx=t=>{let e=sb(t);return Object.values(sv).filter(t=>t.canvas===e).pop()};class s_{static defaults=tG;static instances=sv;static overrides=tK;static registry=i8;static version="4.5.1";static getChart=sx;static register(...t){i8.add(...t),sy()}static unregister(...t){i8.remove(...t),sy()}constructor(t,e){const i=this.config=new so(e),s=sb(t),h=sx(s);if(h)throw Error("Canvas is already in use. Chart with ID '"+h.id+"' must be destroyed before the canvas with ID '"+h.canvas.id+"' can be reused.");const n=i.createResolver(i.chartOptionScopes(),this.getContext());this.platform=new(i.platform||function(t){return!eC()||"u">typeof OffscreenCanvas&&t instanceof OffscreenCanvas?iN:iG}(s)),this.platform.updateConfig(i);const r=this.platform.acquireContext(s,n.aspectRatio),l=r&&r.canvas,a=l&&l.height,o=l&&l.width;if(this.id=T(),this.ctx=r,this.canvas=l,this.width=o,this.height=a,this._options=n,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new i9,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=function(t,e){let i;return function(...s){return e?(clearTimeout(i),i=setTimeout(t,e,s)):t.apply(this,s),e}}(t=>this.update(t),n.resizeDelay||0),this._dataChanges=[],sv[this.id]=this,!r||!l)return void console.error("Failed to create chart: can't acquire context from the given item");eG.listen(this,"complete",sp),eG.listen(this,"progress",sm),this._initialize(),this.attached&&this.update()}get aspectRatio(){let{options:{aspectRatio:t,maintainAspectRatio:e},width:i,height:s,_aspectRatio:h}=this;return z(t)?e&&h?h:s?i/s:null:t}get data(){return this.config.data}set data(t){this.config.data=t}get options(){return this._options}set options(t){this.config.options=t}get registry(){return i8}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():eR(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return t0(this.canvas,this.ctx),this}stop(){return eG.stop(this),this}resize(t,e){eG.running(this)?this._resizeBeforeDraw={width:t,height:e}:this._resize(t,e)}_resize(t,e){let i=this.options,s=this.canvas,h=i.maintainAspectRatio&&this.aspectRatio,n=this.platform.getMaximumSize(s,t,e,h),r=i.devicePixelRatio||this.platform.getDevicePixelRatio(),l=this.width?"resize":"attach";this.width=n.width,this.height=n.height,this._aspectRatio=this.aspectRatio,eR(this,r,!0)&&(this.notifyPlugins("resize",{size:n}),j(i.onResize,[this,n],this),this.attached&&this._doResize(l)&&this.render())}ensureScalesHaveIDs(){I(this.options.scales||{},(t,e)=>{t.id=e})}buildOrUpdateScales(){let t=this.options,e=t.scales,i=this.scales,s=Object.keys(i).reduce((t,e)=>(t[e]=!1,t),{}),h=[];e&&(h=h.concat(Object.keys(e).map(t=>{let i=e[t],s=se(t,i),h="r"===s,n="x"===s;return{options:i,dposition:h?"chartArea":n?"bottom":"left",dtype:h?"radialLinear":n?"category":"linear"}}))),I(h,e=>{let h=e.options,n=h.id,r=se(n,h),l=N(h.type,e.dtype);(void 0===h.position||sf(h.position,r)!==sf(e.dposition))&&(h.position=e.dposition),s[n]=!0;let a=null;n in i&&i[n].type===l?a=i[n]:i[(a=new(i8.getScale(l))({id:n,type:l,ctx:this.ctx,chart:this})).id]=a,a.init(h,t)}),I(s,(t,e)=>{t||delete i[e]}),I(i,t=>{iA.configure(this,t,t.options),iA.addBox(this,t)})}_updateMetasets(){let t=this._metasets,e=this.data.datasets.length,i=t.length;if(t.sort((t,e)=>t.index-e.index),i>e){for(let t=e;t<i;++t)this._destroyDatasetMeta(t);t.splice(e,i-e)}this._sortedMetasets=t.slice(0).sort(sg("order","index"))}_removeUnreferencedMetasets(){let{_metasets:t,data:{datasets:e}}=this;t.length>e.length&&delete this._stacks,t.forEach((t,i)=>{0===e.filter(e=>e===t._dataset).length&&this._destroyDatasetMeta(i)})}buildOrUpdateControllers(){let t,e,i=[],s=this.data.datasets;for(this._removeUnreferencedMetasets(),t=0,e=s.length;t<e;t++){let e=s[t],h=this.getDatasetMeta(t),n=e.type||this.config.type;if(h.type&&h.type!==n&&(this._destroyDatasetMeta(t),h=this.getDatasetMeta(t)),h.type=n,h.indexAxis=e.indexAxis||i7(n,this.options),h.order=e.order||0,h.index=t,h.label=""+e.label,h.visible=this.isDatasetVisible(t),h.controller)h.controller.updateIndex(t),h.controller.linkScales();else{let e=i8.getController(n),{datasetElementType:s,dataElementType:r}=tG.datasets[n];Object.assign(e,{dataElementType:i8.getElement(r),datasetElementType:s&&i8.getElement(s)}),h.controller=new e(this,t),i.push(h.controller)}}return this._updateMetasets(),i}_resetElements(){I(this.data.datasets,(t,e)=>{this.getDatasetMeta(e).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(t){let e=this.config;e.update();let i=this._options=e.createResolver(e.chartOptionScopes(),this.getContext()),s=this._animationsDisabled=!i.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),!1===this.notifyPlugins("beforeUpdate",{mode:t,cancelable:!0}))return;let h=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let n=0;for(let t=0,e=this.data.datasets.length;t<e;t++){let{controller:e}=this.getDatasetMeta(t),i=!s&&-1===h.indexOf(e);e.buildOrUpdateElements(i),n=Math.max(+e.getMaxOverflow(),n)}n=this._minPadding=i.layout.autoPadding?n:0,this._updateLayout(n),s||I(h,t=>{t.reset()}),this._updateDatasets(t),this.notifyPlugins("afterUpdate",{mode:t}),this._layers.sort(sg("z","_idx"));let{_active:r,_lastEvent:l}=this;l?this._eventHandler(l,!0):r.length&&this._updateHoverStyles(r,r,!0),this.render()}_updateScales(){I(this.scales,t=>{iA.removeBox(this,t)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){let t=this.options;Z(new Set(Object.keys(this._listeners)),new Set(t.events))&&!!this._responsiveListeners===t.responsive||(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){let{_hiddenIndices:t}=this;for(let{method:i,start:s,count:h}of this._getUniformDataChanges()||[]){var e="_removeElements"===i?-h:h;for(let i of Object.keys(t)){let h=+i;if(h>=s){let n=t[i];delete t[i],(e>0||h>s)&&(t[h+e]=n)}}}}_getUniformDataChanges(){let t=this._dataChanges;if(!t||!t.length)return;this._dataChanges=[];let e=this.data.datasets.length,i=e=>new Set(t.filter(t=>t[0]===e).map((t,e)=>e+","+t.splice(1).join(","))),s=i(0);for(let t=1;t<e;t++)if(!Z(s,i(t)))return;return Array.from(s).map(t=>t.split(",")).map(t=>({method:t[1],start:+t[2],count:+t[3]}))}_updateLayout(t){if(!1===this.notifyPlugins("beforeLayout",{cancelable:!0}))return;iA.update(this,this.width,this.height,t);let e=this.chartArea,i=e.width<=0||e.height<=0;this._layers=[],I(this.boxes,t=>{i&&"chartArea"===t.position||(t.configure&&t.configure(),this._layers.push(...t._layers()))},this),this._layers.forEach((t,e)=>{t._idx=e}),this.notifyPlugins("afterLayout")}_updateDatasets(t){if(!1!==this.notifyPlugins("beforeDatasetsUpdate",{mode:t,cancelable:!0})){for(let t=0,e=this.data.datasets.length;t<e;++t)this.getDatasetMeta(t).controller.configure();for(let e=0,i=this.data.datasets.length;e<i;++e)this._updateDataset(e,q(t)?t({datasetIndex:e}):t);this.notifyPlugins("afterDatasetsUpdate",{mode:t})}}_updateDataset(t,e){let i=this.getDatasetMeta(t),s={meta:i,index:t,mode:e,cancelable:!0};!1!==this.notifyPlugins("beforeDatasetUpdate",s)&&(i.controller._update(e),s.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",s))}render(){!1!==this.notifyPlugins("beforeRender",{cancelable:!0})&&(eG.has(this)?this.attached&&!eG.running(this)&&eG.start(this):(this.draw(),sp({chart:this})))}draw(){let t;if(this._resizeBeforeDraw){let{width:t,height:e}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(t,e)}if(this.clear(),this.width<=0||this.height<=0||!1===this.notifyPlugins("beforeDraw",{cancelable:!0}))return;let e=this._layers;for(t=0;t<e.length&&e[t].z<=0;++t)e[t].draw(this.chartArea);for(this._drawDatasets();t<e.length;++t)e[t].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(t){let e,i,s=this._sortedMetasets,h=[];for(e=0,i=s.length;e<i;++e){let i=s[e];(!t||i.visible)&&h.push(i)}return h}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(!1===this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0}))return;let t=this.getSortedVisibleDatasetMetas();for(let e=t.length-1;e>=0;--e)this._drawDataset(t[e]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(t){let e=this.ctx,i={meta:t,index:t.index,cancelable:!0},s=eQ(this,t);!1!==this.notifyPlugins("beforeDatasetDraw",i)&&(s&&t3(e,s),t.controller.draw(),s&&t6(e),i.cancelable=!1,this.notifyPlugins("afterDatasetDraw",i))}isPointInArea(t){return t5(t,this.chartArea,this._minPadding)}getElementsAtEventForMode(t,e,i,s){let h=ik.modes[e];return"function"==typeof h?h(this,t,i,s):[]}getDatasetMeta(t){let e=this.data.datasets[t],i=this._metasets,s=i.filter(t=>t&&t._dataset===e).pop();return s||(s={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:e&&e.order||0,index:t,_dataset:e,_parsed:[],_sorted:!1},i.push(s)),s}getContext(){return this.$context||(this.$context=eo(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(t){let e=this.data.datasets[t];if(!e)return!1;let i=this.getDatasetMeta(t);return"boolean"==typeof i.hidden?!i.hidden:!e.hidden}setDatasetVisibility(t,e){this.getDatasetMeta(t).hidden=!e}toggleDataVisibility(t){this._hiddenIndices[t]=!this._hiddenIndices[t]}getDataVisibility(t){return!this._hiddenIndices[t]}_updateVisibility(t,e,i){let s=i?"show":"hide",h=this.getDatasetMeta(t),n=h.controller._resolveAnimations(void 0,s);G(e)?(h.data[e].hidden=!i,this.update()):(this.setDatasetVisibility(t,i),n.update(h,{visible:i}),this.update(e=>e.datasetIndex===t?s:void 0))}hide(t,e){this._updateVisibility(t,e,!1)}show(t,e){this._updateVisibility(t,e,!0)}_destroyDatasetMeta(t){let e=this._metasets[t];e&&e.controller&&e.controller._destroy(),delete this._metasets[t]}_stop(){let t,e;for(this.stop(),eG.remove(this),t=0,e=this.data.datasets.length;t<e;++t)this._destroyDatasetMeta(t)}destroy(){this.notifyPlugins("beforeDestroy");let{canvas:t,ctx:e}=this;this._stop(),this.config.clearCache(),t&&(this.unbindEvents(),t0(t,e),this.platform.releaseContext(e),this.canvas=null,this.ctx=null),delete sv[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...t){return this.canvas.toDataURL(...t)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){let t=this._listeners,e=this.platform,i=(i,s)=>{e.addEventListener(this,i,s),t[i]=s},s=(t,e,i)=>{t.offsetX=e,t.offsetY=i,this._eventHandler(t)};I(this.options.events,t=>i(t,s))}bindResponsiveEvents(){let t;this._responsiveListeners||(this._responsiveListeners={});let e=this._responsiveListeners,i=this.platform,s=(t,s)=>{i.addEventListener(this,t,s),e[t]=s},h=(t,s)=>{e[t]&&(i.removeEventListener(this,t,s),delete e[t])},n=(t,e)=>{this.canvas&&this.resize(t,e)},r=()=>{h("attach",r),this.attached=!0,this.resize(),s("resize",n),s("detach",t)};t=()=>{this.attached=!1,h("resize",n),this._stop(),this._resize(0,0),s("attach",r)},i.isAttached(this.canvas)?r():t()}unbindEvents(){I(this._listeners,(t,e)=>{this.platform.removeEventListener(this,e,t)}),this._listeners={},I(this._responsiveListeners,(t,e)=>{this.platform.removeEventListener(this,e,t)}),this._responsiveListeners=void 0}updateHoverStyle(t,e,i){let s,h,n,r=i?"set":"remove";for("dataset"===e&&this.getDatasetMeta(t[0].datasetIndex).controller["_"+r+"DatasetHoverStyle"](),h=0,n=t.length;h<n;++h){let e=(s=t[h])&&this.getDatasetMeta(s.datasetIndex).controller;e&&e[r+"HoverStyle"](s.element,s.datasetIndex,s.index)}}getActiveElements(){return this._active||[]}setActiveElements(t){let e=this._active||[],i=t.map(({datasetIndex:t,index:e})=>{let i=this.getDatasetMeta(t);if(!i)throw Error("No dataset found at index "+t);return{datasetIndex:t,element:i.data[e],index:e}});W(i,e)||(this._active=i,this._lastEvent=null,this._updateHoverStyles(i,e))}notifyPlugins(t,e,i){return this._plugins.notify(this,t,e,i)}isPluginEnabled(t){return 1===this._plugins._cache.filter(e=>e.plugin.id===t).length}_updateHoverStyles(t,e,i){let s=this.options.hover,h=(t,e)=>t.filter(t=>!e.some(e=>t.datasetIndex===e.datasetIndex&&t.index===e.index)),n=h(e,t),r=i?t:h(t,e);n.length&&this.updateHoverStyle(n,s.mode,!1),r.length&&s.mode&&this.updateHoverStyle(r,s.mode,!0)}_eventHandler(t,e){let i={event:t,replay:e,cancelable:!0,inChartArea:this.isPointInArea(t)},s=e=>(e.options.events||this.options.events).includes(t.native.type);if(!1===this.notifyPlugins("beforeEvent",i,s))return;let h=this._handleEvent(t,e,i.inChartArea);return i.cancelable=!1,this.notifyPlugins("afterEvent",i,s),(h||i.changed)&&this.render(),this}_handleEvent(t,e,i){var s;let{_active:h=[],options:n}=this,r=this._getActiveElements(t,h,i,e),l="mouseup"===t.type||"click"===t.type||"contextmenu"===t.type,a=(s=this._lastEvent,i&&"mouseout"!==t.type?l?s:t:null);i&&(this._lastEvent=null,j(n.onHover,[t,r,this],this),l&&j(n.onClick,[t,r,this],this));let o=!W(r,h);return(o||e)&&(this._active=r,this._updateHoverStyles(r,h,e)),this._lastEvent=a,o}_getActiveElements(t,e,i,s){if("mouseout"===t.type)return[];if(!i)return e;let h=this.options.hover;return this.getElementsAtEventForMode(t,h.mode,h,s)}}function sy(){return I(s_.instances,t=>t._plugins.invalidate())}function sw(t,e,i,s){return{x:i+t*Math.cos(e),y:s+t*Math.sin(e)}}function sM(t,e,i,s,h,n){var r,l,a,o;let u,c,d,f,{x:g,y:p,startAngle:m,pixelMargin:b,innerRadius:v}=e,x=Math.max(e.outerRadius+s+i-b,0),_=v>0?v+s+i+b:0,y=0,w=h-m;if(s){let t=x>0?x-s:0,e=((v>0?v-s:0)+t)/2;y=(w-(0!==e?w*e/(e+s):w))/2}let M=Math.max(.001,w*x-i/tt)/x,S=(w-M)/2,k=m+S+y,C=h-S-y,{outerStart:P,outerEnd:E,innerStart:L,innerEnd:D}=(r=e,l=_,a=x,o=C-k,u=es(r.options.borderRadius,["outerStart","outerEnd","innerStart","innerEnd"]),d=Math.min(c=(a-l)/2,o*l/2),{outerStart:(f=t=>{let e=(a-Math.min(c,t))*o/2;return ty(t,0,Math.min(c,e))})(u.outerStart),outerEnd:f(u.outerEnd),innerStart:ty(u.innerStart,0,d),innerEnd:ty(u.innerEnd,0,d)}),T=x-P,z=x-E,O=k+P/T,R=C-E/z,A=_+L,F=_+D,N=k+L/A,B=C-D/F;if(t.beginPath(),n){let e=(O+R)/2;if(t.arc(g,p,x,O,e),t.arc(g,p,x,e,R),E>0){let e=sw(z,R,g,p);t.arc(e.x,e.y,E,R,C+tn)}let i=sw(F,C,g,p);if(t.lineTo(i.x,i.y),D>0){let e=sw(F,B,g,p);t.arc(e.x,e.y,D,C+tn,B+Math.PI)}let s=(C-D/_+(k+L/_))/2;if(t.arc(g,p,_,C-D/_,s,!0),t.arc(g,p,_,s,k+L/_,!0),L>0){let e=sw(A,N,g,p);t.arc(e.x,e.y,L,N+Math.PI,k-tn)}let h=sw(T,k,g,p);if(t.lineTo(h.x,h.y),P>0){let e=sw(T,O,g,p);t.arc(e.x,e.y,P,k-tn,O)}}else{t.moveTo(g,p);let e=Math.cos(O)*x+g,i=Math.sin(O)*x+p;t.lineTo(e,i);let s=Math.cos(R)*x+g,h=Math.sin(R)*x+p;t.lineTo(s,h)}t.closePath()}function sS(t,e,i=e){t.lineCap=N(i.borderCapStyle,e.borderCapStyle),t.setLineDash(N(i.borderDash,e.borderDash)),t.lineDashOffset=N(i.borderDashOffset,e.borderDashOffset),t.lineJoin=N(i.borderJoinStyle,e.borderJoinStyle),t.lineWidth=N(i.borderWidth,e.borderWidth),t.strokeStyle=N(i.borderColor,e.borderColor)}function sk(t,e,i){t.lineTo(i.x,i.y)}function sC(t,e,i={}){let s=t.length,{start:h=0,end:n=s-1}=i,{start:r,end:l}=e,a=Math.max(h,r),o=Math.min(n,l);return{count:s,start:a,loop:e.loop,ilen:o<a&&!(h<r&&n<r||h>l&&n>l)?s+o-a:o-a}}function sP(t,e,i,s){let h,n,r,{points:l,options:a}=e,{count:o,start:u,loop:c,ilen:d}=sC(l,i,s),f=a.stepped?t4:a.tension||"monotone"===a.cubicInterpolationMode?t8:sk,{move:g=!0,reverse:p}=s||{};for(h=0;h<=d;++h)(n=l[(u+(p?d-h:h))%o]).skip||(g?(t.moveTo(n.x,n.y),g=!1):f(t,r,n,p,a.stepped),r=n);return c&&f(t,r,n=l[(u+(p?d:0))%o],p,a.stepped),!!c}function sE(t,e,i,s){let h,n,r,l,a,o,u=e.points,{count:c,start:d,ilen:f}=sC(u,i,s),{move:g=!0,reverse:p}=s||{},m=0,b=0,v=t=>(d+(p?f-t:t))%c,x=()=>{l!==a&&(t.lineTo(m,a),t.lineTo(m,l),t.lineTo(m,o))};for(g&&(n=u[v(0)],t.moveTo(n.x,n.y)),h=0;h<=f;++h){if((n=u[v(h)]).skip)continue;let e=n.x,i=n.y,s=0|e;s===r?(i<l?l=i:i>a&&(a=i),m=(b*m+e)/++b):(x(),t.lineTo(e,i),r=s,b=0,l=a=i),o=i}x()}function sL(t){let e=t.options,i=e.borderDash&&e.borderDash.length;return t._decimated||t._loop||e.tension||"monotone"===e.cubicInterpolationMode||e.stepped||i?sP:sE}let sD="function"==typeof Path2D;class sT extends iq{static id="line";static defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};static descriptors={_scriptable:!0,_indexable:t=>"borderDash"!==t&&"fill"!==t};constructor(t){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,t&&Object.assign(this,t)}updateControlPoints(t,e){let i=this.options;if((i.tension||"monotone"===i.cubicInterpolationMode)&&!i.stepped&&!this._pointsUpdated){let s=i.spanGaps?this._loop:this._fullLoop;!function(t,e,i,s,h){let n,r,l,a;if(e.spanGaps&&(t=t.filter(t=>!t.skip)),"monotone"===e.cubicInterpolationMode)!function(t,e="x"){let i,s,h,n=eS(e),r=t.length,l=Array(r).fill(0),a=Array(r),o=eM(t,0);for(i=0;i<r;++i)if(s=h,h=o,o=eM(t,i+1),h){if(o){let t=o[e]-h[e];l[i]=0!==t?(o[n]-h[n])/t:0}a[i]=s?o?to(l[i-1])!==to(l[i])?0:(l[i-1]+l[i])/2:l[i-1]:l[i]}!function(t,e,i){let s,h,n,r,l,a=t.length,o=eM(t,0);for(let u=0;u<a-1;++u)if(l=o,o=eM(t,u+1),l&&o){if(tu(e[u],0,ew)){i[u]=i[u+1]=0;continue}(r=Math.pow(s=i[u]/e[u],2)+Math.pow(h=i[u+1]/e[u],2))<=9||(n=3/Math.sqrt(r),i[u]=s*n*e[u],i[u+1]=h*n*e[u])}}(t,l,a),function(t,e,i="x"){let s,h,n,r=eS(i),l=t.length,a=eM(t,0);for(let o=0;o<l;++o){if(h=n,n=a,a=eM(t,o+1),!n)continue;let l=n[i],u=n[r];h&&(s=(l-h[i])/3,n[`cp1${i}`]=l-s,n[`cp1${r}`]=u-s*e[o]),a&&(s=(a[i]-l)/3,n[`cp2${i}`]=l+s,n[`cp2${r}`]=u+s*e[o])}}(t,a,e)}(t,h);else{let i=s?t[t.length-1]:t[0];for(n=0,r=t.length;n<r;++n)a=function(t,e,i,s){let h=t.skip?e:t,n=i.skip?e:i,r=tb(e,h),l=tb(n,e),a=r/(r+l),o=l/(r+l);a=isNaN(a)?0:a,o=isNaN(o)?0:o;let u=s*a,c=s*o;return{previous:{x:e.x-u*(n.x-h.x),y:e.y-u*(n.y-h.y)},next:{x:e.x+c*(n.x-h.x),y:e.y+c*(n.y-h.y)}}}(i,l=t[n],t[Math.min(n+1,r-!s)%r],e.tension),l.cp1x=a.previous.x,l.cp1y=a.previous.y,l.cp2x=a.next.x,l.cp2y=a.next.y,i=l}e.capBezierPoints&&function(t,e){let i,s,h,n,r,l=t5(t[0],e);for(i=0,s=t.length;i<s;++i)r=n,n=l,l=i<s-1&&t5(t[i+1],e),n&&(h=t[i],r&&(h.cp1x=ek(h.cp1x,e.left,e.right),h.cp1y=ek(h.cp1y,e.top,e.bottom)),l&&(h.cp2x=ek(h.cp2x,e.left,e.right),h.cp2y=ek(h.cp2y,e.top,e.bottom)))}(t,i)}(this._points,i,t,s,e),this._pointsUpdated=!0}}set points(t){this._points=t,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=function(t,e){let i=t.points,s=t.options.spanGaps,h=i.length;if(!h)return[];let n=!!t._loop,{start:r,end:l}=function(t,e,i,s){let h=0,n=e-1;if(i&&!s)for(;h<e&&!t[h].skip;)h++;for(;h<e&&t[h].skip;)h++;for(h%=e,i&&(n+=h);n>h&&t[n%e].skip;)n--;return{start:h,end:n%=e}}(i,h,n,s);if(!0===s)return eK(t,[{start:r,end:l,loop:n}],i,e);let a=l<r?l+h:l,o=!!t._fullLoop&&0===r&&l===h-1;return eK(t,function(t,e,i,s){let h,n=t.length,r=[],l=e,a=t[e];for(h=e+1;h<=i;++h){let i=t[h%n];i.skip||i.stop?a.skip||(s=!1,r.push({start:e%n,end:(h-1)%n,loop:s}),e=l=i.stop?h:null):(l=h,a.skip&&(e=h)),a=i}return null!==l&&r.push({start:e%n,end:l%n,loop:s}),r}(i,r,a,o),i,e)}(this,this.options.segment))}first(){let t=this.segments,e=this.points;return t.length&&e[t[0].start]}last(){let t=this.segments,e=this.points,i=t.length;return i&&e[t[i-1].end]}interpolate(t,e){let i,s,h=this.options,n=t[e],r=this.points,l=eY(this,{property:e,start:n,end:n});if(!l.length)return;let a=[],o=h.stepped?eB:h.tension||"monotone"===h.cubicInterpolationMode?ej:eN;for(i=0,s=l.length;i<s;++i){let{start:s,end:u}=l[i],c=r[s],d=r[u];if(c===d){a.push(c);continue}let f=Math.abs((n-c[e])/(d[e]-c[e])),g=o(c,d,f,h.stepped);g[e]=t[e],a.push(g)}return 1===a.length?a[0]:a}pathSegment(t,e,i){return sL(this)(t,this,e,i)}path(t,e,i){let s=this.segments,h=sL(this),n=this._loop;for(let r of(e=e||0,i=i||this.points.length-e,s))n&=h(t,this,r,{start:e,end:e+i-1});return!!n}draw(t,e,i,s){let h=this.options||{};(this.points||[]).length&&h.borderWidth&&(t.save(),function(t,e,i,s){if(sD&&!e.options.segment){let h;(h=e._path)||(h=e._path=new Path2D,e.path(h,i,s)&&h.closePath()),sS(t,e.options),t.stroke(h)}else!function(t,e,i,s){let{segments:h,options:n}=e,r=sL(e);for(let l of h)sS(t,n,l.style),t.beginPath(),r(t,e,l,{start:i,end:i+s-1})&&t.closePath(),t.stroke()}(t,e,i,s)}(t,this,i,s),t.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}function sz(t,e,i,s){let h=t.options,{[i]:n}=t.getProps([i],s);return Math.abs(e-n)<h.radius+h.hitRadius}class sO extends iq{static id="point";parsed;skip;stop;static defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(t){super(),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,t&&Object.assign(this,t)}inRange(t,e,i){let s=this.options,{x:h,y:n}=this.getProps(["x","y"],i);return Math.pow(t-h,2)+Math.pow(e-n,2)<Math.pow(s.hitRadius+s.radius,2)}inXRange(t,e){return sz(this,t,"x",e)}inYRange(t,e){return sz(this,t,"y",e)}getCenterPoint(t){let{x:e,y:i}=this.getProps(["x","y"],t);return{x:e,y:i}}size(t){let e=(t=t||this.options||{}).radius||0,i=(e=Math.max(e,e&&t.hoverRadius||0))&&t.borderWidth||0;return(e+i)*2}draw(t,e){let i=this.options;!this.skip&&!(i.radius<.1)&&t5(this,e,this.size(i)/2)&&(t.strokeStyle=i.borderColor,t.lineWidth=i.borderWidth,t.fillStyle=i.backgroundColor,t1(t,i,this.x,this.y))}getRange(){let t=this.options||{};return t.radius+t.hitRadius}}function sR(t,e){let i,s,h,n,r,{x:l,y:a,base:o,width:u,height:c}=t.getProps(["x","y","base","width","height"],e);return t.horizontal?(r=c/2,i=Math.min(l,o),s=Math.max(l,o),h=a-r,n=a+r):(i=l-(r=u/2),s=l+r,h=Math.min(a,o),n=Math.max(a,o)),{left:i,top:h,right:s,bottom:n}}function sA(t,e,i,s){return t?0:ty(e,i,s)}function sF(t,e,i,s){let h=null===e,n=null===i,r=t&&!(h&&n)&&sR(t,s);return r&&(h||tw(e,r.left,r.right))&&(n||tw(i,r.top,r.bottom))}function sN(t,e){t.rect(e.x,e.y,e.w,e.h)}function sB(t,e,i={}){let s=t.x!==i.x?-e:0,h=t.y!==i.y?-e:0,n=(t.x+t.w!==i.x+i.w?e:0)-s,r=(t.y+t.h!==i.y+i.h?e:0)-h;return{x:t.x+s,y:t.y+h,w:t.w+n,h:t.h+r,radius:t.radius}}class sj extends iq{static id="bar";static defaults={borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(t){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,t&&Object.assign(this,t)}draw(t){var e,i,s;let h,n,r,l,a,o,u,c,{inflateAmount:d,options:{borderColor:f,backgroundColor:g}}=this,{inner:p,outer:m}=(n=(h=sR(this)).right-h.left,r=h.bottom-h.top,e=n/2,i=r/2,l=this.options.borderWidth,a=this.borderSkipped,o=eh(l),u={t:sA(a.top,o.top,0,i),r:sA(a.right,o.right,0,e),b:sA(a.bottom,o.bottom,0,i),l:sA(a.left,o.left,0,e)},c=function(t,e,i){let{enableBorderRadius:s}=t.getProps(["enableBorderRadius"]),h=t.options.borderRadius,n=en(h),r=Math.min(e,i),l=t.borderSkipped,a=s||R(h);return{topLeft:sA(!a||l.top||l.left,n.topLeft,0,r),topRight:sA(!a||l.top||l.right,n.topRight,0,r),bottomLeft:sA(!a||l.bottom||l.left,n.bottomLeft,0,r),bottomRight:sA(!a||l.bottom||l.right,n.bottomRight,0,r)}}(this,n/2,r/2),{outer:{x:h.left,y:h.top,w:n,h:r,radius:c},inner:{x:h.left+u.l,y:h.top+u.t,w:n-u.l-u.r,h:r-u.t-u.b,radius:{topLeft:Math.max(0,c.topLeft-Math.max(u.t,u.l)),topRight:Math.max(0,c.topRight-Math.max(u.t,u.r)),bottomLeft:Math.max(0,c.bottomLeft-Math.max(u.b,u.l)),bottomRight:Math.max(0,c.bottomRight-Math.max(u.b,u.r))}}}),b=(s=m.radius).topLeft||s.topRight||s.bottomLeft||s.bottomRight?t7:sN;t.save(),(m.w!==p.w||m.h!==p.h)&&(t.beginPath(),b(t,sB(m,d,p)),t.clip(),b(t,sB(p,-d,m)),t.fillStyle=f,t.fill("evenodd")),t.beginPath(),b(t,sB(p,d)),t.fillStyle=g,t.fill(),t.restore()}inRange(t,e,i){return sF(this,t,e,i)}inXRange(t,e){return sF(this,t,null,e)}inYRange(t,e){return sF(this,null,t,e)}getCenterPoint(t){let{x:e,y:i,base:s,horizontal:h}=this.getProps(["x","y","base","horizontal"],t);return{x:h?(e+s)/2:e,y:h?i:(i+s)/2}}getRange(t){return"x"===t?this.width/2:this.height/2}}var sI=Object.freeze({__proto__:null,ArcElement:class extends iq{static id="arc";static defaults={borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0,selfJoin:!1};static defaultRoutes={backgroundColor:"backgroundColor"};static descriptors={_scriptable:!0,_indexable:t=>"borderDash"!==t};circumference;endAngle;fullCircles;innerRadius;outerRadius;pixelMargin;startAngle;constructor(t){super(),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,t&&Object.assign(this,t)}inRange(t,e,i){let{angle:s,distance:h}=tm(this.getProps(["x","y"],i),{x:t,y:e}),{startAngle:n,endAngle:r,innerRadius:l,outerRadius:a,circumference:o}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],i),u=(this.options.spacing+this.options.borderWidth)/2,c=N(o,r-n),d=t_(s,n,r)&&n!==r,f=c>=te||d,g=tw(h,l+u,a+u);return f&&g}getCenterPoint(t){let{x:e,y:i,startAngle:s,endAngle:h,innerRadius:n,outerRadius:r}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],t),{offset:l,spacing:a}=this.options,o=(s+h)/2,u=(n+r+a+l)/2;return{x:e+Math.cos(o)*u,y:i+Math.sin(o)*u}}tooltipPosition(t){return this.getCenterPoint(t)}draw(t){let{options:e,circumference:i}=this,s=(e.offset||0)/4,h=(e.spacing||0)/2,n=e.circular;if(this.pixelMargin=.33*("inner"===e.borderAlign),this.fullCircles=i>te?Math.floor(i/te):0,0===i||this.innerRadius<0||this.outerRadius<0)return;t.save();let r=(this.startAngle+this.endAngle)/2;t.translate(Math.cos(r)*s,Math.sin(r)*s);let l=s*(1-Math.sin(Math.min(tt,i||0)));t.fillStyle=e.backgroundColor,t.strokeStyle=e.borderColor,function(t,e,i,s,h){let{fullCircles:n,startAngle:r,circumference:l}=e,a=e.endAngle;if(n){sM(t,e,i,s,a,h);for(let e=0;e<n;++e)t.fill();isNaN(l)||(a=r+(l%te||te))}sM(t,e,i,s,a,h),t.fill()}(t,this,l,h,n),function(t,e,i,s,h){let{fullCircles:n,startAngle:r,circumference:l,options:a}=e,{borderWidth:o,borderJoinStyle:u,borderDash:c,borderDashOffset:d,borderRadius:f}=a,g="inner"===a.borderAlign;if(!o)return;t.setLineDash(c||[]),t.lineDashOffset=d,g?(t.lineWidth=2*o,t.lineJoin=u||"round"):(t.lineWidth=o,t.lineJoin=u||"bevel");let p=e.endAngle;if(n){sM(t,e,i,s,p,h);for(let e=0;e<n;++e)t.stroke();isNaN(l)||(p=r+(l%te||te))}g&&function(t,e,i){let{startAngle:s,pixelMargin:h,x:n,y:r,outerRadius:l,innerRadius:a}=e,o=h/l;t.beginPath(),t.arc(n,r,l,s-o,i+o),a>h?(o=h/a,t.arc(n,r,a,i+o,s-o,!0)):t.arc(n,r,h,i+tn,s-tn),t.closePath(),t.clip()}(t,e,p),a.selfJoin&&p-r>=tt&&0===f&&"miter"!==u&&function(t,e,i){let{startAngle:s,x:h,y:n,outerRadius:r,innerRadius:l,options:a}=e,{borderWidth:o,borderJoinStyle:u}=a,c=Math.min(o/r,tx(s-i));if(t.beginPath(),t.arc(h,n,r-o/2,s+c/2,i-c/2),l>0){let e=Math.min(o/l,tx(s-i));t.arc(h,n,l+o/2,i-e/2,s+e/2,!0)}else{let e=Math.min(o/2,r*tx(s-i));if("round"===u)t.arc(h,n,e,i-tt/2,s+tt/2,!0);else if("bevel"===u){let r=2*e*e,l=-r*Math.cos(i+tt/2)+h,a=-r*Math.sin(i+tt/2)+n,o=r*Math.cos(s+tt/2)+h,u=r*Math.sin(s+tt/2)+n;t.lineTo(l,a),t.lineTo(o,u)}}t.closePath(),t.moveTo(0,0),t.rect(0,0,t.canvas.width,t.canvas.height),t.clip("evenodd")}(t,e,p),n||(sM(t,e,i,s,p,h),t.stroke())}(t,this,l,h,n),t.restore()}},BarElement:sj,LineElement:sT,PointElement:sO});let sW=["rgb(54, 162, 235)","rgb(255, 99, 132)","rgb(255, 159, 64)","rgb(255, 205, 86)","rgb(75, 192, 192)","rgb(153, 102, 255)","rgb(201, 203, 207)"],sV=sW.map(t=>t.replace("rgb(","rgba(").replace(")",", 0.5)"));function sH(t){return sW[t%sW.length]}function s$(t){return sV[t%sV.length]}function sU(t){let e;for(e in t)if(t[e].borderColor||t[e].backgroundColor)return!0;return!1}function sY(t){if(t._decimated){let e=t._data;delete t._decimated,delete t._data,Object.defineProperty(t,"data",{configurable:!0,enumerable:!0,writable:!0,value:e})}}function sK(t){t.data.datasets.forEach(t=>{sY(t)})}function sJ(t,e,i,s){if(s)return;let h=e[t],n=i[t];return"angle"===t&&(h=tx(h),n=tx(n)),{property:t,start:h,end:n}}function sX(t,e,i){for(;e>t;e--){let t=i[e];if(!isNaN(t.x)&&!isNaN(t.y))break}return e}function sQ(t,e,i,s){return t&&e?s(t[i],e[i]):t?t[i]:e?e[i]:0}function sG(t,e){let i=[],s=!1;return O(t)?(s=!0,i=t):i=function(t,e){let{x:i=null,y:s=null}=t||{},h=e.points,n=[];return e.segments.forEach(({start:t,end:e})=>{e=sX(t,e,h);let r=h[t],l=h[e];null!==s?(n.push({x:r.x,y:s}),n.push({x:l.x,y:s})):null!==i&&(n.push({x:i,y:r.y}),n.push({x:i,y:l.y}))}),n}(t,e),i.length?new sT({points:i,options:{tension:0},_loop:s,_fullLoop:s}):null}function sq(t){return t&&!1!==t.fill}class sZ{constructor(t){this.x=t.x,this.y=t.y,this.radius=t.radius}pathSegment(t,e,i){let{x:s,y:h,radius:n}=this;return e=e||{start:0,end:te},t.arc(s,h,n,e.end,e.start,!0),!i.bounds}interpolate(t){let{x:e,y:i,radius:s}=this,h=t.angle;return{x:e+Math.cos(h)*s,y:i+Math.sin(h)*s,angle:h}}}function s0(t,e,i){let s=function(t){var e,i,s;let{chart:h,fill:n,line:r}=t;if(A(n)){let t;return e=h,i=n,(t=e.getDatasetMeta(i))&&e.isDatasetVisible(i)?t.dataset:null}if("stack"===n)return function(t){let{scale:e,index:i,line:s}=t,h=[],n=s.segments,r=s.points,l=function(t,e){let i=[],s=t.getMatchingVisibleMetas("line");for(let t=0;t<s.length;t++){let h=s[t];if(h.index===e)break;h.hidden||i.unshift(h.dataset)}return i}(e,i);l.push(sG({x:null,y:e.bottom},s));for(let t=0;t<n.length;t++){let e=n[t];for(let t=e.start;t<=e.end;t++)!function(t,e,i){let s=[];for(let h=0;h<i.length;h++){let{first:n,last:r,point:l}=function(t,e,i){let s=t.interpolate(e,"x");if(!s)return{};let h=s.x,n=t.segments,r=t.points,l=!1,a=!1;for(let t=0;t<n.length;t++){let e=n[t],i=r[e.start].x,s=r[e.end].x;if(tw(h,i,s)){l=h===i,a=h===s;break}}return{first:l,last:a,point:s}}(i[h],e,"x");if(l&&(!n||!r)){if(n)s.unshift(l);else if(t.push(l),!r)break}}t.push(...s)}(h,r[t],l)}return new sT({points:h,options:{}})}(t);if("shape"===n)return!0;let l=((s=t).scale||{}).getPointPositionForValue?function(t){let{scale:e,fill:i}=t,s=e.options,h=e.getLabels().length,n=s.reverse?e.max:e.min,r="start"===i?n:"end"===i?e.options.reverse?e.min:e.max:R(i)?i.value:e.getBaseValue(),l=[];if(s.grid.circular){let t=e.getPointPositionForValue(0,n);return new sZ({x:t.x,y:t.y,radius:e.getDistanceFromCenterForValue(r)})}for(let t=0;t<h;++t)l.push(e.getPointPositionForValue(t,r));return l}(s):function(t){let e,{scale:i={},fill:s}=t,h=(e=null,"start"===s?e=i.bottom:"end"===s?e=i.top:R(s)?e=i.getPixelForValue(s.value):i.getBasePixel&&(e=i.getBasePixel()),e);if(A(h)){let t=i.isHorizontal();return{x:t?h:null,y:t?null:h}}return null}(s);return l instanceof sZ?l:sG(l,r)}(e),{chart:h,index:n,line:r,scale:l,axis:a}=e,o=r.options,u=o.fill,c=o.backgroundColor,{above:d=c,below:f=c}=u||{},g=h.getDatasetMeta(n),p=eQ(h,g);s&&r.points.length&&(t3(t,i),function(t,e){let{line:i,target:s,above:h,below:n,area:r,scale:l,clip:a}=e,o=i._loop?"angle":e.axis;t.save();let u=n;n!==h&&("x"===o?(s1(t,s,r.top),s5(t,{line:i,target:s,color:h,scale:l,property:o,clip:a}),t.restore(),t.save(),s1(t,s,r.bottom)):"y"===o&&(s2(t,s,r.left),s5(t,{line:i,target:s,color:n,scale:l,property:o,clip:a}),t.restore(),t.save(),s2(t,s,r.right),u=h)),s5(t,{line:i,target:s,color:u,scale:l,property:o,clip:a}),t.restore()}(t,{line:r,target:s,above:d,below:f,area:i,scale:l,axis:a,clip:p}),t6(t))}function s1(t,e,i){let{segments:s,points:h}=e,n=!0,r=!1;for(let l of(t.beginPath(),s)){let{start:s,end:a}=l,o=h[s],u=h[sX(s,a,h)];n?(t.moveTo(o.x,o.y),n=!1):(t.lineTo(o.x,i),t.lineTo(o.x,o.y)),(r=!!e.pathSegment(t,l,{move:r}))?t.closePath():t.lineTo(u.x,i)}t.lineTo(e.first().x,i),t.closePath(),t.clip()}function s2(t,e,i){let{segments:s,points:h}=e,n=!0,r=!1;for(let l of(t.beginPath(),s)){let{start:s,end:a}=l,o=h[s],u=h[sX(s,a,h)];n?(t.moveTo(o.x,o.y),n=!1):(t.lineTo(i,o.y),t.lineTo(o.x,o.y)),(r=!!e.pathSegment(t,l,{move:r}))?t.closePath():t.lineTo(i,u.y)}t.lineTo(i,e.first().y),t.closePath(),t.clip()}function s5(t,e){let{line:i,target:s,property:h,color:n,scale:r,clip:l}=e;for(let{source:e,target:a,start:o,end:u}of function(t,e,i){let s=t.segments,h=t.points,n=e.points,r=[];for(let t of s){let{start:s,end:l}=t;l=sX(s,l,h);let a=sJ(i,h[s],h[l],t.loop);if(!e.segments){r.push({source:t,target:a,start:h[s],end:h[l]});continue}for(let s of eY(e,a)){let e=sJ(i,n[s.start],n[s.end],s.loop);for(let n of eU(t,h,e))r.push({source:n,target:s,start:{[i]:sQ(a,e,"start",Math.max)},end:{[i]:sQ(a,e,"end",Math.min)}})}}return r}(i,s,h)){let c,{style:{backgroundColor:d=n}={}}=e,f=!0!==s;t.save(),t.fillStyle=d,function(t,e,i,s){let h=e.chart.chartArea,{property:n,start:r,end:l}=s||{};if("x"===n||"y"===n){let e,s,a,o;"x"===n?(e=r,s=h.top,a=l,o=h.bottom):(e=h.left,s=r,a=h.right,o=l),t.beginPath(),i&&(e=Math.max(e,i.left),a=Math.min(a,i.right),s=Math.max(s,i.top),o=Math.min(o,i.bottom)),t.rect(e,s,a-e,o-s),t.clip()}}(t,r,l,f&&sJ(h,o,u)),t.beginPath();let g=!!i.pathSegment(t,e);if(f){g?t.closePath():s3(t,s,u,h);let e=!!s.pathSegment(t,a,{move:g,reverse:!0});(c=g&&e)||s3(t,s,o,h)}t.closePath(),t.fill(c?"evenodd":"nonzero"),t.restore()}}function s3(t,e,i,s){let h=e.interpolate(i,s);h&&t.lineTo(h.x,h.y)}var s6={id:"filler",afterDatasetsUpdate(t,e,i){let s,h,n,r,l=(t.data.datasets||[]).length,a=[];for(h=0;h<l;++h)n=(s=t.getDatasetMeta(h)).dataset,r=null,n&&n.options&&n instanceof sT&&(r={visible:t.isDatasetVisible(h),index:h,fill:function(t,e,i){var s,h,n,r;let l=function(t){let e=t.options,i=e.fill,s=N(i&&i.target,i);return void 0===s&&(s=!!e.backgroundColor),!1!==s&&null!==s&&(!0===s?"origin":s)}(t);if(R(l))return!isNaN(l.value)&&l;let a=parseFloat(l);return A(a)&&Math.floor(a)===a?(s=l[0],h=e,n=a,r=i,("-"===s||"+"===s)&&(n=h+n),n!==h&&!(n<0)&&!(n>=r)&&n):["origin","start","end","stack","shape"].indexOf(l)>=0&&l}(n,h,l),chart:t,axis:s.controller.options.indexAxis,scale:s.vScale,line:n}),s.$filler=r,a.push(r);for(h=0;h<l;++h)(r=a[h])&&!1!==r.fill&&(r.fill=function(t,e,i){let s,h=t[e].fill,n=[e];if(!i)return h;for(;!1!==h&&-1===n.indexOf(h);){if(!A(h))return h;if(!(s=t[h]))break;if(s.visible)return h;n.push(h),h=s.fill}return!1}(a,h,i.propagate))},beforeDraw(t,e,i){let s="beforeDraw"===i.drawTime,h=t.getSortedVisibleDatasetMetas(),n=t.chartArea;for(let e=h.length-1;e>=0;--e){let i=h[e].$filler;i&&(i.line.updateControlPoints(n,i.axis),s&&i.fill&&s0(t.ctx,i,n))}},beforeDatasetsDraw(t,e,i){if("beforeDatasetsDraw"!==i.drawTime)return;let s=t.getSortedVisibleDatasetMetas();for(let e=s.length-1;e>=0;--e){let i=s[e].$filler;sq(i)&&s0(t.ctx,i,t.chartArea)}},beforeDatasetDraw(t,e,i){let s=e.meta.$filler;sq(s)&&"beforeDatasetDraw"===i.drawTime&&s0(t.ctx,s,t.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};let s4=(t,e)=>{let{boxHeight:i=e,boxWidth:s=e}=t;return t.usePointStyle&&(i=Math.min(i,e),s=t.pointStyleWidth||Math.min(s,e)),{boxWidth:s,boxHeight:i,itemHeight:Math.max(e,i)}};class s8 extends iq{constructor(t){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,e,i){this.maxWidth=t,this.maxHeight=e,this._margins=i,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){let t=this.options.labels||{},e=j(t.generateLabels,[this.chart],this)||[];t.filter&&(e=e.filter(e=>t.filter(e,this.chart.data))),t.sort&&(e=e.sort((e,i)=>t.sort(e,i,this.chart.data))),this.options.reverse&&e.reverse(),this.legendItems=e}fit(){let t,e,{options:i,ctx:s}=this;if(!i.display){this.width=this.height=0;return}let h=i.labels,n=el(h.font),r=n.size,l=this._computeTitleHeight(),{boxWidth:a,itemHeight:o}=s4(h,r);s.font=n.string,this.isHorizontal()?(t=this.maxWidth,e=this._fitRows(l,r,a,o)+10):(e=this.maxHeight,t=this._fitCols(l,n,a,o)+10),this.width=Math.min(t,i.maxWidth||this.maxWidth),this.height=Math.min(e,i.maxHeight||this.maxHeight)}_fitRows(t,e,i,s){let{ctx:h,maxWidth:n,options:{labels:{padding:r}}}=this,l=this.legendHitBoxes=[],a=this.lineWidths=[0],o=s+r,u=t;h.textAlign="left",h.textBaseline="middle";let c=-1,d=-o;return this.legendItems.forEach((t,f)=>{let g=i+e/2+h.measureText(t.text).width;(0===f||a[a.length-1]+g+2*r>n)&&(u+=o,a[a.length-(f>0?0:1)]=0,d+=o,c++),l[f]={left:0,top:d,row:c,width:g,height:s},a[a.length-1]+=g+r}),u}_fitCols(t,e,i,s){let{ctx:h,maxHeight:n,options:{labels:{padding:r}}}=this,l=this.legendHitBoxes=[],a=this.columnSizes=[],o=n-t,u=r,c=0,d=0,f=0,g=0;return this.legendItems.forEach((t,n)=>{var p,m,b,v,x,_,y,w,M,S,k,C;let P,E,{itemWidth:L,itemHeight:D}=(p=i,m=e,b=h,v=t,x=s,{itemWidth:(_=v,y=p,w=m,M=b,(P=_.text)&&"string"!=typeof P&&(P=P.reduce((t,e)=>t.length>e.length?t:e)),y+w.size/2+M.measureText(P).width),itemHeight:(S=x,k=v,C=m.lineHeight,E=S,"string"!=typeof k.text&&(E=s9(k,C)),E)});n>0&&d+D+2*r>o&&(u+=c+r,a.push({width:c,height:d}),f+=c+r,g++,c=d=0),l[n]={left:f,top:d,col:g,width:L,height:D},c=Math.max(c,L),d+=D+r}),u+=c,a.push({width:c,height:d}),u}adjustHitBoxes(){if(!this.options.display)return;let t=this._computeTitleHeight(),{legendHitBoxes:e,options:{align:i,labels:{padding:s},rtl:h}}=this,n=eI(h,this.left,this.width);if(this.isHorizontal()){let h=0,r=tz(i,this.left+s,this.right-this.lineWidths[h]);for(let l of e)h!==l.row&&(h=l.row,r=tz(i,this.left+s,this.right-this.lineWidths[h])),l.top+=this.top+t+s,l.left=n.leftForLtr(n.x(r),l.width),r+=l.width+s}else{let h=0,r=tz(i,this.top+t+s,this.bottom-this.columnSizes[h].height);for(let l of e)l.col!==h&&(h=l.col,r=tz(i,this.top+t+s,this.bottom-this.columnSizes[h].height)),l.top=r,l.left+=this.left+s,l.left=n.leftForLtr(n.x(l.left),l.width),r+=l.height+s}}isHorizontal(){return"top"===this.options.position||"bottom"===this.options.position}draw(){if(this.options.display){let t=this.ctx;t3(t,this),this._draw(),t6(t)}}_draw(){let t,{options:e,columnSizes:i,lineWidths:s,ctx:h}=this,{align:n,labels:r}=e,l=tG.color,a=eI(e.rtl,this.left,this.width),o=el(r.font),{padding:u}=r,c=o.size,d=c/2;this.drawTitle(),h.textAlign=a.textAlign("left"),h.textBaseline="middle",h.lineWidth=.5,h.font=o.string;let{boxWidth:f,boxHeight:g,itemHeight:p}=s4(r,c),m=function(t,e,i){if(isNaN(f)||f<=0||isNaN(g)||g<0)return;h.save();let s=N(i.lineWidth,1);if(h.fillStyle=N(i.fillStyle,l),h.lineCap=N(i.lineCap,"butt"),h.lineDashOffset=N(i.lineDashOffset,0),h.lineJoin=N(i.lineJoin,"miter"),h.lineWidth=s,h.strokeStyle=N(i.strokeStyle,l),h.setLineDash(N(i.lineDash,[])),r.usePointStyle)t2(h,{radius:g*Math.SQRT2/2,pointStyle:i.pointStyle,rotation:i.rotation,borderWidth:s},a.xPlus(t,f/2),e+d,r.pointStyleWidth&&f);else{let n=e+Math.max((c-g)/2,0),r=a.leftForLtr(t,f),l=en(i.borderRadius);h.beginPath(),Object.values(l).some(t=>0!==t)?t7(h,{x:r,y:n,w:f,h:g,radius:l}):h.rect(r,n,f,g),h.fill(),0!==s&&h.stroke()}h.restore()},b=function(t,e,i){t9(h,i.text,t,e+p/2,o,{strikethrough:i.hidden,textAlign:a.textAlign(i.textAlign)})},v=this.isHorizontal(),x=this._computeTitleHeight();t=v?{x:tz(n,this.left+u,this.right-s[0]),y:this.top+u+x,line:0}:{x:this.left+u,y:tz(n,this.top+x+u,this.bottom-i[0].height),line:0},eW(this.ctx,e.textDirection);let _=p+u;this.legendItems.forEach((l,c)=>{var g,p;h.strokeStyle=l.fontColor,h.fillStyle=l.fontColor;let y=h.measureText(l.text).width,w=a.textAlign(l.textAlign||(l.textAlign=r.textAlign)),M=f+d+y,S=t.x,k=t.y;if(a.setWidth(this.width),v?c>0&&S+M+u>this.right&&(k=t.y+=_,t.line++,S=t.x=tz(n,this.left+u,this.right-s[t.line])):c>0&&k+_>this.bottom&&(S=t.x=S+i[t.line].width+u,t.line++,k=t.y=tz(n,this.top+x+u,this.bottom-i[t.line].height)),m(a.x(S),k,l),g=S+f+d,p=v?S+M:this.right,S=w===(e.rtl?"left":"right")?p:"center"===w?(g+p)/2:g,b(a.x(S),k,l),v)t.x+=M+u;else if("string"!=typeof l.text){let e=o.lineHeight;t.y+=s9(l,e)+u}else t.y+=_}),eV(this.ctx,e.textDirection)}drawTitle(){let t,e=this.options,i=e.title,s=el(i.font),h=er(i.padding);if(!i.display)return;let n=eI(e.rtl,this.left,this.width),r=this.ctx,l=i.position,a=s.size/2,o=h.top+a,u=this.left,c=this.width;if(this.isHorizontal())c=Math.max(...this.lineWidths),t=this.top+o,u=tz(e.align,u,this.right-c);else{let i=this.columnSizes.reduce((t,e)=>Math.max(t,e.height),0);t=o+tz(e.align,this.top,this.bottom-i-e.labels.padding-this._computeTitleHeight())}let d=tz(l,u,u+c);r.textAlign=n.textAlign(tT(l)),r.textBaseline="middle",r.strokeStyle=i.color,r.fillStyle=i.color,r.font=s.string,t9(r,i.text,d,t,s)}_computeTitleHeight(){let t=this.options.title,e=el(t.font),i=er(t.padding);return t.display?e.lineHeight+i.height:0}_getLegendItemAt(t,e){let i,s,h;if(tw(t,this.left,this.right)&&tw(e,this.top,this.bottom)){for(i=0,h=this.legendHitBoxes;i<h.length;++i)if(tw(t,(s=h[i]).left,s.left+s.width)&&tw(e,s.top,s.top+s.height))return this.legendItems[i]}return null}handleEvent(t){var e,i;let s=this.options;if(e=t.type,i=s,("mousemove"!==e&&"mouseout"!==e||!i.onHover&&!i.onLeave)&&(!i.onClick||"click"!==e&&"mouseup"!==e))return;let h=this._getLegendItemAt(t.x,t.y);if("mousemove"===t.type||"mouseout"===t.type){let e=this._hoveredItem,i=null!==e&&null!==h&&e.datasetIndex===h.datasetIndex&&e.index===h.index;e&&!i&&j(s.onLeave,[t,e,this],this),this._hoveredItem=h,h&&!i&&j(s.onHover,[t,h,this],this)}else h&&j(s.onClick,[t,h,this],this)}}function s9(t,e){return e*(t.text?t.text.length:0)}var s7={id:"legend",_element:s8,start(t,e,i){let s=t.legend=new s8({ctx:t.ctx,options:i,chart:t});iA.configure(t,s,i),iA.addBox(t,s)},stop(t){iA.removeBox(t,t.legend),delete t.legend},beforeUpdate(t,e,i){let s=t.legend;iA.configure(t,s,i),s.options=i},afterUpdate(t){let e=t.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(t,e){e.replay||t.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(t,e,i){let s=e.datasetIndex,h=i.chart;h.isDatasetVisible(s)?(h.hide(s),e.hidden=!0):(h.show(s),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:t=>t.chart.options.color,boxWidth:40,padding:10,generateLabels(t){let e=t.data.datasets,{labels:{usePointStyle:i,pointStyle:s,textAlign:h,color:n,useBorderRadius:r,borderRadius:l}}=t.legend.options;return t._getSortedDatasetMetas().map(t=>{let a=t.controller.getStyle(i?0:void 0),o=er(a.borderWidth);return{text:e[t.index].label,fillStyle:a.backgroundColor,fontColor:n,hidden:!t.visible,lineCap:a.borderCapStyle,lineDash:a.borderDash,lineDashOffset:a.borderDashOffset,lineJoin:a.borderJoinStyle,lineWidth:(o.width+o.height)/4,strokeStyle:a.borderColor,pointStyle:s||a.pointStyle,rotation:a.rotation,textAlign:h||a.textAlign,borderRadius:r&&(l||a.borderRadius),datasetIndex:t.index}},this)}},title:{color:t=>t.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:t=>!t.startsWith("on"),labels:{_scriptable:t=>!["generateLabels","filter","sort"].includes(t)}}};class ht extends iq{constructor(t){super(),this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,e){let i=this.options;if(this.left=0,this.top=0,!i.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=t,this.height=this.bottom=e;let s=O(i.text)?i.text.length:1;this._padding=er(i.padding);let h=s*el(i.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=h:this.width=h}isHorizontal(){let t=this.options.position;return"top"===t||"bottom"===t}_drawArgs(t){let e,i,s,{top:h,left:n,bottom:r,right:l,options:a}=this,o=a.align,u=0;return this.isHorizontal()?(i=tz(o,n,l),s=h+t,e=l-n):("left"===a.position?(i=n+t,s=tz(o,r,h),u=-.5*tt):(i=l-t,s=tz(o,h,r),u=.5*tt),e=r-h),{titleX:i,titleY:s,maxWidth:e,rotation:u}}draw(){let t=this.ctx,e=this.options;if(!e.display)return;let i=el(e.font),s=i.lineHeight/2+this._padding.top,{titleX:h,titleY:n,maxWidth:r,rotation:l}=this._drawArgs(s);t9(t,e.text,0,0,i,{color:e.color,maxWidth:r,rotation:l,textAlign:tT(e.align),textBaseline:"middle",translation:[h,n]})}}let he=new WeakMap,hi={average(t){let e,i;if(!t.length)return!1;let s=new Set,h=0,n=0;for(e=0,i=t.length;e<i;++e){let i=t[e].element;if(i&&i.hasValue()){let t=i.tooltipPosition();s.add(t.x),h+=t.y,++n}}return 0!==n&&0!==s.size&&{x:[...s].reduce((t,e)=>t+e)/s.size,y:h/n}},nearest(t,e){let i,s,h;if(!t.length)return!1;let n=e.x,r=e.y,l=1/0;for(i=0,s=t.length;i<s;++i){let s=t[i].element;if(s&&s.hasValue()){let t=tb(e,s.getCenterPoint());t<l&&(l=t,h=s)}}if(h){let t=h.tooltipPosition();n=t.x,r=t.y}return{x:n,y:r}}};function hs(t,e){return e&&(O(e)?Array.prototype.push.apply(t,e):t.push(e)),t}function hh(t){return("string"==typeof t||t instanceof String)&&t.indexOf("\n")>-1?t.split("\n"):t}function hn(t,e){let i=t.chart.ctx,{body:s,footer:h,title:n}=t,{boxWidth:r,boxHeight:l}=e,a=el(e.bodyFont),o=el(e.titleFont),u=el(e.footerFont),c=n.length,d=h.length,f=s.length,g=er(e.padding),p=g.height,m=0,b=s.reduce((t,e)=>t+e.before.length+e.lines.length+e.after.length,0);b+=t.beforeBody.length+t.afterBody.length,c&&(p+=c*o.lineHeight+(c-1)*e.titleSpacing+e.titleMarginBottom),b&&(p+=f*(e.displayColors?Math.max(l,a.lineHeight):a.lineHeight)+(b-f)*a.lineHeight+(b-1)*e.bodySpacing),d&&(p+=e.footerMarginTop+d*u.lineHeight+(d-1)*e.footerSpacing);let v=0,x=function(t){m=Math.max(m,i.measureText(t).width+v)};return i.save(),i.font=o.string,I(t.title,x),i.font=a.string,I(t.beforeBody.concat(t.afterBody),x),v=e.displayColors?r+2+e.boxPadding:0,I(s,t=>{I(t.before,x),I(t.lines,x),I(t.after,x)}),v=0,i.font=u.string,I(t.footer,x),i.restore(),{width:m+=g.width,height:p}}function hr(t,e,i){let s=i.yAlign||e.yAlign||function(t,e){let{y:i,height:s}=e;return i<s/2?"top":i>t.height-s/2?"bottom":"center"}(t,i);return{xAlign:i.xAlign||e.xAlign||function(t,e,i,s){let{x:h,width:n}=i,{width:r,chartArea:{left:l,right:a}}=t,o="center";return"center"===s?o=h<=(l+a)/2?"left":"right":h<=n/2?o="left":h>=r-n/2&&(o="right"),function(t,e,i,s){let{x:h,width:n}=s,r=i.caretSize+i.caretPadding;if("left"===t&&h+n+r>e.width||"right"===t&&h-n-r<0)return!0}(o,t,e,i)&&(o="center"),o}(t,e,i,s),yAlign:s}}function hl(t,e,i,s){let{caretSize:h,caretPadding:n,cornerRadius:r}=t,{xAlign:l,yAlign:a}=i,o=h+n,{topLeft:u,topRight:c,bottomLeft:d,bottomRight:f}=en(r),g=function(t,e){let{x:i,width:s}=t;return"right"===e?i-=s:"center"===e&&(i-=s/2),i}(e,l),p=function(t,e,i){let{y:s,height:h}=t;return"top"===e?s+=i:"bottom"===e?s-=h+i:s-=h/2,s}(e,a,o);return"center"===a?"left"===l?g+=o:"right"===l&&(g-=o):"left"===l?g-=Math.max(u,d)+h:"right"===l&&(g+=Math.max(c,f)+h),{x:ty(g,0,s.width-e.width),y:ty(p,0,s.height-e.height)}}function ha(t,e,i){let s=er(i.padding);return"center"===e?t.x+t.width/2:"right"===e?t.x+t.width-s.right:t.x+s.left}function ho(t,e){let i=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return i?t.override(i):t}let hu={beforeTitle:D,title(t){if(t.length>0){let e=t[0],i=e.chart.data.labels,s=i?i.length:0;if(this&&this.options&&"dataset"===this.options.mode)return e.dataset.label||"";if(e.label)return e.label;if(s>0&&e.dataIndex<s)return i[e.dataIndex]}return""},afterTitle:D,beforeBody:D,beforeLabel:D,label(t){if(this&&this.options&&"dataset"===this.options.mode)return t.label+": "+t.formattedValue||t.formattedValue;let e=t.dataset.label||"";e&&(e+=": ");let i=t.formattedValue;return z(i)||(e+=i),e},labelColor(t){let e=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{borderColor:e.borderColor,backgroundColor:e.backgroundColor,borderWidth:e.borderWidth,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(t){let e=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{pointStyle:e.pointStyle,rotation:e.rotation}},afterLabel:D,afterBody:D,beforeFooter:D,footer:D,afterFooter:D};function hc(t,e,i,s){let h=t[e].call(i,s);return void 0===h?hu[e].call(i,s):h}class hd extends iq{static positioners=hi;constructor(t){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=t.chart,this.options=t.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(t){this.options=t,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){let t=this._cachedAnimations;if(t)return t;let e=this.chart,i=this.options.setContext(this.getContext()),s=i.enabled&&e.options.animation&&i.animations,h=new e1(this.chart,s);return s._cacheable&&(this._cachedAnimations=Object.freeze(h)),h}getContext(){var t;return this.$context||(this.$context=(t=this.chart.getContext(),eo(t,{tooltip:this,tooltipItems:this._tooltipItems,type:"tooltip"})))}getTitle(t,e){let{callbacks:i}=e,s=hc(i,"beforeTitle",this,t),h=hc(i,"title",this,t),n=hc(i,"afterTitle",this,t),r=[];return r=hs(r,hh(s)),r=hs(r,hh(h)),r=hs(r,hh(n))}getBeforeBody(t,e){return hs([],hh(hc(e.callbacks,"beforeBody",this,t)))}getBody(t,e){let{callbacks:i}=e,s=[];return I(t,t=>{let e={before:[],lines:[],after:[]},h=ho(i,t);hs(e.before,hh(hc(h,"beforeLabel",this,t))),hs(e.lines,hc(h,"label",this,t)),hs(e.after,hh(hc(h,"afterLabel",this,t))),s.push(e)}),s}getAfterBody(t,e){return hs([],hh(hc(e.callbacks,"afterBody",this,t)))}getFooter(t,e){let{callbacks:i}=e,s=hc(i,"beforeFooter",this,t),h=hc(i,"footer",this,t),n=hc(i,"afterFooter",this,t),r=[];return r=hs(r,hh(s)),r=hs(r,hh(h)),r=hs(r,hh(n))}_createItems(t){let e,i,s=this._active,h=this.chart.data,n=[],r=[],l=[],a=[];for(e=0,i=s.length;e<i;++e)a.push(function(t,e){let{element:i,datasetIndex:s,index:h}=e,n=t.getDatasetMeta(s).controller,{label:r,value:l}=n.getLabelAndValue(h);return{chart:t,label:r,parsed:n.getParsed(h),raw:t.data.datasets[s].data[h],formattedValue:l,dataset:n.getDataset(),dataIndex:h,datasetIndex:s,element:i}}(this.chart,s[e]));return t.filter&&(a=a.filter((e,i,s)=>t.filter(e,i,s,h))),t.itemSort&&(a=a.sort((e,i)=>t.itemSort(e,i,h))),I(a,e=>{let i=ho(t.callbacks,e);n.push(hc(i,"labelColor",this,e)),r.push(hc(i,"labelPointStyle",this,e)),l.push(hc(i,"labelTextColor",this,e))}),this.labelColors=n,this.labelPointStyles=r,this.labelTextColors=l,this.dataPoints=a,a}update(t,e){let i,s=this.options.setContext(this.getContext()),h=this._active,n=[];if(h.length){let t=hi[s.position].call(this,h,this._eventPosition);n=this._createItems(s),this.title=this.getTitle(n,s),this.beforeBody=this.getBeforeBody(n,s),this.body=this.getBody(n,s),this.afterBody=this.getAfterBody(n,s),this.footer=this.getFooter(n,s);let e=this._size=hn(this,s),r=Object.assign({},t,e),l=hr(this.chart,s,r),a=hl(s,r,l,this.chart);this.xAlign=l.xAlign,this.yAlign=l.yAlign,i={opacity:1,x:a.x,y:a.y,width:e.width,height:e.height,caretX:t.x,caretY:t.y}}else 0!==this.opacity&&(i={opacity:0});this._tooltipItems=n,this.$context=void 0,i&&this._resolveAnimations().update(this,i),t&&s.external&&s.external.call(this,{chart:this.chart,tooltip:this,replay:e})}drawCaret(t,e,i,s){let h=this.getCaretPosition(t,i,s);e.lineTo(h.x1,h.y1),e.lineTo(h.x2,h.y2),e.lineTo(h.x3,h.y3)}getCaretPosition(t,e,i){let s,h,n,r,l,a,{xAlign:o,yAlign:u}=this,{caretSize:c,cornerRadius:d}=i,{topLeft:f,topRight:g,bottomLeft:p,bottomRight:m}=en(d),{x:b,y:v}=t,{width:x,height:_}=e;return"center"===u?(l=v+_/2,"left"===o?(h=(s=b)-c,r=l+c,a=l-c):(h=(s=b+x)+c,r=l-c,a=l+c),n=s):(h="left"===o?b+Math.max(f,p)+c:"right"===o?b+x-Math.max(g,m)-c:this.caretX,"top"===u?(l=(r=v)-c,s=h-c,n=h+c):(l=(r=v+_)+c,s=h+c,n=h-c),a=r),{x1:s,x2:h,x3:n,y1:r,y2:l,y3:a}}drawTitle(t,e,i){let s,h,n,r=this.title,l=r.length;if(l){let a=eI(i.rtl,this.x,this.width);for(n=0,t.x=ha(this,i.titleAlign,i),e.textAlign=a.textAlign(i.titleAlign),e.textBaseline="middle",s=el(i.titleFont),h=i.titleSpacing,e.fillStyle=i.titleColor,e.font=s.string;n<l;++n)e.fillText(r[n],a.x(t.x),t.y+s.lineHeight/2),t.y+=s.lineHeight+h,n+1===l&&(t.y+=i.titleMarginBottom-h)}}_drawColorBox(t,e,i,s,h){let n=this.labelColors[i],r=this.labelPointStyles[i],{boxHeight:l,boxWidth:a}=h,o=el(h.bodyFont),u=ha(this,"left",h),c=s.x(u),d=l<o.lineHeight?(o.lineHeight-l)/2:0,f=e.y+d;if(h.usePointStyle){let e={radius:Math.min(a,l)/2,pointStyle:r.pointStyle,rotation:r.rotation,borderWidth:1},i=s.leftForLtr(c,a)+a/2,o=f+l/2;t.strokeStyle=h.multiKeyBackground,t.fillStyle=h.multiKeyBackground,t1(t,e,i,o),t.strokeStyle=n.borderColor,t.fillStyle=n.backgroundColor,t1(t,e,i,o)}else{t.lineWidth=R(n.borderWidth)?Math.max(...Object.values(n.borderWidth)):n.borderWidth||1,t.strokeStyle=n.borderColor,t.setLineDash(n.borderDash||[]),t.lineDashOffset=n.borderDashOffset||0;let e=s.leftForLtr(c,a),i=s.leftForLtr(s.xPlus(c,1),a-2),r=en(n.borderRadius);Object.values(r).some(t=>0!==t)?(t.beginPath(),t.fillStyle=h.multiKeyBackground,t7(t,{x:e,y:f,w:a,h:l,radius:r}),t.fill(),t.stroke(),t.fillStyle=n.backgroundColor,t.beginPath(),t7(t,{x:i,y:f+1,w:a-2,h:l-2,radius:r}),t.fill()):(t.fillStyle=h.multiKeyBackground,t.fillRect(e,f,a,l),t.strokeRect(e,f,a,l),t.fillStyle=n.backgroundColor,t.fillRect(i,f+1,a-2,l-2))}t.fillStyle=this.labelTextColors[i]}drawBody(t,e,i){let s,h,n,r,l,a,{body:o}=this,{bodySpacing:u,bodyAlign:c,displayColors:d,boxHeight:f,boxWidth:g,boxPadding:p}=i,m=el(i.bodyFont),b=m.lineHeight,v=0,x=eI(i.rtl,this.x,this.width),_=function(i){e.fillText(i,x.x(t.x+v),t.y+b/2),t.y+=b+u},y=x.textAlign(c);for(e.textAlign=c,e.textBaseline="middle",e.font=m.string,t.x=ha(this,y,i),e.fillStyle=i.bodyColor,I(this.beforeBody,_),v=d&&"right"!==y?"center"===c?g/2+p:g+2+p:0,n=0,l=o.length;n<l;++n){for(s=o[n],e.fillStyle=this.labelTextColors[n],I(s.before,_),h=s.lines,d&&h.length&&(this._drawColorBox(e,t,n,x,i),b=Math.max(m.lineHeight,f)),r=0,a=h.length;r<a;++r)_(h[r]),b=m.lineHeight;I(s.after,_)}v=0,b=m.lineHeight,I(this.afterBody,_),t.y-=u}drawFooter(t,e,i){let s,h,n=this.footer,r=n.length;if(r){let l=eI(i.rtl,this.x,this.width);for(t.x=ha(this,i.footerAlign,i),t.y+=i.footerMarginTop,e.textAlign=l.textAlign(i.footerAlign),e.textBaseline="middle",s=el(i.footerFont),e.fillStyle=i.footerColor,e.font=s.string,h=0;h<r;++h)e.fillText(n[h],l.x(t.x),t.y+s.lineHeight/2),t.y+=s.lineHeight+i.footerSpacing}}drawBackground(t,e,i,s){let{xAlign:h,yAlign:n}=this,{x:r,y:l}=t,{width:a,height:o}=i,{topLeft:u,topRight:c,bottomLeft:d,bottomRight:f}=en(s.cornerRadius);e.fillStyle=s.backgroundColor,e.strokeStyle=s.borderColor,e.lineWidth=s.borderWidth,e.beginPath(),e.moveTo(r+u,l),"top"===n&&this.drawCaret(t,e,i,s),e.lineTo(r+a-c,l),e.quadraticCurveTo(r+a,l,r+a,l+c),"center"===n&&"right"===h&&this.drawCaret(t,e,i,s),e.lineTo(r+a,l+o-f),e.quadraticCurveTo(r+a,l+o,r+a-f,l+o),"bottom"===n&&this.drawCaret(t,e,i,s),e.lineTo(r+d,l+o),e.quadraticCurveTo(r,l+o,r,l+o-d),"center"===n&&"left"===h&&this.drawCaret(t,e,i,s),e.lineTo(r,l+u),e.quadraticCurveTo(r,l,r+u,l),e.closePath(),e.fill(),s.borderWidth>0&&e.stroke()}_updateAnimationTarget(t){let e=this.chart,i=this.$animations,s=i&&i.x,h=i&&i.y;if(s||h){let i=hi[t.position].call(this,this._active,this._eventPosition);if(!i)return;let n=this._size=hn(this,t),r=Object.assign({},i,this._size),l=hr(e,t,r),a=hl(t,r,l,e);(s._to!==a.x||h._to!==a.y)&&(this.xAlign=l.xAlign,this.yAlign=l.yAlign,this.width=n.width,this.height=n.height,this.caretX=i.x,this.caretY=i.y,this._resolveAnimations().update(this,a))}}_willRender(){return!!this.opacity}draw(t){let e=this.options.setContext(this.getContext()),i=this.opacity;if(!i)return;this._updateAnimationTarget(e);let s={width:this.width,height:this.height},h={x:this.x,y:this.y};i=.001>Math.abs(i)?0:i;let n=er(e.padding),r=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;e.enabled&&r&&(t.save(),t.globalAlpha=i,this.drawBackground(h,t,s,e),eW(t,e.textDirection),h.y+=n.top,this.drawTitle(h,t,e),this.drawBody(h,t,e),this.drawFooter(h,t,e),eV(t,e.textDirection),t.restore())}getActiveElements(){return this._active||[]}setActiveElements(t,e){let i=this._active,s=t.map(({datasetIndex:t,index:e})=>{let i=this.chart.getDatasetMeta(t);if(!i)throw Error("Cannot find a dataset at index "+t);return{datasetIndex:t,element:i.data[e],index:e}}),h=!W(i,s),n=this._positionChanged(s,e);(h||n)&&(this._active=s,this._eventPosition=e,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(t,e,i=!0){if(e&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;let s=this.options,h=this._active||[],n=this._getActiveElements(t,h,e,i),r=this._positionChanged(n,t),l=e||!W(n,h)||r;return l&&(this._active=n,(s.enabled||s.external)&&(this._eventPosition={x:t.x,y:t.y},this.update(!0,e))),l}_getActiveElements(t,e,i,s){let h=this.options;if("mouseout"===t.type)return[];if(!s)return e.filter(t=>this.chart.data.datasets[t.datasetIndex]&&void 0!==this.chart.getDatasetMeta(t.datasetIndex).controller.getParsed(t.index));let n=this.chart.getElementsAtEventForMode(t,h.mode,h,i);return h.reverse&&n.reverse(),n}_positionChanged(t,e){let{caretX:i,caretY:s,options:h}=this,n=hi[h.position].call(this,t,e);return!1!==n&&(i!==n.x||s!==n.y)}}var hf={id:"tooltip",_element:hd,positioners:hi,afterInit(t,e,i){i&&(t.tooltip=new hd({chart:t,options:i}))},beforeUpdate(t,e,i){t.tooltip&&t.tooltip.initialize(i)},reset(t,e,i){t.tooltip&&t.tooltip.initialize(i)},afterDraw(t){let e=t.tooltip;if(e&&e._willRender()){let i={tooltip:e};if(!1===t.notifyPlugins("beforeTooltipDraw",{...i,cancelable:!0}))return;e.draw(t.ctx),t.notifyPlugins("afterTooltipDraw",i)}},afterEvent(t,e){if(t.tooltip){let i=e.replay;t.tooltip.handleEvent(e.event,i,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(t,e)=>e.bodyFont.size,boxWidth:(t,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:hu},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:t=>"filter"!==t&&"itemSort"!==t&&"external"!==t,_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]},hg=Object.freeze({__proto__:null,Colors:{id:"colors",defaults:{enabled:!0,forceOverride:!1},beforeLayout(t,e,i){let s;if(!i.enabled)return;let{data:{datasets:h},options:n}=t.config,{elements:r}=n,l=sU(h)||n&&(n.borderColor||n.backgroundColor)||r&&sU(r)||"rgba(0,0,0,0.1)"!==tG.borderColor||"rgba(0,0,0,0.1)"!==tG.backgroundColor;if(!i.forceOverride&&l)return;let a=(s=0,(e,i)=>{var h,n,r;let l=t.getDatasetMeta(i).controller;l instanceof ic?(h=s,e.backgroundColor=e.data.map(()=>sH(h++)),s=h):l instanceof ig?(n=s,e.backgroundColor=e.data.map(()=>s$(n++)),s=n):l&&(e.borderColor=sH(r=s),e.backgroundColor=s$(r),s=++r)});h.forEach(a)}},Decimation:{id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(t,e,i)=>{if(!i.enabled)return void sK(t);let s=t.width;t.data.datasets.forEach((e,h)=>{let n,{_data:r,indexAxis:l}=e,a=t.getDatasetMeta(h),o=r||e.data;if("y"===ea([l,t.options.indexAxis])||!a.controller.supportsDecimation)return;let u=t.scales[a.xAxisID];if("linear"!==u.type&&"time"!==u.type||t.options.parsing)return;let{start:c,count:d}=function(t,e){let i,s=e.length,h=0,{iScale:n}=t,{min:r,max:l,minDefined:a,maxDefined:o}=n.getUserBounds();return a&&(h=ty(tS(e,n.axis,r).lo,0,s-1)),i=o?ty(tS(e,n.axis,l).hi+1,h,s)-h:s-h,{start:h,count:i}}(a,o);if(d<=(i.threshold||4*s))return void sY(e);switch(z(r)&&(e._data=o,delete e.data,Object.defineProperty(e,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(t){this._data=t}})),i.algorithm){case"lttb":n=function(t,e,i,s,h){let n,r,l,a,o,u=h.samples||s;if(u>=i)return t.slice(e,e+i);let c=[],d=(i-2)/(u-2),f=0,g=e+i-1,p=e;for(n=0,c[f++]=t[p];n<u-2;n++){let s,h=0,u=0,g=Math.floor((n+1)*d)+1+e,m=Math.min(Math.floor((n+2)*d)+1,i)+e,b=m-g;for(s=g;s<m;s++)h+=t[s].x,u+=t[s].y;h/=b,u/=b;let v=Math.floor(n*d)+1+e,x=Math.min(Math.floor((n+1)*d)+1,i)+e,{x:_,y:y}=t[p];for(l=a=-1,s=v;s<x;s++)(a=.5*Math.abs((_-h)*(t[s].y-y)-(_-t[s].x)*(u-y)))>l&&(l=a,r=t[s],o=s);c[f++]=r,p=o}return c[f++]=t[g],c}(o,c,d,s,i);break;case"min-max":n=function(t,e,i,s){let h,n,r,l,a,o,u,c,d,f,g=0,p=0,m=[],b=t[e].x,v=t[e+i-1].x-b;for(h=e;h<e+i;++h){r=((n=t[h]).x-b)/v*s,l=n.y;let e=0|r;if(e===a)l<d?(d=l,o=h):l>f&&(f=l,u=h),g=(p*g+n.x)/++p;else{let i=h-1;if(!z(o)&&!z(u)){let e=Math.min(o,u),s=Math.max(o,u);e!==c&&e!==i&&m.push({...t[e],x:g}),s!==c&&s!==i&&m.push({...t[s],x:g})}h>0&&i!==c&&m.push(t[i]),m.push(n),a=e,p=0,d=f=l,o=u=c=h}}return m}(o,c,d,s);break;default:throw Error(`Unsupported decimation algorithm '${i.algorithm}'`)}e._decimated=n})},destroy(t){sK(t)}},Filler:s6,Legend:s7,SubTitle:{id:"subtitle",start(t,e,i){let s=new ht({ctx:t.ctx,options:i,chart:t});iA.configure(t,s,i),iA.addBox(t,s),he.set(t,s)},stop(t){iA.removeBox(t,he.get(t)),he.delete(t)},beforeUpdate(t,e,i){let s=he.get(t);iA.configure(t,s,i),s.options=i},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}},Title:{id:"title",_element:ht,start(t,e,i){let s;s=new ht({ctx:t.ctx,options:i,chart:t}),iA.configure(t,s,i),iA.addBox(t,s),t.titleBlock=s},stop(t){let e=t.titleBlock;iA.removeBox(t,e),delete t.titleBlock},beforeUpdate(t,e,i){let s=t.titleBlock;iA.configure(t,s,i),s.options=i},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}},Tooltip:hf});function hp(t){let e=this.getLabels();return t>=0&&t<e.length?e[t]:t}class hm extends i6{static id="category";static defaults={ticks:{callback:hp}};constructor(t){super(t),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(t){let e=this._addedLabels;if(e.length){let t=this.getLabels();for(let{index:i,label:s}of e)t[i]===s&&t.splice(i,1);this._addedLabels=[]}super.init(t)}parse(t,e){let i,s;if(z(t))return null;let h=this.getLabels();return i=e=isFinite(e)&&h[e]===t?e:function(t,e,i,s){let h=t.indexOf(e);if(-1===h){var n;return n=i,"string"==typeof e?(n=t.push(e)-1,s.unshift({index:n,label:e})):isNaN(e)&&(n=null),n}return h!==t.lastIndexOf(e)?i:h}(h,t,N(e,t),this._addedLabels),s=h.length-1,null===i?null:ty(Math.round(i),0,s)}determineDataLimits(){let{minDefined:t,maxDefined:e}=this.getUserBounds(),{min:i,max:s}=this.getMinMax(!0);"ticks"===this.options.bounds&&(t||(i=0),e||(s=this.getLabels().length-1)),this.min=i,this.max=s}buildTicks(){let t=this.min,e=this.max,i=this.options.offset,s=[],h=this.getLabels();h=0===t&&e===h.length-1?h:h.slice(t,e+1),this._valueRange=Math.max(h.length-!i,1),this._startValue=this.min-.5*!!i;for(let i=t;i<=e;i++)s.push({value:i});return s}getLabelForValue(t){return hp.call(this,t)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(t){return"number"!=typeof t&&(t=this.parse(t)),null===t?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getPixelForTick(t){let e=this.ticks;return t<0||t>e.length-1?null:this.getPixelForValue(e[t].value)}getValueForPixel(t){return Math.round(this._startValue+this.getDecimalForPixel(t)*this._valueRange)}getBasePixel(){return this.bottom}}function hb(t,e,{horizontal:i,minRotation:s}){let h=tg(s),n=(i?Math.sin(h):Math.cos(h))||.001,r=.75*e*(""+t).length;return Math.min(e/n,r)}class hv extends i6{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(t,e){return z(t)||("number"==typeof t||t instanceof Number)&&!isFinite(+t)?null:+t}handleTickRangeOptions(){let{beginAtZero:t}=this.options,{minDefined:e,maxDefined:i}=this.getUserBounds(),{min:s,max:h}=this,n=t=>s=e?s:t,r=t=>h=i?h:t;if(t){let t=to(s),e=to(h);t<0&&e<0?r(0):t>0&&e>0&&n(0)}if(s===h){let e=0===h?1:Math.abs(.05*h);r(h+e),t||n(s-e)}this.min=s,this.max=h}getTickLimit(){let t,{maxTicksLimit:e,stepSize:i}=this.options.ticks;return i?(t=Math.ceil(this.max/i)-Math.floor(this.min/i)+1)>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${i} would result generating up to ${t} ticks. Limiting to 1000.`),t=1e3):(t=this.computeTickLimit(),e=e||11),e&&(t=Math.min(e,t)),t}computeTickLimit(){return 1/0}buildTicks(){let t=this.options,e=t.ticks,i=this.getTickLimit(),s=function(t,e){var i,s;let h,n,r,l,a,o=[],{bounds:u,step:c,min:d,max:f,precision:g,count:p,maxTicks:m,maxDigits:b,includeBounds:v}=t,x=c||1,_=m-1,{min:y,max:w}=e,M=!z(d),S=!z(f),k=!z(p),C=(w-y)/(b+1),P=tc((w-y)/_/x)*x;if(P<1e-14&&!M&&!S)return[{value:y},{value:w}];(l=Math.ceil(w/P)-Math.floor(y/P))>_&&(P=tc(l*P/_/x)*x),z(g)||(P=Math.ceil(P*(h=Math.pow(10,g)))/h),"ticks"===u?(n=Math.floor(y/P)*P,r=Math.ceil(w/P)*P):(n=y,r=w),M&&S&&c&&(i=(f-d)/c,s=P/1e3,(a=Math.round(i))-s<=i&&a+s>=i)?(l=Math.round(Math.min((f-d)/P,m)),P=(f-d)/l,n=d,r=f):k?(n=M?d:n,P=((r=S?f:r)-n)/(l=p-1)):l=tu(l=(r-n)/P,Math.round(l),P/1e3)?Math.round(l):Math.ceil(l);let E=Math.max(tp(P),tp(n));n=Math.round(n*(h=Math.pow(10,z(g)?E:g)))/h,r=Math.round(r*h)/h;let L=0;for(M&&(v&&n!==d?(o.push({value:d}),n<d&&L++,tu(Math.round((n+L*P)*h)/h,d,hb(d,C,t))&&L++):n<d&&L++);L<l;++L){let t=Math.round((n+L*P)*h)/h;if(S&&t>f)break;o.push({value:t})}return S&&v&&r!==f?o.length&&tu(o[o.length-1].value,f,hb(f,C,t))?o[o.length-1].value=f:o.push({value:f}):S&&r!==f||o.push({value:r}),o}({maxTicks:i=Math.max(2,i),bounds:t.bounds,min:t.min,max:t.max,precision:e.precision,step:e.stepSize,count:e.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:e.minRotation||0,includeBounds:!1!==e.includeBounds},this._range||this);return"ticks"===t.bounds&&tf(s,this,"value"),t.reverse?(s.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),s}configure(){let t=this.ticks,e=this.min,i=this.max;if(super.configure(),this.options.offset&&t.length){let s=(i-e)/Math.max(t.length-1,1)/2;e-=s,i+=s}this._startValue=e,this._endValue=i,this._valueRange=i-e}getLabelForValue(t){return tU(t,this.chart.options.locale,this.options.ticks.format)}}class hx extends hv{static id="linear";static defaults={ticks:{callback:tY.numeric}};determineDataLimits(){let{min:t,max:e}=this.getMinMax(!0);this.min=A(t)?t:0,this.max=A(e)?e:1,this.handleTickRangeOptions()}computeTickLimit(){let t=this.isHorizontal(),e=t?this.width:this.height,i=tg(this.options.ticks.minRotation),s=(t?Math.sin(i):Math.cos(i))||.001;return Math.ceil(e/Math.min(40,this._resolveTickFontOptions(0).lineHeight/s))}getPixelForValue(t){return null===t?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getValueForPixel(t){return this._startValue+this.getDecimalForPixel(t)*this._valueRange}}let h_=t=>Math.floor(ta(t)),hy=(t,e)=>Math.pow(10,h_(t)+e);function hw(t){return 1==t/Math.pow(10,h_(t))}function hM(t,e,i){let s=Math.pow(10,i),h=Math.floor(t/s);return Math.ceil(e/s)-h}class hS extends i6{static id="logarithmic";static defaults={ticks:{callback:tY.logarithmic,major:{enabled:!0}}};constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(t,e){let i=hv.prototype.parse.apply(this,[t,e]);if(0===i){this._zero=!0;return}return A(i)&&i>0?i:null}determineDataLimits(){let{min:t,max:e}=this.getMinMax(!0);this.min=A(t)?Math.max(0,t):null,this.max=A(e)?Math.max(0,e):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!A(this._userMin)&&(this.min=t===hy(this.min,0)?hy(this.min,-1):hy(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){let{minDefined:t,maxDefined:e}=this.getUserBounds(),i=this.min,s=this.max,h=e=>i=t?i:e,n=t=>s=e?s:t;i===s&&(i<=0?(h(1),n(10)):(h(hy(i,-1)),n(hy(s,1)))),i<=0&&h(hy(s,-1)),s<=0&&n(hy(i,1)),this.min=i,this.max=s}buildTicks(){let t=this.options,e=function(t,{min:e,max:i}){e=F(t.min,e);let s=[],h=h_(e),n=function(t,e){let i=h_(e-t);for(;hM(t,e,i)>10;)i++;for(;10>hM(t,e,i);)i--;return Math.min(i,h_(t))}(e,i),r=n<0?Math.pow(10,Math.abs(n)):1,l=Math.pow(10,n),a=h>n?Math.pow(10,h):0,o=Math.round((e-a)*r)/r,u=Math.floor((e-a)/l/10)*l*10,c=Math.floor((o-u)/Math.pow(10,n)),d=F(t.min,Math.round((a+u+c*Math.pow(10,n))*r)/r);for(;d<i;)s.push({value:d,major:hw(d),significand:c}),c>=10?c=c<15?15:20:c++,c>=20&&(c=2,r=++n>=0?1:r),d=Math.round((a+u+c*Math.pow(10,n))*r)/r;let f=F(t.max,d);return s.push({value:f,major:hw(f),significand:c}),s}({min:this._userMin,max:this._userMax},this);return"ticks"===t.bounds&&tf(e,this,"value"),t.reverse?(e.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),e}getLabelForValue(t){return void 0===t?"0":tU(t,this.chart.options.locale,this.options.ticks.format)}configure(){let t=this.min;super.configure(),this._startValue=ta(t),this._valueRange=ta(this.max)-ta(t)}getPixelForValue(t){return((void 0===t||0===t)&&(t=this.min),null===t||isNaN(t))?NaN:this.getPixelForDecimal(t===this.min?0:(ta(t)-this._startValue)/this._valueRange)}getValueForPixel(t){let e=this.getDecimalForPixel(t);return Math.pow(10,this._startValue+e*this._valueRange)}}function hk(t){let e=t.ticks;if(e.display&&t.display){let t=er(e.backdropPadding);return N(e.font&&e.font.size,tG.font.size)+t.height}return 0}function hC(t,e,i,s,h){return t===s||t===h?{start:e-i/2,end:e+i/2}:t<s||t>h?{start:e-i,end:e}:{start:e,end:e+i}}function hP(t,e,i,s){let{ctx:h}=t;if(i)h.arc(t.xCenter,t.yCenter,e,0,te);else{let i=t.getPointPosition(0,e);h.moveTo(i.x,i.y);for(let n=1;n<s;n++)i=t.getPointPosition(n,e),h.lineTo(i.x,i.y)}}class hE extends hv{static id="radialLinear";static defaults={display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:tY.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback:t=>t,padding:5,centerPointLabels:!1}};static defaultRoutes={"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"};static descriptors={angleLines:{_fallback:"grid"}};constructor(t){super(t),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){let t=this._padding=er(hk(this.options)/2),e=this.width=this.maxWidth-t.width,i=this.height=this.maxHeight-t.height;this.xCenter=Math.floor(this.left+e/2+t.left),this.yCenter=Math.floor(this.top+i/2+t.top),this.drawingArea=Math.floor(Math.min(e,i)/2)}determineDataLimits(){let{min:t,max:e}=this.getMinMax(!1);this.min=A(t)&&!isNaN(t)?t:0,this.max=A(e)&&!isNaN(e)?e:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/hk(this.options))}generateTickLabels(t){hv.prototype.generateTickLabels.call(this,t),this._pointLabels=this.getLabels().map((t,e)=>{let i=j(this.options.pointLabels.callback,[t,e],this);return i||0===i?i:""}).filter((t,e)=>this.chart.getDataVisibility(e))}fit(){let t=this.options;t.display&&t.pointLabels.display?function(t){let e={l:t.left+t._padding.left,r:t.right-t._padding.right,t:t.top+t._padding.top,b:t.bottom-t._padding.bottom},i=Object.assign({},e),s=[],h=[],n=t._pointLabels.length,r=t.options.pointLabels,l=r.centerPointLabels?tt/n:0;for(let u=0;u<n;u++){var a,o;let n=r.setContext(t.getPointLabelContext(u));h[u]=n.padding;let c=t.getPointPosition(u,t.drawingArea+h[u],l),d=el(n.font),f=(a=t.ctx,o=O(o=t._pointLabels[u])?o:[o],{w:function(t,e,i,s){let h,n,r,l,a,o=(s=s||{}).data=s.data||{},u=s.garbageCollect=s.garbageCollect||[];s.font!==e&&(o=s.data={},u=s.garbageCollect=[],s.font=e),t.save(),t.font=e;let c=0,d=i.length;for(h=0;h<d;h++)if(null==(l=i[h])||O(l)){if(O(l))for(n=0,r=l.length;n<r;n++)null==(a=l[n])||O(a)||(c=tq(t,o,u,c,a))}else c=tq(t,o,u,c,l);t.restore();let f=u.length/2;if(f>i.length){for(h=0;h<f;h++)delete o[u[h]];u.splice(0,f)}return c}(a,d.string,o),h:o.length*d.lineHeight});s[u]=f;let g=tx(t.getIndexAngle(u)+l),p=Math.round(180/tt*g);!function(t,e,i,s,h){let n=Math.abs(Math.sin(i)),r=Math.abs(Math.cos(i)),l=0,a=0;s.start<e.l?(l=(e.l-s.start)/n,t.l=Math.min(t.l,e.l-l)):s.end>e.r&&(l=(s.end-e.r)/n,t.r=Math.max(t.r,e.r+l)),h.start<e.t?(a=(e.t-h.start)/r,t.t=Math.min(t.t,e.t-a)):h.end>e.b&&(a=(h.end-e.b)/r,t.b=Math.max(t.b,e.b+a))}(i,e,g,hC(p,c.x,f.w,0,180),hC(p,c.y,f.h,90,270))}t.setCenterPoint(e.l-i.l,i.r-e.r,e.t-i.t,i.b-e.b),t._pointLabelItems=function(t,e,i){let s,h=[],n=t._pointLabels.length,r=t.options,{centerPointLabels:l,display:a}=r.pointLabels,o={extra:hk(r)/2,additionalAngle:l?tt/n:0};for(let r=0;r<n;r++){o.padding=i[r],o.size=e[r];let n=function(t,e,i){var s,h,n,r,l,a,o;let u=t.drawingArea,{extra:c,additionalAngle:d,padding:f,size:g}=i,p=t.getPointPosition(e,u+c+f,d),m=Math.round(180/tt*tx(p.angle+tn)),b=(s=p.y,h=g.h,90===(n=m)||270===n?s-=h/2:(n>270||n<90)&&(s-=h),s),v=0===(r=m)||180===r?"center":r<180?"left":"right",x=(l=p.x,a=g.w,"right"===(o=v)?l-=a:"center"===o&&(l-=a/2),l);return{visible:!0,x:p.x,y:b,textAlign:v,left:x,top:b,right:x+g.w,bottom:b+g.h}}(t,r,o);h.push(n),"auto"===a&&(n.visible=function(t,e){if(!e)return!0;let{left:i,top:s,right:h,bottom:n}=t;return!(t5({x:i,y:s},e)||t5({x:i,y:n},e)||t5({x:h,y:s},e)||t5({x:h,y:n},e))}(n,s),n.visible&&(s=n))}return h}(t,s,h)}(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(t,e,i,s){this.xCenter+=Math.floor((t-e)/2),this.yCenter+=Math.floor((i-s)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(t,e,i,s))}getIndexAngle(t){return tx(t*(te/(this._pointLabels.length||1))+tg(this.options.startAngle||0))}getDistanceFromCenterForValue(t){if(z(t))return NaN;let e=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-t)*e:(t-this.min)*e}getValueForDistanceFromCenter(t){if(z(t))return NaN;let e=t/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-e:this.min+e}getPointLabelContext(t){let e=this._pointLabels||[];if(t>=0&&t<e.length){var i;let s=e[t];return i=this.getContext(),eo(i,{label:s,index:t,type:"pointLabel"})}}getPointPosition(t,e,i=0){let s=this.getIndexAngle(t)-tn+i;return{x:Math.cos(s)*e+this.xCenter,y:Math.sin(s)*e+this.yCenter,angle:s}}getPointPositionForValue(t,e){return this.getPointPosition(t,this.getDistanceFromCenterForValue(e))}getBasePosition(t){return this.getPointPositionForValue(t||0,this.getBaseValue())}getPointLabelPosition(t){let{left:e,top:i,right:s,bottom:h}=this._pointLabelItems[t];return{left:e,top:i,right:s,bottom:h}}drawBackground(){let{backgroundColor:t,grid:{circular:e}}=this.options;if(t){let i=this.ctx;i.save(),i.beginPath(),hP(this,this.getDistanceFromCenterForValue(this._endValue),e,this._pointLabels.length),i.closePath(),i.fillStyle=t,i.fill(),i.restore()}}drawGrid(){let t,e,i,s=this.ctx,h=this.options,{angleLines:n,grid:r,border:l}=h,a=this._pointLabels.length;if(h.pointLabels.display&&function(t,e){let{ctx:i,options:{pointLabels:s}}=t;for(let h=e-1;h>=0;h--){let e=t._pointLabelItems[h];if(!e.visible)continue;let n=s.setContext(t.getPointLabelContext(h));!function(t,e,i){let{left:s,top:h,right:n,bottom:r}=i,{backdropColor:l}=e;if(!z(l)){let i=en(e.borderRadius),a=er(e.backdropPadding);t.fillStyle=l;let o=s-a.left,u=h-a.top,c=n-s+a.width,d=r-h+a.height;Object.values(i).some(t=>0!==t)?(t.beginPath(),t7(t,{x:o,y:u,w:c,h:d,radius:i}),t.fill()):t.fillRect(o,u,c,d)}}(i,n,e);let r=el(n.font),{x:l,y:a,textAlign:o}=e;t9(i,t._pointLabels[h],l,a+r.lineHeight/2,r,{color:n.color,textAlign:o,textBaseline:"middle"})}}(this,a),r.display&&this.ticks.forEach((t,i)=>{if(0!==i||0===i&&this.min<0){e=this.getDistanceFromCenterForValue(t.value);let s=this.getContext(i),h=r.setContext(s),n=l.setContext(s);!function(t,e,i,s,h){let n=t.ctx,r=e.circular,{color:l,lineWidth:a}=e;(r||s)&&l&&a&&!(i<0)&&(n.save(),n.strokeStyle=l,n.lineWidth=a,n.setLineDash(h.dash||[]),n.lineDashOffset=h.dashOffset,n.beginPath(),hP(t,i,r,s),n.closePath(),n.stroke(),n.restore())}(this,h,e,a,n)}}),n.display){for(s.save(),t=a-1;t>=0;t--){let r=n.setContext(this.getPointLabelContext(t)),{color:l,lineWidth:a}=r;a&&l&&(s.lineWidth=a,s.strokeStyle=l,s.setLineDash(r.borderDash),s.lineDashOffset=r.borderDashOffset,e=this.getDistanceFromCenterForValue(h.reverse?this.min:this.max),i=this.getPointPosition(t,e),s.beginPath(),s.moveTo(this.xCenter,this.yCenter),s.lineTo(i.x,i.y),s.stroke())}s.restore()}}drawBorder(){}drawLabels(){let t,e,i=this.ctx,s=this.options,h=s.ticks;if(!h.display)return;let n=this.getIndexAngle(0);i.save(),i.translate(this.xCenter,this.yCenter),i.rotate(n),i.textAlign="center",i.textBaseline="middle",this.ticks.forEach((n,r)=>{if(0===r&&this.min>=0&&!s.reverse)return;let l=h.setContext(this.getContext(r)),a=el(l.font);if(t=this.getDistanceFromCenterForValue(this.ticks[r].value),l.showLabelBackdrop){i.font=a.string,e=i.measureText(n.label).width,i.fillStyle=l.backdropColor;let s=er(l.backdropPadding);i.fillRect(-e/2-s.left,-t-a.size/2-s.top,e+s.width,a.size+s.height)}t9(i,n.label,0,-t,a,{color:l.color,strokeColor:l.textStrokeColor,strokeWidth:l.textStrokeWidth})}),i.restore()}drawTitle(){}}let hL={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},hD=Object.keys(hL);function hT(t,e){return t-e}function hz(t,e){if(z(e))return null;let i=t._adapter,{parser:s,round:h,isoWeekday:n}=t._parseOpts,r=e;return("function"==typeof s&&(r=s(r)),A(r)||(r="string"==typeof s?i.parse(r,s):i.parse(r)),null===r)?null:(h&&(r="week"===h&&(td(n)||!0===n)?i.startOf(r,"isoWeek",n):i.startOf(r,h)),+r)}function hO(t,e,i,s){let h=hD.length;for(let n=hD.indexOf(t);n<h-1;++n){let t=hL[hD[n]],h=t.steps?t.steps:Number.MAX_SAFE_INTEGER;if(t.common&&Math.ceil((i-e)/(h*t.size))<=s)return hD[n]}return hD[h-1]}function hR(t,e,i){if(i){if(i.length){let{lo:s,hi:h}=tM(i,e);t[i[s]>=e?i[s]:i[h]]=!0}}else t[e]=!0}function hA(t,e,i){let s,h,n=[],r={},l=e.length;for(s=0;s<l;++s)r[h=e[s]]=s,n.push({value:h,major:!1});return 0!==l&&i?function(t,e,i,s){let h,n,r=t._adapter,l=+r.startOf(e[0].value,s),a=e[e.length-1].value;for(h=l;h<=a;h=+r.add(h,1,s))(n=i[h])>=0&&(e[n].major=!0);return e}(t,n,r,i):n}class hF extends i6{static id="time";static defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}};constructor(t){super(t),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(t,e={}){let i=t.time||(t.time={}),s=this._adapter=new i_(t.adapters.date);s.init(e),Y(i.displayFormats,s.formats()),this._parseOpts={parser:i.parser,round:i.round,isoWeekday:i.isoWeekday},super.init(t),this._normalized=e.normalized}parse(t,e){return void 0===t?null:hz(this,t)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){let t=this.options,e=this._adapter,i=t.time.unit||"day",{min:s,max:h,minDefined:n,maxDefined:r}=this.getUserBounds();function l(t){n||isNaN(t.min)||(s=Math.min(s,t.min)),r||isNaN(t.max)||(h=Math.max(h,t.max))}n&&r||(l(this._getLabelBounds()),("ticks"!==t.bounds||"labels"!==t.ticks.source)&&l(this.getMinMax(!1))),s=A(s)&&!isNaN(s)?s:+e.startOf(Date.now(),i),h=A(h)&&!isNaN(h)?h:+e.endOf(Date.now(),i)+1,this.min=Math.min(s,h-1),this.max=Math.max(s+1,h)}_getLabelBounds(){let t=this.getLabelTimestamps(),e=1/0,i=-1/0;return t.length&&(e=t[0],i=t[t.length-1]),{min:e,max:i}}buildTicks(){let t=this.options,e=t.time,i=t.ticks,s="labels"===i.source?this.getLabelTimestamps():this._generate();"ticks"===t.bounds&&s.length&&(this.min=this._userMin||s[0],this.max=this._userMax||s[s.length-1]);let h=this.min,n=function(t,e,i){let s=0,h=t.length;for(;s<h&&t[s]<e;)s++;for(;h>s&&t[h-1]>i;)h--;return s>0||h<t.length?t.slice(s,h):t}(s,h,this.max);return this._unit=e.unit||(i.autoSkip?hO(e.minUnit,this.min,this.max,this._getLabelCapacity(h)):function(t,e,i,s,h){for(let n=hD.length-1;n>=hD.indexOf(i);n--){let i=hD[n];if(hL[i].common&&t._adapter.diff(h,s,i)>=e-1)return i}return hD[i?hD.indexOf(i):0]}(this,n.length,e.minUnit,this.min,this.max)),this._majorUnit=i.major.enabled&&"year"!==this._unit?function(t){for(let e=hD.indexOf(t)+1,i=hD.length;e<i;++e)if(hL[hD[e]].common)return hD[e]}(this._unit):void 0,this.initOffsets(s),t.reverse&&n.reverse(),hA(this,n,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(t=>+t.value))}initOffsets(t=[]){let e,i,s=0,h=0;this.options.offset&&t.length&&(e=this.getDecimalForValue(t[0]),s=1===t.length?1-e:(this.getDecimalForValue(t[1])-e)/2,i=this.getDecimalForValue(t[t.length-1]),h=1===t.length?i:(i-this.getDecimalForValue(t[t.length-2]))/2);let n=t.length<3?.5:.25;s=ty(s,0,n),h=ty(h,0,n),this._offsets={start:s,end:h,factor:1/(s+1+h)}}_generate(){let t,e,i=this._adapter,s=this.min,h=this.max,n=this.options,r=n.time,l=r.unit||hO(r.minUnit,s,h,this._getLabelCapacity(s)),a=N(n.ticks.stepSize,1),o="week"===l&&r.isoWeekday,u=td(o)||!0===o,c={},d=s;if(u&&(d=+i.startOf(d,"isoWeek",o)),d=+i.startOf(d,u?"day":l),i.diff(h,s,l)>1e5*a)throw Error(s+" and "+h+" are too far apart with stepSize of "+a+" "+l);let f="data"===n.ticks.source&&this.getDataTimestamps();for(t=d,e=0;t<h;t=+i.add(t,a,l),e++)hR(c,t,f);return(t===h||"ticks"===n.bounds||1===e)&&hR(c,t,f),Object.keys(c).sort(hT).map(t=>+t)}getLabelForValue(t){let e=this._adapter,i=this.options.time;return i.tooltipFormat?e.format(t,i.tooltipFormat):e.format(t,i.displayFormats.datetime)}format(t,e){let i=this.options.time.displayFormats,s=this._unit,h=e||i[s];return this._adapter.format(t,h)}_tickFormatFunction(t,e,i,s){let h=this.options,n=h.ticks.callback;if(n)return j(n,[t,e,i],this);let r=h.time.displayFormats,l=this._unit,a=this._majorUnit,o=l&&r[l],u=a&&r[a],c=i[e],d=a&&u&&c&&c.major;return this._adapter.format(t,s||(d?u:o))}generateTickLabels(t){let e,i,s;for(e=0,i=t.length;e<i;++e)(s=t[e]).label=this._tickFormatFunction(s.value,e,t)}getDecimalForValue(t){return null===t?NaN:(t-this.min)/(this.max-this.min)}getPixelForValue(t){let e=this._offsets,i=this.getDecimalForValue(t);return this.getPixelForDecimal((e.start+i)*e.factor)}getValueForPixel(t){let e=this._offsets,i=this.getDecimalForPixel(t)/e.factor-e.end;return this.min+i*(this.max-this.min)}_getLabelSize(t){let e=this.options.ticks,i=this.ctx.measureText(t).width,s=tg(this.isHorizontal()?e.maxRotation:e.minRotation),h=Math.cos(s),n=Math.sin(s),r=this._resolveTickFontOptions(0).size;return{w:i*h+r*n,h:i*n+r*h}}_getLabelCapacity(t){let e=this.options.time,i=e.displayFormats,s=i[e.unit]||i.millisecond,h=this._tickFormatFunction(t,0,hA(this,[t],this._majorUnit),s),n=this._getLabelSize(h),r=Math.floor(this.isHorizontal()?this.width/n.w:this.height/n.h)-1;return r>0?r:1}getDataTimestamps(){let t,e,i=this._cache.data||[];if(i.length)return i;let s=this.getMatchingVisibleMetas();if(this._normalized&&s.length)return this._cache.data=s[0].controller.getAllParsedValues(this);for(t=0,e=s.length;t<e;++t)i=i.concat(s[t].controller.getAllParsedValues(this));return this._cache.data=this.normalize(i)}getLabelTimestamps(){let t,e,i=this._cache.labels||[];if(i.length)return i;let s=this.getLabels();for(t=0,e=s.length;t<e;++t)i.push(hz(this,s[t]));return this._cache.labels=this._normalized?i:this.normalize(i)}normalize(t){return tE(t.sort(hT))}}function hN(t,e,i){let s,h,n,r,l=0,a=t.length-1;i?(e>=t[l].pos&&e<=t[a].pos&&({lo:l,hi:a}=tS(t,"pos",e)),{pos:s,time:n}=t[l],{pos:h,time:r}=t[a]):(e>=t[l].time&&e<=t[a].time&&({lo:l,hi:a}=tS(t,"time",e)),{time:s,pos:n}=t[l],{time:h,pos:r}=t[a]);let o=h-s;return o?n+(r-n)*(e-s)/o:n}class hB extends hF{static id="timeseries";static defaults=hF.defaults;constructor(t){super(t),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){let t=this._getTimestampsForTable(),e=this._table=this.buildLookupTable(t);this._minPos=hN(e,this.min),this._tableRange=hN(e,this.max)-this._minPos,super.initOffsets(t)}buildLookupTable(t){let e,i,s,{min:h,max:n}=this,r=[],l=[];for(e=0,i=t.length;e<i;++e)(s=t[e])>=h&&s<=n&&r.push(s);if(r.length<2)return[{time:h,pos:0},{time:n,pos:1}];for(e=0,i=r.length;e<i;++e)Math.round((r[e+1]+r[e-1])/2)!==(s=r[e])&&l.push({time:s,pos:e/(i-1)});return l}_generate(){let t=this.min,e=this.max,i=super.getDataTimestamps();return i.includes(t)&&i.length||i.splice(0,0,t),i.includes(e)&&1!==i.length||i.push(e),i.sort((t,e)=>t-e)}_getTimestampsForTable(){let t=this._cache.all||[];if(t.length)return t;let e=this.getDataTimestamps(),i=this.getLabelTimestamps();return t=e.length&&i.length?this.normalize(e.concat(i)):e.length?e:i,t=this._cache.all=t}getDecimalForValue(t){return(hN(this._table,t)-this._minPos)/this._tableRange}getValueForPixel(t){let e=this._offsets,i=this.getDecimalForPixel(t)/e.factor-e.end;return hN(this._table,i*this._tableRange+this._minPos,!0)}}let hj=[iv,sI,hg,Object.freeze({__proto__:null,CategoryScale:hm,LinearScale:hx,LogarithmicScale:hS,RadialLinearScale:hE,TimeScale:hF,TimeSeriesScale:hB})];t.s(["BarController",()=>io,"BarElement",()=>sj,"BubbleController",()=>iu,"CategoryScale",()=>hm,"Chart",()=>s_,"DoughnutController",()=>ic,"Filler",()=>s6,"Legend",()=>s7,"LineController",()=>id,"LineElement",()=>sT,"LinearScale",()=>hx,"PieController",()=>ip,"PointElement",()=>sO,"PolarAreaController",()=>ig,"RadarController",()=>im,"ScatterController",()=>ib,"Tooltip",()=>hf,"registerables",()=>hj],42051),s_.register(...hj),t.s([],73396)}]);
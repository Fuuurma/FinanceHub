(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,75064,e=>{"use strict";var s=e.i(29845),t=e.i(59199),a=e.i(94650),l=e.i(74741),n=e.i(61088),r=e.i(5198),i=e.i(46045),d=e.i(74601),c=e.i(95421),o=e.i(86800),x=e.i(39197),h=e.i(94688),u=e.i(51174),m=e.i(33850),j=e.i(70421),p=e.i(39043);function g(){let[e]=(0,t.useState)("default"),[g]=(0,t.useState)("My Portfolio"),[y,v]=(0,t.useState)([]),[f,N]=(0,t.useState)(!0),[C,b]=(0,t.useState)(""),[S,_]=(0,t.useState)(!1),[D,F]=(0,t.useState)("all"),[T,w]=(0,t.useState)(!1),[I,B]=(0,t.useState)({transaction_type:"buy",asset_id:"",quantity:"",price_per_share:"",fees:"0",date:new Date().toISOString().split("T")[0],notes:""});(0,t.useEffect)(()=>{L()},[e,D]);let L=async()=>{N(!0),b("");try{let s,t,l={};"all"!==D&&(l.transaction_type=D);let n=await (s=e,t=l,a.apiClient.get(`/portfolios/${s}/transactions`,{params:t}));v(n)}catch(e){b(e instanceof Error?e.message:"Failed to fetch transactions")}finally{N(!1)}},q=async s=>{s.preventDefault();try{let s,t;await (s=e,t={...I,quantity:I.quantity||void 0,fees:I.fees||void 0},a.apiClient.post(`/portfolios/${s}/transactions`,t)),_(!1),B({transaction_type:"buy",asset_id:"",quantity:"",price_per_share:"",fees:"0",date:new Date().toISOString().split("T")[0],notes:""}),L()}catch(e){b(e instanceof Error?e.message:"Failed to create transaction")}},$=async s=>{if(confirm("Are you sure you want to delete this transaction?"))try{let t,l;await (t=e,l=s,a.apiClient.delete(`/portfolios/${t}/transactions/${l}`)),L()}catch(e){b(e instanceof Error?e.message:"Failed to delete transaction")}},O=y.filter(e=>"buy"===e.transaction_type).reduce((e,s)=>e+parseFloat(s.total_amount),0),R=y.filter(e=>"sell"===e.transaction_type).reduce((e,s)=>e+parseFloat(s.total_amount),0),k=y.filter(e=>"dividend"===e.transaction_type).reduce((e,s)=>e+parseFloat(s.total_amount),0);return(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-3xl font-bold",children:g}),(0,s.jsx)("p",{className:"text-muted-foreground",children:"Transaction History"})]}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsxs)(n.Button,{variant:"outline",onClick:()=>w(!T),children:[(0,s.jsx)(m.Filter,{className:"w-4 h-4 mr-2"}),"Filter"]}),(0,s.jsxs)(n.Button,{variant:"outline",onClick:()=>{let e=new Blob([JSON.stringify(y,null,2)],{type:"application/json"}),s=URL.createObjectURL(e),t=document.createElement("a");t.href=s,t.download=`transactions-${g}-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(t),t.click(),document.body.removeChild(t),URL.revokeObjectURL(s)},children:[(0,s.jsx)(u.Download,{className:"w-4 h-4 mr-2"}),"Export"]}),(0,s.jsxs)(o.Dialog,{open:S,onOpenChange:_,children:[(0,s.jsx)(o.DialogTrigger,{asChild:!0,children:(0,s.jsxs)(n.Button,{children:[(0,s.jsx)(h.Plus,{className:"w-4 h-4 mr-2"}),"Record Transaction"]})}),(0,s.jsxs)(o.DialogContent,{children:[(0,s.jsxs)(o.DialogHeader,{children:[(0,s.jsx)(o.DialogTitle,{children:"Record Transaction"}),(0,s.jsx)(o.DialogDescription,{children:"Add a new transaction to your portfolio"})]}),(0,s.jsxs)("form",{onSubmit:q,className:"space-y-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(i.Label,{htmlFor:"type",children:"Transaction Type"}),(0,s.jsxs)(d.Select,{value:I.transaction_type,onValueChange:e=>B({...I,transaction_type:e}),children:[(0,s.jsx)(d.SelectTrigger,{children:(0,s.jsx)(d.SelectValue,{})}),(0,s.jsxs)(d.SelectContent,{children:[(0,s.jsx)(d.SelectItem,{value:"buy",children:"Buy"}),(0,s.jsx)(d.SelectItem,{value:"sell",children:"Sell"}),(0,s.jsx)(d.SelectItem,{value:"dividend",children:"Dividend"})]})]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(i.Label,{htmlFor:"assetId",children:"Asset ID"}),(0,s.jsx)(r.Input,{id:"assetId",value:I.asset_id,onChange:e=>B({...I,asset_id:e.target.value}),placeholder:"Enter asset UUID",required:!0})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(i.Label,{htmlFor:"quantity",children:"Quantity"}),(0,s.jsx)(r.Input,{id:"quantity",type:"number",step:"any",value:I.quantity,onChange:e=>B({...I,quantity:e.target.value}),placeholder:"0.00"})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(i.Label,{htmlFor:"price",children:"Price per Share"}),(0,s.jsx)(r.Input,{id:"price",type:"number",step:"any",value:I.price_per_share,onChange:e=>B({...I,price_per_share:e.target.value}),placeholder:"0.00",required:!0})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(i.Label,{htmlFor:"fees",children:"Fees"}),(0,s.jsx)(r.Input,{id:"fees",type:"number",step:"any",value:I.fees,onChange:e=>B({...I,fees:e.target.value}),placeholder:"0.00"})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(i.Label,{htmlFor:"date",children:"Date"}),(0,s.jsx)(r.Input,{id:"date",type:"date",value:I.date,onChange:e=>B({...I,date:e.target.value}),required:!0})]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(i.Label,{htmlFor:"notes",children:"Notes"}),(0,s.jsx)(r.Input,{id:"notes",value:I.notes,onChange:e=>B({...I,notes:e.target.value}),placeholder:"Optional notes"})]}),(0,s.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,s.jsx)(n.Button,{type:"button",variant:"outline",onClick:()=>_(!1),children:"Cancel"}),(0,s.jsx)(n.Button,{type:"submit",children:"Record"})]})]})]})]})]})]}),C&&(0,s.jsx)("div",{className:"bg-destructive/10 text-destructive p-4 rounded-lg",children:(0,s.jsx)("p",{children:C})}),T&&(0,s.jsx)(l.Card,{children:(0,s.jsx)(l.CardContent,{className:"pt-6",children:(0,s.jsx)("div",{className:"flex gap-4",children:(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(i.Label,{children:"Type Filter"}),(0,s.jsxs)(d.Select,{value:D,onValueChange:F,children:[(0,s.jsx)(d.SelectTrigger,{className:"w-40",children:(0,s.jsx)(d.SelectValue,{})}),(0,s.jsxs)(d.SelectContent,{children:[(0,s.jsx)(d.SelectItem,{value:"all",children:"All"}),(0,s.jsx)(d.SelectItem,{value:"buy",children:"Buy"}),(0,s.jsx)(d.SelectItem,{value:"sell",children:"Sell"}),(0,s.jsx)(d.SelectItem,{value:"dividend",children:"Dividend"})]})]})]})})})}),(0,s.jsxs)("div",{className:"grid gap-4 md:grid-cols-4",children:[(0,s.jsxs)(l.Card,{children:[(0,s.jsx)(l.CardHeader,{children:(0,s.jsx)(l.CardDescription,{children:"Total Buys"})}),(0,s.jsx)(l.CardContent,{children:(0,s.jsxs)("p",{className:"text-2xl font-bold text-green-600",children:["$",O.toLocaleString()]})})]}),(0,s.jsxs)(l.Card,{children:[(0,s.jsx)(l.CardHeader,{children:(0,s.jsx)(l.CardDescription,{children:"Total Sells"})}),(0,s.jsx)(l.CardContent,{children:(0,s.jsxs)("p",{className:"text-2xl font-bold text-red-600",children:["$",R.toLocaleString()]})})]}),(0,s.jsxs)(l.Card,{children:[(0,s.jsx)(l.CardHeader,{children:(0,s.jsx)(l.CardDescription,{children:"Dividends"})}),(0,s.jsx)(l.CardContent,{children:(0,s.jsxs)("p",{className:"text-2xl font-bold text-blue-600",children:["$",k.toLocaleString()]})})]}),(0,s.jsxs)(l.Card,{children:[(0,s.jsx)(l.CardHeader,{children:(0,s.jsx)(l.CardDescription,{children:"Total Transactions"})}),(0,s.jsx)(l.CardContent,{children:(0,s.jsx)("p",{className:"text-2xl font-bold",children:y.length})})]})]}),f?(0,s.jsx)("div",{className:"space-y-3",children:[1,2,3,4,5].map(e=>(0,s.jsx)(l.Card,{children:(0,s.jsx)(l.CardContent,{className:"pt-6",children:(0,s.jsx)(c.Skeleton,{className:"h-16 w-full"})})},e))}):0===y.length?(0,s.jsx)(l.Card,{children:(0,s.jsxs)(l.CardContent,{className:"py-12 text-center",children:[(0,s.jsx)(j.Calendar,{className:"w-12 h-12 mx-auto text-muted-foreground mb-4"}),(0,s.jsx)("p",{className:"text-muted-foreground mb-4",children:"No transactions found"}),(0,s.jsxs)(n.Button,{onClick:()=>_(!0),children:[(0,s.jsx)(h.Plus,{className:"w-4 h-4 mr-2"}),"Record Your First Transaction"]})]})}):(0,s.jsx)("div",{className:"space-y-3",children:y.map(e=>(0,s.jsx)(l.Card,{children:(0,s.jsx)(l.CardContent,{className:"p-6",children:(0,s.jsxs)("div",{className:"flex items-start justify-between",children:[(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(e=>{switch(e){case"buy":return(0,s.jsx)(x.Badge,{className:"bg-green-100 text-green-800",children:"Buy"});case"sell":return(0,s.jsx)(x.Badge,{className:"bg-red-100 text-red-800",children:"Sell"});case"dividend":return(0,s.jsx)(x.Badge,{className:"bg-blue-100 text-blue-800",children:"Dividend"});default:return(0,s.jsx)(x.Badge,{variant:"outline",children:e})}})(e.transaction_type),(0,s.jsx)("span",{className:"font-semibold",children:e.asset.ticker}),(0,s.jsx)("span",{className:"text-sm text-muted-foreground",children:e.asset.name})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"Date"}),(0,s.jsx)("p",{className:"font-medium",children:new Date(e.date).toLocaleDateString()})]}),e.quantity&&(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"Quantity"}),(0,s.jsx)("p",{className:"font-medium",children:parseFloat(e.quantity).toLocaleString()})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"Price"}),(0,s.jsxs)("p",{className:"font-medium",children:["$",parseFloat(e.price_per_share).toFixed(2)]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"Total"}),(0,s.jsxs)("p",{className:"font-semibold",children:["$",parseFloat(e.total_amount).toFixed(2)]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"Fees"}),(0,s.jsxs)("p",{className:"font-medium",children:["$",parseFloat(e.fees).toFixed(2)]})]})]}),e.notes&&(0,s.jsxs)("p",{className:"text-sm text-muted-foreground mt-2",children:["Note: ",e.notes]})]}),(0,s.jsx)(n.Button,{variant:"ghost",size:"icon",onClick:()=>$(e.id),children:(0,s.jsx)(p.Trash2,{className:"w-4 h-4 text-destructive"})})]})})},e.id))})]})}e.s(["default",()=>g],75064)}]);
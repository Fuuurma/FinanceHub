(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,39102,e=>{"use strict";var t=e.i(56922);e.s(["ChevronRight",()=>t.default])},53116,85447,e=>{"use strict";var t,s=e.i(29845),r=e.i(59199);e.i(73396);var l=e.i(42051);let a="label";function n(e,t){"function"==typeof e?e(t):e&&(e.current=t)}function d(e,t,s=a){let r=[];e.datasets=t.map(t=>{let l=e.datasets.find(e=>e[s]===t[s]);return!l||!t.data||r.includes(l)?{...t}:(r.push(l),Object.assign(l,t),l)})}let i=(0,r.forwardRef)(function(e,t){let{height:i=150,width:o=300,redraw:c=!1,datasetIdKey:u,type:x,data:m,options:h,plugins:f=[],fallbackContent:g,updateMode:b,...p}=e,j=(0,r.useRef)(null),v=(0,r.useRef)(null),N=()=>{j.current&&(v.current=new l.Chart(j.current,{type:x,data:function(e,t=a){let s={labels:[],datasets:[]};return s.labels=e.labels,d(s,e.datasets,t),s}(m,u),options:h&&{...h},plugins:f}),n(t,v.current))},y=()=>{n(t,null),v.current&&(v.current.destroy(),v.current=null)};return(0,r.useEffect)(()=>{var e;let t;!c&&v.current&&h&&(e=v.current,(t=e.options)&&h&&Object.assign(t,h))},[c,h]),(0,r.useEffect)(()=>{!c&&v.current&&(v.current.config.data.labels=m.labels)},[c,m.labels]),(0,r.useEffect)(()=>{!c&&v.current&&m.datasets&&d(v.current.config.data,m.datasets,u)},[c,m.datasets]),(0,r.useEffect)(()=>{v.current&&(c?(y(),setTimeout(N)):v.current.update(b))},[c,h,m.labels,m.datasets,b]),(0,r.useEffect)(()=>{v.current&&(y(),setTimeout(N))},[x]),(0,r.useEffect)(()=>(N(),()=>y()),[]),(0,s.jsx)("canvas",{ref:j,role:"img",height:i,width:o,...p,children:g})});l.LineController;let o=(t=l.BarController,l.Chart.register(t),(0,r.forwardRef)((e,t)=>(0,s.jsx)(i,{...e,ref:t,type:"bar"})));l.RadarController,l.DoughnutController,l.PolarAreaController,l.BubbleController,l.PieController,l.ScatterController;var c=e.i(74601),u=e.i(60983),x=e.i(60021),m=e.i(96513);function h({symbol:e,depth:t=m.ORDERBOOK_CONFIG.DEFAULT_DEPTH}){let{orderBooks:l,subscribeSingle:a,unsubscribeSingle:n}=(0,x.useRealtimeStore)(),[d,i]=(0,r.useState)(t),[h,f]=(0,r.useState)(null);(0,r.useEffect)(()=>(a(e,["orderbook"]),()=>{n(e,["orderbook"])}),[e,a,n]);let g=l[e];if((0,r.useEffect)(()=>{f(null);let e=setTimeout(()=>{f(null)},m.ORDERBOOK_CONFIG.UPDATE_DEBOUNCE_MS);return f(e),()=>{e&&clearTimeout(e)}},[g]),!g||0===g.levels.length)return(0,s.jsx)("div",{className:"flex items-center justify-center h-96 border rounded-lg bg-background",children:(0,s.jsx)("p",{className:"text-muted-foreground",children:"No order book data available"})});let b=g.levels.slice(0,d),p=g.midPrice||g.levels.reduce((e,t)=>e+t.price,0)/g.levels.length,j=b.filter(e=>e.price<p).reverse(),v=b.filter(e=>e.price>p),N=j.map(e=>e.price),y=j.map(e=>e.volume),S=v.map(e=>e.price),C=v.map(e=>e.volume),T={labels:[...N.reverse(),...S],datasets:[{label:"Bids",data:[...y.reverse()],backgroundColor:"rgba(34, 197, 94, 0.8)",borderColor:"rgb(34, 197, 94)",borderWidth:1,borderRadius:4},{label:"Asks",data:C,backgroundColor:"rgba(239, 68, 68, 0.8)",borderColor:"rgb(239, 68, 68)",borderWidth:1,borderRadius:4}]},w=Math.max(...j.map(e=>e.volume),...v.map(e=>e.volume));return(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("h3",{className:"text-lg font-semibold",children:["Order Book - ",e]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("span",{className:"text-sm text-muted-foreground",children:"Depth:"}),(0,s.jsxs)(c.Select,{value:String(d),onValueChange:e=>{i(e)},children:[(0,s.jsx)(c.SelectTrigger,{className:"w-24",children:(0,s.jsx)(c.SelectValue,{})}),(0,s.jsx)(c.SelectContent,{children:m.ORDERBOOK_CONFIG.DEPTH_OPTIONS.map(e=>(0,s.jsx)(c.SelectItem,{value:String(e),children:e},e))})]})]})]}),(0,s.jsxs)(u.Tabs,{defaultValue:"depth",className:"w-full",children:[(0,s.jsxs)(u.TabsList,{className:"grid w-full grid-cols-2",children:[(0,s.jsx)(u.TabsTrigger,{value:"depth",children:"Depth Chart"}),(0,s.jsx)(u.TabsTrigger,{value:"ladder",children:"Bid/Ask Ladder"})]}),(0,s.jsx)(u.TabsContent,{value:"depth",children:(0,s.jsx)("div",{className:"h-96",children:(0,s.jsx)(o,{data:T,options:{indexAxis:"y",responsive:!0,maintainAspectRatio:!1,interaction:{mode:"index",intersect:!1},plugins:{legend:{position:"top"},tooltip:{backgroundColor:"rgba(0, 0, 0, 0.8)",titleColor:"white",bodyColor:"white",borderColor:"rgba(255, 255, 255, 0.1)",borderWidth:1,padding:12,cornerRadius:8,callbacks:{label:e=>{let t=e.dataset,s=e.label,r=e.parsed.x;return`${t.label}: ${r?.toLocaleString()} @ $${s?.toFixed(2)}`}}}},scales:{x:{stacked:!0,grid:{color:"rgba(148, 163, 184, 0.1)"},ticks:{color:"rgba(148, 163, 184, 0.5)",callback:e=>e?.toLocaleString()}},y:{grid:{color:"rgba(148, 163, 184, 0.1)"},ticks:{color:"rgba(148, 163, 184, 0.5)",callback:e=>`$${e?.toFixed(2)}`}}}}})})}),(0,s.jsxs)(u.TabsContent,{value:"ladder",className:"h-96 overflow-auto",children:[(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsx)("div",{className:"text-xs font-semibold text-center text-green-600 p-2 border-b",children:"BIDS"}),j.map((e,t)=>(0,s.jsxs)("div",{className:"flex items-center justify-between p-2 hover:bg-muted/50",children:[(0,s.jsxs)("span",{className:"text-sm font-mono text-green-600",children:["$",e.price.toFixed(2)]}),(0,s.jsxs)("div",{className:"flex items-center gap-2 flex-1 justify-end",children:[(0,s.jsx)("div",{className:"h-4 bg-green-600/20 rounded",style:{width:`${e.volume/w*100}%`}}),(0,s.jsx)("span",{className:"text-sm font-mono",children:e.volume.toLocaleString()})]})]},`bid-${t}`))]}),(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsx)("div",{className:"text-xs font-semibold text-center text-red-600 p-2 border-b",children:"ASKS"}),v.map((e,t)=>(0,s.jsxs)("div",{className:"flex items-center justify-between p-2 hover:bg-muted/50",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 flex-1",children:[(0,s.jsx)("div",{className:"h-4 bg-red-600/20 rounded",style:{width:`${e.volume/w*100}%`}}),(0,s.jsx)("span",{className:"text-sm font-mono",children:e.volume.toLocaleString()})]}),(0,s.jsxs)("span",{className:"text-sm font-mono text-red-600",children:["$",e.price.toFixed(2)]})]},`ask-${t}`))]})]}),p&&(0,s.jsx)("div",{className:"absolute bottom-4 left-1/2 -translate-x-1/2 bg-background border-2 border-primary px-4 py-2 rounded-lg shadow-lg",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"text-xs text-muted-foreground",children:"Mid Price"}),(0,s.jsxs)("div",{className:"text-lg font-bold font-mono",children:["$",p.toFixed(2)]}),(0,s.jsxs)("div",{className:"text-xs text-muted-foreground",children:["Spread: $",g.spread.toFixed(2)]})]})})]})]})]})}l.Chart.register(l.BarElement,l.CategoryScale,l.LinearScale,l.Tooltip,l.Legend),e.s(["OrderBook",()=>h],53116);var f=e.i(62687),g=e.i(9e4),b=e.i(61088);function p({symbol:e,limit:t=m.WS_CONFIG.TRADE_FEED_LIMIT}){let{trades:l,subscribeSingle:a,unsubscribeSingle:n}=(0,x.useRealtimeStore)(),[d,i]=(0,r.useState)("all"),[o,c]=(0,r.useState)(!0),u=(0,r.useRef)(null),[h,p]=(0,r.useState)(new Set);(0,r.useEffect)(()=>(a(e,["trades"]),()=>{n(e,["trades"])}),[e,a,n]);let j=(l[e]||[]).slice(0,t);(0,r.useEffect)(()=>{let e=setTimeout(()=>{p(new Set)},500);return()=>clearTimeout(e)},[j]),(0,r.useEffect)(()=>{o&&u.current&&j.length>0&&(u.current.scrollTop=0)},[j,o]);let v=j.filter(e=>"all"===d||("buys"===d?e.isBuy:"sells"!==d||!e.isBuy));return 0===j.length?(0,s.jsxs)("div",{className:"flex flex-col h-96 border rounded-lg bg-background",children:[(0,s.jsx)("div",{className:"p-4 border-b",children:(0,s.jsxs)("h3",{className:"text-lg font-semibold",children:["Trade Feed - ",e]})}),(0,s.jsx)("div",{className:"flex-1 flex items-center justify-center",children:(0,s.jsx)("p",{className:"text-muted-foreground",children:"No trades available"})})]}):(0,s.jsxs)("div",{className:"flex flex-col h-96 border rounded-lg bg-background",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between p-4 border-b",children:[(0,s.jsxs)("h3",{className:"text-lg font-semibold",children:["Trade Feed - ",e]}),(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("span",{className:"text-sm text-muted-foreground",children:"Filter:"}),(0,s.jsx)("div",{className:"flex",children:[{value:"all",label:"All"},{value:"buys",label:"Buys"},{value:"sells",label:"Sells"}].map(e=>(0,s.jsx)(b.Button,{size:"sm",variant:d===e.value?"default":"outline",onClick:()=>i(e.value),className:"rounded-none rounded-l-none first:rounded-l-l first:rounded-r-none last:rounded-r-l last:rounded-r-none",children:e.label},e.value))})]}),(0,s.jsx)(b.Button,{size:"sm",variant:"outline",onClick:()=>c(!o),className:"text-xs",children:o?"Auto-scroll: On":"Auto-scroll: Off"})]})]}),(0,s.jsx)("div",{className:"flex-1 overflow-auto",ref:u,children:(0,s.jsxs)("table",{className:"w-full",children:[(0,s.jsx)("thead",{className:"sticky top-0 bg-background",children:(0,s.jsxs)("tr",{className:"text-xs text-muted-foreground",children:[(0,s.jsx)("th",{className:"p-3 text-left",children:"Time"}),(0,s.jsx)("th",{className:"p-3 text-right",children:"Price"}),(0,s.jsx)("th",{className:"p-3 text-right",children:"Size"}),(0,s.jsx)("th",{className:"p-3 text-left",children:"Type"}),(0,s.jsx)("th",{className:"p-3 text-left",children:"Exchange"})]})}),(0,s.jsx)("tbody",{children:v.map((e,t)=>{let r;return(0,s.jsxs)("tr",{className:`
                  border-b hover:bg-muted/50 transition-colors
                  ${h.has(parseInt(e.tradeId))?"bg-muted/30":""}
                `,children:[(0,s.jsx)("td",{className:"p-3 text-sm font-mono text-muted-foreground",children:new Date(e.timestamp).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1})}),(0,s.jsx)("td",{className:"p-3 text-sm font-mono text-right",children:(r=e.price,`$${r.toFixed(2)}`)}),(0,s.jsx)("td",{className:"p-3 text-sm font-mono text-right",children:(0,s.jsxs)("div",{className:"flex items-center justify-end gap-2",children:[(0,s.jsx)("div",{className:"h-1 bg-foreground/30 rounded",style:{width:`${e.quantity/Math.max(...j.map(e=>e.quantity))*100}px`}}),(0,s.jsx)("span",{children:e.quantity.toLocaleString()})]})}),(0,s.jsx)("td",{className:"p-3",children:(0,s.jsxs)("div",{className:`
                    inline-flex items-center gap-1 px-2 py-1 rounded text-xs font-semibold
                    ${e.isBuy?"bg-green-500/10 text-green-600":"bg-red-500/10 text-red-600"}
                  `,children:[e.isBuy?(0,s.jsx)(f.ArrowUp,{className:"h-3 w-3"}):(0,s.jsx)(g.ArrowDown,{className:"h-3 w-3"}),(0,s.jsx)("span",{children:e.tradeType})]})}),(0,s.jsx)("td",{className:"p-3 text-sm text-muted-foreground",children:e.exchange})]},e.tradeId)})})]})}),(0,s.jsx)("div",{className:"p-2 border-t bg-muted/20",children:(0,s.jsxs)("p",{className:"text-xs text-muted-foreground text-center",children:["Showing ",v.length," of ",j.length," trades","all"!==d&&` (${d})`]})})]})}e.s(["TradeFeed",()=>p],85447)}]);